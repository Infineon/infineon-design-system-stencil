{"file":"ifx-modal.js","mappings":"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","names":["IfxModal"],"sources":["src/global/utils/focus-trap.ts","src/global/utils/animation.ts","src/components/modal/modal.scss?tag=ifx-modal&encapsulation=shadow","src/components/modal/modal.tsx"],"sourcesContent":["/**\r\n * Copy/pasted from https://github.com/andreasbm/focus-trap\r\n */\r\n\r\n/**\r\n * Traverses the slots of the open shadowroots and returns all children matching the query.\r\n * We need to traverse each child-depth one at a time because if an element should be skipped\r\n * (for example because it is hidden) we need to skip all of it's children. If we use querySelectorAll(\"*\")\r\n * the information of whether the children is within a hidden parent is lost.\r\n * @param {ShadowRoot | HTMLElement} root\r\n * @param skipNode\r\n * @param isMatch\r\n * @param {number} maxDepth\r\n * @param {number} depth\r\n * @returns {HTMLElement[]}\r\n */\r\nexport function queryShadowRoot(\r\n  root: ShadowRoot | HTMLElement,\r\n  skipNode: ($elem: HTMLElement) => boolean,\r\n  isMatch: ($elem: HTMLElement) => boolean,\r\n  maxDepth: number = 20,\r\n  depth: number = 0\r\n): HTMLElement[] {\r\n  const matches: HTMLElement[] = [];\r\n\r\n  // If the depth is above the max depth, abort the searching here.\r\n  if (depth >= maxDepth) {\r\n    return matches;\r\n  }\r\n\r\n  // Traverses a slot element\r\n  const traverseSlot = ($slot: HTMLSlotElement) => {\r\n    // Only check nodes that are of the type Node.ELEMENT_NODE\r\n    // Read more here https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType\r\n    const assignedNodes = $slot\r\n      .assignedNodes()\r\n      .filter((node) => node.nodeType === 1);\r\n    if (assignedNodes.length > 0) {\r\n      const $slotParent = assignedNodes[0].parentElement!;\r\n      return queryShadowRoot(\r\n        $slotParent,\r\n        skipNode,\r\n        isMatch,\r\n        maxDepth,\r\n        depth + 1\r\n      );\r\n    }\r\n\r\n    return [];\r\n  };\r\n\r\n  // Go through each child and continue the traversing if necessary\r\n  // Even though the typing says that children can't be undefined, Edge 15 sometimes gives an undefined value.\r\n  // Therefore we fallback to an empty array if it is undefined.\r\n  const children = Array.from(root.children || []) as HTMLElement[];\r\n  for (const $child of children) {\r\n    // Check if the element and its descendants should be skipped\r\n    if (skipNode($child)) {\r\n      // console.log('-- SKIP', $child);\r\n      continue;\r\n    }\r\n\r\n    // console.log('$child', $child);\r\n\r\n    // If the element matches we always add it\r\n    if (isMatch($child)) {\r\n      matches.push($child);\r\n    }\r\n\r\n    if ($child.shadowRoot != null) {\r\n      // If the element has a shadow root we need to traverse it\r\n      matches.push(\r\n        ...queryShadowRoot(\r\n          $child.shadowRoot,\r\n          skipNode,\r\n          isMatch,\r\n          maxDepth,\r\n          depth + 1\r\n        )\r\n      );\r\n    } else if ($child.tagName === 'SLOT') {\r\n      // If the child is a slot we need to traverse each assigned node\r\n      matches.push(...traverseSlot($child as HTMLSlotElement));\r\n    } else {\r\n      // Traverse the children of the element\r\n      matches.push(\r\n        ...queryShadowRoot($child, skipNode, isMatch, maxDepth, depth + 1)\r\n      );\r\n    }\r\n  }\r\n\r\n  return matches;\r\n}\r\n\r\n/**\r\n * Returns whether the element is hidden.\r\n * @param $elem\r\n */\r\nexport function isHidden($elem: HTMLElement): boolean {\r\n  return (\r\n    $elem.hasAttribute('hidden') ||\r\n    ($elem.hasAttribute('aria-hidden') &&\r\n      $elem.getAttribute('aria-hidden') !== 'false') ||\r\n    // A quick and dirty way to check whether the element is hidden.\r\n    // For a more fine-grained check we could use \"window.getComputedStyle\" but we don't because of bad performance.\r\n    // If the element has visibility set to \"hidden\" or \"collapse\", display set to \"none\" or opacity set to \"0\" through CSS\r\n    // we won't be able to catch it here. We accept it due to the huge performance benefits.\r\n    $elem.style.display === `none` ||\r\n    $elem.style.opacity === `0` ||\r\n    $elem.style.visibility === `hidden` ||\r\n    $elem.style.visibility === `collapse`\r\n  );\r\n\r\n  // If offsetParent is null we can assume that the element is hidden\r\n  // https://stackoverflow.com/questions/306305/what-would-make-offsetparent-null\r\n  // || $elem.offsetParent == null;\r\n}\r\n\r\n/**\r\n * Returns whether the element is disabled.\r\n * @param $elem\r\n */\r\nexport function isDisabled($elem: HTMLElement): boolean {\r\n  return (\r\n    $elem.hasAttribute('disabled') ||\r\n    ($elem.hasAttribute('aria-disabled') &&\r\n      $elem.getAttribute('aria-disabled') !== 'false')\r\n  );\r\n}\r\n\r\n/**\r\n * Determines whether an element is focusable.\r\n * Read more here: https://stackoverflow.com/questions/1599660/which-html-elements-can-receive-focus/1600194#1600194\r\n * Or here: https://stackoverflow.com/questions/18261595/how-to-check-if-a-dom-element-is-focusable\r\n * @param $elem\r\n */\r\nexport function isFocusable($elem: HTMLElement): boolean {\r\n  // Discard elements that are removed from the tab order.\r\n  if (\r\n    $elem.getAttribute('tabindex') === '-1' ||\r\n    isHidden($elem) ||\r\n    isDisabled($elem)\r\n  ) {\r\n    return false;\r\n  }\r\n\r\n  return (\r\n    // At this point we know that the element can have focus (eg. won't be -1) if the tabindex attribute exists\r\n    $elem.hasAttribute('tabindex') ||\r\n    // Anchor tags or area tags with a href set\r\n    (($elem instanceof HTMLAnchorElement || $elem instanceof HTMLAreaElement) &&\r\n      $elem.hasAttribute('href')) ||\r\n    // Form elements which are not disabled\r\n    $elem instanceof HTMLButtonElement ||\r\n    $elem instanceof HTMLInputElement ||\r\n    $elem instanceof HTMLTextAreaElement ||\r\n    $elem instanceof HTMLSelectElement ||\r\n    // IFrames\r\n    $elem instanceof HTMLIFrameElement\r\n  );\r\n}","export function animationTo(\r\n  element: HTMLElement,\r\n  keyframes: Keyframe | Keyframe[],\r\n  options?: KeyframeAnimationOptions\r\n) {\r\n  const animated = element.animate(keyframes, { ...options, fill: 'both' });\r\n  animated.addEventListener('finish', () => {\r\n    // @ts-ignore\r\n    animated.commitStyles();\r\n    animated.cancel();\r\n  });\r\n\r\n  return animated;\r\n}\r\n\r\nconst keyframeDefaults = {\r\n  easing: 'cubic-bezier(0.390, 0.575, 0.565, 1.000)',\r\n};\r\n\r\nexport const KEYFRAMES = {\r\n  fadeIn: [\r\n    {\r\n      offset: 0,\r\n      ...keyframeDefaults,\r\n      opacity: 0,\r\n    },\r\n    {\r\n      offset: 1,\r\n      ...keyframeDefaults,\r\n      opacity: 1,\r\n    },\r\n  ],\r\n  fadeOut: [\r\n    {\r\n      offset: 0,\r\n      ...keyframeDefaults,\r\n      opacity: 1,\r\n    },\r\n    {\r\n      offset: 1,\r\n      ...keyframeDefaults,\r\n      opacity: 0,\r\n    },\r\n  ],\r\n};","@use \"~@infineon/design-system-tokens/dist/tokens\";\r\n@use \"../../global/font.scss\";\r\n\r\n:host {\r\n  display: block;\r\n}\r\n\r\n.modal-container {\r\n  display: none;\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  z-index: 1000;\r\n}\r\n\r\n.modal-container.open {\r\n  display: block;\r\n}\r\n\r\n.modal-overlay {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: tokens.$ifxColorBaseBlack;\r\n  opacity: 0.5;\r\n  z-index: 0;\r\n}\r\n\r\n.modal-content-container {\r\n  position: absolute;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  width: 90%;\r\n  height: 218px;\r\n  background-color: #fff;\r\n  border-radius: tokens.$ifxBorderRadiusNone;\r\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\r\n  overflow: hidden;\r\n  box-sizing: border-box;\r\n  font-family: tokens.$ifxFontFamilyBody;\r\n\r\n}\r\n\r\n/* Add desktop size here */\r\n@media screen and (min-width: 768px) {\r\n  .modal-content-container {\r\n    width: 540px;\r\n    height: 220px;\r\n  }\r\n}\r\n\r\n.modal-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.modal-icon-container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 32px;\r\n  background-color: tokens.$ifxColorOcean500;\r\n  height: 100%;\r\n\r\n  &.danger {\r\n    background-color: tokens.$ifxColorRed500;\r\n  }\r\n\r\n  & ifx-icon {\r\n    color: tokens.$ifxColorBaseWhite;\r\n  }\r\n}\r\n\r\n.modal-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 24px;\r\n  height: 76px;\r\n  box-sizing: border-box;\r\n  border-radius: 1px 1px 0px 0px;\r\n  border-bottom: 1px solid tokens.$ifxColorEngineering200;\r\n\r\n}\r\n\r\n.modal-header h2 {\r\n  margin: 0;\r\n  font-weight: tokens.$ifxFontWeightSemibold;\r\n  font-size: tokens.$ifxFontSizeXl;\r\n  line-height: 28px;\r\n}\r\n\r\n.modal-header button {\r\n  background: none;\r\n  border: none;\r\n  font-size: 1.5em;\r\n  padding: 0;\r\n  cursor: pointer;\r\n}\r\n\r\n.modal-body {\r\n  padding: 16px 24px;\r\n  height: 56px;\r\n  box-sizing: border-box;\r\n  flex: 1;\r\n\r\n  & slot[name=content] {\r\n    display: -webkit-box;\r\n    -webkit-line-clamp: 1;\r\n    -webkit-box-orient: vertical;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n  }\r\n}\r\n\r\n.modal-footer {\r\n  display: flex;\r\n  //justify-content: flex-end;\r\n  align-items: center;\r\n  padding-top: 16px;\r\n  padding-bottom: 32px;\r\n  padding-right: 24px;\r\n  gap: 1em;\r\n  height: 88px;\r\n  box-sizing: border-box;\r\n\r\n  margin-left: auto;\r\n}\r\n\r\n.modal-footer ::slotted(*) {\r\n  display: flex;\r\n  //justify-content: space-between;\r\n  gap: 24px;\r\n}\r\n\r\n\r\n.modal-border {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 100%;\r\n  font-size: 1.5em;\r\n  flex-grow: 1;\r\n\r\n  &.primary {\r\n    background-color: tokens.$ifxColorOcean500;\r\n  }\r\n\r\n  &.secondary {\r\n    background-color: tokens.$ifxColorEngineering500;\r\n  }\r\n\r\n  &.danger {\r\n    background-color: tokens.$ifxColorRed500;\r\n  }\r\n\r\n  &.success {\r\n    background-color: tokens.$ifxColorGreen500;\r\n  }\r\n\r\n  &.warning {\r\n    background-color: tokens.$ifxColorOrange500;\r\n  }\r\n\r\n  &.orange {\r\n    background-color: tokens.$ifxColorOrange500;\r\n  }\r\n\r\n  &.ocean {\r\n    background-color: tokens.$ifxColorOcean500;\r\n  }\r\n\r\n  &.grey {\r\n    background-color: tokens.$ifxColorEngineering500;\r\n  }\r\n\r\n  &.grey-200 {\r\n    background-color: tokens.$ifxColorEngineering200;\r\n  }\r\n\r\n  &.red {\r\n    background-color: tokens.$ifxColorRed500;\r\n  }\r\n\r\n  &.green {\r\n    background-color: tokens.$ifxColorGreen500;\r\n  }\r\n\r\n  &.berry {\r\n    background-color: tokens.$ifxColorBerry500;\r\n  }\r\n}","import { Component, Prop, Element, State, Event, Host, EventEmitter, h, Watch } from '@stencil/core';\r\nimport { queryShadowRoot, isHidden, isFocusable } from '../../global/utils/focus-trap';\r\nimport { animationTo, KEYFRAMES } from '../../global/utils/animation';\r\n\r\ntype CloseEventTrigger = 'CLOSE_BUTTON' | 'ESCAPE_KEY' | 'BACKDROP';\r\n\r\nexport interface BeforeCloseEventDetail {\r\n  trigger: CloseEventTrigger;\r\n}\r\n@Component({\r\n  tag: 'ifx-modal',\r\n  styleUrl: 'modal.scss',\r\n  shadow: true\r\n})\r\nexport class IfxModal {\r\n  @Prop({ reflect: true, mutable: true }) opened?: boolean = false;\r\n  @State() showModal: boolean = this.opened || false;\r\n\r\n  @Prop() caption: string = 'Modal Title';\r\n  @Prop() closeOnOverlayClick: boolean = true;\r\n\r\n  @Event() ifxModalOpen: EventEmitter;\r\n  @Event() ifxModalClose: EventEmitter;\r\n\r\n  @Prop() variant: 'default' | 'alert-brand' | 'alert-danger' = 'default';\r\n\r\n  @Prop() alertIcon: string = '';\r\n  @Prop() okButtonLabel: string = 'OK';\r\n  @Prop() cancelButtonLabel: string = 'Cancel';\r\n  @Element() hostElement: HTMLElement;\r\n\r\n  private modalContainer: HTMLElement;\r\n  private focusableElements: HTMLElement[] = [];\r\n  private closeButton: HTMLButtonElement | HTMLIfxIconButtonElement;\r\n\r\n  componentDidLoad() {\r\n    // Query all focusable elements and store them in `focusableElements`.\r\n    // Needed for the \"focus trap\" functionality.\r\n    this.focusableElements = queryShadowRoot(\r\n      this.hostElement.shadowRoot,\r\n      (el) => isHidden(el) || el.matches('[data-focus-trap-edge]'),\r\n      isFocusable\r\n    );\r\n  }\r\n\r\n  getFirstFocusableElement(): HTMLElement | null {\r\n    return this.focusableElements[0];\r\n  }\r\n\r\n  getLastFocusableElement(): HTMLElement | null {\r\n    return this.focusableElements[this.focusableElements.length - 1];\r\n  }\r\n\r\n  handleTopFocus = () => {\r\n    this.attemptFocus(this.getLastFocusableElement());\r\n  };\r\n\r\n  handleBottomFocus = () => {\r\n    this.attemptFocus(this.getFirstFocusableElement());\r\n  };\r\n\r\n\r\n  attemptFocus(element: HTMLElement | null) {\r\n    if (element == null) {\r\n      setTimeout(() => { //wait until DOM is fully loaded\r\n        this.closeButton.focus();\r\n      },);\r\n      return;\r\n    }\r\n\r\n    setTimeout(() => { //wait until DOM is fully loaded\r\n      element.focus();\r\n    }, 0);\r\n  }\r\n\r\n\r\n  open() {\r\n    this.showModal = true;\r\n    console.log(\"attempt focus\")\r\n    try {\r\n      const anim = animationTo(this.modalContainer, KEYFRAMES.fadeIn, {\r\n        duration: 200,\r\n      });\r\n      anim.addEventListener('finish', () => {\r\n        this.attemptFocus(this.getFirstFocusableElement());\r\n        this.ifxModalOpen.emit();\r\n      });\r\n      // this.attemptFocus(this.getFirstFocusableElement());\r\n      // this.ifxModalOpen.emit();\r\n\r\n      this.hostElement.addEventListener('keydown', this.handleKeypress);\r\n    } catch (err) {\r\n      this.ifxModalOpen.emit();\r\n\r\n    }\r\n\r\n\r\n  }\r\n\r\n  close() {\r\n    try {\r\n      const anim = animationTo(this.modalContainer, KEYFRAMES.fadeOut, {\r\n        duration: 200,\r\n      });\r\n      anim.addEventListener('finish', () => {\r\n        this.showModal = false;\r\n        this.ifxModalClose.emit();\r\n      });\r\n      this.hostElement.removeEventListener('keydown', this.handleKeypress);\r\n    } catch (err) {\r\n      this.showModal = false;\r\n      this.ifxModalClose.emit();\r\n    }\r\n  }\r\n\r\n  handleKeypress = (event: KeyboardEvent) => {\r\n    if (!this.showModal) {\r\n      return;\r\n    }\r\n    if (event.key === 'Escape') {\r\n      this.doBeforeClose('ESCAPE_KEY');\r\n    }\r\n  };\r\n\r\n\r\n  doBeforeClose(trigger: CloseEventTrigger) {\r\n    const triggers = [];\r\n    triggers.push(trigger);\r\n    const prevented = triggers.some((event) => event.defaultPrevented);\r\n    if (!prevented) {\r\n      this.opened = false;\r\n    }\r\n  }\r\n\r\n\r\n\r\n  @Watch('opened')\r\n  openedChanged(newValue) {\r\n    if (newValue === true) {\r\n      this.open();\r\n    } else {\r\n      this.close()\r\n    }\r\n  }\r\n\r\n\r\n  handleOverlayClick() {\r\n    if (this.closeOnOverlayClick) {\r\n      this.doBeforeClose('BACKDROP')\r\n    }\r\n  }\r\n\r\n\r\n\r\n  render() {\r\n    const isAlertVariant = this.variant !== 'default';\r\n    return (\r\n      <Host>\r\n        <div\r\n          ref={(el) => (this.modalContainer = el)}\r\n          class={`modal-container ${this.showModal ? 'open' : ''}`}\r\n        >\r\n          <div\r\n            class=\"modal-overlay\"\r\n            onClick={() => this.handleOverlayClick()}\r\n          ></div>\r\n          <div\r\n            data-focus-trap-edge\r\n            onFocus={this.handleTopFocus}\r\n            tabindex=\"0\"\r\n          ></div>\r\n          <div\r\n            class={`modal-content-container`}\r\n            role=\"dialog\"\r\n            aria-modal=\"true\"\r\n            aria-label={this.caption}>\r\n            {isAlertVariant ? (\r\n              <div class={`modal-icon-container ${this.variant === 'alert-brand' ? '' : 'danger'}`}>\r\n                {this.alertIcon ? <ifx-icon icon={this.alertIcon} /> : null}\r\n              </div>\r\n            ) : null}\r\n            <div class=\"modal-content\">\r\n              <div class=\"modal-header\">\r\n                <h2>{this.caption}</h2>\r\n                <ifx-icon-button ref={(el) => (this.closeButton = el)} icon=\"cross-24\" variant=\"tertiary\" onClick={() => this.doBeforeClose('CLOSE_BUTTON')}\r\n                ></ifx-icon-button>\r\n              </div>\r\n              <div class=\"modal-body\">\r\n                <slot name=\"content\" /*onSlotchange={() => console.log('slots children modified')}*/ />\r\n              </div>\r\n              <div class=\"modal-footer\">\r\n                <slot name=\"buttons\">\r\n                  <ifx-button aria-label={this.okButtonLabel}>{this.okButtonLabel}</ifx-button>\r\n                  <ifx-button variant='secondary' aria-label={this.cancelButtonLabel}>{this.cancelButtonLabel}</ifx-button>\r\n                </slot>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div\r\n            data-focus-trap-edge\r\n            onFocus={this.handleBottomFocus}\r\n            tabindex=\"0\"\r\n          ></div>\r\n        </div>\r\n      </Host>\r\n\r\n    );\r\n  }\r\n}"],"version":3}