import{b as f,d as n,f as p,g as h,i as m}from"./chunk-QHFETPNX.js";import{g as d}from"./chunk-2R6CW7ES.js";var b='.tree-item{position:relative;cursor:pointer;list-style:none}.tree-item.tree-item--expanded{position:relative}.tree-item.tree-item--has-children{position:relative}.tree-item.tree-item--has-children .tree-item__header>.tree-item__chevron-container{display:flex}.tree-item.tree-item--has-children.tree-item--expanded .tree-item__header>.tree-item__chevron-container::after{display:block}.tree-item--disabled{cursor:not-allowed;pointer-events:none;color:#BFBBBB}.tree-item__content{display:flex;flex-direction:row}.tree-item__content:hover .tree-item__checkbox-container,.tree-item__content:hover .tree-item__header{background-color:#F7F7F7}.tree-item__checkbox-container{position:sticky;left:0;z-index:10;padding:4px;background-color:#FFFFFF}.tree-item__header{flex-grow:1;display:flex;align-items:center;white-space:nowrap;height:20px;padding-top:4px;padding-right:16px;padding-bottom:4px;padding-left:8px}.tree-item__chevron-container{display:none;align-items:center;margin-right:8px;height:20px}.tree-item__chevron-container::after{--height-line-start:28px;display:none;content:"";position:absolute;z-index:1;top:var(--height-line-start);left:auto;margin-left:8px;width:1px;height:calc(100% - var(--height-line-start));background-color:#EEEDED}.tree-item--disabled .tree-item__chevron-container::after{color:#EEEDED}.tree-item__chevron.chevron-down{transform:rotate(90deg)}.tree-item__chevron.chevron-right{transform:rotate(0)}.tree-item__label-icon-container{display:flex;align-items:center}.tree-item__label-icon-container:focus{outline:none}.tree-item__label-icon-container:focus-visible{outline:2px solid #0A8276;outline-offset:2px;border-radius:1px}.tree-item__icon-container{position:relative;width:16px;height:16px}.tree-item__icon-container ifx-icon{position:absolute;left:0;top:0;opacity:1;transition:opacity 0.2s ease-in-out}.tree-item__icon-container ifx-icon.icon--hidden{opacity:0}.tree-item__label{padding-left:8px}.tree-item__children{display:none}.tree-item[aria-expanded=true]>.tree-item__children{display:block}',x=(()=>{let c=class{constructor(e){f(this,e),this.ifxTreeViewItemExpandChange=h(this,"ifxTreeViewItemExpandChange",7),this.ifxTreeViewItemCheckChange=h(this,"ifxTreeViewItemCheckChange",7),this.ifxTreeViewItemDisableChange=h(this,"ifxTreeViewItemDisableChange",7)}get host(){return p(this)}expanded=!1;initiallyExpanded=!1;disableItem=!1;ariaLabel;initiallySelected=!1;value;ifxTreeViewItemExpandChange;ifxTreeViewItemCheckChange;ifxTreeViewItemDisableChange;hasChildren=!1;isChecked=!1;partialChecked=!1;level=0;disableAllItems=!1;expandAllItems=!1;suppressExpandEvents=!1;get disabled(){return this.disableAllItems||this.disableItem}get isExpanded(){return this.expandAllItems||this.expanded}findChildren=()=>Array.from(this.host.children).filter(e=>e instanceof HTMLElement&&e.tagName==="IFX-TREE-VIEW-ITEM");calculateNodeLevel=()=>{let e=0,t=this.host.parentElement;for(;t;)t.tagName==="IFX-TREE-VIEW-ITEM"&&e++,t=t.parentElement;return e};componentWillLoad(){this.expanded=this.initiallyExpanded,this.hasChildren=this.findChildren().length>0,this.level=this.calculateNodeLevel(),this.host.setAttribute("data-level",this.level.toString()),this.isChecked=this.initiallySelected,this.host.addEventListener("internal-check-state-change",this.handleStateChange)}componentDidLoad(){this.observeParentAttribute("disable-all-items",e=>this.disableAllItems=e),this.observeParentAttribute("data-expand-all-items",e=>this.expandAllItems=e,!0),this.shouldExpandFromParent()&&this.expandAllDescendants(),this.host.__stencil_instance=this,this.initiallySelected&&setTimeout(()=>this.updateParentState(),0)}observeParentAttribute(e,t,s=!1){let i=this.host.parentElement;for(;i;){if(i.tagName==="IFX-TREE-VIEW"||s&&i.hasAttribute(e)){new MutationObserver(()=>t(i.hasAttribute(e))).observe(i,{attributes:!0}),t(i.hasAttribute(e));break}i=i.parentElement}}shouldExpandFromParent(){let e=this.host.parentElement;for(;e;){if(e.tagName==="IFX-TREE-VIEW"&&(e.hasAttribute("expand-all-items")||e.hasAttribute("data-expand-all-items")))return!0;e=e.parentElement}return!1}expandAllDescendants(){this.expanded=!0,this.findChildren().forEach(e=>{e.expanded=!0,e.expandAllDescendants?.()})}handleStateChange=e=>{this.disabled||(e.stopPropagation(),this.updateCheckState(e.detail.checked))};handleCheckboxChange=e=>{this.disabled||this.updateCheckState(e.detail?.checked??!this.isChecked)};handleHeaderClick=({target:e})=>{if(!this.disabled&&!e.closest(".tree-item__checkbox-container, .tree-item__chevron-container"))if(this.hasChildren){let t=!this.isChecked;this.updateCheckState(t);let s=t?this.expandOrCollapseAllDescendants(!0):this.expandOrCollapseAllDescendants(!1);this.ifxTreeViewItemExpandChange.emit({expanded:t,affectedItems:s,component:this})}else this.updateCheckState(!this.isChecked)};expandOrCollapseAllDescendants(e){this.suppressExpandEvents=!0;let t=[];return this.expanded=e,this.hasChildren&&t.push({expanded:e,value:this.value}),this.findChildren().forEach(s=>{let i=s.__stencil_instance;if(i&&i.hasChildren&&(i.suppressExpandEvents=!0,i.expanded=e,t.push({expanded:e,value:i.value}),i.hasChildren)){let l=i.expandOrCollapseAllDescendants(e);t.push(...l)}}),this.suppressExpandEvents=!1,t}updateCheckState(e,t=!1){return d(this,null,function*(){if(!this.disabled)if(!t&&this.hasChildren){let s=this.collectDescendantStates(e);this.setNodeState({isChecked:e,partialChecked:!1},!1),yield this.updateChildrenSilently(e),this.ifxTreeViewItemCheckChange.emit({checked:e,indeterminate:!1,value:this.value,affectedChildItems:s,component:this}),this.updateParentState()}else t?this.setNodeState({isChecked:e,partialChecked:!1},!1):(this.setNodeState({isChecked:e,partialChecked:!1}),yield this.updateChildrenState(e),this.updateParentState())})}updateChildrenSilently(e){return d(this,null,function*(){for(let t of this.findChildren()){let s=t.__stencil_instance;s&&!s.disabled&&(s.setNodeState({isChecked:e,partialChecked:!1},!1),yield s.updateChildrenSilently(e))}})}handleExpandedChange(e){this.suppressExpandEvents||this.ifxTreeViewItemExpandChange.emit({expanded:e,value:this.value,affectedItems:[{expanded:e,value:this.value}],component:this})}handleDisableItemChange(e){this.ifxTreeViewItemDisableChange.emit({disabled:e,component:this})}setNodeState(e,t=!0){this.isChecked=e.isChecked,this.partialChecked=e.partialChecked,t&&this.ifxTreeViewItemCheckChange.emit({checked:this.isChecked,indeterminate:this.partialChecked,value:this.value,level:this.level,disabled:this.disabled,component:this})}collectDescendantStates(e){let t=[],s=(i,l=!1)=>{let a=i===this.host?this:i.__stencil_instance;!l&&!a?.disabled&&t.push({checked:e,indeterminate:!1,value:a?.value}),Array.from(i.children).forEach(r=>{r.tagName==="IFX-TREE-VIEW-ITEM"&&s(r,!1)})};return Array.from(this.host.children).forEach(i=>{i.tagName==="IFX-TREE-VIEW-ITEM"&&s(i,!1)}),t}updateChildrenState(e){return d(this,null,function*(){for(let t of this.findChildren()){let s=t.__stencil_instance;s&&!s.disabled&&(yield t.componentOnReady(),t.dispatchEvent(new CustomEvent("internal-check-state-change",{detail:{checked:e},bubbles:!1,composed:!0})))}})}findSiblingNodes(e){return Array.from(e.children).filter(t=>t instanceof HTMLElement&&t.tagName==="IFX-TREE-VIEW-ITEM")}updateParentState(){let e=this.host.parentElement?.closest("ifx-tree-view-item");e&&setTimeout(()=>{let t=e.__stencil_instance;if(!t)return;let s=this.findSiblingNodes(e),{allChecked:i,someChecked:l}=this.calculateSiblingStates(s);t.setNodeState({isChecked:i,partialChecked:!i&&l},!1),t.updateParentState()},0)}calculateSiblingStates(e){let t=e.map(l=>{let a=l.__stencil_instance;return{checked:a?.isChecked,partial:a?.partialChecked}}),s=t.filter(l=>l.checked).length,i=t.filter(l=>l.partial).length;return{allChecked:t.length>0&&s===t.length&&i===0,someChecked:s>0||i>0}}toggleExpand=()=>{this.disabled||!this.hasChildren||(this.expanded=!this.expanded)};handleKeyDown=e=>{let s=Array.from(this.host.closest("ifx-tree-view")?.querySelectorAll("ifx-tree-view-item")||[]).filter(a=>{let r=a.parentElement?.closest("ifx-tree-view-item");for(;r;){let o=r;if(!(o.expandAllItems||o.expanded))return!1;r=r.parentElement?.closest("ifx-tree-view-item")}return!0}),i=s.findIndex(a=>a===this.host),l=a=>a?.focus();switch(e.key){case"ArrowDown":{e.preventDefault();for(let a=i+1;a<s.length;a++){let r=s[a];if(!r.disabled){l(r.shadowRoot?.querySelector(".tree-item__label-icon-container"));break}}break}case"ArrowUp":{e.preventDefault();for(let a=i-1;a>=0;a--){let r=s[a];if(!r.disabled){l(r.shadowRoot?.querySelector(".tree-item__label-icon-container"));break}}break}case"ArrowRight":{if(e.preventDefault(),!this.isExpanded&&this.hasChildren)this.expanded=!0;else if(this.isExpanded&&this.hasChildren){let a=this.host.querySelector("ifx-tree-view-item");a&&!a.disabled&&l(a.shadowRoot?.querySelector(".tree-item__label-icon-container"))}break}case"ArrowLeft":{if(e.preventDefault(),this.isExpanded&&this.hasChildren)this.expanded=!1;else{let a=this.host.parentElement?.closest("ifx-tree-view-item");a&&!a.disabled&&l(a.shadowRoot?.querySelector(".tree-item__label-icon-container"))}break}case" ":case"Enter":{if(e.preventDefault(),this.hasChildren){let a=!this.isChecked;this.updateCheckState(a);let r=a?this.expandOrCollapseAllDescendants(!0):this.expandOrCollapseAllDescendants(!1);this.ifxTreeViewItemExpandChange.emit({expanded:a,affectedItems:r,component:this})}else this.updateCheckState(!this.isChecked);break}}};render(){return n("div",{key:"9aab415f6363cfb42b27ec64372dbc10ba564f58",class:{"tree-item":!0,"tree-item--expanded":this.isExpanded,"tree-item--has-children":this.hasChildren,"tree-item--disabled":this.disabled},role:"treeitem","aria-expanded":this.isExpanded?"true":"false","data-level":this.level,"aria-disabled":this.disabled?"true":void 0,"aria-label":this.ariaLabel},n("div",{key:"54e902025588fc30671623a3246ad25079f2b471",class:"tree-item__content"},n("div",{key:"9d82af8b1e9027bbe6f4b73f109cec013ed4babd",class:"tree-item__checkbox-container",onClick:e=>e.stopPropagation()},n("ifx-checkbox",{key:"a7fc71f1eb2dbb30e6e9df5f99b253299842cfd1",size:"s",checked:this.partialChecked?!1:this.isChecked,indeterminate:this.partialChecked,onIfxChange:this.handleCheckboxChange,disabled:this.disabled})),n("div",{key:"700ecdb65e20732a4fe0a30cf05fd9207f884559",class:"tree-item__header",style:{paddingLeft:`${this.level*24+10}px`},onClick:this.handleHeaderClick,tabIndex:-1,"aria-disabled":this.disabled?"true":void 0},this.hasChildren&&n("div",{key:"1b6ed42b76033f14324db742ec7b1d2760873375",class:"tree-item__chevron-container",onClick:this.toggleExpand},n("ifx-icon",{key:"ec03dae18d7941443336d20f4d0c0a4dbbb54938",class:`tree-item__chevron ${this.isExpanded?"chevron-down":"chevron-right"}`,icon:"chevron-right-16"}),n("div",{key:"05979928988b2e43f7b572172147bf62129806d3",class:"tree-item__line"})),n("div",{key:"d5e85a32ba4de10152cec452fc5da951f52ef28d",class:"tree-item__label-icon-container",tabIndex:this.disabled?-1:0,onKeyDown:this.handleKeyDown},n("div",{key:"33221ccadd075833dbe60fe8030e9cf471c0828b",class:"tree-item__icon-container"},this.hasChildren?n(m,null,n("ifx-icon",{class:{"icon--hidden":this.isExpanded},icon:"folder-16"}),n("ifx-icon",{class:{"icon--hidden":!this.isExpanded},icon:"folder-open-16"})):n("ifx-icon",{icon:"file-16"})),n("span",{key:"b485fedddd71dad05ee86264c9bf4ba13f29f8a0",class:"tree-item__label"},n("slot",{key:"6f51f9308f910d7291b5797af8195b48b2d1b1a5"}))))),this.isExpanded&&n("div",{key:"e1b4fec8f6de6e2e1abddc2da76e01dacd7eb928",class:"tree-item__children"},n("slot",{key:"d193d748313f2fbcbfdbd943c20935aeec3a4a70",name:"children"})))}static get watchers(){return{expanded:["handleExpandedChange"],disableItem:["handleDisableItemChange"]}}};return c.style=b,c})();export{x as ifx_tree_view_item};
