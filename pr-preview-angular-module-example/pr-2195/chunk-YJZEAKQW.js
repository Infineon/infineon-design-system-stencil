import{b as o,d as i,e as h,f as c,g as f}from"./chunk-WRIFVQG4.js";import"./chunk-2R6CW7ES.js";var p=":host{display:block;width:100%}.search-container{display:flex;width:calc(100% - 48px);padding-left:24px;padding-right:24px;flex-direction:row;align-items:flex-start;margin-bottom:16px}.components-container{display:flex;width:calc(100% - 48px);padding-left:24px;padding-right:24px;flex-direction:row;align-items:flex-end;align-content:flex-end;flex-wrap:wrap;gap:16px}.filter-slot-wrapper{flex-grow:1;flex-basis:100%;max-width:100%}@media (max-width: 1024px){.more-filters-wrapper{order:3;width:100%;display:flex;justify-content:center;padding-top:16px;}}@media (min-width: 720px) and (max-width: 1024px){.filter-slot-wrapper{flex-basis:calc((100% - 16px) / 2);max-width:calc((100% - 16px) / 2)}}@media (min-width: 1025px){.filter-slot-wrapper{flex-basis:auto;max-width:200px}::slotted([slot=filter-search]){max-width:828px}}::slotted([slot=filter-search]){flex-grow:1;flex-basis:100%;width:100%}",m=(()=>{let n=class{constructor(e){o(this,e),this.ifxTopbarFilterChange=f(this,"ifxTopbarFilterChange",7)}get el(){return c(this)}selectedOptions=[];ifxTopbarFilterChange;showAllFilters=!1;maxShownFilters=4;visibleSlots;showMoreFiltersButton=!0;connectedCallback(){this.el.addEventListener("ifxFilterSelect",this.handleTopbarFilterChange),this.el.addEventListener("ifxFilterSearchChange",this.handleSearchChange),window.addEventListener("ifxResetFiltersEvent",this.handleResetEvent)}disconnectedCallback(){this.el.removeEventListener("ifxFilterSelect",this.handleTopbarFilterChange),this.el.removeEventListener("ifxFilterSearchChange",this.handleSearchChange),window.removeEventListener("ifxResetFiltersEvent",this.handleResetEvent)}componentWillLoad(){this.updateVisibleSlots()}updateVisibleSlots(){this.visibleSlots=this.showAllFilters?Number.MAX_SAFE_INTEGER:this.maxShownFilters}handleMoreFiltersClick=()=>{this.showAllFilters=!0,this.updateVisibleSlots()};handleResetEvent=()=>{let e=this.el.shadowRoot?.querySelector('slot[name="filter-search"]');e instanceof HTMLSlotElement&&e.assignedElements({flatten:!0}).forEach(l=>{let s=l.querySelector("ifx-filter-search").shadowRoot.querySelectorAll("ifx-search-field");s.length>0&&s.forEach(r=>{r.value=""})}),this.selectedOptions=[],this.ifxTopbarFilterChange.emit(this.selectedOptions)};handleSearchChange=e=>{this.handleTopbarFilterChange(e)};handleTopbarFilterChange=e=>{let t=[...this.selectedOptions];if(e.type==="ifxFilterSearchChange"){let{filterName:l,filterValue:a}=e.detail,s=t.findIndex(r=>r.filterName===l);s!==-1?t[s].filterValues=[a]:t.push({filterName:l,filterValues:[a],type:"text"})}else if(e.type==="ifxFilterSelect"){let{filterName:l,filterValues:a,type:s}=e.detail,r=t.findIndex(d=>d.filterName===l);r!==-1?(t[r].filterValues=a,t[r].type=s):t.push({filterName:l,filterValues:a,type:s})}this.selectedOptions=t,this.ifxTopbarFilterChange.emit(this.selectedOptions)};render(){let e=Math.max(0,this.visibleSlots),t=this.el.querySelectorAll("ifx-set-filter").length,l=Math.min(e,t,Number.MAX_SAFE_INTEGER),a=Array.from({length:l},(s,r)=>i("div",{class:"filter-slot-wrapper"},i("slot",{name:`filter-component-${r+1}`})));return i(h,{key:"6d0c33267f06705e151a0ea7b8f9b0dec87c133e"},i("div",{key:"f260f848f3150b706f27de3eacc7573aae7f381f",class:"search-container"},i("slot",{key:"becb8e2ab131a70aed664834d243a6f59821c02c",name:"filter-search"})," "),i("div",{key:"3211bd81a3aadd3c681b2aa766d7a8ab5983a9bb",class:"components-container"},a.length>0?a:i("slot",{name:"filter-component"}),this.showMoreFiltersButton&&!this.showAllFilters&&i("div",{key:"3aca9f7570ba94267a8b19bdc6fd9bbba9cfa0e9",class:"more-filters-wrapper",onClick:this.handleMoreFiltersClick},i("ifx-button",{key:"b95da43399b7ca46e6d99e7139bcf5e25e8272a6",type:"button",disabled:!1,variant:"tertiary",size:"m",target:"_blank",theme:"default","full-width":"false"},i("ifx-icon",{key:"bf58b28f0ff6144fc03492f782a2d444da6c4913",icon:"filter-16"}),"More filters"))))}};return n.style=p,n})();export{m as ifx_filter_bar};
