import{a as b}from"./chunk-QP3EOLNT.js";import{a as g,b as w}from"./chunk-QEIS6NYH.js";import{b as u,d as o,e as y,f as m,g as x}from"./chunk-2RWEY4UG.js";import{g as f}from"./chunk-2R6CW7ES.js";var C='.ifx-multiselect-container{position:relative;box-sizing:border-box;font-family:var(--ifx-font-family)}.ifx-multiselect-container.disabled .ifx-label-wrapper{color:#BFBBBB}.ifx-multiselect-container.disabled .ifx-multiselect-wrapper{background:#BFBBBB;color:#FFFFFF;border-color:#BFBBBB;cursor:default;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ifx-multiselect-container:hover{cursor:pointer}.ifx-multiselect-container .ifx-label-wrapper{font-size:1rem;line-height:1.5rem;white-space:pre-wrap;word-wrap:break-word;overflow-wrap:anywhere;max-width:100%}.ifx-multiselect-container .ifx-label-wrapper .required{margin-left:4px}.ifx-multiselect-container .ifx-label-wrapper .required.error{color:#CD002F}.ifx-multiselect-container .multi__select-caption{font-style:normal;font-weight:400;font-size:0.75rem;line-height:1rem;color:#1D1D1D;flex:none;order:1;align-self:stretch;flex-grow:0}.ifx-multiselect-container .multi__select-caption.error{color:#CD002F}.ifx-multiselect-container .multi__select-caption.disabled{color:#BFBBBB}.ifx-multiselect-container .ifx-multiselect-wrapper{background-color:#FFFFFF;box-sizing:border-box;display:flex;align-items:center;border:1px solid #8D8786;border-radius:1px;width:100%;font-weight:400;font-style:normal;height:40px;line-height:24px;padding:8px 16px;font-size:1rem;line-height:1.5rem}.ifx-multiselect-container .ifx-multiselect-wrapper:focus-visible{outline:none}.ifx-multiselect-container .ifx-multiselect-wrapper:focus-visible:not(.active):not(:active){outline:none}.ifx-multiselect-container .ifx-multiselect-wrapper:focus-visible:not(.active):not(:active)::before{content:"";position:absolute;width:calc(100% + 4px);height:calc(100% + 4px);top:50%;left:50%;transform:translate(-50%, -50%);border:2px solid #0A8276;border-radius:2px}.ifx-multiselect-container .ifx-multiselect-wrapper.error{border-color:#CD002F}.ifx-multiselect-container .ifx-multiselect-wrapper.active{border-color:#0A8276 !important}.ifx-multiselect-container .ifx-multiselect-wrapper.active .icon-wrapper-up{display:flex;align-items:center;justify-content:center;padding-left:8px}.ifx-multiselect-container .ifx-multiselect-wrapper.active .icon-wrapper-down{display:none}.ifx-multiselect-container .ifx-multiselect-wrapper .icon-wrapper-up{display:none}.ifx-multiselect-container .ifx-multiselect-wrapper .icon-wrapper-down{display:flex;align-items:center;justify-content:center;padding-left:8px}.ifx-multiselect-container .ifx-multiselect-wrapper.is-flipped .ifx-multiselect-dropdown-menu{top:auto;bottom:100%}.ifx-multiselect-container .ifx-multiselect-input{flex-grow:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ifx-multiselect-container .ifx-multiselect-input.placeholder{opacity:0.5}.ifx-multiselect-container .ifx-multiselect-icon-container{margin-left:auto;display:flex;align-items:center;gap:8px}.ifx-multiselect-container .ifx-multiselect-icon-container .ifx-multiselect-icon-container{display:flex}.ifx-multiselect-container .ifx-multiselect-icon-container .icon-wrapper{display:flex;align-items:center;transition:transform 0.2s ease-in-out}.ifx-multiselect-container .ifx-multiselect-icon-container .icon-wrapper--open{transform:rotate(180deg)}.ifx-multiselect-container .ifx-clear-button{display:flex;align-items:center}.ifx-multiselect-container .ifx-clear-button.hide{display:none}.ifx-multiselect-container .ifx-multiselect-dropdown-menu{box-sizing:border-box;position:absolute;top:100%;left:0;width:100%;margin-top:4px;padding-bottom:8px;border:1px solid #EEEDED;background-color:#FFFFFF;box-shadow:0px 6px 9px 0px rgba(29, 29, 29, 0.1);max-height:300px;z-index:1000;display:flex;flex-direction:column}.ifx-multiselect-container:not(.disabled) .ifx-multiselect-wrapper:hover:not(.focus,:focus){border-color:#575352}.ifx-multiselect-dropdown-functions{padding:12px 16px;border-bottom:1px solid #EEEDED;flex-shrink:0}.ifx-multiselect-dropdown-search{margin-bottom:12px}.ifx-multiselect-dropdown-controls{display:flex;flex-wrap:wrap;justify-content:space-between;gap:8px}.ifx-multiselect-dropdown-controls .select-all-wrapper{display:flex}.ifx-multiselect-dropdown-controls .expand-collapse-controls{display:flex;gap:12px}.ifx-multiselect-dropdown-controls .control-item{font-size:16px;line-height:24px}.ifx-multiselect-dropdown-controls .control-item:hover{color:#0A8276}.ifx-multiselect-dropdown-controls .control-item:active{color:#08665C}.ifx-multiselect-dropdown-controls .control-item:focus{outline:none}.ifx-multiselect-dropdown-controls .control-item:focus-visible{outline:2px solid #0A8276;outline-offset:2px;border-radius:1px}.ifx-multiselect-options{flex:1;overflow-y:auto;padding-top:8px}.ifx-multiselect-options.show-no-results .ifx-multiselect-no-results{display:block}.ifx-multiselect-no-results{padding-left:16px;padding-right:16px;display:none}';function E(h,e){let t;return function(...l){let s=()=>{clearTimeout(t),h(...l)};clearTimeout(t),t=setTimeout(s,e)}}var L=(()=>{let h=class{constructor(e){u(this,e),this.ifxSelect=x(this,"ifxSelect",7),this.ifxOpen=x(this,"ifxOpen",7),e.$hostElement$["s-ei"]?this.internals=e.$hostElement$["s-ei"]:(this.internals=e.$hostElement$.attachInternals(),e.$hostElement$["s-ei"]=this.internals)}name;disabled=!1;required=!1;error=!1;caption="";label="";placeholder="";showSearch=!0;showSelectAll=!0;showClearButton=!0;showExpandCollapse=!0;noResultsMessage="No results found.";showNoResultsMessage=!0;searchPlaceholder="Search";selectAllLabel="Select all";expandLabel="Expand";collapseLabel="Collapse";ariaMultiSelectLabel="Multi-select dropdown";ariaMultiSelectLabelledBy="";ariaMultiSelectDescribedBy="";ariaSearchLabel="Search options";ariaClearLabel="Clear all selections";ariaToggleLabel="Toggle dropdown";ariaSelectAllLabel="Select all options";ariaExpandAllLabel="Expand all categories";ariaCollapseAllLabel="Collapse all categories";internalError=!1;persistentSelectedOptions=[];dropdownOpen=!1;dropdownFlipped;searchTerm="";ifxSelect;ifxOpen;get el(){return m(this)}dropdownElement;internals;parseChildOptions(){let e=[];return Array.from(this.el.children).forEach((i,l)=>{if(i.tagName==="IFX-MULTISELECT-OPTION"){let s=this.parseOptionElement(i,l);s&&e.push(s)}}),e}parseOptionElement(e,t){let i=e.getAttribute("value")||`option-${t}`,l=e.hasAttribute("selected"),s=e.hasAttribute("disabled"),n=e.hasAttribute("indeterminate"),a={value:i,selected:l,disabled:s,indeterminate:n},c=Array.from(e.children).filter(r=>r.tagName==="IFX-MULTISELECT-OPTION").map((r,d)=>this.parseOptionElement(r,d)).filter(r=>r!==null);return c.length>0&&(a.children=c),a}loadInitialOptions(){this.internalError=this.error;let e=this.parseChildOptions(),i=this.collectSelectedOptions(e).filter(l=>!this.persistentSelectedOptions.some(s=>s.value==l.value));this.persistentSelectedOptions=[...this.persistentSelectedOptions,...i]}collectSelectedOptions(e){let t=[];for(let i of e)i.selected?i.children&&i.children.length>0?t=t.concat(this.collectLeafOptions(i.children)):t.some(l=>l.value===i.value)||t.push(i):i.children&&i.children.length>0&&(t=t.concat(this.collectSelectedOptions(i.children)));return t}collectLeafOptions(e){let t=[];for(let i of e)i.children&&i.children.length>0?t=t.concat(this.collectLeafOptions(i.children)):t.push(i);return t}handleSearch=E(e=>{let t=e.value.toLowerCase(),i=t!=="";this.searchTerm=t;let l=this.el.shadowRoot.querySelector(".ifx-multiselect-wrapper");if(l)if(i)l.classList.remove("active");else{let n=this.el.shadowRoot.querySelector("ifx-search-field");n&&n.matches(":focus-within")||l.classList.add("active")}let s=this.el.shadowRoot.querySelector(".ifx-multiselect-options");s&&(i?s.classList.add("has-search-filter"):s.classList.remove("has-search-filter")),requestAnimationFrame(()=>{if(this.el.querySelectorAll("ifx-multiselect-option").forEach(a=>{let c=new CustomEvent("ifx-search-filter",{detail:{searchTerm:t,isActive:i}});a.dispatchEvent(c)}),i)setTimeout(()=>{let a=this.el.querySelectorAll("ifx-multiselect-option"),c=0;a.forEach(d=>{let p=window.getComputedStyle(d),S=d.getBoundingClientRect();p.display!=="none"&&p.visibility!=="hidden"&&p.opacity!=="0"&&S.height>0&&c++});let r=this.el.shadowRoot.querySelector(".ifx-multiselect-options");r&&(c===0?r.classList.add("show-no-results"):r.classList.remove("show-no-results"))},200);else{let a=this.el.shadowRoot.querySelector(".ifx-multiselect-options");a&&a.classList.remove("show-no-results")}})},150);handleSearchFocus(e){let t=this.el.shadowRoot.querySelector(".ifx-multiselect-wrapper");t&&(e||this.searchTerm!==""?t.classList.remove("active"):t.classList.add("active"))}positionDropdown(){let e=this.el.shadowRoot.querySelector(".ifx-multiselect-wrapper")?.getBoundingClientRect(),t=window.innerHeight-e.bottom;e.top>t&&e.height>t||e.bottom>window.innerHeight?this.dropdownFlipped=!0:this.dropdownFlipped=!1}updateSlotBasedSelections(e=!1){let t=this.el.querySelectorAll("ifx-multiselect-option"),i=[];t.forEach(l=>{let s=l.__stencil_instance;s&&s.selected&&!s.hasChildren&&i.push({value:s.value,selected:!0,disabled:s.disabled,label:s.getTextContent()||s.value})}),this.persistentSelectedOptions=i,e&&this.ifxSelect.emit(this.persistentSelectedOptions)}updateInitialParentStates(){let e=this.el.querySelectorAll("ifx-multiselect-option");Array.from(e).map(i=>({element:i,instance:i.__stencil_instance,depth:parseInt(i.getAttribute("data-level")||"0")})).filter(i=>i.instance).sort((i,l)=>l.depth-i.depth).forEach(({instance:i})=>{i.hasChildren&&this.updateParentState(i)})}updateParentState(e){let t=Array.from(e.el.children).filter(n=>n.tagName==="IFX-MULTISELECT-OPTION").map(n=>n.__stencil_instance).filter(n=>n!==null),i=t.filter(n=>n.selected).length,l=t.filter(n=>n.indeterminate).length,s=t.length;i===s&&l===0?(e.selected=!0,e.indeterminate=!1):i===0&&l===0?(e.selected=!1,e.indeterminate=!1):(e.selected=!1,e.indeterminate=!0)}componentDidLoad(){return f(this,null,function*(){if(!b(this.el)){let e=g();w("ifx-multiselect",yield e)}setTimeout(()=>{this.positionDropdown()},500),this.el.addEventListener("ifx-option-changed",e=>{let t=e.target?.__stencil_instance;t&&!t.hasChildren&&this.updateSlotBasedSelections(!0)}),setTimeout(()=>{this.updateSlotBasedSelections(!1),this.updateInitialParentStates()},100)})}componentWillLoad(){this.loadInitialOptions()}updateInternalError(){this.internalError=this.error}onSelectionChange(e,t){let i=new FormData;e.forEach(l=>i.append(this.name,l.value))}collapseAll(){this.el.querySelectorAll("ifx-multiselect-option").forEach(t=>{let i=t.__stencil_instance;i&&i.hasChildren&&(i.isExpanded=!1)})}expandAll(){this.el.querySelectorAll("ifx-multiselect-option").forEach(t=>{let i=t.__stencil_instance;i&&i.hasChildren&&(i.isExpanded=!0)})}selectAll(){this.resetSearch(),this.el.querySelectorAll("ifx-multiselect-option").forEach(t=>{let i=t.__stencil_instance;i&&(i.hasChildren?i.isExpanded=!0:i.selected=!0)}),setTimeout(()=>{this.updateInitialParentStates(),this.updateSlotBasedSelections(!1),this.ifxSelect.emit(this.persistentSelectedOptions)},0)}clearSelection(){return f(this,null,function*(){this.el.querySelectorAll("ifx-multiselect-option").forEach(t=>{let i=t.__stencil_instance;i&&(i.selected=!1,i.indeterminate=!1,i.hasChildren&&(i.isExpanded=!1))}),this.persistentSelectedOptions=[],setTimeout(()=>{this.updateSlotBasedSelections(!1),this.ifxSelect.emit(this.persistentSelectedOptions)},0)})}handleDocumentClick=e=>{e.composedPath().includes(this.dropdownElement)||(this.dropdownOpen=!1,document.removeEventListener("click",this.handleDocumentClick),this.resetSearch(),this.ifxOpen.emit(this.dropdownOpen))};toggleDropdown(){this.dropdownOpen=!this.dropdownOpen,setTimeout(()=>{this.dropdownOpen?document.addEventListener("click",this.handleDocumentClick):this.resetSearch(),this.ifxOpen.emit(this.dropdownOpen)},0)}resetSearch(){this.searchTerm="";let e=this.el.shadowRoot.querySelector("ifx-search-field");e&&(e.value="");let t=this.el.shadowRoot.querySelector(".ifx-multiselect-options");t&&t.classList.remove("has-search-filter"),this.el.querySelectorAll("ifx-multiselect-option").forEach(l=>{let s=new CustomEvent("ifx-search-filter",{detail:{searchTerm:"",isActive:!1}});l.dispatchEvent(s)})}handleWrapperClick(e){this.positionDropdown(),e.currentTarget===e.target&&this.toggleDropdown()}handleKeyDown(e){if(!this.disabled){if(!this.dropdownOpen){switch(e.code){case"Enter":case"Space":case"ArrowDown":e.preventDefault(),this.toggleDropdown();break}return}switch(e.code){case"Escape":e.preventDefault(),this.toggleDropdown();break;case"Enter":case"Space":{e.target.closest(".ifx-multiselect-dropdown-functions")||(e.preventDefault(),this.toggleDropdown());break}case"ArrowDown":case"ArrowUp":e.preventDefault(),this.focusFirstOption();break}}}focusFirstOption(){let e=this.el.querySelector("ifx-multiselect-option:not(.search-hidden)");e&&e.shadowRoot?.querySelector(".option-label")?.focus()}renderSelectAll(){let e=this.el.querySelectorAll("ifx-multiselect-option"),t=Array.from(e).filter(n=>!n.hasChildren),i=Array.from(e).filter(n=>!n.hasChildren&&n.selected),l=t.length>0&&i.length===t.length,s=n=>{n&&(n.preventDefault(),n.stopPropagation()),l?this.clearSelection():this.selectAll()};return o("div",{class:"select-all-wrapper"},o("ifx-checkbox",{id:"selectAll",checked:l,size:"s","aria-label":this.ariaSelectAllLabel,onClick:s,onKeyDown:n=>{(n.key==="Enter"||n.key===" ")&&(n.preventDefault(),n.stopPropagation(),s(n))}},this.selectAllLabel))}renderNoResultsMessage(){return o("div",{class:"ifx-multiselect-no-results"},o("div",{class:"no-results-content"},o("span",{class:"no-results-text"},this.noResultsMessage)))}render(){let e=this.persistentSelectedOptions.map(s=>s.label||s.value).join(", "),t=this.persistentSelectedOptions.length>0,i=!1,l=this.el.querySelectorAll("ifx-multiselect-option");return l.length>0&&(i=Array.from(l).every(s=>s.children.length===0)),o("div",{key:"4e19eee53f458103cdc03851f7f0ba0db1b7ab24",class:`ifx-multiselect-container ${this.disabled&&!this.error?"disabled":""}`,ref:s=>this.dropdownElement=s},o("div",{key:"9f7bb71003ce3687e4a316203b42118cc7e640af",class:"ifx-label-wrapper"},this.label&&o("span",{key:"d215d4d4cb8c318f318988f6d1d7b1d420a57bc4",class:"wrapper-label"},o("span",{key:"1c638aad8c1c6c5b579e7aefe55d8cf933b5b8cf"},this.label),this.required&&o("span",{key:"741befc8bd52c952144963cb934a5137051d4278",class:`required ${this.error?"error":""}`},"*"))),o("div",{key:"fc7e0b1037fdb0d9960b49dcdf66e922981e2570",class:`ifx-multiselect-wrapper
        ${this.dropdownOpen?"active":""}
        ${this.dropdownFlipped?"is-flipped":""}
        ${this.internalError?"error":""}
        ${this.disabled&&!this.error?"disabled":""}`,role:"combobox","aria-label":this.ariaMultiSelectLabel,"aria-labelledby":this.ariaMultiSelectLabelledBy||void 0,"aria-describedby":this.ariaMultiSelectDescribedBy||void 0,"aria-expanded":this.dropdownOpen,"aria-haspopup":"listbox","aria-disabled":this.disabled&&!this.error,tabindex:"0",onClick:this.disabled&&!this.error?void 0:s=>this.handleWrapperClick(s),onKeyDown:this.disabled&&!this.error?void 0:s=>this.handleKeyDown(s)},o("div",{key:"0201f2d814edd5d1419b40d9fcf46f0199f1478f",class:`ifx-multiselect-input
          ${t?"":"placeholder"}
          `,onClick:this.disabled&&!this.error?void 0:()=>this.toggleDropdown()},t?e:this.placeholder),this.dropdownOpen&&o("div",{key:"0cd349f15be478d2d45ee6c210449371e9c40972",class:"ifx-multiselect-dropdown-menu"},(this.showSearch||this.showSelectAll||this.showExpandCollapse&&!i)&&o("div",{key:"50ef9d298ebe178f2d3cbd5160eb150b8a3209ca",class:"ifx-multiselect-dropdown-functions",onClick:s=>s.stopPropagation()},this.showSearch&&o("div",{key:"0fd4dadbeeb4d62b2c106e9af8a0282c4ee0f919",class:"ifx-multiselect-dropdown-search"},o("ifx-search-field",{key:"e290f2f00763de3951b31d01d89ea01ea284892a",class:"search-input",placeholder:this.searchPlaceholder,size:"s","show-delete-icon":"true","aria-label":this.ariaSearchLabel,onKeyDown:s=>{s.stopPropagation()},onIfxInput:s=>this.handleSearch(s.target),onFocus:()=>this.handleSearchFocus(!0),onBlur:()=>this.handleSearchFocus(!1)})),o("div",{key:"19035f2c6c69d3c1347bd0f094e2a3fd2593fc63",class:"ifx-multiselect-dropdown-controls"},this.showSelectAll&&this.renderSelectAll(),this.showExpandCollapse&&!i&&o("div",{key:"fb8f66a2207dddd9854997bc7c357a2919d6f484",class:"expand-collapse-controls"},o("span",{key:"7b37f0aa6bf1caa7b8ce013fd9b858aa36edcb60",class:"control-item",role:"button",tabIndex:0,"aria-label":this.ariaExpandAllLabel,onClick:s=>{s.stopPropagation(),this.expandAll()},onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),s.stopPropagation(),this.expandAll())}},this.expandLabel),o("span",{key:"61cbc3cfb9a9ea953a76756d3b408826df744065",class:"control-item",role:"button",tabIndex:0,"aria-label":this.ariaCollapseAllLabel,onClick:s=>{s.stopPropagation(),this.collapseAll()},onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),s.stopPropagation(),this.collapseAll())}},this.collapseLabel)))),o("div",{key:"0eb3f2c438b647f1eeaf2e8eff736b71696cc764",class:"ifx-multiselect-options",role:"listbox","aria-multiselectable":"true"},o("slot",{key:"8712ddc2c75db4f869463adc40bd9036ba864141"}),this.searchTerm&&this.showNoResultsMessage&&this.renderNoResultsMessage())),o("div",{key:"eef9377329f7293b259bcd7209a7a5f027f121ed",class:"ifx-multiselect-icon-container"},this.persistentSelectedOptions.length>0&&o("div",{key:"9563bb568c85172482d506ff8030b91f31562a14",class:`ifx-clear-button ${this.showClearButton?"":"hide"}`,onClick:this.disabled&&!this.error?void 0:()=>this.clearSelection()},o("ifx-icon",{key:"60bb69c165607832c7c7370fd60dc4c6d1d28d25",icon:"cRemove16"})),o("div",{key:"a11767d740b34ffe49955f26f5d85c552ed959c7",class:"icon-wrapper-up",onClick:this.disabled&&!this.error?void 0:()=>this.toggleDropdown()},o("ifx-icon",{key:"icon-up",icon:"chevron-up-16"})),o("div",{key:"f868228fa05e34ed9d6ed9817aeaa9ce65a946ce",class:"icon-wrapper-down",onClick:this.disabled&&!this.error?void 0:()=>this.toggleDropdown()},o("ifx-icon",{key:"icon-down",icon:"chevron-down-16"})))),this.caption&&o("div",{key:"b0a0c736bf9b564d9008f3a017b8a72d3dbfb9d3",class:`multi__select-caption ${this.error?"error":""} ${this.disabled&&!this.error?"disabled":""}`},this.caption))}static get watchers(){return{error:["updateInternalError"],persistentSelectedOptions:["onSelectionChange"]}}};return h.style=C,h})(),v=":host{display:block;width:100%}.option{display:flex;flex-direction:column;position:relative;cursor:pointer;list-style:none}.option.option--expanded{position:relative}.option.option--has-children{position:relative}.option.option--has-children .option-item>.chevron-wrapper{display:flex}.option--disabled{cursor:not-allowed;pointer-events:none;color:#BFBBBB}.option.search-hidden{display:none !important}.option.search-match .option-item .option-label .search-highlight{font-weight:bold}.option-item{display:flex;flex-direction:row;align-items:center;white-space:nowrap;min-height:20px;padding:4px 16px;background-color:#FFFFFF;transition:background-color 0.2s ease-in-out}.option-item:hover{background-color:#F7F7F7}.option--disabled .option-item:hover{background-color:transparent}.option-children{display:block}.chevron-wrapper{display:none;align-items:center;justify-content:center;margin-right:8px;width:20px;height:20px;flex-shrink:0}.chevron-wrapper:focus{outline:none}.chevron-wrapper:focus-visible{outline:2px solid #0A8276;outline-offset:2px;border-radius:1px}.option--has-children .chevron-wrapper{display:flex}.chevron-wrapper .chevron{transition:transform 0.2s ease-in-out;color:#3C3A39}.chevron-wrapper .chevron.chevron--expanded{transform:rotate(90deg)}.chevron-wrapper .chevron.chevron--collapsed{transform:rotate(0deg)}.checkbox-wrapper{display:flex;align-items:center;margin-right:8px;flex-shrink:0}.option-label{flex-grow:1;display:flex;align-items:center;cursor:pointer;padding:2px 0;font-size:0.875rem}.option-label:focus{outline:none}.option-label:focus-visible{outline:2px solid #0A8276;outline-offset:2px;border-radius:1px}.option--disabled .option-label{cursor:not-allowed;color:#BFBBBB}",T=(()=>{let h=class{constructor(e){u(this,e)}get el(){return m(this)}value;selected=!1;disabled=!1;indeterminate=!1;isExpanded=!1;hasChildren=!1;depth=0;searchTerm="";isSearchActive=!1;isSearchDisabled=!1;componentWillLoad(){this.hasChildren=this.el.children.length>0,this.depth=this.calculateDepth(),this.el.setAttribute("data-level",this.depth.toString()),this.hasChildren&&this.hasAnySelectedChildren()&&(this.isExpanded=!0)}componentDidLoad(){this.el.__stencil_instance=this,this.notifyMultiselect(),this.el.addEventListener("ifx-search-filter",this.handleSearchFilter)}disconnectedCallback(){this.el.removeEventListener("ifx-search-filter",this.handleSearchFilter)}handleSearchFilter=e=>{let{searchTerm:t,isActive:i}=e.detail;this.searchTerm=t.toLowerCase(),this.isSearchActive=i,requestAnimationFrame(()=>{this.updateSearchClasses()})};updateSearchClasses(){let e=this.el.shadowRoot?.querySelector(".option");if(!e)return;if(!this.isSearchActive){e.classList.remove("search-hidden","search-parent","search-match"),this.removeHighlighting(),this.isSearchDisabled=!1;return}let i=this.getTextContent().toLowerCase().includes(this.searchTerm),l=this.hasMatchingParent();requestAnimationFrame(()=>{let s=this.hasMatchingChildren();e.classList.remove("search-hidden","search-parent","search-match"),this.isSearchDisabled=!1,i&&!this.hasChildren?(e.classList.add("search-match"),this.highlightSearchTerm()):i&&this.hasChildren?(e.classList.add("search-match"),this.highlightSearchTerm(),this.isExpanded=!0):!i&&this.hasChildren&&s?(e.classList.add("search-parent"),this.removeHighlighting(),this.isExpanded=!0,this.isSearchDisabled=!0):l?(e.classList.add("search-match"),this.removeHighlighting()):(e.classList.add("search-hidden"),this.removeHighlighting())})}highlightSearchTerm(){if(!this.searchTerm)return;let e=this.el.shadowRoot?.querySelector(".option-label");if(!e)return;let t=e.querySelector("slot");if(!t)return;this.removeHighlighting();let i=this.getTextContent(),l=this.searchTerm.toLowerCase(),s=i.toLowerCase();if(!s.includes(l))return;let n=s.indexOf(l);if(n===-1)return;let a=i.substring(0,n),c=i.substring(n,n+l.length),r=i.substring(n+l.length),d=document.createElement("span");d.className="highlighted-text",a&&d.appendChild(document.createTextNode(a));let p=document.createElement("strong");p.className="search-highlight",p.textContent=c,d.appendChild(p),r&&d.appendChild(document.createTextNode(r)),e.setAttribute("data-original-content","true"),t.style.display="none",e.appendChild(d)}removeHighlighting(){let e=this.el.shadowRoot?.querySelector(".option-label");if(!e)return;let t=e.querySelector("slot"),i=e.querySelector(".highlighted-text");i&&e.removeChild(i),t&&(t.style.display=""),e.removeAttribute("data-original-content")}getTextContent(){let e="";return Array.from(this.el.childNodes).forEach(t=>{t.nodeType===Node.TEXT_NODE&&(e+=t.textContent?.trim()||"")}),e||this.value||""}hasMatchingChildren(){return this.hasChildren?Array.from(this.el.children).filter(t=>t.tagName==="IFX-MULTISELECT-OPTION").some(t=>{let i=t.__stencil_instance;if(!i)return!1;let s=i.getTextContent().toLowerCase().includes(this.searchTerm),n=i.hasMatchingChildren();return s||n}):!1}hasMatchingParent(){let e=this.el.parentElement;for(;e&&e.tagName==="IFX-MULTISELECT-OPTION";){let t=e.__stencil_instance;if(t&&t.getTextContent().toLowerCase().includes(this.searchTerm))return!0;e=e.parentElement}return!1}calculateDepth(){let e=0,t=this.el.parentElement;for(;t&&t.tagName!=="IFX-MULTISELECT";)t.tagName==="IFX-MULTISELECT-OPTION"&&e++,t=t.parentElement;return e}handleClick(e){if(this.disabled||this.isSearchActive&&this.isSearchDisabled)return;if(e.stopPropagation(),e.type==="click"&&e.target.closest(".chevron-wrapper")){this.toggleExpansion();return}let t;this.indeterminate?t=!0:t=!this.selected,this.selected=t,this.indeterminate=!1,this.hasChildren&&(this.isExpanded=t,requestAnimationFrame(()=>{this.selectAllChildren(t),this.expandAllChildren(t)})),this.updateParentStates(),this.notifyMultiselect()}handleKeyDown(e){if(this.disabled||this.isSearchActive&&this.isSearchDisabled)return;let t=e.target;t.closest(".chevron-wrapper")||t.closest(".checkbox-wrapper")||(e.key!=="ArrowUp"&&e.key!=="ArrowDown"&&e.stopPropagation(),e.key==="ArrowRight"&&this.hasChildren&&(this.isExpanded=!0),e.key==="ArrowLeft"&&this.hasChildren&&(this.isExpanded=!1))}notifyMultiselect(){let e=new CustomEvent("ifx-option-changed",{bubbles:!0,detail:{value:this.value,selected:this.selected,indeterminate:this.indeterminate}});this.el.dispatchEvent(e)}selectAllChildren(e){Array.from(this.el.children).filter(i=>i.tagName==="IFX-MULTISELECT-OPTION").forEach(i=>{let l=i.__stencil_instance;l&&(l.selected=e,l.indeterminate=!1,l.hasChildren&&(l.isExpanded=e,l.selectAllChildren(e)),l.notifyMultiselect?.())})}expandAllChildren(e){Array.from(this.el.children).filter(i=>i.tagName==="IFX-MULTISELECT-OPTION").forEach(i=>{let l=i.__stencil_instance;l&&l.hasChildren&&(l.isExpanded=e,l.expandAllChildren(e))})}updateParentStates(){let e=this.el.parentElement;for(;e&&e.tagName==="IFX-MULTISELECT-OPTION";){let t=e.__stencil_instance;if(!t){e=e.parentElement;continue}let i=Array.from(e.children).filter(a=>a.tagName==="IFX-MULTISELECT-OPTION").map(a=>a.__stencil_instance).filter(a=>a!==null),l=i.filter(a=>a.selected).length,s=i.filter(a=>a.indeterminate).length,n=i.length;l===n&&s===0?(t.selected=!0,t.indeterminate=!1):l===0&&s===0?(t.selected=!1,t.indeterminate=!1):(t.selected=!1,t.indeterminate=!0),t.notifyMultiselect?.(),e=e.parentElement}}toggleExpansion(){this.isExpanded=!this.isExpanded}handleCheckboxClick=e=>{if(this.disabled||this.isSearchActive&&this.isSearchDisabled)return;e.stopPropagation();let t;this.indeterminate?t=!0:t=!this.selected,this.selected=t,this.indeterminate=!1,this.hasChildren&&(this.isExpanded=t,requestAnimationFrame(()=>{this.selectAllChildren(t),this.expandAllChildren(t)})),this.updateParentStates(),this.notifyMultiselect()};handleHeaderClick=e=>{e.stopPropagation(),!this.disabled&&!(this.isSearchActive&&this.isSearchDisabled)&&this.handleClick(e)};hasAnySelectedChildren(){return Array.from(this.el.children).filter(t=>t.tagName==="IFX-MULTISELECT-OPTION").some(t=>{let i=t.hasAttribute("selected"),l=this.checkForSelectedDescendants(t);return i||l})}checkForSelectedDescendants(e){return Array.from(e.children).filter(i=>i.tagName==="IFX-MULTISELECT-OPTION").some(i=>{let l=i.hasAttribute("selected"),s=this.checkForSelectedDescendants(i);return l||s})}render(){let e=!1,t=this.el.closest("ifx-multiselect");t&&(e=Array.from(t.querySelectorAll("ifx-multiselect-option")).every(c=>c.children.length===0));let i=this.depth*28+16,l=this.hasChildren?0:28,s=i+l,n=e?void 0:{paddingLeft:`${s}px`};return o(y,{key:"02456f3eb7c3cb9a43bbed255d0c4f8f7773e637"},o("div",{key:"4496cbfb613844d6643ad8796777b55d4ac06dbd",class:{option:!0,"option--has-children":this.hasChildren,"option--expanded":this.isExpanded,"option--disabled":this.disabled,"option--selected":this.selected},role:"option","aria-expanded":this.hasChildren?this.isExpanded?"true":"false":void 0,"aria-selected":this.selected?"true":"false","aria-disabled":this.disabled?"true":"false","data-level":this.depth,"data-value":this.value},o("div",{key:"355abb8b4e86fb26b5cf8a878e6c15a70d97b9ae",class:"option-item",style:n},o("div",{key:"f9623e8ee76f8cee3679b6aaecf130d988e20c9d",class:"chevron-wrapper",tabIndex:this.hasChildren?0:-1,role:this.hasChildren?"button":void 0,"aria-label":this.hasChildren?this.isExpanded?"Collapse":"Expand":void 0,onClick:a=>{a.stopPropagation(),this.toggleExpansion()},onKeyDown:a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),a.stopPropagation(),this.toggleExpansion())}},this.hasChildren&&o("ifx-icon",{key:"d7bb92cbc69bd4ac5f2ce0062070f7b62cf0f0c0",class:`chevron ${this.isExpanded?"chevron--expanded":"chevron--collapsed"}`,icon:"chevron-right-16"})),o("div",{key:"b2abd3d5eb547cd544606b5885e6e93445d5c7ae",class:"checkbox-wrapper",onClick:a=>a.stopPropagation()},o("ifx-checkbox",{key:"ea0c810dc4813cebdb993e413b9d9516e0c79618",size:"s",checked:this.isSearchActive&&this.isSearchDisabled||this.indeterminate?!1:this.selected,indeterminate:this.isSearchActive&&this.isSearchDisabled?!1:this.indeterminate,onClick:this.handleCheckboxClick,disabled:this.disabled||this.isSearchActive&&this.isSearchDisabled,onKeyDown:a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),a.stopPropagation(),this.handleCheckboxClick(a))}})),o("div",{key:"95d76f425080089e93fec232bc984b12dd7a1273",class:"option-label",onClick:this.handleHeaderClick,tabIndex:-1},o("slot",{key:"d4b55c67d8f31bd8b6dfc4756c1eaa7367b183fd"}))),this.isExpanded&&o("div",{key:"4765b74ea8288daf72b6b0f0ce1ecf986f2a0a65",class:"option-children"},o("slot",{key:"75ca13e8068d2f6d2642d44e2f9220a2431b1d41",name:"children"}))))}};return h.style=v,h})();export{L as ifx_multiselect,T as ifx_multiselect_option};
