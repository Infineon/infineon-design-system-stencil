import{b as p,d as c,e as S,f as g,g as u}from"./chunk-MTO4HJKJ.js";import{a as h,b as f}from"./chunk-2R6CW7ES.js";var x=":host{display:flex}.filter-type-group{width:260px;align-items:flex-start;gap:8px}.filter-type-group>::slotted(*){margin-bottom:8px}",C=(()=>{let d=class{constructor(e){p(this,e),this.ifxSidebarFilterChange=u(this,"ifxSidebarFilterChange",7)}get el(){return g(this)}selectedOptions=[];ifxSidebarFilterChange;connectedCallback(){this.el.addEventListener("ifxFilterAccordionChange",this.handleAccordionChange),this.el.addEventListener("ifxFilterSearchChange",this.handleSearchChange),window.addEventListener("ifxResetFiltersEvent",this.handleResetEvent),window.addEventListener("ifxUpdateSidebarFilter",this.handleUpdateSidebarFilter)}disconnectedCallback(){this.el.removeEventListener("ifxFilterAccordionChange",this.handleAccordionChange),this.el.removeEventListener("ifxFilterSearchChange",this.handleSearchChange),window.removeEventListener("ifxResetFiltersEvent",this.handleResetEvent)}handleResetEvent=()=>{this.el.shadowRoot.querySelector('slot[name="filter-accordion"]').assignedElements({flatten:!0}).forEach(t=>{t.querySelectorAll("ifx-list").forEach(a=>{a.resetTrigger=!a.resetTrigger})}),this.el.shadowRoot.querySelector('slot[name="filter-search"]').assignedElements({flatten:!0}).forEach(t=>{let a=t.querySelector("ifx-filter-search").shadowRoot.querySelectorAll("ifx-search-field");a.length>0&&a.forEach(s=>{s.value=""})}),this.selectedOptions=[],this.ifxSidebarFilterChange.emit(this.selectedOptions)};handleUpdateSidebarFilter=e=>{let{filterName:i}=e.detail,r=this.el.shadowRoot.querySelector('slot[name="filter-accordion"]');(r?r.assignedElements({flatten:!0}):[]).forEach(s=>{s.querySelectorAll("ifx-list").forEach(o=>{o.getAttribute("name")===i&&(o.resetTrigger=!o.resetTrigger)})});let t=this.el.shadowRoot.querySelector('slot[name="filter-search"]');(t?t.assignedNodes({flatten:!0}):[]).forEach(s=>{if(s.nodeType===Node.ELEMENT_NODE){let o=s.firstElementChild;o&&(o.setAttribute("value",""),o.dispatchEvent(new CustomEvent("ifxInput",{bubbles:!0,composed:!0,detail:""})))}});let a=this.selectedOptions.map(s=>s.filterGroupName===i?f(h({},s),{selectedItems:[],value:""}):s);this.selectedOptions=a,this.ifxSidebarFilterChange.emit(this.selectedOptions)};handleAccordionChange=e=>{this.handleFilterChange(e)};handleSearchChange=e=>{this.handleFilterChange(e)};handleFilterChange=e=>{let i=[...this.selectedOptions];if(e.type==="ifxFilterSearchChange"){let{filterName:r,filterValue:l}=e.detail,t=i.findIndex(n=>typeof n!="string"&&n.filterGroupName===r);t!==-1?i[t].value=l:i.push({filterGroupName:r,value:l})}else if(e.type==="ifxFilterAccordionChange"){let{filterGroupName:r,selectedItems:l}=e.detail,t=i.findIndex(n=>n.filterGroupName===r);t!==-1?i[t]={filterGroupName:r,selectedItems:l}:i.push({filterGroupName:r,selectedItems:l})}this.selectedOptions=i,this.ifxSidebarFilterChange.emit(this.selectedOptions)};render(){return c(S,{key:"0895dced1c6a33236e0c3b028c41fd7ba6539117"},c("div",{key:"075a863975917da73d73d32a55ee504af521fca3",class:"filter-type-group"},c("slot",{key:"77e4dfb64bc8855505bee9d353e43985d9b3cf35",name:"filter-search"}),c("slot",{key:"2b04050e1b2530d7a3fd4b0adc3f7d40c612b3e4",name:"filter-accordion"})))}};return d.style=x,d})();export{C as ifx_filter_type_group};
