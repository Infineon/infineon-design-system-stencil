# Example Generator

Automatically generates framework-specific example code from Storybook stories.

## What It Does

The Example Generator reads your Storybook stories and automatically creates working examples for:

- ğŸ“„ **HTML** (CDN and Vite)
- âš›ï¸ **React**
- ğŸ…°ï¸ **Angular** (Standalone and Module)
- ğŸŸ¢ **Vue**

This ensures all example apps stay in sync with your component library!

## Quick Start

```bash
# Install dependencies (from monorepo root)
pnpm install

# Run the generator
cd example-generator
pnpm run start
```

## Usage

### Generate Examples Once

```bash
pnpm run start
```

### Watch Mode (Auto-regenerate on changes)

```bash
pnpm run dev
```

### Output Example

```
ğŸš€ Example Generator
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Extracting component information...

âœ… Extracted: Button
âœ… Extracted: Switch
âœ… Extracted: Accordion

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ”¨  Generating HTML/Web Components examples...
   ğŸ“ Generated 0 file(s)
   âœï¸  Updated 1 file(s)

âš›ï¸  Generating React examples...
   ğŸ“ Generated 3 file(s)
   âœï¸  Updated 1 file(s)

ğŸ…°ï¸  Generating Angular examples...
   ğŸ“ Generated 3 file(s)
   âœï¸  Updated 2 file(s)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ¨ Generation complete!
```

## How It Works

### 1. Extract Component Info

Reads Storybook stories from `../packages/components/src/stories/` and extracts:
- Component name and tag
- Props and their default values
- Events
- Available slots

### 2. Generate Framework Code

For each framework, generates:
- Component usage examples
- Event handlers
- Import statements
- TypeScript types

### 3. Update Example Apps

Injects generated code into example apps using special markers:

```html
<!-- <AUTO-GENERATED-COMPONENTS> -->
  <!-- Generated code appears here -->
<!-- </AUTO-GENERATED-COMPONENTS> -->
```

Your custom code outside these markers is **preserved**.

## Marker Regions

### HTML Files

```html
<!-- Example: examples/html-vite-example/index.html -->
<!DOCTYPE html>
<html>
<body>
  <!-- <AUTO-GENERATED-COMPONENTS> -->
    <!-- Button, Switch, etc. examples injected here -->
  <!-- </AUTO-GENERATED-COMPONENTS> -->

  <script>
    /* <AUTO-GENERATED-SCRIPTS> */
    // Event handlers injected here
    /* </AUTO-GENERATED-SCRIPTS> */
  </script>
</body>
</html>
```

### React Files

```tsx
// Example: examples/react-example/src/App.tsx
/* <AUTO-GENERATED-IMPORTS> */
import { IfxButton } from '@infineon/infineon-design-system-react';
/* </AUTO-GENERATED-IMPORTS> */

function App() {
  return (
    <>
      {/* <AUTO-GENERATED-COMPONENTS> */}
      <IfxButton>Click Me</IfxButton>
      {/* </AUTO-GENERATED-COMPONENTS> */}
    </>
  );
}
```

### Angular Files

```typescript
// Example: examples/angular-standalone-example/src/app/generated/
// Individual component files are generated
```

### Vue Files

```vue
<!-- Example: examples/vue-example/src/App.vue -->
<script setup lang="ts">
/* <AUTO-GENERATED-IMPORTS> */
import { ref } from 'vue';
/* </AUTO-GENERATED-IMPORTS> */
</script>

<template>
  <!-- <AUTO-GENERATED-COMPONENTS> -->
  <ifx-button>Click Me</ifx-button>
  <!-- </AUTO-GENERATED-COMPONENTS> -->
</template>
```

## Configuration

The generator needs to be configured in `src/index.ts`:

```typescript
const componentStories = [
  { 
    path: '../../packages/components/src/components/button/button.stories.ts', 
    name: 'Button', 
    stories: ['Default'] 
  },
  { 
    path: '../../packages/components/src/components/switch/switch.stories.ts', 
    name: 'Switch', 
    stories: ['Default'] 
  },
  // Add more components...
];
```

### Adding a New Component

1. Add an entry to the `componentStories` array
2. Specify the **path** to the story file
3. Specify the **name** (display name)
4. Specify which **stories** to extract (e.g., `['Default']` or `['Default', 'Compact']`)

### Example Output Directories

Generated examples are saved to:

- **HTML CDN**: `examples/html-cdn-example/`
- **HTML Vite**: `examples/html-vite-example/`
- **React**: `examples/react-example/src/generated/`
- **Angular**: `examples/angular-*-example/src/app/generated/`
- **Vue**: `examples/vue-example/src/generated/`

## When to Run

Run the generator whenever you:

- âœ… Add a new component
- âœ… Update component props or events
- âœ… Modify Storybook stories
- âœ… Want to sync examples with the latest changes

## Troubleshooting

### Generator not finding stories?

Make sure you're running from the `example-generator/` directory and that Storybook stories exist in `../packages/components/src/stories/`.

### Changes not appearing?

Check that your example app files have the required marker comments (`<!-- <AUTO-GENERATED-COMPONENTS> -->`, etc.).

### Example app not working?

After generating, rebuild the components:

```bash
# From monorepo root
pnpm run build:components

# Then run your example app
pnpm -F react-example dev
```

## Architecture

For technical details about the generator's architecture, see [ARCHITECTURE.md](./ARCHITECTURE.md).

## Scripts

| Script | Description |
|--------|-------------|
| `pnpm run start` | Generate examples once |
| `pnpm run dev` | Watch mode - auto-regenerate on changes |

## Contributing

When adding a new framework:

1. Create a formatter in `src/formatters/`
2. Create a generator in `src/generators/`
3. Register in `src/index.ts`

See [ARCHITECTURE.md](./ARCHITECTURE.md) for details.

---

Part of the [Infineon Design System](../README.md)
