"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[7555],{7555:(_,d,i)=>{i.r(d),i.d(d,{ifx_dropdown:()=>g});var r=i(467),o=i(2438),c=i(7717),p=i(5839),f=i(9143);const g=(()=>{let u=class{constructor(e){(0,o.r)(this,e),this.ifxOpen=(0,o.c)(this,"ifxOpen",7),this.ifxClose=(0,o.c)(this,"ifxClose",7),this.ifxDropdown=(0,o.c)(this,"ifxDropdown",7),this.placement="bottom-start",this.defaultOpen=!1,this.internalIsOpen=!1,this.noAppendToBody=!1,this.noCloseOnOutsideClick=!1,this.noCloseOnMenuClick=!1,this.handleTriggerClick=()=>{this.internalIsOpen?this.closeDropdown():this.openDropdown()},this.handleTriggerKeyDown=t=>{"Tab"===t.key&&this.internalIsOpen&&!t.shiftKey&&(t.preventDefault(),this.focusFirstItem())},this.handleMenuClick=()=>{this.noCloseOnMenuClick||this.closeDropdown()},this.handleMenuKeyDown=t=>{var s,l,a;const n=this.getItemFocusables();if(!n.length)return;const h=n.indexOf(document.activeElement);switch(t.key){case"ArrowDown":t.preventDefault(),n[(h+1)%n.length].focus();break;case"ArrowUp":t.preventDefault(),n[(h-1+n.length)%n.length].focus();break;case"Home":t.preventDefault(),n[0].focus();break;case"End":t.preventDefault(),n[n.length-1].focus();break;case"Enter":case" ":case"Spacebar":t.preventDefault(),null===(s=document.activeElement)||void 0===s||s.click();break;case"Escape":t.preventDefault(),this.closeDropdown(),null===(l=this.trigger)||void 0===l||l.focus();break;case"Tab":t.shiftKey&&0===h&&(t.preventDefault(),this.closeDropdown(),null===(a=this.trigger)||void 0===a||a.focus())}}}handleOutsideClick(e){const t=e.target;!this.noCloseOnOutsideClick&&!this.el.contains(t)&&!this.menu.contains(t)&&this.closeDropdown()}handleFocusOutside(e){const t=e.target;this.internalIsOpen&&!this.el.contains(t)&&!this.menu.contains(t)&&this.closeDropdown()}getItemFocusables(){return this.menu?Array.from(this.menu.querySelectorAll("ifx-dropdown-item")).filter(t=>!("true"===t.getAttribute("hide")||t.classList.contains("hide"))).map(t=>{var s;return null===(s=t.shadowRoot)||void 0===s?void 0:s.querySelector("a")}).filter(t=>!!t):[]}componentWillLoad(){this.updateSlotContent(),this.watchHandlerIsOpen(this.defaultOpen,this.internalIsOpen)}componentDidLoad(){var e=this;return(0,r.A)(function*(){if(!(0,p.i)(e.el)){const t=(0,c.d)();(0,c.t)("ifx-dropdown",yield t)}})()}watchHandlerIsOpen(e,t){e!==t&&e!==this.internalIsOpen&&(e?this.openDropdown():this.closeDropdown())}watchHandlerDisabled(e){this.trigger&&(this.trigger.disabled=e)}watchHandlerSlot(){this.updateSlotContent()}focusFirstItem(){const[e]=this.getItemFocusables();e?.focus()}updateSlotContent(){const e=this.el.querySelector("ifx-dropdown-trigger-button, ifx-dropdown-trigger");e!==this.trigger&&(this.trigger&&(this.trigger.removeEventListener("click",this.handleTriggerClick),this.trigger.removeEventListener("keydown",this.handleTriggerKeyDown)),this.trigger=e,this.trigger&&(this.trigger.disabled=this.disabled,this.trigger.addEventListener("click",this.handleTriggerClick),this.trigger.addEventListener("keydown",this.handleTriggerKeyDown)));const t=this.el.querySelector("ifx-dropdown-menu");this.noAppendToBody?this.menu=t:(this.menu&&this.menu!==t&&(this.menu.removeEventListener("click",this.handleMenuClick),this.menu.removeEventListener("keydown",this.handleMenuKeyDown),this.menu.remove()),this.menu=t,this.menu&&!document.body.contains(this.menu)&&document.body.append(this.menu)),this.menu&&(this.menu.removeEventListener("click",this.handleMenuClick),this.menu.removeEventListener("keydown",this.handleMenuKeyDown),this.menu.addEventListener("click",this.handleMenuClick),this.menu.addEventListener("keydown",this.handleMenuKeyDown))}menuClickHandler(){this.noCloseOnMenuClick||this.closeDropdown()}disconnectedCallback(){this.popperInstance&&(this.popperInstance.destroy(),this.popperInstance=null),this.menu&&this.menu.remove()}isOpen(){var e=this;return(0,r.A)(function*(){return e.internalIsOpen})()}closeDropdown(){var e=this;return(0,r.A)(function*(){e.internalIsOpen&&(e.internalIsOpen=!1,e.trigger.isOpen=!1,e.menu.isOpen=!1,e.ifxClose.emit()),e.popperInstance&&(e.popperInstance.destroy(),e.popperInstance=null)})()}openDropdown(){var e=this;return(0,r.A)(function*(){!e.internalIsOpen&&!e.disabled&&(e.internalIsOpen=!0,e.trigger.isOpen=!0,e.menu.isOpen=!0,e.popperInstance=(0,f.c)(e.el,e.menu,{placement:e.placement}),e.ifxOpen.emit())})()}render(){return(0,o.h)("div",{key:"d86aec49c4c83d1c374ea23ec11fc9587eb04e07","aria-label":"dropdown menu",class:"dropdown"},(0,o.h)("slot",{key:"1e4f399b01e7992c9c9ce198150416f9ac35c727"}))}get el(){return(0,o.g)(this)}static get watchers(){return{defaultOpen:["watchHandlerIsOpen"],disabled:["watchHandlerDisabled"]}}};return u.style=":host{display:inline-block}",u})()}}]);