{"version":3,"file":"ifx-filter-bar.entry-Ezg628_O.js","sources":["../../../../node_modules/.pnpm/@infineon+infineon-design-system-stencil@39.11.1--canary.2198.22093142488.0/node_modules/@infineon/infineon-design-system-stencil/dist/esm/ifx-filter-bar.entry.js"],"sourcesContent":["import { r as registerInstance, c as createEvent, a as getElement, h, d as Host } from './index-CrLZ0MNV.js';\n\nconst filterBarCss = \":host{display:block;width:100%}.search-container{display:flex;width:calc(100% - 48px);padding-left:24px;padding-right:24px;flex-direction:row;align-items:flex-start;margin-bottom:16px}.components-container{display:flex;width:calc(100% - 48px);padding-left:24px;padding-right:24px;flex-direction:row;align-items:flex-end;align-content:flex-end;flex-wrap:wrap;gap:16px}.filter-slot-wrapper{flex-grow:1;flex-basis:100%;max-width:100%}@media (max-width: 1024px){.more-filters-wrapper{order:3;width:100%;display:flex;justify-content:center;padding-top:16px;}}@media (min-width: 720px) and (max-width: 1024px){.filter-slot-wrapper{flex-basis:calc((100% - 16px) / 2);max-width:calc((100% - 16px) / 2)}}@media (min-width: 1025px){.filter-slot-wrapper{flex-basis:auto;max-width:200px}::slotted([slot=filter-search]){max-width:828px}}::slotted([slot=filter-search]){flex-grow:1;flex-basis:100%;width:100%}\";\n\nconst FilterBar = class {\n    constructor(hostRef) {\n        registerInstance(this, hostRef);\n        this.ifxTopbarFilterChange = createEvent(this, \"ifxTopbarFilterChange\", 7);\n    }\n    get el() { return getElement(this); }\n    selectedOptions = [];\n    ifxTopbarFilterChange;\n    showAllFilters = false;\n    maxShownFilters = 4; // Default to 4, can be overridden by parent component\n    visibleSlots;\n    showMoreFiltersButton = true;\n    /* If the component is ever removed and then reattached to the DOM,\nconnectedCallback ensures that the event listeners are properly set up again */\n    connectedCallback() {\n        this.el.addEventListener(\"ifxFilterSelect\", this.handleTopbarFilterChange);\n        this.el.addEventListener(\"ifxFilterSearchChange\", this.handleSearchChange);\n        window.addEventListener(\"ifxResetFiltersEvent\", this.handleResetEvent);\n    }\n    componentWillUnload() {\n        this.el.removeEventListener(\"ifxFilterSelect\", this.handleTopbarFilterChange);\n        this.el.removeEventListener(\"ifxFilterSearchChange\", this.handleSearchChange);\n        window.removeEventListener(\"ifxResetFiltersEvent\", this.handleResetEvent);\n    }\n    componentWillLoad() {\n        this.updateVisibleSlots();\n    }\n    // Modify updateVisibleSlots to use showAllFilters to determine the number of slots\n    updateVisibleSlots() {\n        this.visibleSlots = this.showAllFilters\n            ? Number.MAX_SAFE_INTEGER\n            : this.maxShownFilters;\n    }\n    handleMoreFiltersClick = () => {\n        this.showAllFilters = true;\n        this.updateVisibleSlots(); // Recalculate visible slots based on the new state\n    };\n    handleResetEvent = () => {\n        const filterSearchSlot = this.el.shadowRoot?.querySelector('slot[name=\"filter-search\"]');\n        if (filterSearchSlot instanceof HTMLSlotElement) {\n            // Ensure it's treated as HTMLSlotElement\n            const filterSearchSlottedElements = filterSearchSlot.assignedElements({\n                flatten: true,\n            });\n            filterSearchSlottedElements.forEach((filterSearchWrapper) => {\n                const filterSearch = filterSearchWrapper.querySelector(\"ifx-filter-search\");\n                const searchField = filterSearch.shadowRoot.querySelectorAll(\"ifx-search-field\");\n                if (searchField.length > 0) {\n                    searchField.forEach((searchFieldElement) => {\n                        searchFieldElement.value = \"\";\n                    });\n                }\n            });\n        }\n        this.selectedOptions = [];\n        // Emit the change to inform any parent components that the filters have been reset\n        this.ifxTopbarFilterChange.emit(this.selectedOptions);\n    };\n    handleSearchChange = (event) => {\n        this.handleTopbarFilterChange(event);\n    };\n    handleFilterSelect = (event) => {\n        this.handleTopbarFilterChange(event);\n    };\n    handleTopbarFilterChange = (event) => {\n        const newSelectedOptions = [...this.selectedOptions];\n        if (event.type === \"ifxFilterSearchChange\") {\n            const { filterName, filterValue } = event.detail;\n            const existingOptionIndex = newSelectedOptions.findIndex((option) => option.filterName === filterName);\n            if (existingOptionIndex !== -1) {\n                // If an existing filter is found, update its value\n                newSelectedOptions[existingOptionIndex].filterValues = [filterValue];\n            }\n            else {\n                newSelectedOptions.push({\n                    filterName: filterName,\n                    filterValues: [filterValue],\n                    type: \"text\",\n                });\n            }\n        }\n        else if (event.type === \"ifxFilterSelect\") {\n            const { filterName, filterValues, type } = event.detail;\n            const existingOptionIndex = newSelectedOptions.findIndex((option) => option.filterName === filterName);\n            if (existingOptionIndex !== -1) {\n                newSelectedOptions[existingOptionIndex].filterValues = filterValues;\n                newSelectedOptions[existingOptionIndex].type = type; // Update type based on the number of selected items\n            }\n            else {\n                newSelectedOptions.push({\n                    filterName: filterName,\n                    filterValues: filterValues,\n                    type: type,\n                });\n            }\n        }\n        this.selectedOptions = newSelectedOptions;\n        this.ifxTopbarFilterChange.emit(this.selectedOptions);\n    };\n    render() {\n        const safeVisibleSlots = Math.max(0, this.visibleSlots);\n        const actualNumberOfComponents = this.el.querySelectorAll(\"ifx-set-filter\").length;\n        // Calculate slotsToShow safely\n        const slotsToShow = Math.min(safeVisibleSlots, actualNumberOfComponents, Number.MAX_SAFE_INTEGER);\n        const slots = Array.from({ length: slotsToShow }, (_, i) => (h(\"div\", { class: \"filter-slot-wrapper\" }, h(\"slot\", { name: `filter-component-${i + 1}` }))));\n        return (h(Host, { key: '7a227e3803a7fa44984e2f08fb8681df46136881' }, h(\"div\", { key: 'aa9cc192f4b0b08efaf6c9f6390c844fb00cf57b', class: \"search-container\" }, h(\"slot\", { key: '315551a3622d65b61b78b124013705ff3716607f', name: \"filter-search\" }), \" \"), h(\"div\", { key: '12a9302a9619df28db86e70ab819a46291189202', class: \"components-container\" }, slots.length > 0 ? slots : h(\"slot\", { name: \"filter-component\" }), this.showMoreFiltersButton && !this.showAllFilters && (h(\"div\", { key: '1d3d8ed1eda9704ed7e615885d1150db2782ca60', class: \"more-filters-wrapper\", onClick: this.handleMoreFiltersClick }, h(\"ifx-button\", { key: 'b5a13ae81f46cd5c8c255636902dc12152faa1dd', type: \"button\", disabled: false, variant: \"tertiary\", size: \"m\", target: \"_blank\", theme: \"default\", \"full-width\": \"false\" }, h(\"ifx-icon\", { key: 'd134288470249bded05623d4c3b6921b8ed786fe', icon: \"filter-16\" }), \"More filters\"))))));\n    }\n};\nFilterBar.style = filterBarCss;\n\nexport { FilterBar as ifx_filter_bar };\n//# sourceMappingURL=ifx-filter-bar.entry.js.map\n"],"names":["filterBarCss","FilterBar","hostRef","registerInstance","createEvent","getElement","filterSearchSlot","filterSearchWrapper","searchField","searchFieldElement","event","newSelectedOptions","filterName","filterValue","existingOptionIndex","option","filterValues","type","safeVisibleSlots","actualNumberOfComponents","slotsToShow","slots","_","i","h","Host"],"mappings":"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","x_google_ignoreList":[0]}