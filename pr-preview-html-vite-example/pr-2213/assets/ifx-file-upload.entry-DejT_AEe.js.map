{"version":3,"file":"ifx-file-upload.entry-DejT_AEe.js","sources":["../../../../node_modules/.pnpm/@infineon+infineon-design-system-stencil@39.13.1--canary.2213.22487347784.0/node_modules/@infineon/infineon-design-system-stencil/dist/esm/ifx-file-upload.entry.js"],"sourcesContent":["import { r as registerInstance, c as createEvent, a as getElement, h } from './index-7C3ykVKu.js';\nimport { i as isNestedInIfxComponent } from './dom-utils-CtINY9El.js';\nimport { d as detectFramework, t as trackComponent } from './tracking-DNHOWgWh.js';\n\nconst fileUploadCss = () => `:host{font-family:var(--ifx-font-family, sans-serif)}.file-upload-wrapper{display:flex;flex-direction:column}.file-upload-wrapper.disabled{pointer-events:none}.file-upload-wrapper.disabled label,.file-upload-wrapper.disabled .file-upload-info{color:#575352}.file-upload-label{font-style:normal;font-weight:400;font-size:1rem;line-height:1.5rem;color:#1D1D1D}.file-upload-label .required{display:inline-block;margin-left:4px}.file-upload-label .required.error{color:#CD002F}.upload-dropzone{border:1px dashed #BFBBBB;padding:40px;text-align:center;cursor:pointer;color:#1D1D1D;transition:border-color 0.3s ease;border-radius:1px;background:#FFFFFF}.upload-dropzone ifx-icon{color:#0A8276}.upload-dropzone:hover{border:1px dashed #8D8786}.upload-dropzone.drag-over{border:1px solid #0A8276;background:#F7F7F7}.upload-dropzone.drag-over.error{border:1px solid #0A8276}.upload-dropzone.error{border-color:#CD002F}.disabled .upload-dropzone{pointer-events:none;border-color:#BFBBBB;color:#BFBBBB}.disabled .upload-dropzone ifx-icon{color:#BFBBBB}.upload-dropzone input{display:none}.file-upload-info{font-style:normal;font-weight:400;font-size:0.75rem;line-height:1rem;letter-spacing:0em;color:#1D1D1D;margin:0;margin-top:4px}.file-upload-status{font-style:normal;font-weight:400;font-size:0.75rem;line-height:1rem;letter-spacing:0.2px;margin-top:8px}.file-upload-status.file-upload-status__error{display:flex;align-items:center;color:#CD002F}.file-upload-status.file-upload-status__error ifx-icon{position:relative;top:-1px;color:#CD002F;margin-right:8px}.upload-heading{font:600 1.125rem/1.625rem \"Source Sans 3\";margin-bottom:8px}.file-list-wrapper{margin-top:16px}.file-list{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:16px}.file-item{border:1px solid #BFBBBB;padding-top:12px;padding-right:16px;padding-bottom:8px;padding-left:16px;display:flex;gap:8px}.file-info{width:100%;min-width:0}.file-top-row{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-top:-8px}.file-top-row ifx-icon{flex-shrink:0}.file-name-wrapper{display:flex;min-width:0;max-width:100%;white-space:nowrap;overflow:hidden;font-weight:400;font-size:0.875rem}.file-name-base{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex-shrink:1;min-width:0}.file-name-ext{flex-shrink:0;margin-left:0}.file-middle-row{display:flex;align-items:center;font-size:0.75rem;line-height:1rem;flex-wrap:wrap;color:#575352}.file-middle-row .file-status{margin-left:12px}.file-middle-row .file-status ifx-icon{margin-right:8px}.file-progress-row{margin-top:4px}.file-progress-row ifx-progress-bar{width:100%}.upload-success{border-color:#0A8276}.upload-success .file-status ifx-icon{position:relative;top:1px;color:#4CA460}.upload-failed{border-color:#CD002F}.upload-failed .file-status{color:#CD002F;margin-left:0}`;\n\nconst FileUpload = class {\n    constructor(hostRef) {\n        registerInstance(this, hostRef);\n        this.ifxFileUploadAdd = createEvent(this, \"ifxFileUploadAdd\", 7);\n        this.ifxFileUploadRemove = createEvent(this, \"ifxFileUploadRemove\", 7);\n        this.ifxFileUploadChange = createEvent(this, \"ifxFileUploadChange\", 7);\n        this.ifxFileUploadError = createEvent(this, \"ifxFileUploadError\", 7);\n        this.ifxFileUploadInvalid = createEvent(this, \"ifxFileUploadInvalid\", 7);\n        this.ifxFileUploadStart = createEvent(this, \"ifxFileUploadStart\", 7);\n        this.ifxFileUploadComplete = createEvent(this, \"ifxFileUploadComplete\", 7);\n        this.ifxFileUploadAllComplete = createEvent(this, \"ifxFileUploadAllComplete\", 7);\n        this.ifxFileUploadAbort = createEvent(this, \"ifxFileUploadAbort\", 7);\n        this.ifxFileUploadDrop = createEvent(this, \"ifxFileUploadDrop\", 7);\n        this.ifxFileUploadClick = createEvent(this, \"ifxFileUploadClick\", 7);\n        this.ifxFileUploadMaxFilesExceeded = createEvent(this, \"ifxFileUploadMaxFilesExceeded\", 7);\n        this.ifxFileUploadValidation = createEvent(this, \"ifxFileUploadValidation\", 7);\n        this.ifxFileUploadRetry = createEvent(this, \"ifxFileUploadRetry\", 7);\n    }\n    get hostElement() { return getElement(this); }\n    dragAndDrop = false;\n    required = false;\n    disabled = false;\n    maxFileSizeMB = 7;\n    /** Default set of allowed file extensions (used internally). Can be extended using `additionalAllowedFileTypes`. */\n    allowedFileTypes = undefined;\n    additionalAllowedFileTypes = [];\n    /** When set to true, allows any file type to be uploaded (no file type restrictions). */\n    allowAnyFileType = false;\n    /** Custom file extensions to allow (e.g., 'xml', 'asc', 'cfg'). Recommended format: without dots. Also accepts format with dots like '.xml'. Do not use wildcards like '*.xml'. */\n    allowedFileExtensions = [];\n    uploadHandler;\n    _maxFiles;\n    get maxFiles() {\n        return this._maxFiles;\n    }\n    set maxFiles(value) {\n        if (typeof value === \"number\" && value < 1) {\n            console.warn(\"Invalid `maxFiles` value. Must be >= 1. Value ignored.\");\n            this._maxFiles = undefined;\n        }\n        else {\n            this._maxFiles = value;\n        }\n    }\n    label = \"Label\";\n    labelRequiredError = \"At least one file must be uploaded\";\n    labelBrowseFiles = \"Browse files\";\n    labelDragAndDrop = \"Drag & Drop or browse files to upload\";\n    labelUploadedFilesHeading = \"Uploaded files\";\n    labelFileTooLarge = \"Upload failed. Max file size: {{size}}MB.\";\n    labelUnsupportedFileType = \"Unsupported file type.\";\n    labelUploaded = \"Successfully uploaded\";\n    labelUploadFailed = \"Upload failed. Please try again.\";\n    labelSupportedFormatsTemplate = \"Supported file formats: {{types}}. Max file size: {{size}}MB.\";\n    labelFileSingular = \"file\";\n    labelFilePlural = \"files\";\n    labelMaxFilesInfo = \"Up to {{count}} {{files}}.\";\n    labelMaxFilesExceeded = \"Upload limit exceeded. Only {{count}} {{files}} allowed.\";\n    ariaLabelBrowseFiles = \"Browse files\";\n    ariaLabelDropzone = \"Upload area. Click to browse or drag and drop files.\";\n    ariaLabelFileInput = \"Upload file\";\n    ariaLabelRemoveFile = \"Remove file\";\n    ariaLabelCancelUpload = \"Cancel upload\";\n    ariaLabelRetryUpload = \"Retry upload\";\n    ariaLabelUploadingStatus = \"Upload in progress\";\n    ariaLabelUploadedStatus = \"Upload completed\";\n    ariaLabelUploadFailedStatus = \"Upload failed\";\n    showDemoStates;\n    internalId = `ifx-file-upload-${Math.random().toString(36).substr(2, 9)}`;\n    isDragOver = false;\n    files = [];\n    uploadTasks = [];\n    rejectedSizeFiles = [];\n    rejectedTypeFiles = [];\n    requiredError = false;\n    statusMessage = null;\n    ifxFileUploadAdd;\n    ifxFileUploadRemove;\n    ifxFileUploadChange;\n    ifxFileUploadError;\n    ifxFileUploadInvalid;\n    ifxFileUploadStart;\n    ifxFileUploadComplete;\n    ifxFileUploadAllComplete;\n    ifxFileUploadAbort;\n    ifxFileUploadDrop;\n    ifxFileUploadClick;\n    ifxFileUploadMaxFilesExceeded;\n    ifxFileUploadValidation;\n    ifxFileUploadRetry;\n    fileInputEl = null;\n    extensionToMimeMap = {\n        /**\n         * Maps file extensions to MIME types.\n         * This is only used for translating `allowedFileTypes` (extensions) into MIME types,\n         * and for labeling in the UI. It does NOT define which files are globally allowed.\n         */\n        // Images\n        jpg: \"image/jpeg\",\n        jpeg: \"image/jpeg\",\n        png: \"image/png\",\n        gif: \"image/gif\",\n        svg: \"image/svg+xml\",\n        webp: \"image/webp\",\n        // Documents\n        pdf: \"application/pdf\",\n        doc: \"application/msword\",\n        docx: \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\n        xls: \"application/vnd.ms-excel\",\n        xlsx: \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",\n        ppt: \"application/vnd.ms-powerpoint\",\n        pptx: \"application/vnd.openxmlformats-officedocument.presentationml.presentation\",\n        txt: \"text/plain\",\n        csv: \"text/csv\",\n        json: \"application/json\",\n        // Audio/Video\n        mp3: \"audio/mpeg\",\n        wav: \"audio/wav\",\n        mp4: \"video/mp4\",\n        mov: \"video/quicktime\",\n        webm: \"video/webm\",\n        // Archive / Code\n        zip: \"application/zip\",\n        rar: \"application/vnd.rar\",\n        tar: \"application/x-tar\",\n        gz: \"application/gzip\",\n        // Sonstiges\n        xml: \"application/xml\",\n        html: \"text/html\",\n        css: \"text/css\",\n        js: \"application/javascript\",\n    };\n    validateRequired() {\n        if (this.required && this.files.length === 0) {\n            this.requiredError = true;\n            if (this.statusMessage?.text !== this.labelRequiredError) {\n                this.statusMessage = {\n                    type: \"error\",\n                    text: this.labelRequiredError,\n                };\n            }\n            this.ifxFileUploadValidation.emit({ valid: false });\n        }\n        else {\n            this.requiredError = false;\n            if (this.statusMessage?.text === this.labelRequiredError) {\n                this.statusMessage = null;\n            }\n            this.ifxFileUploadValidation.emit({ valid: true });\n        }\n    }\n    pluralize(count) {\n        // If allowAnyFileType is true, use generic terms\n        if (this.allowAnyFileType) {\n            return count === 1 ? \"file\" : \"files\";\n        }\n        return count === 1 ? this.labelFileSingular : this.labelFilePlural;\n    }\n    getNormalizedFileTypes() {\n        // If allowedFileTypes is not set and allowedFileExtensions is set, return empty array\n        if (!this.allowedFileTypes &&\n            this.allowedFileExtensions &&\n            this.getNormalizedFileExtensions().length > 0) {\n            return [];\n        }\n        // If allowedFileTypes is not set and no allowedFileExtensions, use defaults\n        if (!this.allowedFileTypes) {\n            return [\"jpg\", \"jpeg\", \"png\", \"pdf\", \"mov\", \"mp3\", \"mp4\"];\n        }\n        if (Array.isArray(this.allowedFileTypes)) {\n            return this.allowedFileTypes;\n        }\n        try {\n            return JSON.parse(this.allowedFileTypes);\n        }\n        catch {\n            return this.allowedFileTypes.split(\",\").map((t) => t.trim());\n        }\n    }\n    getNormalizedFileExtensions() {\n        if (!this.allowedFileExtensions)\n            return [];\n        if (Array.isArray(this.allowedFileExtensions)) {\n            return this.allowedFileExtensions;\n        }\n        try {\n            return JSON.parse(this.allowedFileExtensions);\n        }\n        catch {\n            return this.allowedFileExtensions.split(\",\").map((t) => t.trim());\n        }\n    }\n    /**\n     * Enhanced file type validation that supports:\n     * - allowAnyFileType flag for unrestricted uploads (overrides all restrictions)\n     * - allowedFileTypes (predefined extensions mapped to MIME types) - if not set and allowedFileExtensions is set, ignored\n     * - additionalAllowedFileTypes (MIME types)\n     * - allowedFileExtensions (custom extensions) - if only this is set, only these extensions are allowed\n     */\n    isFileTypeAllowed(file) {\n        // If allowAnyFileType is true, accept all files (overrides all restrictions)\n        if (this.allowAnyFileType) {\n            return true;\n        }\n        const fileExtension = this.getFileExtension(file.name);\n        // Check against allowedFileTypes (predefined extensions)\n        const normalizedTypes = this.getNormalizedFileTypes();\n        const allowedMimes = normalizedTypes\n            .map((ext) => this.extensionToMimeMap[ext.toLowerCase()])\n            .filter(Boolean);\n        if (allowedMimes.includes(file.type)) {\n            return true;\n        }\n        // Check against additionalAllowedFileTypes (MIME types)\n        const additionalMimeTypes = this.getAdditionalMimeTypes();\n        if (additionalMimeTypes.includes(file.type)) {\n            return true;\n        }\n        // Check against allowedFileExtensions (custom extensions)\n        const customExtensions = this.getNormalizedFileExtensions();\n        if (customExtensions.length > 0 && fileExtension) {\n            for (const ext of customExtensions) {\n                const normalizedExt = ext.startsWith(\".\")\n                    ? ext.substring(1).toLowerCase()\n                    : ext.toLowerCase();\n                if (fileExtension === normalizedExt) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n    /**\n     * Extracts file extension from filename (without dot)\n     */\n    getFileExtension(filename) {\n        const lastDotIndex = filename.lastIndexOf(\".\");\n        if (lastDotIndex === -1 || lastDotIndex === filename.length - 1) {\n            return null;\n        }\n        return filename.substring(lastDotIndex + 1).toLowerCase();\n    }\n    getLabelFromMimeType(mime) {\n        for (const [ext, knownMime] of Object.entries(this.extensionToMimeMap)) {\n            if (knownMime === mime) {\n                return ext.toUpperCase();\n            }\n        }\n        return mime; // fallback: show raw MIME\n    }\n    handleFileChange(event) {\n        const input = event.target;\n        if (!input.files)\n            return;\n        this.processFiles(input.files);\n    }\n    handleDrop(event) {\n        if (this.disabled)\n            return;\n        event.preventDefault();\n        event.stopPropagation();\n        this.isDragOver = false;\n        if (event.dataTransfer?.files) {\n            const droppedFiles = Array.from(event.dataTransfer.files);\n            const acceptedFiles = [];\n            const rejectedFiles = [];\n            droppedFiles.forEach((file) => {\n                const isValidType = this.isFileTypeAllowed(file);\n                const isValidSize = file.size <= this.maxFileSizeMB * 1024 * 1024;\n                if (isValidType && isValidSize)\n                    acceptedFiles.push(file);\n                else\n                    rejectedFiles.push(file);\n            });\n            this.ifxFileUploadDrop.emit({\n                droppedFiles,\n                acceptedFiles,\n                rejectedFiles,\n            });\n            this.processFiles(event.dataTransfer.files);\n        }\n    }\n    handleDragOver(event) {\n        if (this.disabled)\n            return;\n        event.preventDefault();\n        this.isDragOver = true;\n    }\n    handleDragLeave(event) {\n        if (this.disabled)\n            return;\n        event.preventDefault();\n        this.isDragOver = false;\n    }\n    processFiles(fileList) {\n        const selectedFiles = Array.from(fileList);\n        const validFiles = [];\n        const rejectedSize = [];\n        const rejectedType = [];\n        selectedFiles.forEach((file) => {\n            const isValidType = this.isFileTypeAllowed(file);\n            const isValidSize = file.size <= this.maxFileSizeMB * 1024 * 1024;\n            const isDuplicate = this.files.some((existing) => existing.name === file.name && existing.size === file.size);\n            if (isDuplicate) {\n                this.ifxFileUploadInvalid.emit({ file, reason: \"duplicate\" });\n                this.ifxFileUploadError.emit({\n                    file,\n                    errorType: \"duplicate\",\n                    message: `File \"${file.name}\" is already added`,\n                    reason: \"duplicate\",\n                });\n                return;\n            }\n            if (isValidType && isValidSize) {\n                validFiles.push(file);\n            }\n            else {\n                if (!isValidType) {\n                    rejectedType.push(file.name);\n                    this.ifxFileUploadInvalid.emit({ file, reason: \"invalid-type\" });\n                }\n                if (!isValidSize) {\n                    rejectedSize.push(file.name);\n                    this.ifxFileUploadInvalid.emit({ file, reason: \"invalid-size\" });\n                }\n                this.ifxFileUploadError.emit({\n                    file,\n                    errorType: !isValidType ? \"invalid-type\" : \"file-too-large\",\n                    message: \"Invalid file rejected\",\n                    reason: !isValidType ? \"unsupported-type\" : \"file-too-large\",\n                });\n            }\n        });\n        this.rejectedSizeFiles = [...this.rejectedSizeFiles, ...rejectedSize];\n        this.rejectedTypeFiles = [...this.rejectedTypeFiles, ...rejectedType];\n        if (this.maxFiles &&\n            this.files.length + validFiles.length > this.maxFiles) {\n            const availableSlots = this.maxFiles - this.files.length;\n            const limitedFiles = validFiles.slice(0, Math.max(availableSlots, 0));\n            const overflowFiles = validFiles.slice(availableSlots);\n            this.files = [...this.files, ...limitedFiles];\n            limitedFiles.forEach((file) => this.startUpload(file));\n            if (limitedFiles.length > 0) {\n                this.ifxFileUploadAdd.emit({\n                    addedFiles: limitedFiles,\n                    files: this.files,\n                });\n                this.ifxFileUploadChange.emit({ files: this.files });\n            }\n            overflowFiles.forEach((file) => {\n                this.ifxFileUploadInvalid.emit({ file, reason: \"too-many-files\" });\n                this.ifxFileUploadError.emit({\n                    file,\n                    errorType: \"too-many-files\",\n                    message: `Upload limit exceeded. Max ${this.maxFiles} files allowed.`,\n                    reason: \"too-many-files\",\n                });\n            });\n            if (overflowFiles.length > 0) {\n                this.statusMessage = {\n                    type: \"error\",\n                    text: this.labelMaxFilesExceeded\n                        .replace(\"{{count}}\", this.maxFiles.toString())\n                        .replace(\"{{files}}\", this.pluralize(this.maxFiles)),\n                };\n                this.ifxFileUploadMaxFilesExceeded.emit({\n                    maxFiles: this.maxFiles,\n                    attempted: this.files.length + validFiles.length,\n                });\n            }\n            return;\n        }\n        validFiles.forEach((file) => this.startUpload(file));\n        this.files = [...this.files, ...validFiles];\n        if (validFiles.length > 0) {\n            this.ifxFileUploadAdd.emit({ addedFiles: validFiles, files: this.files });\n            this.ifxFileUploadChange.emit({ files: this.files });\n        }\n        this.validateRequired();\n    }\n    retryUpload(file) {\n        const taskIndex = this.uploadTasks.findIndex((t) => t.file.name === file.name);\n        if (taskIndex !== -1) {\n            this.uploadTasks.splice(taskIndex, 1);\n            this.uploadTasks = [...this.uploadTasks];\n        }\n        this.ifxFileUploadRetry.emit({ file });\n        this.startUpload(file);\n    }\n    checkAndEmitAllComplete() {\n        if (this.uploadTasks.every((t) => t.completed || t.error)) {\n            const hasSuccessfulUploads = this.uploadTasks.some((t) => t.completed && !t.error);\n            if (hasSuccessfulUploads) {\n                const successfulFiles = this.uploadTasks\n                    .filter((t) => t.completed && !t.error)\n                    .map((t) => t.file);\n                this.ifxFileUploadAllComplete.emit({ files: successfulFiles });\n            }\n        }\n    }\n    resetFileInput() {\n        if (this.fileInputEl) {\n            this.fileInputEl.value = \"\";\n        }\n    }\n    updateTaskProgress(file, progress) {\n        const task = this.uploadTasks.find((t) => t.file === file);\n        if (task) {\n            const newProgress = Math.max(task.progress, Math.min(100, progress));\n            if (newProgress !== task.progress) {\n                task.progress = newProgress;\n                this.uploadTasks = [...this.uploadTasks];\n            }\n        }\n    }\n    startUpload(file) {\n        this.ifxFileUploadStart.emit({ file });\n        const task = {\n            file,\n            progress: 3, // Start with initial progress for better UX\n            intervalId: null,\n            completed: false,\n        };\n        this.uploadTasks = [...this.uploadTasks, task];\n        if (this.uploadHandler) {\n            this.uploadHandler(file, (percent) => {\n                this.updateTaskProgress(file, percent);\n            })\n                .then(() => {\n                task.progress = 100;\n                task.completed = true;\n                this.uploadTasks = [...this.uploadTasks];\n                this.ifxFileUploadComplete.emit({ file });\n                this.ifxFileUploadChange.emit({ files: this.files });\n                this.checkAndEmitAllComplete();\n            })\n                .catch(() => {\n                task.error = true;\n                this.uploadTasks = [...this.uploadTasks];\n                this.ifxFileUploadError.emit({\n                    file,\n                    errorType: \"upload-failed\",\n                    message: \"Upload handler rejected file\",\n                    reason: \"custom\",\n                });\n                this.checkAndEmitAllComplete();\n            });\n        }\n        else {\n            const totalSize = file.size;\n            const fakeUploadSpeed = 100000;\n            let uploaded = 0;\n            task.intervalId = window.setInterval(() => {\n                uploaded += fakeUploadSpeed / 5;\n                const progress = Math.min(100, Math.round((uploaded / totalSize) * 100));\n                this.updateTaskProgress(file, progress);\n                if (progress >= 100) {\n                    clearInterval(task.intervalId);\n                    task.completed = true;\n                    task.intervalId = null;\n                    this.uploadTasks = [...this.uploadTasks];\n                    this.ifxFileUploadComplete.emit({ file });\n                    this.ifxFileUploadChange.emit({ files: this.files });\n                    this.checkAndEmitAllComplete();\n                }\n            }, 200);\n        }\n    }\n    cancelUpload(file) {\n        const taskIndex = this.uploadTasks.findIndex((t) => t.file.name === file.name);\n        if (taskIndex !== -1) {\n            const task = this.uploadTasks[taskIndex];\n            if (task?.intervalId !== null) {\n                clearInterval(task.intervalId);\n            }\n            this.uploadTasks = this.uploadTasks.filter((_, i) => i !== taskIndex);\n        }\n        this.files = this.files.filter((f) => f.name !== file.name);\n        this.ifxFileUploadAbort.emit({ file });\n        this.ifxFileUploadChange.emit({ files: this.files });\n        this.resetFileInput();\n        this.validateRequired();\n    }\n    removeFile(file) {\n        this.uploadTasks = this.uploadTasks.filter((task) => task.file.name !== file.name);\n        this.files = this.files.filter((f) => f.name !== file.name);\n        this.ifxFileUploadRemove.emit({ removedFile: file, files: this.files });\n        this.ifxFileUploadChange.emit({ files: this.files });\n        this.validateRequired();\n        this.resetFileInput();\n        if (this.maxFiles &&\n            this.files.length < this.maxFiles &&\n            this.statusMessage?.text !== this.labelRequiredError) {\n            this.statusMessage = null;\n        }\n    }\n    clearRejectedFile(fileName, type) {\n        if (type === \"size\") {\n            this.rejectedSizeFiles = this.rejectedSizeFiles.filter((f) => f !== fileName);\n        }\n        else {\n            this.rejectedTypeFiles = this.rejectedTypeFiles.filter((f) => f !== fileName);\n        }\n        this.resetFileInput();\n        if (this.maxFiles && this.files.length < this.maxFiles) {\n            this.statusMessage = null;\n        }\n        this.validateRequired();\n    }\n    splitFileNameParts(file) {\n        const name = file.name;\n        const dotIndex = name.lastIndexOf(\".\");\n        if (dotIndex === -1)\n            return { base: name, ext: \"\" };\n        return {\n            base: name.substring(0, dotIndex),\n            ext: name.substring(dotIndex),\n        };\n    }\n    getFileIcon(file) {\n        const extension = file.name.split(\".\").pop()?.toLowerCase();\n        switch (extension) {\n            case \"pdf\":\n                return \"file-pdf-16\";\n            case \"jpg\":\n            case \"jpeg\":\n                return \"file-jpg-16\";\n            case \"png\":\n                return \"file-png-16\";\n            case \"mov\":\n                return \"file-mov-16\";\n            case \"mp3\":\n                return \"file-mp3-16\";\n            case \"mp4\":\n                return \"file-mp4-16\";\n            default:\n                return \"file-16\";\n        }\n    }\n    formatSize(bytes) {\n        if (bytes >= 1024 * 1024 * 1024) {\n            return `${(bytes / (1024 * 1024 * 1024)).toFixed(1)} GB`;\n        }\n        else if (bytes >= 1024 * 1024) {\n            return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\n        }\n        else if (bytes >= 1024) {\n            return `${(bytes / 1024).toFixed(0)} KB`;\n        }\n        else {\n            return `${bytes} B`;\n        }\n    }\n    getAcceptAttribute() {\n        // If allowAnyFileType is true, don't restrict the input\n        if (this.allowAnyFileType) {\n            return \"\";\n        }\n        const acceptValues = [];\n        // Add extensions from allowedFileTypes\n        const extensionTypes = this.getNormalizedFileTypes().map((ext) => \".\" + ext.toLowerCase());\n        acceptValues.push(...extensionTypes);\n        // Add MIME types from additionalAllowedFileTypes\n        const mimeTypes = this.getAdditionalMimeTypes();\n        acceptValues.push(...mimeTypes);\n        // Add custom file extensions\n        const customExtensions = this.getNormalizedFileExtensions();\n        customExtensions.forEach((ext) => {\n            const normalizedExt = ext.startsWith(\".\") ? ext : \".\" + ext;\n            acceptValues.push(normalizedExt);\n        });\n        return acceptValues.join(\",\");\n    }\n    getFormattedProgressText(task) {\n        const uploadedSize = Math.round((task.progress / 100) * task.file.size);\n        const uploadedText = this.formatSize(uploadedSize);\n        const totalText = this.formatSize(task.file.size);\n        return `${uploadedText} / ${totalText} uploaded`;\n    }\n    getAdditionalMimeTypes() {\n        if (!this.additionalAllowedFileTypes)\n            return [];\n        if (Array.isArray(this.additionalAllowedFileTypes))\n            return this.additionalAllowedFileTypes;\n        return this.additionalAllowedFileTypes.split(\",\").map((t) => t.trim());\n    }\n    getSupportedFileText() {\n        if (this.allowAnyFileType) {\n            let text = `All file types allowed. Max file size: ${this.maxFileSizeMB}MB.`;\n            if (this.labelMaxFilesInfo && this.maxFiles) {\n                const fileWord = this.pluralize(this.maxFiles);\n                const maxFilesText = this.labelMaxFilesInfo\n                    .replace(\"{{count}}\", this.maxFiles.toString())\n                    .replace(\"{{files}}\", fileWord);\n                text += ` ${maxFilesText}`;\n            }\n            return text;\n        }\n        const allTypes = [];\n        // Add extensions from allowedFileTypes\n        const extensions = this.getNormalizedFileTypes().map((ext) => ext.toUpperCase());\n        allTypes.push(...extensions);\n        // Add MIME types from additionalAllowedFileTypes\n        const mimeTypes = this.getAdditionalMimeTypes().map((mime) => this.getLabelFromMimeType(mime));\n        allTypes.push(...mimeTypes);\n        // Add custom file extensions\n        const customExtensions = this.getNormalizedFileExtensions().map((ext) => {\n            const cleanExt = ext.startsWith(\".\") ? ext.substring(1) : ext;\n            return cleanExt.toUpperCase();\n        });\n        allTypes.push(...customExtensions);\n        const typesLabel = allTypes.join(\", \");\n        let text = this.labelSupportedFormatsTemplate\n            .replace(\"{{types}}\", typesLabel)\n            .replace(\"{{size}}\", this.maxFileSizeMB.toString());\n        if (this.labelMaxFilesInfo && this.maxFiles) {\n            const fileWord = this.pluralize(this.maxFiles);\n            const maxFilesText = this.labelMaxFilesInfo\n                .replace(\"{{count}}\", this.maxFiles.toString())\n                .replace(\"{{files}}\", fileWord);\n            text += ` ${maxFilesText}`;\n        }\n        return text;\n    }\n    getFormattedFileTooLargeText() {\n        return this.labelFileTooLarge.replace(\"{{size}}\", this.maxFileSizeMB.toString());\n    }\n    renderStatusMessage() {\n        if (!this.statusMessage)\n            return null;\n        return (h(\"div\", { class: `file-upload-status file-upload-status__${this.statusMessage.type}` }, this.statusMessage.type === \"error\" && (h(\"ifx-icon\", { icon: \"c-warning-16\" })), this.statusMessage.text));\n    }\n    isInputDisabled() {\n        return (this.disabled ||\n            (this.maxFiles !== undefined && this.files.length >= this.maxFiles));\n    }\n    async componentDidLoad() {\n        if (!isNestedInIfxComponent(this.hostElement)) {\n            const framework = detectFramework();\n            trackComponent(\"ifx-file-upload\", await framework);\n        }\n        if (this.hostElement.hasAttribute(\"show-demo-states\")) {\n            this.showDemoStates = true;\n        }\n        if (this.showDemoStates) {\n            this.injectDemoState();\n        }\n    }\n    // Storybook Demo\n    async injectDemoState() {\n        const dummyContent = new Array(50000).fill(\"a\").join(\"\"); // ~50 KB\n        const bigContent = dummyContent + dummyContent; // ~100 KB\n        const uploading = new File([dummyContent], \"Image.jpg\", {\n            type: \"image/jpeg\",\n        }); // ~50 KB\n        const uploaded = new File([bigContent], \"File.pdf\", {\n            type: \"application/pdf\",\n        }); // ~100 KB\n        const failed = new File([dummyContent], \"Text.docx\", {\n            type: \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\n        }); // ~50 KB\n        const tooLarge = new File([bigContent + bigContent + bigContent], \"Video.mp4\", { type: \"video/mp4\" }); // ~300 KB\n        const unsupported = new File([\"demo\"], \"Script.exe\", {\n            type: \"application/x-msdownload\",\n        }); // very small\n        this.files = [uploaded, uploading, failed];\n        this.uploadTasks = [\n            { file: uploaded, progress: 100, intervalId: null, completed: true },\n            { file: uploading, progress: 40, intervalId: null, completed: false },\n            {\n                file: failed,\n                progress: 80,\n                intervalId: null,\n                completed: false,\n                error: true,\n            },\n        ];\n        this.rejectedSizeFiles = [tooLarge.name];\n        this.rejectedTypeFiles = [unsupported.name];\n    }\n    // Storybook Demo\n    async triggerDemoValidation() {\n        this.validateRequired();\n    }\n    render() {\n        return (h(\"div\", { key: '960822a3f1a7bbb0967e7a2c254f49287a44f465', class: {\n                \"file-upload-wrapper\": true,\n                disabled: this.disabled,\n            } }, this.label && (h(\"label\", { key: 'ccfb6b62c3c168d24b0af60e689b3bf765340ed6', class: \"file-upload-label\", htmlFor: this.internalId }, this.label, this.required && (h(\"span\", { key: 'd40744f816d43a933c5eb1929ecafb0584804872', class: `required ${this.requiredError ? \"error\" : \"\"}` }, \"*\")))), this.dragAndDrop\n            ? this.renderDragAndDropArea()\n            : this.renderUploadArea(), (this.files.length > 0 ||\n            this.rejectedSizeFiles.length > 0 ||\n            this.rejectedTypeFiles.length > 0) && (h(\"div\", { key: '3295fb7ed53df2357f8bf6f02d591f489c89038e', class: \"file-list-wrapper\" }, h(\"div\", { key: 'bdb898a579f718fd38f5fe80d6235a1e3ffd2598', class: \"upload-heading\" }, this.labelUploadedFilesHeading), h(\"ul\", { key: 'eb1b97f7fee39dafbe22fdeaecb486a46ec5824a', class: \"file-list\" }, this.rejectedSizeFiles.map((fileName) => (h(\"li\", { class: \"file-item upload-failed\", key: `rejected-size-${fileName}` }, h(\"div\", { class: \"file-icon\" }, h(\"ifx-icon\", { icon: \"file-16\" })), h(\"div\", { class: \"file-info\" }, h(\"div\", { class: \"file-top-row\" }, h(\"span\", { class: \"file-name-wrapper\" }, h(\"span\", { class: \"file-name-base\" }, this.splitFileNameParts({ name: fileName })\n            .base), h(\"span\", { class: \"file-name-ext\" }, this.splitFileNameParts({ name: fileName })\n            .ext)), h(\"div\", { class: \"file-actions\" }, h(\"ifx-icon-button\", { shape: \"square\", variant: \"tertiary\", icon: \"delete-forever-16\", size: \"s\", \"aria-label\": this.ariaLabelRemoveFile, onClick: () => this.clearRejectedFile(fileName, \"size\") }))), h(\"div\", { class: \"file-middle-row\" }, h(\"span\", { class: \"file-status\", \"aria-label\": this.labelFileTooLarge.replace(\"{{size}}\", this.maxFileSizeMB.toString()) }, this.getFormattedFileTooLargeText())))))), this.rejectedTypeFiles.map((fileName) => (h(\"li\", { class: \"file-item upload-failed\", key: `rejected-type-${fileName}` }, h(\"div\", { class: \"file-icon\" }, h(\"ifx-icon\", { icon: \"file-16\" })), h(\"div\", { class: \"file-info\" }, h(\"div\", { class: \"file-top-row\" }, h(\"span\", { class: \"file-name-wrapper\" }, h(\"span\", { class: \"file-name-base\" }, this.splitFileNameParts({ name: fileName })\n            .base), h(\"span\", { class: \"file-name-ext\" }, this.splitFileNameParts({ name: fileName })\n            .ext)), h(\"div\", { class: \"file-actions\" }, h(\"ifx-icon-button\", { shape: \"square\", variant: \"tertiary\", icon: \"delete-forever-16\", size: \"s\", \"aria-label\": this.ariaLabelRemoveFile, onClick: () => this.clearRejectedFile(fileName, \"type\") }))), h(\"div\", { class: \"file-middle-row\" }, h(\"span\", { class: \"file-status\", \"aria-label\": this.labelUnsupportedFileType }, this.labelUnsupportedFileType)))))), this.files.map((file) => {\n            const task = this.uploadTasks.find((t) => t.file.name === file.name);\n            const progress = task?.progress ?? 100;\n            const isUploading = task && !task.completed;\n            const isError = task?.error === true;\n            const itemClass = isError\n                ? \"file-item upload-failed\"\n                : isUploading\n                    ? \"file-item uploading\"\n                    : \"file-item upload-success\";\n            const uniqueKey = `${file.name}-${file.size}`;\n            const { base, ext } = this.splitFileNameParts(file);\n            return (h(\"li\", { class: itemClass, key: uniqueKey }, h(\"div\", { class: \"file-icon\" }, h(\"ifx-icon\", { icon: this.getFileIcon(file) })), h(\"div\", { class: \"file-info\" }, h(\"div\", { class: \"file-top-row\" }, h(\"span\", { class: \"file-name-wrapper\" }, h(\"span\", { class: \"file-name-base\" }, base), h(\"span\", { class: \"file-name-ext\" }, ext)), h(\"div\", { class: \"file-actions\" }, h(\"ifx-icon-button\", { shape: \"square\", variant: \"tertiary\", icon: \"refresh-16\", size: \"s\", \"aria-label\": this.ariaLabelRetryUpload, onClick: () => this.retryUpload(file), style: {\n                    display: isError ? \"inline-flex\" : \"none\",\n                } }), h(\"ifx-icon-button\", { shape: \"square\", variant: \"tertiary\", icon: \"cross-16\", size: \"s\", \"aria-label\": this.ariaLabelCancelUpload, onClick: () => this.cancelUpload(file), style: {\n                    display: isUploading ? \"inline-flex\" : \"none\",\n                } }), h(\"ifx-icon-button\", { shape: \"square\", variant: \"tertiary\", icon: \"delete-forever-16\", size: \"s\", \"aria-label\": this.ariaLabelRemoveFile, onClick: () => this.removeFile(file), style: {\n                    display: !isUploading ? \"inline-flex\" : \"none\",\n                } }))), h(\"div\", { class: \"file-middle-row\" }, isUploading && task && !task.error && (h(\"span\", { class: \"file-uploading\", \"aria-label\": this.ariaLabelUploadingStatus }, this.getFormattedProgressText(task))), !isUploading && !isError && (h(\"span\", null, h(\"span\", { class: \"file-size\" }, this.formatSize(file.size)), h(\"span\", { class: \"file-status\", \"aria-label\": this.ariaLabelUploadedStatus }, h(\"ifx-icon\", { icon: \"check-16\" }), this.labelUploaded))), isError && (h(\"span\", { class: \"file-status\", \"aria-label\": this.ariaLabelUploadFailedStatus }, this.labelUploadFailed))), isUploading && task && !task.error && (h(\"div\", { class: \"file-progress-row\" }, h(\"ifx-progress-bar\", { size: \"s\", value: progress, \"show-label\": \"true\" }))))));\n        }))))));\n    }\n    renderUploadArea() {\n        const handleInputRef = (el) => {\n            this.fileInputEl = el;\n        };\n        return (h(\"div\", { class: { \"upload-button\": true } }, h(\"ifx-button\", { variant: \"secondary\", onClick: () => this.fileInputEl?.click(), disabled: this.isInputDisabled(), \"aria-label\": this.ariaLabelBrowseFiles }, h(\"ifx-icon\", { icon: \"upload-16\" }), this.labelBrowseFiles), h(\"input\", { id: this.internalId, ref: handleInputRef, type: \"file\", accept: this.getAcceptAttribute(), multiple: true, onChange: (e) => this.handleFileChange(e), style: { display: \"none\" }, disabled: this.isInputDisabled(), \"aria-label\": this.ariaLabelFileInput }), h(\"p\", { class: \"file-upload-info\" }, this.getSupportedFileText()), this.renderStatusMessage()));\n    }\n    renderDragAndDropArea() {\n        const handleInputRef = (el) => {\n            this.fileInputEl = el;\n        };\n        const triggerInputClick = () => {\n            if (this.fileInputEl) {\n                this.fileInputEl.click();\n            }\n        };\n        return (h(\"div\", { class: { disabled: this.isInputDisabled() } }, h(\"div\", { class: {\n                \"upload-dropzone\": true,\n                \"drag-over\": this.isDragOver,\n                error: this.requiredError,\n            }, onClick: triggerInputClick, onDragOver: (e) => this.handleDragOver(e), onDragLeave: (e) => this.handleDragLeave(e), onDrop: (e) => this.handleDrop(e), role: \"button\", tabIndex: 0, \"aria-label\": this.ariaLabelDropzone }, h(\"ifx-icon\", { icon: \"upload-16\", class: \"custom-icon\" }), h(\"p\", null, this.labelDragAndDrop), h(\"p\", { class: \"file-upload-info\" }, this.getSupportedFileText()), h(\"div\", { style: { height: \"0px\", overflow: \"hidden\" } }, h(\"input\", { id: this.internalId, ref: handleInputRef, type: \"file\", accept: this.getAcceptAttribute(), multiple: true, onChange: (e) => this.handleFileChange(e), disabled: this.isInputDisabled(), \"aria-label\": this.ariaLabelFileInput }))), this.renderStatusMessage()));\n    }\n};\nFileUpload.style = fileUploadCss();\n\nexport { FileUpload as ifx_file_upload };\n//# sourceMappingURL=ifx-file-upload.entry.js.map\n\n//# sourceMappingURL=ifx-file-upload.entry.js.map"],"names":["fileUploadCss","FileUpload","hostRef","registerInstance","createEvent","getElement","value","count","t","file","fileExtension","ext","customExtensions","normalizedExt","filename","lastDotIndex","mime","knownMime","event","input","droppedFiles","acceptedFiles","rejectedFiles","isValidType","isValidSize","fileList","selectedFiles","validFiles","rejectedSize","rejectedType","existing","availableSlots","limitedFiles","overflowFiles","taskIndex","successfulFiles","progress","task","newProgress","percent","totalSize","fakeUploadSpeed","uploaded","_","i","f","fileName","type","name","dotIndex","bytes","acceptValues","extensionTypes","mimeTypes","uploadedSize","uploadedText","totalText","text","fileWord","maxFilesText","allTypes","extensions","typesLabel","h","isNestedInIfxComponent","framework","detectFramework","trackComponent","dummyContent","bigContent","uploading","failed","tooLarge","unsupported","isUploading","isError","itemClass","uniqueKey","base","handleInputRef","el","e","triggerInputClick"],"mappings":"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","x_google_ignoreList":[0]}