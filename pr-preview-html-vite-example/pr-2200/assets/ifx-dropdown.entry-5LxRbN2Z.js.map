{"version":3,"file":"ifx-dropdown.entry-5LxRbN2Z.js","sources":["../../../../node_modules/.pnpm/@infineon+infineon-design-system-stencil@39.12.0--canary.2200.22132347763.0/node_modules/@infineon/infineon-design-system-stencil/dist/esm/ifx-dropdown.entry.js"],"sourcesContent":["import { r as registerInstance, c as createEvent, a as getElement, h } from './index-CA_siwAQ.js';\nimport { i as isNestedInIfxComponent } from './dom-utils-CtINY9El.js';\nimport { d as detectFramework, t as trackComponent } from './tracking-DNHOWgWh.js';\nimport { c as createPopper } from './popper-BfP9ezJQ.js';\n\nconst dropdownCss = () => `:host{display:inline-block}`;\n\nconst Dropdown = class {\n    constructor(hostRef) {\n        registerInstance(this, hostRef);\n        this.ifxOpen = createEvent(this, \"ifxOpen\", 7);\n        this.ifxClose = createEvent(this, \"ifxClose\", 7);\n        this.ifxDropdown = createEvent(this, \"ifxDropdown\", 7);\n    }\n    placement = \"bottom-start\";\n    defaultOpen = false;\n    internalIsOpen = false;\n    noAppendToBody = false;\n    ifxOpen;\n    ifxClose;\n    ifxDropdown;\n    disabled;\n    noCloseOnOutsideClick = false;\n    noCloseOnMenuClick = false;\n    get el() { return getElement(this); }\n    trigger;\n    menu;\n    // Popper instance for positioning\n    popperInstance;\n    handleOutsideClick(event) {\n        const target = event.target;\n        if (!this.noCloseOnOutsideClick &&\n            !this.el.contains(target) &&\n            !this.menu.contains(target)) {\n            this.closeDropdown();\n        }\n    }\n    handleFocusOutside(event) {\n        const target = event.target;\n        if (this.internalIsOpen &&\n            !this.el.contains(target) &&\n            !this.menu.contains(target)) {\n            this.closeDropdown();\n        }\n    }\n    handleTriggerClick = () => {\n        if (!this.internalIsOpen)\n            this.openDropdown();\n        else\n            this.closeDropdown();\n    };\n    handleTriggerKeyDown = (e) => {\n        const key = e.key;\n        if (key === \"Tab\" && this.internalIsOpen && !e.shiftKey) {\n            e.preventDefault();\n            this.focusFirstItem();\n        }\n    };\n    handleMenuClick = () => {\n        if (!this.noCloseOnMenuClick)\n            this.closeDropdown();\n    };\n    getItemFocusables() {\n        if (!this.menu)\n            return [];\n        const hosts = Array.from(this.menu.querySelectorAll(\"ifx-dropdown-item\"));\n        return hosts\n            .filter((h) => !(h.getAttribute(\"hide\") === \"true\" || h.classList.contains(\"hide\")))\n            .map((h) => h.shadowRoot?.querySelector(\"a\"))\n            .filter((el) => !!el);\n    }\n    handleMenuKeyDown = (e) => {\n        const items = this.getItemFocusables();\n        if (!items.length)\n            return;\n        const i = items.indexOf(document.activeElement);\n        switch (e.key) {\n            case \"ArrowDown\":\n                e.preventDefault();\n                items[(i + 1) % items.length].focus();\n                break;\n            case \"ArrowUp\":\n                e.preventDefault();\n                items[(i - 1 + items.length) % items.length].focus();\n                break;\n            case \"Home\":\n                e.preventDefault();\n                items[0].focus();\n                break;\n            case \"End\":\n                e.preventDefault();\n                items[items.length - 1].focus();\n                break;\n            case \"Enter\":\n            case \" \":\n            case \"Spacebar\":\n                e.preventDefault();\n                document.activeElement?.click();\n                break;\n            case \"Escape\":\n                e.preventDefault();\n                this.closeDropdown();\n                this.trigger?.focus();\n                break;\n            case \"Tab\":\n                if (e.shiftKey && i === 0) {\n                    e.preventDefault();\n                    this.closeDropdown();\n                    this.trigger?.focus();\n                }\n                break;\n        }\n    };\n    componentWillLoad() {\n        //maybe not needed\n        this.updateSlotContent();\n        this.watchHandlerIsOpen(this.defaultOpen, this.internalIsOpen);\n    }\n    async componentDidLoad() {\n        if (!isNestedInIfxComponent(this.el)) {\n            const framework = detectFramework();\n            trackComponent(\"ifx-dropdown\", await framework);\n        }\n    }\n    watchHandlerIsOpen(newValue, oldValue) {\n        if (newValue !== oldValue && newValue !== this.internalIsOpen) {\n            if (newValue) {\n                this.openDropdown();\n            }\n            else {\n                this.closeDropdown();\n            }\n        }\n    }\n    watchHandlerDisabled(newValue) {\n        if (this.trigger) {\n            this.trigger.disabled = newValue;\n        }\n    }\n    watchHandlerSlot() {\n        this.updateSlotContent();\n    }\n    focusFirstItem() {\n        const [first] = this.getItemFocusables();\n        first?.focus();\n    }\n    updateSlotContent() {\n        const newTrigger = this.el.querySelector(\"ifx-dropdown-trigger-button, ifx-dropdown-trigger\");\n        if (newTrigger !== this.trigger) {\n            if (this.trigger) {\n                this.trigger.removeEventListener(\"click\", this.handleTriggerClick);\n                this.trigger.removeEventListener(\"keydown\", this.handleTriggerKeyDown);\n            }\n            this.trigger = newTrigger;\n            if (this.trigger) {\n                this.trigger.disabled = this.disabled;\n                this.trigger.addEventListener(\"click\", this.handleTriggerClick);\n                this.trigger.addEventListener(\"keydown\", this.handleTriggerKeyDown);\n            }\n        }\n        const newMenu = this.el.querySelector(\"ifx-dropdown-menu\");\n        if (!this.noAppendToBody) {\n            if (this.menu && this.menu !== newMenu) {\n                this.menu.removeEventListener(\"click\", this.handleMenuClick);\n                this.menu.removeEventListener(\"keydown\", this.handleMenuKeyDown);\n                this.menu.remove();\n            }\n            this.menu = newMenu;\n            if (this.menu && !document.body.contains(this.menu)) {\n                document.body.append(this.menu);\n            }\n        }\n        else {\n            this.menu = newMenu;\n        }\n        if (this.menu) {\n            this.menu.removeEventListener(\"click\", this.handleMenuClick);\n            this.menu.removeEventListener(\"keydown\", this.handleMenuKeyDown);\n            this.menu.addEventListener(\"click\", this.handleMenuClick);\n            this.menu.addEventListener(\"keydown\", this.handleMenuKeyDown);\n        }\n    }\n    menuClickHandler() {\n        if (!this.noCloseOnMenuClick) {\n            this.closeDropdown();\n        }\n    }\n    disconnectedCallback() {\n        if (this.popperInstance) {\n            this.popperInstance.destroy();\n            this.popperInstance = null;\n        }\n        if (this.menu) {\n            this.menu.remove();\n        }\n    }\n    async isOpen() {\n        return this.internalIsOpen;\n    }\n    async closeDropdown() {\n        if (this.internalIsOpen) {\n            this.internalIsOpen = false;\n            this.trigger.isOpen = false;\n            this.menu.isOpen = false;\n            this.ifxClose.emit();\n        }\n        if (this.popperInstance) {\n            this.popperInstance.destroy();\n            this.popperInstance = null;\n        }\n    }\n    async openDropdown() {\n        if (!this.internalIsOpen && !this.disabled) {\n            this.internalIsOpen = true;\n            this.trigger.isOpen = true;\n            this.menu.isOpen = true;\n            this.popperInstance = createPopper(this.el, this.menu, {\n                placement: this.placement,\n            });\n            this.ifxOpen.emit();\n        }\n    }\n    render() {\n        return (h(\"div\", { key: '4e98de0e83c6d6ff4416c495270f198bcabcf958', \"aria-label\": \"dropdown menu\", class: \"dropdown\" }, h(\"slot\", { key: 'a89296bd4a261e051586dade43c3815803969aec' })));\n    }\n    static get watchers() { return {\n        \"defaultOpen\": [{\n                \"watchHandlerIsOpen\": 0\n            }],\n        \"disabled\": [{\n                \"watchHandlerDisabled\": 0\n            }]\n    }; }\n};\nDropdown.style = dropdownCss();\n\nexport { Dropdown as ifx_dropdown };\n//# sourceMappingURL=ifx-dropdown.entry.js.map\n\n//# sourceMappingURL=ifx-dropdown.entry.js.map"],"names":["dropdownCss","Dropdown","hostRef","registerInstance","createEvent","getElement","event","target","h","el","items","i","isNestedInIfxComponent","framework","detectFramework","trackComponent","newValue","oldValue","first","newTrigger","newMenu","createPopper"],"mappings":"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","x_google_ignoreList":[0]}