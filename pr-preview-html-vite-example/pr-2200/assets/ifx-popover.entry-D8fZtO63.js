import{r as a,c as p,g as h,h as l}from"./index-xYFmE5wt.js";import{d as f,t as d}from"./tracking-DNHOWgWh-BE-DLK5Z.js";import{i as b}from"./dom-utils-CtINY9El-CZY0_Num.js";const g=()=>":host{display:inline-block;position:relative}.popover__container{position:relative;display:inline-block;font-family:var(--ifx-font-family)}.popover{position:absolute;z-index:1000;display:none;background:#FFFFFF;box-shadow:0 0 16px 0 rgba(29, 29, 29, 0.1);width:var(--ifx-popover-width, 240px);min-width:var(--ifx-popover-width, 240px);max-width:320px;pointer-events:auto;box-sizing:border-box}.popover.visible{display:flex;flex-direction:column}.popover--disabled{opacity:0.5;pointer-events:none}.popover-close{all:unset;cursor:pointer;position:absolute;top:12px;right:12px;z-index:1;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:background-color 0.2s ease}.popover-close:hover{background-color:#F7F7F7}.popover-close:focus{outline:2px solid #0A8276;outline-offset:1px}.popover-content{display:flex;flex-direction:column;padding:12px;gap:4px;text-align:left}.popover-title{font-size:1rem;font-weight:600;color:#1D1D1D;margin:0;padding-right:24px;text-align:left}.popover-text{font-size:0.875rem;font-weight:400;line-height:1.25rem;color:#575352;margin:0;white-space:pre-wrap;word-wrap:break-word;overflow-wrap:anywhere;text-align:left}.popover-arrow-svg{position:absolute;width:12px;height:8px;color:#FFFFFF;pointer-events:none;z-index:1001}.popover-arrow-svg path{fill:currentColor}",n=class{constructor(t){a(this,t),this.ifxOpen=p(this,"ifxOpen",7),this.ifxClose=p(this,"ifxClose",7)}get el(){return h(this)}popoverVisible=!1;computedArrowPosition={};popoverTitle="";text="";position="auto";disabled=!1;open=!1;ariaLabel=null;ifxOpen;ifxClose;static GAP=12;popoverEl;triggerEl;lastOpenTrigger=null;openChanged(t){this.popoverVisible=t,this.popoverEl&&(t?(this.popoverEl.style.visibility="hidden",this.popoverEl.style.display="flex",this.positionPopover(),this.popoverEl.style.visibility="visible"):(this.popoverEl.style.display="none",this.popoverEl.style.visibility=""))}async componentDidLoad(){if(!b(this.el)){const t=f();d("ifx-popover",await t)}this.popoverEl=this.el.shadowRoot.querySelector(".popover"),this.setupTriggerElement(),this.popoverVisible=this.open,this.open&&(this.popoverEl.style.visibility="hidden",this.popoverEl.style.display="flex",this.positionPopover(),this.popoverEl.style.visibility="visible",this.ifxOpen.emit({trigger:this.lastOpenTrigger}))}setupTriggerElement(){this.cleanupTriggerListeners();const t=Array.from(this.el.children);this.triggerEl=t[0]||this.el,this.triggerEl.addEventListener("click",this.onClick)}disconnectedCallback(){this.cleanupTriggerListeners()}cleanupTriggerListeners(){this.triggerEl&&this.triggerEl.removeEventListener("click",this.onClick)}getViewportSpace(t){return{above:t.top,below:window.innerHeight-t.bottom,left:t.left,right:window.innerWidth-t.right}}resetPositioningStyles(){this.popoverEl&&(this.popoverEl.style.top="",this.popoverEl.style.bottom="",this.popoverEl.style.left="",this.popoverEl.style.right="",this.popoverEl.style.transform="",this.popoverEl.style.visibility="")}positionPopover(){if(!this.popoverEl||!this.triggerEl)return;const t=this.triggerEl.getBoundingClientRect(),e=this.popoverEl.getBoundingClientRect(),o=this.getViewportSpace(t);let i=this.position;i==="auto"?i=this.getBestPosition(e,o):i=this.validateAndAdjustPosition(i,e,o),this.resetPositioningStyles();const{popoverStyle:s,arrowStyle:r}=this.calculatePosition(t,e,i);Object.assign(this.popoverEl.style,s),this.computedArrowPosition=r,this.popoverEl.setAttribute("data-placement",i)}getBestPosition(t,e){const o=n.GAP;return e.above>=t.height+o?"top":e.below>=t.height+o?"bottom":e.right>=t.width+o?"right":e.left>=t.width+o?"left":"bottom"}validateAndAdjustPosition(t,e,o){const i=n.GAP;switch(t){case"top":case"top-start":case"top-end":return o.above>=e.height+i?t:o.below>=e.height+i?"bottom":o.left>=e.width+i?"left":o.right>=e.width+i?"right":"bottom";case"bottom":case"bottom-start":case"bottom-end":return o.below>=e.height+i?t:o.above>=e.height+i?"top":o.left>=e.width+i?"left":o.right>=e.width+i?"right":"top";case"left":return o.left>=e.width+i?"left":o.right>=e.width+i?"right":o.below>=e.height+i?"bottom":o.above>=e.height+i?"top":"right";case"right":return o.right>=e.width+i?"right":o.left>=e.width+i?"left":o.below>=e.height+i?"bottom":o.above>=e.height+i?"top":"left";default:return"bottom"}}calculatePosition(t,e,o){const i=n.GAP;let s={position:"absolute",zIndex:"1000"},r={};switch(o){case"top-start":s.left="0px",s.bottom=`${t.height+i}px`,r={top:"100%",left:"12px"};break;case"top-end":s.right="0px",s.bottom=`${t.height+i}px`,r={top:"100%",right:"12px"};break;case"top":s.left=`${t.width/2-e.width/2}px`,s.bottom=`${t.height+i}px`,r={top:"100%",left:"50%",transform:"translateX(-50%)"};break;case"bottom-start":s.left="0px",s.top=`${t.height+i}px`,r={bottom:"100%",left:"12px",transform:"rotate(180deg)"};break;case"bottom-end":s.right="0px",s.top=`${t.height+i}px`,r={bottom:"100%",right:"12px",transform:"rotate(180deg)"};break;case"bottom":s.left=`${t.width/2-e.width/2}px`,s.top=`${t.height+i}px`,r={bottom:"100%",left:"50%",transform:"translateX(-50%) rotate(180deg)"};break;case"left":s.right=`${t.width+i}px`,s.top=`${t.height/2-e.height/2}px`,r={top:"50%",right:"-10px",transform:"translateY(-50%) rotate(-90deg)"};break;case"right":s.left=`${t.width+i}px`,s.top=`${t.height/2-e.height/2}px`,r={top:"50%",left:"-10px",transform:"translateY(-50%) rotate(90deg)"};break}return{popoverStyle:s,arrowStyle:r}}positionChanged(){this.popoverVisible&&setTimeout(()=>this.positionPopover(),0)}async show(){this.disabled||(this.open=!0,this.popoverEl.style.visibility="hidden",this.popoverEl.style.display="flex",this.positionPopover(),this.popoverEl.style.visibility="visible",this.popoverVisible=!0,this.lastOpenTrigger=this.triggerEl||null,this.ifxOpen.emit({trigger:this.lastOpenTrigger}))}async hide(){this.open=!1,this.popoverVisible=!1,this.popoverEl&&(this.popoverEl.style.display="none",this.popoverEl.style.visibility=""),this.ifxClose.emit()}async toggle(){this.popoverVisible?this.hide():this.show()}onClick=t=>{t.stopPropagation(),this.lastOpenTrigger=this.triggerEl||t.currentTarget||null,this.toggle()};onCloseClick=t=>{t.stopPropagation(),this.hide()};render(){const t={popover:!0,visible:this.popoverVisible,"popover--disabled":this.disabled},e={position:"absolute",...this.computedArrowPosition};return l("div",{key:"1099e84c972aa386ccecb006f2b7c584ea9b2150",class:"popover__container","aria-label":this.ariaLabel},l("slot",{key:"17fbf7bd6096c3978479bfb9671507e23c939c27"}),l("div",{key:"75e0a84d2e8a4aa0714c7101be0c3d7670f18d3a",class:t,role:"dialog","aria-modal":"false"},l("button",{key:"d3511c1624466c65350214998bb0a853c2acad56","aria-label":"Close Popover",class:"popover-close",onClick:this.onCloseClick},l("ifx-icon",{key:"e068bd7d599ca59b36ea32941455d3bf6b508330",icon:"cross16"})),l("div",{key:"fab40f54e162be44db69fc74104cbf7e6313f64f",class:"popover-content"},this.popoverTitle&&l("div",{key:"eb762ff5ab6f1103e4702c2b7f7b718761bbfbee",class:"popover-title"},this.popoverTitle),this.text&&l("div",{key:"c5c6ca0bdbd47cce3c1cae942a1e81c0a8eaf4a5",class:"popover-text"},this.text),l("slot",{key:"533789c1b492b0b019fb2896225dee6e961dfe7c",name:"content"})),l("svg",{key:"06a4580f9e6362ff8e5fa911d352466138d5c98a",class:"popover-arrow-svg",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",style:e},l("path",{key:"704caa4a4c7874b04018c278ec5c2e0bcaf9e6b8",d:"M6 8L0 0L12 0L6 8Z",fill:"currentColor"}))))}static get watchers(){return{open:[{openChanged:0}],position:[{positionChanged:0}]}}};n.style=g();export{n as ifx_popover};
//# sourceMappingURL=ifx-popover.entry-D8fZtO63.js.map
