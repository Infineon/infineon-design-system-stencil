import{r as v,c as b,h as s,F as _,g as C}from"./index-CLleB8N8.js";const g='.tree-item{position:relative;cursor:pointer;list-style:none}.tree-item.tree-item--expanded{position:relative}.tree-item.tree-item--has-children{position:relative}.tree-item.tree-item--has-children .tree-item__header>.tree-item__chevron-container{display:flex}.tree-item.tree-item--has-children.tree-item--expanded .tree-item__header>.tree-item__chevron-container::after{display:block}.tree-item--disabled{cursor:not-allowed;pointer-events:none;color:#BFBBBB}.tree-item__content{display:flex;flex-direction:row}.tree-item__content:hover .tree-item__checkbox-container,.tree-item__content:hover .tree-item__header{background-color:#F7F7F7}.tree-item__checkbox-container{position:sticky;left:0;z-index:10;padding:4px;background-color:#FFFFFF}.tree-item__header{flex-grow:1;display:flex;align-items:center;white-space:nowrap;height:20px;padding-top:4px;padding-right:16px;padding-bottom:4px;padding-left:8px}.tree-item__chevron-container{display:none;align-items:center;margin-right:8px;height:20px}.tree-item__chevron-container::after{--height-line-start:28px;display:none;content:"";position:absolute;z-index:1;top:var(--height-line-start);left:auto;margin-left:8px;width:1px;height:calc(100% - var(--height-line-start));background-color:#EEEDED}.tree-item--disabled .tree-item__chevron-container::after{color:#EEEDED}.tree-item__chevron.chevron-down{transform:rotate(90deg)}.tree-item__chevron.chevron-right{transform:rotate(0)}.tree-item__label-icon-container{display:flex;align-items:center}.tree-item__label-icon-container:focus{outline:none}.tree-item__label-icon-container:focus-visible{outline:2px solid #0A8276;outline-offset:2px;border-radius:1px}.tree-item__icon-container{position:relative;width:16px;height:16px}.tree-item__icon-container ifx-icon{position:absolute;left:0;top:0;opacity:1;transition:opacity 0.2s ease-in-out}.tree-item__icon-container ifx-icon.icon--hidden{opacity:0}.tree-item__label{padding-left:8px}.tree-item__children{display:none}.tree-item[aria-expanded=true]>.tree-item__children{display:block}',k=g,E=class{constructor(e){v(this,e),this.ifxTreeViewItemExpandChange=b(this,"ifxTreeViewItemExpandChange",7),this.ifxTreeViewItemCheckChange=b(this,"ifxTreeViewItemCheckChange",7),this.ifxTreeViewItemDisableChange=b(this,"ifxTreeViewItemDisableChange",7),this.expanded=!1,this.initiallyExpanded=!1,this.disableItem=!1,this.hasChildren=!1,this.isChecked=!1,this.partialChecked=!1,this.level=0,this.disableAllItems=!1,this.expandAllItems=!1,this.findChildren=()=>Array.from(this.host.children).filter(t=>t instanceof HTMLElement&&t.tagName==="IFX-TREE-VIEW-ITEM"),this.calculateNodeLevel=()=>{let t=0,i=this.host.parentElement;for(;i;)i.tagName==="IFX-TREE-VIEW-ITEM"&&t++,i=i.parentElement;return t},this.handleStateChange=t=>{this.disabled||(t.stopPropagation(),this.updateCheckState(t.detail.checked))},this.handleCheckboxChange=t=>{var i,n;this.disabled||this.updateCheckState((n=(i=t.detail)===null||i===void 0?void 0:i.checked)!==null&&n!==void 0?n:!this.isChecked)},this.handleHeaderClick=({target:t})=>{this.disabled||t.closest(".tree-item__checkbox-container, .tree-item__chevron-container")||this.updateCheckState(!this.isChecked)},this.toggleExpand=()=>{this.disabled||this.hasChildren&&(this.expanded=!this.expanded)},this.handleKeyDown=t=>{var i,n,d,r,p,m;const o=Array.from(((i=this.host.closest("ifx-tree-view"))===null||i===void 0?void 0:i.querySelectorAll("ifx-tree-view-item"))||[]).filter(a=>{var l,f;let c=(l=a.parentElement)===null||l===void 0?void 0:l.closest("ifx-tree-view-item");for(;c;){const x=c;if(!(x.expandAllItems||x.expanded))return!1;c=(f=c.parentElement)===null||f===void 0?void 0:f.closest("ifx-tree-view-item")}return!0}),u=o.findIndex(a=>a===this.host);function h(a){a==null||a.focus()}switch(t.key){case"ArrowDown":{t.preventDefault();let a=u+1;for(;a<o.length;){const l=o[a];if(!l.disabled){h((n=l.shadowRoot)===null||n===void 0?void 0:n.querySelector(".tree-item__label-icon-container"));break}a++}break}case"ArrowUp":{t.preventDefault();let a=u-1;for(;a>=0;){const l=o[a];if(!l.disabled){h((d=l.shadowRoot)===null||d===void 0?void 0:d.querySelector(".tree-item__label-icon-container"));break}a--}break}case"ArrowRight":{if(t.preventDefault(),!this.isExpanded&&this.hasChildren)this.expanded=!0;else if(this.isExpanded&&this.hasChildren){const a=this.host.querySelector("ifx-tree-view-item");a&&!a.disabled&&h((r=a.shadowRoot)===null||r===void 0?void 0:r.querySelector(".tree-item__label-icon-container"))}break}case"ArrowLeft":{if(t.preventDefault(),this.isExpanded&&this.hasChildren)this.expanded=!1;else{const a=(p=this.host.parentElement)===null||p===void 0?void 0:p.closest("ifx-tree-view-item");a&&!a.disabled&&h((m=a.shadowRoot)===null||m===void 0?void 0:m.querySelector(".tree-item__label-icon-container"))}break}case" ":case"Enter":{t.preventDefault(),this.updateCheckState(!this.isChecked);break}}}}get disabled(){return this.disableAllItems||this.disableItem}get isExpanded(){return this.expandAllItems||this.expanded}componentWillLoad(){this.initializeNode(),this.setupEventListeners()}componentDidLoad(){this.observeDisableAllItems(),this.observeExpandAllItems(),this.shouldExpandFromParent()&&this.expandAllDescendants()}shouldExpandFromParent(){let e=this.host.parentElement;for(;e;){if(e.tagName==="IFX-TREE-VIEW"&&(e.hasAttribute("expand-all-items")||e.hasAttribute("data-expand-all-items")))return!0;e=e.parentElement}return!1}expandAllDescendants(){this.expanded=!0;const e=this.findChildren();for(const t of e)typeof t.expanded<"u"&&(t.expanded=!0),typeof t.expandAllDescendants=="function"&&t.expandAllDescendants()}observeDisableAllItems(){let e=this.host.parentElement;for(;e;){if(e.tagName==="IFX-TREE-VIEW"){new MutationObserver(n=>{for(const d of n)if(d.type==="attributes"&&d.attributeName==="disable-all-items"){const r=e.disableAllItems;this.disableAllItems=!!r||e.hasAttribute("disable-all-items")}}).observe(e,{attributes:!0});const i=e.disableAllItems;this.disableAllItems=!!i||e.hasAttribute("disable-all-items");break}e=e.parentElement}}observeExpandAllItems(){let e=this.host.parentElement;for(;e;){if(e.tagName==="IFX-TREE-VIEW"||e.hasAttribute("data-expand-all-items")){new MutationObserver(i=>{for(const n of i)n.type==="attributes"&&n.attributeName==="data-expand-all-items"&&(this.expandAllItems=e.hasAttribute("data-expand-all-items"))}).observe(e,{attributes:!0}),this.expandAllItems=e.hasAttribute("data-expand-all-items");break}e=e.parentElement}}initializeNode(){this.expanded=this.initiallyExpanded,this.hasChildren=this.findChildren().length>0,this.level=this.calculateNodeLevel(),this.host.setAttribute("data-level",this.level.toString())}setupEventListeners(){this.host.addEventListener("internal-check-state-change",this.handleStateChange)}async updateCheckState(e){this.disabled||(this.setNodeState({isChecked:e,partialChecked:!1}),await this.updateChildrenState(e),this.updateParentState())}handleExpandedChange(e){this.ifxTreeViewItemExpandChange.emit(e)}handleDisableItemChange(e){this.ifxTreeViewItemDisableChange.emit(e)}setNodeState(e){this.isChecked=e.isChecked,this.partialChecked=e.partialChecked,this.ifxTreeViewItemCheckChange.emit({checked:this.isChecked,indeterminate:this.partialChecked})}async updateChildrenState(e){const t=this.findChildren();for(const i of t)await i.componentOnReady(),i.dispatchEvent(new CustomEvent("internal-check-state-change",{detail:{checked:e},bubbles:!1,composed:!0}))}findSiblingNodes(e){const t=e.parentElement;return t?Array.from(t.querySelectorAll("ifx-tree-view-item")).map(i=>i):[]}updateParentState(){var e;const t=(e=this.host.parentElement)===null||e===void 0?void 0:e.closest("ifx-tree-view-item");t&&t.componentOnReady().then(i=>{const n=i;if(!(n!=null&&n.updateParentState))return;const d=this.findSiblingNodes(t),r=this.calculateSiblingStates(d);n.setNodeState({isChecked:r.allChecked,partialChecked:!r.allChecked&&r.someChecked}),n.updateParentState()})}calculateSiblingStates(e){return{allChecked:e.every(t=>t.isChecked),someChecked:e.some(t=>{const i=t;return i.isChecked||i.partialChecked})}}render(){return s("div",{key:"10a31a82078320a73d026ec8d42ae23d78049a9b",class:{"tree-item":!0,"tree-item--expanded":this.isExpanded,"tree-item--has-children":this.hasChildren,"tree-item--disabled":this.disabled},role:"treeitem","aria-expanded":this.isExpanded?"true":"false","data-level":this.level,"aria-disabled":this.disabled?"true":void 0,"aria-label":this.ariaLabel},s("div",{key:"ad1dcf1ca93fd3f35f00d411e8740bfc54dc7c9f",class:"tree-item__content"},this.renderCheckbox(),this.renderHeader()),this.isExpanded&&s("div",{key:"1023010ffb83954bc852cafc18f3b79003ffbf3e",class:"tree-item__children"},s("slot",{key:"c7cd0a61015b29a99b963576c8bc3fd0725541f3"})))}renderHeader(){return s("div",{class:"tree-item__header",style:{paddingLeft:`${this.level*24+10}px`},onClick:this.handleHeaderClick,tabIndex:-1,"aria-disabled":this.disabled?"true":void 0},this.renderControls())}renderCheckbox(){return s("div",{class:"tree-item__checkbox-container",onClick:e=>e.stopPropagation()},s("ifx-checkbox",{size:"s",checked:this.isChecked,indeterminate:this.partialChecked,onIfxChange:this.handleCheckboxChange,disabled:this.disabled}))}renderControls(){return[this.hasChildren&&s("div",{class:"tree-item__chevron-container",onClick:this.toggleExpand},s("ifx-icon",{class:`tree-item__chevron ${this.isExpanded?"chevron-down":"chevron-right"}`,icon:"chevron-right-16"}),s("div",{class:"tree-item__line"})),s("div",{class:"tree-item__label-icon-container",tabIndex:this.disabled?-1:0,onKeyDown:this.handleKeyDown},s("div",{class:"tree-item__icon-container"},this.hasChildren?s(_,null,s("ifx-icon",{class:{"icon--hidden":this.isExpanded},icon:"folder-16"}),s("ifx-icon",{class:{"icon--hidden":!this.isExpanded},icon:"folder-open-16"})):s("ifx-icon",{icon:"file-16"})),s("span",{class:"tree-item__label"},this.label))]}get host(){return C(this)}static get watchers(){return{expanded:["handleExpandedChange"],disableItem:["handleDisableItemChange"]}}};E.style=k;export{E as ifx_tree_view_item};
