import{r as v,c as u,h as l,F as _,g as C}from"./index-BO5KmFY1.js";const k='.tree-item{position:relative;cursor:pointer;list-style:none}.tree-item.tree-item--expanded{position:relative}.tree-item.tree-item--has-children{position:relative}.tree-item.tree-item--has-children .tree-item__header>.tree-item__chevron-container{display:flex}.tree-item.tree-item--has-children.tree-item--expanded .tree-item__header>.tree-item__chevron-container::after{display:block}.tree-item--disabled{cursor:not-allowed;pointer-events:none;color:#BFBBBB}.tree-item__content{display:flex;flex-direction:row}.tree-item__content:hover .tree-item__checkbox-container,.tree-item__content:hover .tree-item__header{background-color:#F7F7F7}.tree-item__checkbox-container{position:sticky;left:0;z-index:10;padding:4px;background-color:#FFFFFF}.tree-item__header{flex-grow:1;display:flex;align-items:center;white-space:nowrap;height:20px;padding-top:4px;padding-right:16px;padding-bottom:4px;padding-left:8px}.tree-item__chevron-container{display:none;align-items:center;margin-right:8px;height:20px}.tree-item__chevron-container::after{--height-line-start:28px;display:none;content:"";position:absolute;z-index:1;top:var(--height-line-start);left:auto;margin-left:8px;width:1px;height:calc(100% - var(--height-line-start));background-color:#EEEDED}.tree-item--disabled .tree-item__chevron-container::after{color:#EEEDED}.tree-item__chevron.chevron-down{transform:rotate(90deg)}.tree-item__chevron.chevron-right{transform:rotate(0)}.tree-item__label-icon-container{display:flex;align-items:center}.tree-item__label-icon-container:focus{outline:none}.tree-item__label-icon-container:focus-visible{outline:2px solid #0A8276;outline-offset:2px;border-radius:1px}.tree-item__icon-container{position:relative;width:16px;height:16px}.tree-item__icon-container ifx-icon{position:absolute;left:0;top:0;opacity:1;transition:opacity 0.2s ease-in-out}.tree-item__icon-container ifx-icon.icon--hidden{opacity:0}.tree-item__label{padding-left:8px}.tree-item__children{display:none}.tree-item[aria-expanded=true]>.tree-item__children{display:block}',E=k,g=class{constructor(e){v(this,e),this.ifxTreeViewItemExpandChange=u(this,"ifxTreeViewItemExpandChange",7),this.ifxTreeViewItemCheckChange=u(this,"ifxTreeViewItemCheckChange",7),this.ifxTreeViewItemDisableChange=u(this,"ifxTreeViewItemDisableChange",7),this.expanded=!1,this.initiallyExpanded=!1,this.disableItem=!1,this.initiallySelected=!1,this.hasChildren=!1,this.isChecked=!1,this.partialChecked=!1,this.level=0,this.disableAllItems=!1,this.expandAllItems=!1,this.suppressExpandEvents=!1,this.findChildren=()=>Array.from(this.host.children).filter(t=>t instanceof HTMLElement&&t.tagName==="IFX-TREE-VIEW-ITEM"),this.calculateNodeLevel=()=>{let t=0,i=this.host.parentElement;for(;i;)i.tagName==="IFX-TREE-VIEW-ITEM"&&t++,i=i.parentElement;return t},this.handleStateChange=t=>{this.disabled||(t.stopPropagation(),this.updateCheckState(t.detail.checked))},this.handleCheckboxChange=t=>{var i,a;this.disabled||this.updateCheckState((a=(i=t.detail)===null||i===void 0?void 0:i.checked)!==null&&a!==void 0?a:!this.isChecked)},this.handleHeaderClick=({target:t})=>{if(!this.disabled&&!t.closest(".tree-item__checkbox-container, .tree-item__chevron-container"))if(this.hasChildren){const i=!this.isChecked;this.updateCheckState(i);const a=i?this.expandOrCollapseAllDescendants(!0):this.expandOrCollapseAllDescendants(!1);this.ifxTreeViewItemExpandChange.emit({expanded:i,affectedItems:a,component:this})}else this.updateCheckState(!this.isChecked)},this.toggleExpand=()=>{this.disabled||!this.hasChildren||(this.expanded=!this.expanded)},this.handleKeyDown=t=>{var i,a,d,n,h,f;const c=Array.from(((i=this.host.closest("ifx-tree-view"))===null||i===void 0?void 0:i.querySelectorAll("ifx-tree-view-item"))||[]).filter(s=>{var r,m;let p=(r=s.parentElement)===null||r===void 0?void 0:r.closest("ifx-tree-view-item");for(;p;){const x=p;if(!(x.expandAllItems||x.expanded))return!1;p=(m=p.parentElement)===null||m===void 0?void 0:m.closest("ifx-tree-view-item")}return!0}),b=c.findIndex(s=>s===this.host),o=s=>s==null?void 0:s.focus();switch(t.key){case"ArrowDown":{t.preventDefault();for(let s=b+1;s<c.length;s++){const r=c[s];if(!r.disabled){o((a=r.shadowRoot)===null||a===void 0?void 0:a.querySelector(".tree-item__label-icon-container"));break}}break}case"ArrowUp":{t.preventDefault();for(let s=b-1;s>=0;s--){const r=c[s];if(!r.disabled){o((d=r.shadowRoot)===null||d===void 0?void 0:d.querySelector(".tree-item__label-icon-container"));break}}break}case"ArrowRight":{if(t.preventDefault(),!this.isExpanded&&this.hasChildren)this.expanded=!0;else if(this.isExpanded&&this.hasChildren){const s=this.host.querySelector("ifx-tree-view-item");s&&!s.disabled&&o((n=s.shadowRoot)===null||n===void 0?void 0:n.querySelector(".tree-item__label-icon-container"))}break}case"ArrowLeft":{if(t.preventDefault(),this.isExpanded&&this.hasChildren)this.expanded=!1;else{const s=(h=this.host.parentElement)===null||h===void 0?void 0:h.closest("ifx-tree-view-item");s&&!s.disabled&&o((f=s.shadowRoot)===null||f===void 0?void 0:f.querySelector(".tree-item__label-icon-container"))}break}case" ":case"Enter":{if(t.preventDefault(),this.hasChildren){const s=!this.isChecked;this.updateCheckState(s);const r=s?this.expandOrCollapseAllDescendants(!0):this.expandOrCollapseAllDescendants(!1);this.ifxTreeViewItemExpandChange.emit({expanded:s,affectedItems:r,component:this})}else this.updateCheckState(!this.isChecked);break}}}}get disabled(){return this.disableAllItems||this.disableItem}get isExpanded(){return this.expandAllItems||this.expanded}componentWillLoad(){this.expanded=this.initiallyExpanded,this.hasChildren=this.findChildren().length>0,this.level=this.calculateNodeLevel(),this.host.setAttribute("data-level",this.level.toString()),this.isChecked=this.initiallySelected,this.host.addEventListener("internal-check-state-change",this.handleStateChange)}componentDidLoad(){this.observeParentAttribute("disable-all-items",e=>this.disableAllItems=e),this.observeParentAttribute("data-expand-all-items",e=>this.expandAllItems=e,!0),this.shouldExpandFromParent()&&this.expandAllDescendants(),this.host.__stencil_instance=this,this.initiallySelected&&setTimeout(()=>this.updateParentState(),0)}observeParentAttribute(e,t,i=!1){let a=this.host.parentElement;for(;a;){if(a.tagName==="IFX-TREE-VIEW"||i&&a.hasAttribute(e)){new MutationObserver(()=>t(a.hasAttribute(e))).observe(a,{attributes:!0}),t(a.hasAttribute(e));break}a=a.parentElement}}shouldExpandFromParent(){let e=this.host.parentElement;for(;e;){if(e.tagName==="IFX-TREE-VIEW"&&(e.hasAttribute("expand-all-items")||e.hasAttribute("data-expand-all-items")))return!0;e=e.parentElement}return!1}expandAllDescendants(){this.expanded=!0,this.findChildren().forEach(e=>{var t,i;e.expanded=!0,(i=(t=e).expandAllDescendants)===null||i===void 0||i.call(t)})}expandOrCollapseAllDescendants(e){this.suppressExpandEvents=!0;const t=[];return this.expanded=e,this.hasChildren&&t.push({expanded:e,value:this.value}),this.findChildren().forEach(i=>{const a=i.__stencil_instance;if(a&&a.hasChildren&&(a.suppressExpandEvents=!0,a.expanded=e,t.push({expanded:e,value:a.value}),a.hasChildren)){const d=a.expandOrCollapseAllDescendants(e);t.push(...d)}}),this.suppressExpandEvents=!1,t}async updateCheckState(e,t=!1){if(!this.disabled)if(!t&&this.hasChildren){const i=this.collectDescendantStates(e);this.setNodeState({isChecked:e,partialChecked:!1},!1),await this.updateChildrenSilently(e),this.ifxTreeViewItemCheckChange.emit({checked:e,indeterminate:!1,value:this.value,affectedChildItems:i,component:this}),this.updateParentState()}else t?this.setNodeState({isChecked:e,partialChecked:!1},!1):(this.setNodeState({isChecked:e,partialChecked:!1}),await this.updateChildrenState(e),this.updateParentState())}async updateChildrenSilently(e){for(const t of this.findChildren()){const i=t.__stencil_instance;i&&!i.disabled&&(i.setNodeState({isChecked:e,partialChecked:!1},!1),await i.updateChildrenSilently(e))}}handleExpandedChange(e){this.suppressExpandEvents||this.ifxTreeViewItemExpandChange.emit({expanded:e,value:this.value,affectedItems:[{expanded:e,value:this.value}],component:this})}handleDisableItemChange(e){this.ifxTreeViewItemDisableChange.emit({disabled:e,component:this})}setNodeState(e,t=!0){this.isChecked=e.isChecked,this.partialChecked=e.partialChecked,t&&this.ifxTreeViewItemCheckChange.emit({checked:this.isChecked,indeterminate:this.partialChecked,value:this.value,level:this.level,disabled:this.disabled,component:this})}collectDescendantStates(e){const t=[],i=(a,d=!1)=>{let n=a===this.host?this:a.__stencil_instance;!d&&!(n!=null&&n.disabled)&&t.push({checked:e,indeterminate:!1,value:n==null?void 0:n.value}),Array.from(a.children).forEach(h=>{h.tagName==="IFX-TREE-VIEW-ITEM"&&i(h,!1)})};return Array.from(this.host.children).forEach(a=>{a.tagName==="IFX-TREE-VIEW-ITEM"&&i(a,!1)}),t}async updateChildrenState(e){for(const t of this.findChildren()){const i=t.__stencil_instance;i&&!i.disabled&&(await t.componentOnReady(),t.dispatchEvent(new CustomEvent("internal-check-state-change",{detail:{checked:e},bubbles:!1,composed:!0})))}}findSiblingNodes(e){return Array.from(e.children).filter(t=>t instanceof HTMLElement&&t.tagName==="IFX-TREE-VIEW-ITEM")}updateParentState(){var e;const t=(e=this.host.parentElement)===null||e===void 0?void 0:e.closest("ifx-tree-view-item");t&&setTimeout(()=>{const i=t.__stencil_instance;if(!i)return;const a=this.findSiblingNodes(t),{allChecked:d,someChecked:n}=this.calculateSiblingStates(a);i.setNodeState({isChecked:d,partialChecked:!d&&n},!1),i.updateParentState()},0)}calculateSiblingStates(e){const t=e.map(d=>{const n=d.__stencil_instance;return{checked:n==null?void 0:n.isChecked,partial:n==null?void 0:n.partialChecked}}),i=t.filter(d=>d.checked).length,a=t.filter(d=>d.partial).length;return{allChecked:t.length>0&&i===t.length&&a===0,someChecked:i>0||a>0}}render(){return l("div",{key:"5de1d25102639e4726b76c41453d00bdc282a9c9",class:{"tree-item":!0,"tree-item--expanded":this.isExpanded,"tree-item--has-children":this.hasChildren,"tree-item--disabled":this.disabled},role:"treeitem","aria-expanded":this.isExpanded?"true":"false","data-level":this.level,"aria-disabled":this.disabled?"true":void 0,"aria-label":this.ariaLabel},l("div",{key:"cbfdafcc0937554ec4915926268019aee9a071df",class:"tree-item__content"},l("div",{key:"9a8e6b36a9a741f0f31b3d7865c9fa0046491f7a",class:"tree-item__checkbox-container",onClick:e=>e.stopPropagation()},l("ifx-checkbox",{key:"1102bcc9f70aaf2fb213f157840c867b227b6bcb",size:"s",checked:this.partialChecked?!1:this.isChecked,indeterminate:this.partialChecked,onIfxChange:this.handleCheckboxChange,disabled:this.disabled})),l("div",{key:"d4d74e0c4a1feaac7fccd97c8fcaa9461b585036",class:"tree-item__header",style:{paddingLeft:`${this.level*24+10}px`},onClick:this.handleHeaderClick,tabIndex:-1,"aria-disabled":this.disabled?"true":void 0},this.hasChildren&&l("div",{key:"7b0d12de5def87778134e4a4194a4ac496ef712d",class:"tree-item__chevron-container",onClick:this.toggleExpand},l("ifx-icon",{key:"1454aad868e6499f08a12358d9ee29adba2615ab",class:`tree-item__chevron ${this.isExpanded?"chevron-down":"chevron-right"}`,icon:"chevron-right-16"}),l("div",{key:"25b68a105342dd0c916ec884834501ba64eb21cb",class:"tree-item__line"})),l("div",{key:"a7df8f5be51cf40debaf958669e1b3ec183811a7",class:"tree-item__label-icon-container",tabIndex:this.disabled?-1:0,onKeyDown:this.handleKeyDown},l("div",{key:"267f3f96ed712c3161b8dc1e8f50056e8dce076d",class:"tree-item__icon-container"},this.hasChildren?l(_,null,l("ifx-icon",{class:{"icon--hidden":this.isExpanded},icon:"folder-16"}),l("ifx-icon",{class:{"icon--hidden":!this.isExpanded},icon:"folder-open-16"})):l("ifx-icon",{icon:"file-16"})),l("span",{key:"a285c8989fec5a33c5ebd4507eb46239a789a775",class:"tree-item__label"},l("slot",{key:"bc637a75a1fc9e2a1f2ac8ec28144b789e9dc58b"}))))),this.isExpanded&&l("div",{key:"e131a8835bc3b4674b60c6620cca2072b0196630",class:"tree-item__children"},l("slot",{key:"c309641ce26171af7bdd0338122ea0aefa077864",name:"children"})))}get host(){return C(this)}static get watchers(){return{expanded:["handleExpandedChange"],disableItem:["handleDisableItemChange"]}}};g.style=E;export{g as ifx_tree_view_item};
