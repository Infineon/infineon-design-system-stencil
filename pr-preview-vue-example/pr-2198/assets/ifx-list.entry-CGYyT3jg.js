import{r as l,c as n,g as a,h as r}from"./index-CkcK8Oc7.js";const o=".link-wrapper{display:flex;flex-direction:column;align-items:center;gap:8px;margin-top:8px}",h=class{constructor(e){l(this,e),this.ifxListUpdate=n(this,"ifxListUpdate",7)}get el(){return a(this)}expanded=!1;showMore=!1;selectedCount=0;totalItems=0;name="";maxVisibleItems=6;type="checkbox";resetTrigger;internalResetTrigger=!1;ifxListUpdate;observer;handleTypeChange(e){this.updateListEntriesType(e)}resetTriggerChanged(e){e&&(this.reset(),this.resetTrigger=!1)}componentWillLoad(){this.setupListenersAndObservers(),this.initializeList()}disconnectedCallback(){this.cleanupListenersAndObservers()}reset(){this.resetListEntries(),this.expanded=!1,this.showMore=!1,this.selectedCount=0,this.ifxListUpdate.emit({name:this.name,selectedItems:[]})}render(){return this.renderList()}setupListenersAndObservers(){this.el.addEventListener("ifxListEntryChange",this.handleCheckedChange),this.observer=new MutationObserver(this.handleMutation),this.observer.observe(this.el,{childList:!0})}cleanupListenersAndObservers(){this.el.removeEventListener("ifxListEntryChange",this.handleCheckedChange),this.observer.disconnect()}initializeList(){this.selectedCount=this.getSelectedItems(this.el).length,this.totalItems=this.getTotalItems(),this.updateListEntriesType(this.type),this.checkRadioButtonConstraint()}updateListEntriesType(e){Array.from(this.el.querySelectorAll("ifx-list-entry")).forEach(i=>i.setAttribute("type",e))}resetListEntries(){Array.from(this.el.querySelectorAll("ifx-list-entry")).forEach(t=>{t.value=!1,t.setAttribute("value","false")})}handleMutation=()=>{const e=this.getTotalItems();e!==this.totalItems&&(this.totalItems=e,this.handleCheckedChange()),this.updateListEntriesType(this.type)};checkRadioButtonConstraint(){this.type==="radio-button"&&this.selectedCount>1&&(this.resetListEntries(),this.selectedCount=0)}getTotalItems(){return this.el.querySelectorAll("ifx-list-entry").length}toggleShowMore=e=>{e.stopPropagation(),this.showMore=!this.showMore};getSelectedItems(e){return Array.from(e.querySelectorAll("ifx-list-entry")).filter(t=>t.getAttribute("value")==="true").map(t=>({label:t.getAttribute("label"),value:t.getAttribute("value"),type:t.getAttribute("type"),element:t}))}handleCheckedChange=e=>{e&&e.detail.type==="radio-button"&&e.detail.value&&Array.from(this.el.querySelectorAll("ifx-list-entry")).filter(s=>s.getAttribute("type")==="radio-button"&&s!==e.target).forEach(s=>s.setAttribute("value","false"));const t=this.getSelectedItems(this.el);this.selectedCount=t.length,this.ifxListUpdate.emit({name:this.name,selectedItems:t})};renderList(){const e=Array.from(this.el.querySelectorAll("ifx-list-entry")),t=this.showMore?e:e.slice(0,this.maxVisibleItems),i=e.length-t.length;return r("div",{class:"list-wrapper"},t.map(s=>r("slot",{name:s.getAttribute("slot")})),(i>0||this.showMore)&&r("div",{class:"link-wrapper",onClick:this.toggleShowMore},r("ifx-icon",{key:this.showMore.toString(),icon:this.showMore?"chevron-up-16":"chevron-down-16"}),r("ifx-link",{size:"s",href:"",target:"_blank",variant:"underlined",disabled:!1},this.showMore?"Show less":`Show ${i} more`)))}static get watchers(){return{type:["handleTypeChange"],resetTrigger:["resetTriggerChanged"]}}};h.style=o;export{h as ifx_list};
