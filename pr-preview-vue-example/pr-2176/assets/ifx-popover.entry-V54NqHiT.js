import{r as a,c as p,g as h,h as l}from"./index-DvdGPfH2.js";import{d as f,t as d}from"./tracking-DNHOWgWh-BE-DLK5Z.js";import{i as g}from"./dom-utils-CtINY9El-CZY0_Num.js";const b=()=>":host{display:inline-block;position:relative}.popover__container{position:relative;display:inline-block;font-family:var(--ifx-font-family)}.popover{position:absolute;z-index:1000;display:none;background:#FFFFFF;box-shadow:0 0 16px 0 rgba(29, 29, 29, 0.1);width:var(--ifx-popover-width, 240px);min-width:var(--ifx-popover-width, 240px);max-width:320px;pointer-events:auto;box-sizing:border-box}.popover.visible{display:flex;flex-direction:column}.popover--disabled{opacity:0.5;pointer-events:none}.popover-close{all:unset;cursor:pointer;position:absolute;top:12px;right:12px;z-index:1;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:background-color 0.2s ease}.popover-close:hover{background-color:#F7F7F7}.popover-close:focus{outline:2px solid #0A8276;outline-offset:1px}.popover-content{display:flex;flex-direction:column;padding:12px;gap:4px;text-align:left}.popover-title{font-size:1rem;font-weight:600;color:#1D1D1D;margin:0;padding-right:24px;text-align:left}.popover-text{font-size:0.875rem;font-weight:400;line-height:1.25rem;color:#575352;margin:0;white-space:pre-wrap;word-wrap:break-word;overflow-wrap:anywhere;text-align:left}.popover-arrow-svg{position:absolute;width:12px;height:8px;color:#FFFFFF;pointer-events:none;z-index:1001}.popover-arrow-svg path{fill:currentColor}",n=class{constructor(t){a(this,t),this.ifxOpen=p(this,"ifxOpen",7),this.ifxClose=p(this,"ifxClose",7)}get el(){return h(this)}popoverVisible=!1;computedArrowPosition={};popoverTitle="";text="";position="auto";disabled=!1;open=!1;ariaLabel=null;ifxOpen;ifxClose;static GAP=12;popoverEl;triggerEl;lastOpenTrigger=null;openChanged(t){this.popoverVisible=t,this.popoverEl&&(t?(this.popoverEl.style.visibility="hidden",this.popoverEl.style.display="flex",this.positionPopover(),this.popoverEl.style.visibility="visible"):(this.popoverEl.style.display="none",this.popoverEl.style.visibility=""))}async componentDidLoad(){if(!g(this.el)){const t=f();d("ifx-popover",await t)}this.popoverEl=this.el.shadowRoot.querySelector(".popover"),this.setupTriggerElement(),this.popoverVisible=this.open,this.open&&(this.popoverEl.style.visibility="hidden",this.popoverEl.style.display="flex",this.positionPopover(),this.popoverEl.style.visibility="visible",this.ifxOpen.emit({trigger:this.lastOpenTrigger}))}setupTriggerElement(){this.cleanupTriggerListeners();const t=Array.from(this.el.children);this.triggerEl=t[0]||this.el,this.triggerEl.addEventListener("click",this.onClick)}disconnectedCallback(){this.cleanupTriggerListeners()}cleanupTriggerListeners(){this.triggerEl&&this.triggerEl.removeEventListener("click",this.onClick)}getViewportSpace(t){return{above:t.top,below:window.innerHeight-t.bottom,left:t.left,right:window.innerWidth-t.right}}resetPositioningStyles(){this.popoverEl&&(this.popoverEl.style.top="",this.popoverEl.style.bottom="",this.popoverEl.style.left="",this.popoverEl.style.right="",this.popoverEl.style.transform="",this.popoverEl.style.visibility="")}positionPopover(){if(!this.popoverEl||!this.triggerEl)return;const t=this.triggerEl.getBoundingClientRect(),e=this.popoverEl.getBoundingClientRect(),o=this.getViewportSpace(t);let i=this.position;i==="auto"?i=this.getBestPosition(e,o):i=this.validateAndAdjustPosition(i,e,o),this.resetPositioningStyles();const{popoverStyle:s,arrowStyle:r}=this.calculatePosition(t,e,i);Object.assign(this.popoverEl.style,s),this.computedArrowPosition=r,this.popoverEl.setAttribute("data-placement",i)}getBestPosition(t,e){const o=n.GAP;return e.above>=t.height+o?"top":e.below>=t.height+o?"bottom":e.right>=t.width+o?"right":e.left>=t.width+o?"left":"bottom"}validateAndAdjustPosition(t,e,o){const i=n.GAP;switch(t){case"top":case"top-start":case"top-end":return o.above>=e.height+i?t:o.below>=e.height+i?"bottom":o.left>=e.width+i?"left":o.right>=e.width+i?"right":"bottom";case"bottom":case"bottom-start":case"bottom-end":return o.below>=e.height+i?t:o.above>=e.height+i?"top":o.left>=e.width+i?"left":o.right>=e.width+i?"right":"top";case"left":return o.left>=e.width+i?"left":o.right>=e.width+i?"right":o.below>=e.height+i?"bottom":o.above>=e.height+i?"top":"right";case"right":return o.right>=e.width+i?"right":o.left>=e.width+i?"left":o.below>=e.height+i?"bottom":o.above>=e.height+i?"top":"left";default:return"bottom"}}calculatePosition(t,e,o){const i=n.GAP,s={position:"absolute",zIndex:"1000"};let r={};switch(o){case"top-start":s.left="0px",s.bottom=`${t.height+i}px`,r={top:"100%",left:"12px"};break;case"top-end":s.right="0px",s.bottom=`${t.height+i}px`,r={top:"100%",right:"12px"};break;case"top":s.left=`${t.width/2-e.width/2}px`,s.bottom=`${t.height+i}px`,r={top:"100%",left:"50%",transform:"translateX(-50%)"};break;case"bottom-start":s.left="0px",s.top=`${t.height+i}px`,r={bottom:"100%",left:"12px",transform:"rotate(180deg)"};break;case"bottom-end":s.right="0px",s.top=`${t.height+i}px`,r={bottom:"100%",right:"12px",transform:"rotate(180deg)"};break;case"bottom":s.left=`${t.width/2-e.width/2}px`,s.top=`${t.height+i}px`,r={bottom:"100%",left:"50%",transform:"translateX(-50%) rotate(180deg)"};break;case"left":s.right=`${t.width+i}px`,s.top=`${t.height/2-e.height/2}px`,r={top:"50%",right:"-10px",transform:"translateY(-50%) rotate(-90deg)"};break;case"right":s.left=`${t.width+i}px`,s.top=`${t.height/2-e.height/2}px`,r={top:"50%",left:"-10px",transform:"translateY(-50%) rotate(90deg)"};break}return{popoverStyle:s,arrowStyle:r}}positionChanged(){this.popoverVisible&&setTimeout(()=>this.positionPopover(),0)}async show(){this.disabled||(this.open=!0,this.popoverEl.style.visibility="hidden",this.popoverEl.style.display="flex",this.positionPopover(),this.popoverEl.style.visibility="visible",this.popoverVisible=!0,this.lastOpenTrigger=this.triggerEl||null,this.ifxOpen.emit({trigger:this.lastOpenTrigger}))}async hide(){this.open=!1,this.popoverVisible=!1,this.popoverEl&&(this.popoverEl.style.display="none",this.popoverEl.style.visibility=""),this.ifxClose.emit()}async toggle(){this.popoverVisible?this.hide():this.show()}onClick=t=>{t.stopPropagation(),this.lastOpenTrigger=this.triggerEl||t.currentTarget||null,this.toggle()};onCloseClick=t=>{t.stopPropagation(),this.hide()};render(){const t={popover:!0,visible:this.popoverVisible,"popover--disabled":this.disabled},e={position:"absolute",...this.computedArrowPosition};return l("div",{key:"6df1ccac2858ac1465b8ec9c9d9be072205f5abb",class:"popover__container","aria-label":this.ariaLabel},l("slot",{key:"ff0e4969a27bcc378f426cb69554f4d75cf19f1d"}),l("div",{key:"3ce6cda72c8c54bdd091d719c6fc4ea96a0cb712",class:t,role:"dialog","aria-modal":"false"},l("button",{key:"60424d02a9087893a1e90d0ed9c65e3c086fd6e4","aria-label":"Close Popover",class:"popover-close",onClick:this.onCloseClick},l("ifx-icon",{key:"95dc11346f37e81153b89b8ab1f0457c73b86210",icon:"cross16"})),l("div",{key:"53dc15c07c1eec8ca8218d336cec352127a36a83",class:"popover-content"},this.popoverTitle&&l("div",{key:"6cfbcfa644c29496d2aae20eb7aa5d82058c9509",class:"popover-title"},this.popoverTitle),this.text&&l("div",{key:"9e207249a1103a16e9b71d7f94b4f721c4d5948f",class:"popover-text"},this.text),l("slot",{key:"7c250683972a49c0a794f00853a3a76637eed177",name:"content"})),l("svg",{key:"51f633cbcd2eb152d1b6bfab04426adc6034d060",class:"popover-arrow-svg",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",style:e},l("path",{key:"882af492e2f84b8d5e9ccf582164fae4669baf74",d:"M6 8L0 0L12 0L6 8Z",fill:"currentColor"}))))}static get watchers(){return{open:[{openChanged:0}],position:[{positionChanged:0}]}}};n.style=b();export{n as ifx_popover};
