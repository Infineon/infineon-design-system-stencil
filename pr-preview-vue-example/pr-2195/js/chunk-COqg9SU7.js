import{r as h,c as p,h as l,g as a}from"./entry-JoovHxSZ.js";import{d,t as f}from"./chunk-BMsXG9Ok.js";import{i as g}from"./chunk-CZY0_Num.js";const b=`:root{--ifx-font-family:"Source Sans 3", 'Arial, sans-serif'}:host{display:inline-block;position:relative}.popover__container{position:relative;display:inline-block;font-family:var(--ifx-font-family)}.popover{position:absolute;z-index:1000;display:none;background:#FFFFFF;box-shadow:0 0 16px 0 rgba(29, 29, 29, 0.1);width:var(--ifx-popover-width, 240px);min-width:var(--ifx-popover-width, 240px);max-width:320px;pointer-events:auto;box-sizing:border-box}.popover.visible{display:flex;flex-direction:column}.popover--disabled{opacity:0.5;pointer-events:none}.popover-close{all:unset;cursor:pointer;position:absolute;top:12px;right:12px;z-index:1;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:background-color 0.2s ease}.popover-close:hover{background-color:#F7F7F7}.popover-close:focus{outline:2px solid #0A8276;outline-offset:1px}.popover-content{display:flex;flex-direction:column;padding:12px;gap:4px;text-align:left}.popover-title{font-size:1rem;font-weight:600;color:#1D1D1D;margin:0;padding-right:24px;text-align:left}.popover-text{font-size:0.875rem;font-weight:400;line-height:1.25rem;color:#575352;margin:0;white-space:pre-wrap;word-wrap:break-word;overflow-wrap:anywhere;text-align:left}.popover-arrow-svg{position:absolute;width:12px;height:8px;color:#FFFFFF;pointer-events:none;z-index:1001}.popover-arrow-svg path{fill:currentColor}`,n=class{constructor(t){h(this,t),this.ifxOpen=p(this,"ifxOpen",7),this.ifxClose=p(this,"ifxClose",7),this.popoverVisible=!1,this.computedArrowPosition={},this.popoverTitle="",this.text="",this.position="auto",this.disabled=!1,this.open=!1,this.ariaLabel=null,this.lastOpenTrigger=null,this.onClick=e=>{e.stopPropagation(),this.lastOpenTrigger=this.triggerEl||e.currentTarget||null,this.toggle()},this.onCloseClick=e=>{e.stopPropagation(),this.hide()}}openChanged(t){this.popoverVisible=t,this.popoverEl&&(t?(this.popoverEl.style.visibility="hidden",this.popoverEl.style.display="flex",this.positionPopover(),this.popoverEl.style.visibility="visible"):(this.popoverEl.style.display="none",this.popoverEl.style.visibility=""))}async componentDidLoad(){if(!g(this.el)){const t=d();f("ifx-popover",await t)}this.popoverEl=this.el.shadowRoot.querySelector(".popover"),this.setupTriggerElement(),this.popoverVisible=this.open,this.open&&(this.popoverEl.style.visibility="hidden",this.popoverEl.style.display="flex",this.positionPopover(),this.popoverEl.style.visibility="visible",this.ifxOpen.emit({trigger:this.lastOpenTrigger}))}setupTriggerElement(){this.cleanupTriggerListeners();const t=Array.from(this.el.children);this.triggerEl=t[0]||this.el,this.triggerEl.addEventListener("click",this.onClick)}disconnectedCallback(){this.cleanupTriggerListeners()}cleanupTriggerListeners(){this.triggerEl&&this.triggerEl.removeEventListener("click",this.onClick)}getViewportSpace(t){return{above:t.top,below:window.innerHeight-t.bottom,left:t.left,right:window.innerWidth-t.right}}resetPositioningStyles(){this.popoverEl&&(this.popoverEl.style.top="",this.popoverEl.style.bottom="",this.popoverEl.style.left="",this.popoverEl.style.right="",this.popoverEl.style.transform="",this.popoverEl.style.visibility="")}positionPopover(){if(!this.popoverEl||!this.triggerEl)return;const t=this.triggerEl.getBoundingClientRect(),e=this.popoverEl.getBoundingClientRect(),o=this.getViewportSpace(t);let i=this.position;i==="auto"?i=this.getBestPosition(e,o):i=this.validateAndAdjustPosition(i,e,o),this.resetPositioningStyles();const{popoverStyle:s,arrowStyle:r}=this.calculatePosition(t,e,i);Object.assign(this.popoverEl.style,s),this.computedArrowPosition=r,this.popoverEl.setAttribute("data-placement",i)}getBestPosition(t,e){const o=n.GAP;return e.above>=t.height+o?"top":e.below>=t.height+o?"bottom":e.right>=t.width+o?"right":e.left>=t.width+o?"left":"bottom"}validateAndAdjustPosition(t,e,o){const i=n.GAP;switch(t){case"top":case"top-start":case"top-end":return o.above>=e.height+i?t:o.below>=e.height+i?"bottom":o.left>=e.width+i?"left":o.right>=e.width+i?"right":"bottom";case"bottom":case"bottom-start":case"bottom-end":return o.below>=e.height+i?t:o.above>=e.height+i?"top":o.left>=e.width+i?"left":o.right>=e.width+i?"right":"top";case"left":return o.left>=e.width+i?"left":o.right>=e.width+i?"right":o.below>=e.height+i?"bottom":o.above>=e.height+i?"top":"right";case"right":return o.right>=e.width+i?"right":o.left>=e.width+i?"left":o.below>=e.height+i?"bottom":o.above>=e.height+i?"top":"left";default:return"bottom"}}calculatePosition(t,e,o){const i=n.GAP;let s={position:"absolute",zIndex:"1000"},r={};switch(o){case"top-start":s.left="0px",s.bottom=`${t.height+i}px`,r={top:"100%",left:"12px"};break;case"top-end":s.right="0px",s.bottom=`${t.height+i}px`,r={top:"100%",right:"12px"};break;case"top":s.left=`${t.width/2-e.width/2}px`,s.bottom=`${t.height+i}px`,r={top:"100%",left:"50%",transform:"translateX(-50%)"};break;case"bottom-start":s.left="0px",s.top=`${t.height+i}px`,r={bottom:"100%",left:"12px",transform:"rotate(180deg)"};break;case"bottom-end":s.right="0px",s.top=`${t.height+i}px`,r={bottom:"100%",right:"12px",transform:"rotate(180deg)"};break;case"bottom":s.left=`${t.width/2-e.width/2}px`,s.top=`${t.height+i}px`,r={bottom:"100%",left:"50%",transform:"translateX(-50%) rotate(180deg)"};break;case"left":s.right=`${t.width+i}px`,s.top=`${t.height/2-e.height/2}px`,r={top:"50%",right:"-10px",transform:"translateY(-50%) rotate(-90deg)"};break;case"right":s.left=`${t.width+i}px`,s.top=`${t.height/2-e.height/2}px`,r={top:"50%",left:"-10px",transform:"translateY(-50%) rotate(90deg)"};break}return{popoverStyle:s,arrowStyle:r}}positionChanged(){this.popoverVisible&&setTimeout(()=>this.positionPopover(),0)}async show(){this.disabled||(this.open=!0,this.popoverEl.style.visibility="hidden",this.popoverEl.style.display="flex",this.positionPopover(),this.popoverEl.style.visibility="visible",this.popoverVisible=!0,this.lastOpenTrigger=this.triggerEl||null,this.ifxOpen.emit({trigger:this.lastOpenTrigger}))}async hide(){this.open=!1,this.popoverVisible=!1,this.popoverEl&&(this.popoverEl.style.display="none",this.popoverEl.style.visibility=""),this.ifxClose.emit()}async toggle(){this.popoverVisible?this.hide():this.show()}render(){const t={popover:!0,visible:this.popoverVisible,"popover--disabled":this.disabled},e=Object.assign({position:"absolute"},this.computedArrowPosition);return l("div",{key:"303ea7500d753c42a25074f1b1bdc6c106729598",class:"popover__container","aria-label":this.ariaLabel},l("slot",{key:"46fe196c789088c80279386664f695e6830dc13f"}),l("div",{key:"8fc1ed4eb8b082b867551b2206b075cb587323e6",class:t,role:"dialog","aria-modal":"false"},l("button",{key:"5980cfdf424e4eb86da32a8b13c94086e89a8340","aria-label":"Close Popover",class:"popover-close",onClick:this.onCloseClick},l("ifx-icon",{key:"4ef2c72ca8eba9d9c6374cb0280b5c437592a339",icon:"cross16"})),l("div",{key:"0c068eb42bf61c17a3dd36d6a8d58dff87d99fa7",class:"popover-content"},this.popoverTitle&&l("div",{key:"456ad161aba2d15f3eb0e24631614103a0ecffef",class:"popover-title"},this.popoverTitle),this.text&&l("div",{key:"4042aa34e47c9ca28d3010fbd2b1d2cc5f39afd5",class:"popover-text"},this.text),l("slot",{key:"03b517429991d808dda7f6c961b2e4faed296799",name:"content"})),l("svg",{key:"add55e836a1044fec672599e48e355c2d66aaa66",class:"popover-arrow-svg",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",style:e},l("path",{key:"4811192306c3d8eaaf9c17d8cc097d043b945cb1",d:"M6 8L0 0L12 0L6 8Z",fill:"currentColor"}))))}get el(){return a(this)}static get watchers(){return{open:["openChanged"],position:["positionChanged"]}}};n.GAP=12;n.style=b;export{n as ifx_popover};
