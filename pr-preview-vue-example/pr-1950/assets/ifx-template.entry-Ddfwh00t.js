import{r as p,c as o,h as r,g as c}from"./index-3b7rGu9l.js";const h=".react__template-wrapper{display:flex;width:300px;height:200px;border-radius:3px;border:1px solid #ccc}.react__template-wrapper.hide{display:none}.react__template-wrapper:hover{cursor:pointer}.template__page-wrapper{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center}.template__page-wrapper .repository__url{text-decoration:none}.input__fields-wrapper{display:flex;flex-direction:column;gap:10px}.details__wrapper{display:flex;flex-direction:column;gap:10px}.selection__buttons-wrapper{display:flex;gap:10px;padding-top:10px;align-items:center}.selection__buttons-wrapper .vue__label{color:#ccc}.selection__buttons-wrapper label:not(.vue__label):hover{cursor:pointer}.selection__buttons-wrapper .selection__input{display:flex;align-items:center;gap:5px}.selection__buttons-wrapper .selection__input input{margin:0;height:20px;width:20px}.selection__buttons-wrapper .selection__input input:hover:not(.vue__input){cursor:pointer}.image__wrapper img{position:relative;width:300px;height:100%;border-radius:3px;object-fit:contain;transition:transform 0.2s}.image__wrapper img:hover{transform:scale(2);top:50px;z-index:100}",d=h,m=class{constructor(e){p(this,e),this.toggleTemplates=o(this,"toggleTemplates",7),this.fieldError=o(this,"fieldError",7),this.repoDetails={name:"",desc:"",framework:""},this.showDetails=!1,this.isTemplatePage=!1,this.isLoading=!0,this.clientId="Ov23lixmXiNTTNb6V5W6",this.redirectUri="https://infineon.github.io/infineon-design-system-stencil/?path=/docs/dds-templates--development",this.scope="repo workflow",this.state="template123"}authUser(){const e=`https://github.com/login/oauth/authorize?client_id=${this.clientId}&redirect_uri=${this.redirectUri}&scope=${this.scope}&state=${this.state}`;window.open(e,"_blank")}componentDidLoad(){const t=new URL(window.location.href).searchParams.get("code"),{templateName:s}=this.getLocalStorageValues();t&&this.name===s&&(this.isTemplatePage=!0,this.toggleTemplates.emit("details"),this.getUserToken(t))}getLocalStorageValues(){const e=localStorage.getItem("repo_name"),t=localStorage.getItem("repo_desc"),s=localStorage.getItem("repo_framework"),a=localStorage.getItem("selectedTemplate");return{repoName:e,repoDesc:t,repoFramework:s,templateName:a}}async getUserToken(e){const{repoName:t,repoDesc:s,repoFramework:a,templateName:l}=this.getLocalStorageValues();fetch(`https://ddstemplate-srv.cfapps.eu10-004.hana.ondemand.com/token/${e}/${t}/${s}/${a}/${l}`).then(i=>i.ok?i.text():i.text().then(n=>{throw new Error(n)})).then(i=>{i&&(this.isLoading=!1,this.repoUrl=i,localStorage.clear())}).catch(i=>{this.repoError=i.message,console.error("Error:",i.message)})}handleUserInput(e,t){t==="name"?this.repoDetails=Object.assign(Object.assign({},this.repoDetails),{name:e.target.value}):t==="desc"?this.repoDetails=Object.assign(Object.assign({},this.repoDetails),{desc:e.target.value}):t==="framework"&&(this.repoDetails=Object.assign(Object.assign({},this.repoDetails),{framework:e.target.value}))}submitUserData(){this.repoDetails.name&&this.repoDetails.desc&&this.repoDetails.framework?(localStorage.setItem("repo_name",this.repoDetails.name),localStorage.setItem("repo_desc",this.repoDetails.desc),localStorage.setItem("repo_framework",this.repoDetails.framework),localStorage.setItem("selectedTemplate",this.name),this.fieldError.emit(!1),this.authUser()):this.fieldError.emit("All fields are mandatory")}togglePadding(e){let t=this.el.parentElement;if(t){const s=t.getRootNode();s instanceof ShadowRoot?t=s.host.parentElement:t=t.parentElement,e==="remove"?t.parentElement.style.padding="0px":e==="add"&&(t.parentElement.style.padding="4rem 20px")}}handleCurrentTemplate(e){if(e&&!this.showDetails){this.togglePadding("remove");const t=e.currentTarget;this.toggleTemplates.emit(t),this.showDetails=!0}}async toggleTemplate(e){const t=this.el.shadowRoot.querySelector(".react__template-wrapper");t&&(!t.classList.contains("hide")&&e?t!==e&&t.classList.add("hide"):(this.showDetails&&(this.showDetails=!1),this.togglePadding("add"),t.classList.remove("hide")))}render(){return r("div",{key:"a6433871f9175e0616c40389d0a39a94797d67b3"},this.isTemplatePage?r("div",{class:"template__page-wrapper"},!this.repoUrl&&!this.repoError&&r("div",null,r("h3",null,"Your repository is getting ready.."),r("p",null,"This will only take a minute.")),this.isLoading&&!this.repoError&&r("div",null,r("ifx-spinner",{variant:"default",size:"s"})),this.repoUrl&&r("ifx-link",{href:this.repoUrl,target:"_parent",size:"m",variant:"underlined"},"Your repository"),this.repoError&&r("div",null,this.repoError)):r("div",{class:"react__template-container"},r("div",{class:"react__template-wrapper",onClick:e=>this.handleCurrentTemplate(e)},r("div",{class:"image__wrapper"},r("img",{src:this.thumbnail}))),this.showDetails&&r("div",{class:"details__wrapper"},r("div",{class:"selection__buttons-wrapper"},r("div",{class:"selection__input"},r("input",{type:"radio",id:"react",name:"chosen_framework",value:"react",onInput:e=>this.handleUserInput(e,"framework")}),r("label",{htmlFor:"react"},"React")),r("div",{class:"selection__input vue"},r("input",{class:"vue__input",disabled:!0,type:"radio",id:"vue",name:"chosen_framework",value:"vue",onInput:e=>this.handleUserInput(e,"framework")}),r("label",{class:"vue__label",htmlFor:"vue"},"Vue")," (Soon)")),r("div",{class:"input__fields-wrapper"},r("ifx-text-field",{required:!0,onInput:e=>this.handleUserInput(e,"name"),size:"m",icon:"c-info-16",placeholder:"Your repository name"},"Repository Name"),r("ifx-text-field",{required:!0,size:"m",icon:"c-info-16",onInput:e=>this.handleUserInput(e,"desc"),placeholder:"Your repository description"},"Repository Description"),r("ifx-button",{fullWidth:!0,onClick:()=>this.submitUserData(),variant:"primary"},"Generate template")))))}get el(){return c(this)}};m.style=d;export{m as ifx_template};
