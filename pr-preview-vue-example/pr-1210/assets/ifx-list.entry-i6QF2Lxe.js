import{r,c as o,h as i,g as n}from"./index-Y0jWb5nt.js";const a=".link-wrapper{display:flex;align-items:center;gap:8px;margin-top:8px}",c=a,d=class{constructor(t){r(this,t),this.ifxListUpdate=o(this,"ifxListUpdate",7),this.toggleList=e=>{e.stopPropagation(),this.expanded=!this.expanded},this.toggleShowMore=e=>{e.stopPropagation(),this.showMore=!this.showMore},this.handleCheckedChange=e=>{e&&e.detail.type==="radio-button"&&e.detail.value&&Array.from(this.el.querySelectorAll("ifx-list-entry")).filter(l=>l.getAttribute("type")==="radio-button"&&l!==e.target).forEach(l=>l.setAttribute("value","false"));const s=this.getSelectedItems(this.el);this.selectedCount=s.length,this.ifxListUpdate.emit({name:this.name,selectedItems:s})},this.expanded=!1,this.showMore=!1,this.selectedCount=0,this.totalItems=0,this.name="",this.maxVisibleItems=6,this.type=void 0}handleTypeChange(t){Array.from(this.el.querySelectorAll("ifx-list-entry")).forEach(s=>s.setAttribute("type",t))}componentWillLoad(){this.el.addEventListener("ifxListEntryChange",this.handleCheckedChange),this.selectedCount=this.getSelectedItems(this.el).length,this.totalItems=this.getTotalItems(),this.handleTypeChange(this.type),this.type==="radio-button"&&this.selectedCount>1&&(this.getSelectedItems(this.el).slice(1).forEach(e=>e.element.setAttribute("value","false")),this.selectedCount=this.getSelectedItems(this.el).length),this.observer=new MutationObserver(()=>{const t=this.getTotalItems();t!==this.totalItems&&(this.totalItems=t,this.handleCheckedChange()),this.handleTypeChange(this.type)}),this.observer.observe(this.el,{childList:!0})}disconnectedCallback(){this.el.removeEventListener("ifxListEntryChange",this.handleCheckedChange),this.observer.disconnect()}getTotalItems(){return this.el.querySelectorAll("ifx-list-entry").length}getSelectedItems(t){return Array.from(t.querySelectorAll("ifx-list-entry")).filter(e=>e.getAttribute("value")==="true").map(e=>({label:e.getAttribute("label"),value:e.getAttribute("value"),element:e}))}render(){const t=Array.from(this.el.querySelectorAll("ifx-list-entry")),e=this.showMore?t:t.slice(0,this.maxVisibleItems),s=t.length-e.length;return i("div",{key:"018d5e7bb5e84f14237263dd0bdec1425c2f544e",class:"list-wrapper"},e.map(h=>i("slot",{name:h.getAttribute("slot")})),(s>0||this.showMore)&&i("div",{class:"link-wrapper",onClick:this.toggleShowMore},i("ifx-icon",{key:this.showMore.toString(),icon:this.showMore?"chevron-up-12":"chevron-down-12"}),i("ifx-link",{size:"s",href:"",target:"_blank",variant:"underlined",disabled:!1},this.showMore?"Show less":`Show ${s} more`)))}get el(){return n(this)}static get watchers(){return{type:["handleTypeChange"]}}};d.style=c;export{d as ifx_list};
