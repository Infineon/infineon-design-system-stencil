"use strict";(self.webpackChunk_infineon_infineon_design_system_stencil=self.webpackChunk_infineon_infineon_design_system_stencil||[]).push([[4651],{"./dist/esm/dom-utils-Bw2fh5LT.js"(__unused_webpack_module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.i=void 0;exports.i=el=>{let parent=el.parentNode;for(;parent;)if(parent instanceof ShadowRoot)parent=parent.host;else{if(parent instanceof HTMLElement&&parent.tagName.toLowerCase().startsWith("ifx"))return!0;parent=parent.parentNode}return!1}},"./dist/esm/framework-detection-DcmcuUOA.js"(__unused_webpack_module,exports,__webpack_require__){var process=__webpack_require__("../../node_modules/process/browser.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.d=void 0,exports.t=function trackComponent(componentName,environment){if(["jest","localhost","error"].includes(environment))return;window.INFINEON_TRACKED_COMPONENTS||(window.INFINEON_TRACKED_COMPONENTS=new Set);if(window.INFINEON_TRACKED_COMPONENTS.has(componentName))return;window.INFINEON_TRACKED_COMPONENTS.add(componentName),window.btnt||function initializeTracking(){t=document,r="script","object"!=typeof window.btntConfig&&(window.btntConfig={domain:"https://ssgtm.infineon.com",withCookies:!0,maxBatchSize:10}),window.btnt||(window.btnt=function(z){"object"!=typeof z&&(z={}),"object"!=typeof window.btntQueue&&(window.btntQueue=[]),window.btntQueue.push(z)},n=t.createElement(r),(pp=t.getElementsByTagName(r)[0])&&pp.parentNode&&(n.async=1,n.src=window.btntConfig.domain+"/btnt.js",pp.parentNode.insertBefore(n,pp)));var t,r,n,pp}();window.btnt({event_name:"component_initialized",component_name:componentName,environment})},void 0!==process&&process.env;let frameworkCache=null;exports.d=async()=>{if(frameworkCache)return frameworkCache;if("undefined"==typeof window||"undefined"==typeof document)return frameworkCache="non-browser",frameworkCache;const win=window,doc=document;void 0!==process&&process.env;if(win.location.search.includes("viewMode")||win.location.href.includes("viewMode")||win.__STORYBOOK_ENV__)return frameworkCache="Storybook",frameworkCache;if(["localhost","127.0.0.1"].includes(win.location.hostname))return frameworkCache="localhost",frameworkCache;try{if(win.React||win.ReactDOM)return frameworkCache="React",frameworkCache;if(win.ng||win.getAllAngularRootElements)return frameworkCache="Angular",frameworkCache;if(win.Vue||win.__VUE__)return frameworkCache="Vue",frameworkCache;await new Promise(resolve=>{if("complete"===document.readyState||"interactive"===document.readyState)resolve();else{const onReady=()=>{resolve(),document.removeEventListener("DOMContentLoaded",onReady)};document.addEventListener("DOMContentLoaded",onReady)}});if(doc.querySelector("[data-reactroot], [data-reactid]"))return frameworkCache="React",frameworkCache;const rootContainers=Array.from(doc.querySelectorAll("body > div"));return rootContainers.some(container=>Object.keys(container).some(key=>key.startsWith("__reactContainer")))?(frameworkCache="React",frameworkCache):doc.querySelector("[ng-version], [ng-app]")?(frameworkCache="Angular",frameworkCache):doc.querySelector("[data-v-app]")?(frameworkCache="Vue",frameworkCache):(frameworkCache="Vanilla",frameworkCache)}catch(e){return frameworkCache="error",frameworkCache}}},"./dist/esm/ifx-file-upload.entry.js"(__unused_webpack_module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.ifx_file_upload=void 0;var _indexDtIEDtZ=__webpack_require__("./dist/esm/index-DtIEDtZ8.js"),_frameworkDetectionDcmcuUOA=__webpack_require__("./dist/esm/framework-detection-DcmcuUOA.js"),_domUtilsBw2fh5LT=__webpack_require__("./dist/esm/dom-utils-Bw2fh5LT.js");const FileUpload=class{constructor(hostRef){(0,_indexDtIEDtZ.r)(this,hostRef),this.ifxFileUploadAdd=(0,_indexDtIEDtZ.c)(this,"ifxFileUploadAdd",7),this.ifxFileUploadRemove=(0,_indexDtIEDtZ.c)(this,"ifxFileUploadRemove",7),this.ifxFileUploadChange=(0,_indexDtIEDtZ.c)(this,"ifxFileUploadChange",7),this.ifxFileUploadError=(0,_indexDtIEDtZ.c)(this,"ifxFileUploadError",7),this.ifxFileUploadInvalid=(0,_indexDtIEDtZ.c)(this,"ifxFileUploadInvalid",7),this.ifxFileUploadStart=(0,_indexDtIEDtZ.c)(this,"ifxFileUploadStart",7),this.ifxFileUploadComplete=(0,_indexDtIEDtZ.c)(this,"ifxFileUploadComplete",7),this.ifxFileUploadAllComplete=(0,_indexDtIEDtZ.c)(this,"ifxFileUploadAllComplete",7),this.ifxFileUploadAbort=(0,_indexDtIEDtZ.c)(this,"ifxFileUploadAbort",7),this.ifxFileUploadDrop=(0,_indexDtIEDtZ.c)(this,"ifxFileUploadDrop",7),this.ifxFileUploadClick=(0,_indexDtIEDtZ.c)(this,"ifxFileUploadClick",7),this.ifxFileUploadMaxFilesExceeded=(0,_indexDtIEDtZ.c)(this,"ifxFileUploadMaxFilesExceeded",7),this.ifxFileUploadValidation=(0,_indexDtIEDtZ.c)(this,"ifxFileUploadValidation",7),this.ifxFileUploadRetry=(0,_indexDtIEDtZ.c)(this,"ifxFileUploadRetry",7),this.dragAndDrop=!1,this.required=!1,this.disabled=!1,this.maxFileSizeMB=7,this.allowedFileTypes=void 0,this.additionalAllowedFileTypes=[],this.allowAnyFileType=!1,this.allowedFileExtensions=[],this.label="Label",this.labelRequiredError="At least one file must be uploaded",this.labelBrowseFiles="Browse files",this.labelDragAndDrop="Drag & Drop or browse files to upload",this.labelUploadedFilesHeading="Uploaded files",this.labelFileTooLarge="Upload failed. Max file size: {{size}}MB.",this.labelUnsupportedFileType="Unsupported file type.",this.labelUploaded="Successfully uploaded",this.labelUploadFailed="Upload failed. Please try again.",this.labelSupportedFormatsTemplate="Supported file formats: {{types}}. Max file size: {{size}}MB.",this.labelFileSingular="file",this.labelFilePlural="files",this.labelMaxFilesInfo="Up to {{count}} {{files}}.",this.labelMaxFilesExceeded="Upload limit exceeded. Only {{count}} {{files}} allowed.",this.ariaLabelBrowseFiles="Browse files",this.ariaLabelDropzone="Upload area. Click to browse or drag and drop files.",this.ariaLabelFileInput="Upload file",this.ariaLabelRemoveFile="Remove file",this.ariaLabelCancelUpload="Cancel upload",this.ariaLabelRetryUpload="Retry upload",this.ariaLabelUploadingStatus="Upload in progress",this.ariaLabelUploadedStatus="Upload completed",this.ariaLabelUploadFailedStatus="Upload failed",this.internalId=`ifx-file-upload-${Math.random().toString(36).substr(2,9)}`,this.isDragOver=!1,this.files=[],this.uploadTasks=[],this.rejectedSizeFiles=[],this.rejectedTypeFiles=[],this.requiredError=!1,this.statusMessage=null,this.fileInputEl=null,this.extensionToMimeMap={jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",svg:"image/svg+xml",webp:"image/webp",pdf:"application/pdf",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",txt:"text/plain",csv:"text/csv",json:"application/json",mp3:"audio/mpeg",wav:"audio/wav",mp4:"video/mp4",mov:"video/quicktime",webm:"video/webm",zip:"application/zip",rar:"application/vnd.rar",tar:"application/x-tar",gz:"application/gzip",xml:"application/xml",html:"text/html",css:"text/css",js:"application/javascript"}}get maxFiles(){return this._maxFiles}set maxFiles(value){"number"==typeof value&&value<1?(console.warn("Invalid `maxFiles` value. Must be >= 1. Value ignored."),this._maxFiles=void 0):this._maxFiles=value}validateRequired(){var _a,_b;this.required&&0===this.files.length?(this.requiredError=!0,(null===(_a=this.statusMessage)||void 0===_a?void 0:_a.text)!==this.labelRequiredError&&(this.statusMessage={type:"error",text:this.labelRequiredError}),this.ifxFileUploadValidation.emit({valid:!1})):(this.requiredError=!1,(null===(_b=this.statusMessage)||void 0===_b?void 0:_b.text)===this.labelRequiredError&&(this.statusMessage=null),this.ifxFileUploadValidation.emit({valid:!0}))}pluralize(count){return this.allowAnyFileType?1===count?"file":"files":1===count?this.labelFileSingular:this.labelFilePlural}getNormalizedFileTypes(){if(!this.allowedFileTypes&&this.allowedFileExtensions&&this.getNormalizedFileExtensions().length>0)return[];if(!this.allowedFileTypes)return["jpg","jpeg","png","pdf","mov","mp3","mp4"];if(Array.isArray(this.allowedFileTypes))return this.allowedFileTypes;try{return JSON.parse(this.allowedFileTypes)}catch(_a){return this.allowedFileTypes.split(",").map(t=>t.trim())}}getNormalizedFileExtensions(){if(!this.allowedFileExtensions)return[];if(Array.isArray(this.allowedFileExtensions))return this.allowedFileExtensions;try{return JSON.parse(this.allowedFileExtensions)}catch(_a){return this.allowedFileExtensions.split(",").map(t=>t.trim())}}isFileTypeAllowed(file){if(this.allowAnyFileType)return!0;const fileExtension=this.getFileExtension(file.name);if(this.getNormalizedFileTypes().map(ext=>this.extensionToMimeMap[ext.toLowerCase()]).filter(Boolean).includes(file.type))return!0;if(this.getAdditionalMimeTypes().includes(file.type))return!0;const customExtensions=this.getNormalizedFileExtensions();if(customExtensions.length>0&&fileExtension)for(const ext of customExtensions){if(fileExtension===(ext.startsWith(".")?ext.substring(1).toLowerCase():ext.toLowerCase()))return!0}return!1}getFileExtension(filename){const lastDotIndex=filename.lastIndexOf(".");return-1===lastDotIndex||lastDotIndex===filename.length-1?null:filename.substring(lastDotIndex+1).toLowerCase()}getLabelFromMimeType(mime){for(const[ext,knownMime]of Object.entries(this.extensionToMimeMap))if(knownMime===mime)return ext.toUpperCase();return mime}handleFileChange(event){const input=event.target;input.files&&this.processFiles(input.files)}handleDrop(event){var _a;if(!this.disabled&&(event.preventDefault(),event.stopPropagation(),this.isDragOver=!1,null===(_a=event.dataTransfer)||void 0===_a?void 0:_a.files)){const droppedFiles=Array.from(event.dataTransfer.files),acceptedFiles=[],rejectedFiles=[];droppedFiles.forEach(file=>{const isValidType=this.isFileTypeAllowed(file),isValidSize=file.size<=1024*this.maxFileSizeMB*1024;isValidType&&isValidSize?acceptedFiles.push(file):rejectedFiles.push(file)}),this.ifxFileUploadDrop.emit({droppedFiles,acceptedFiles,rejectedFiles}),this.processFiles(event.dataTransfer.files)}}handleDragOver(event){this.disabled||(event.preventDefault(),this.isDragOver=!0)}handleDragLeave(event){this.disabled||(event.preventDefault(),this.isDragOver=!1)}processFiles(fileList){const selectedFiles=Array.from(fileList),validFiles=[],rejectedSize=[],rejectedType=[];if(selectedFiles.forEach(file=>{const isValidType=this.isFileTypeAllowed(file),isValidSize=file.size<=1024*this.maxFileSizeMB*1024;if(this.files.some(existing=>existing.name===file.name&&existing.size===file.size))return this.ifxFileUploadInvalid.emit({file,reason:"duplicate"}),void this.ifxFileUploadError.emit({file,errorType:"duplicate",message:`File "${file.name}" is already added`,reason:"duplicate"});isValidType&&isValidSize?validFiles.push(file):(isValidType||(rejectedType.push(file.name),this.ifxFileUploadInvalid.emit({file,reason:"invalid-type"})),isValidSize||(rejectedSize.push(file.name),this.ifxFileUploadInvalid.emit({file,reason:"invalid-size"})),this.ifxFileUploadError.emit({file,errorType:isValidType?"file-too-large":"invalid-type",message:"Invalid file rejected",reason:isValidType?"file-too-large":"unsupported-type"}))}),this.rejectedSizeFiles=[...this.rejectedSizeFiles,...rejectedSize],this.rejectedTypeFiles=[...this.rejectedTypeFiles,...rejectedType],this.maxFiles&&this.files.length+validFiles.length>this.maxFiles){const availableSlots=this.maxFiles-this.files.length,limitedFiles=validFiles.slice(0,Math.max(availableSlots,0)),overflowFiles=validFiles.slice(availableSlots);return this.files=[...this.files,...limitedFiles],limitedFiles.forEach(file=>this.startUpload(file)),limitedFiles.length>0&&(this.ifxFileUploadAdd.emit({addedFiles:limitedFiles,files:this.files}),this.ifxFileUploadChange.emit({files:this.files})),overflowFiles.forEach(file=>{this.ifxFileUploadInvalid.emit({file,reason:"too-many-files"}),this.ifxFileUploadError.emit({file,errorType:"too-many-files",message:`Upload limit exceeded. Max ${this.maxFiles} files allowed.`,reason:"too-many-files"})}),void(overflowFiles.length>0&&(this.statusMessage={type:"error",text:this.labelMaxFilesExceeded.replace("{{count}}",this.maxFiles.toString()).replace("{{files}}",this.pluralize(this.maxFiles))},this.ifxFileUploadMaxFilesExceeded.emit({maxFiles:this.maxFiles,attempted:this.files.length+validFiles.length})))}validFiles.forEach(file=>this.startUpload(file)),this.files=[...this.files,...validFiles],validFiles.length>0&&(this.ifxFileUploadAdd.emit({addedFiles:validFiles,files:this.files}),this.ifxFileUploadChange.emit({files:this.files})),this.validateRequired()}retryUpload(file){const taskIndex=this.uploadTasks.findIndex(t=>t.file.name===file.name);-1!==taskIndex&&(this.uploadTasks.splice(taskIndex,1),this.uploadTasks=[...this.uploadTasks]),this.ifxFileUploadRetry.emit({file}),this.startUpload(file)}checkAndEmitAllComplete(){if(this.uploadTasks.every(t=>t.completed||t.error)){if(this.uploadTasks.some(t=>t.completed&&!t.error)){const successfulFiles=this.uploadTasks.filter(t=>t.completed&&!t.error).map(t=>t.file);this.ifxFileUploadAllComplete.emit({files:successfulFiles})}}}resetFileInput(){this.fileInputEl&&(this.fileInputEl.value="")}updateTaskProgress(file,progress){const task=this.uploadTasks.find(t=>t.file===file);if(task){const newProgress=Math.max(task.progress,Math.min(100,progress));newProgress!==task.progress&&(task.progress=newProgress,this.uploadTasks=[...this.uploadTasks])}}startUpload(file){this.ifxFileUploadStart.emit({file});const task={file,progress:3,intervalId:null,completed:!1};if(this.uploadTasks=[...this.uploadTasks,task],this.uploadHandler)this.uploadHandler(file,percent=>{this.updateTaskProgress(file,percent)}).then(()=>{task.progress=100,task.completed=!0,this.uploadTasks=[...this.uploadTasks],this.ifxFileUploadComplete.emit({file}),this.ifxFileUploadChange.emit({files:this.files}),this.checkAndEmitAllComplete()}).catch(()=>{task.error=!0,this.uploadTasks=[...this.uploadTasks],this.ifxFileUploadError.emit({file,errorType:"upload-failed",message:"Upload handler rejected file",reason:"custom"}),this.checkAndEmitAllComplete()});else{const totalSize=file.size,fakeUploadSpeed=1e5;let uploaded=0;task.intervalId=window.setInterval(()=>{uploaded+=fakeUploadSpeed/5;const progress=Math.min(100,Math.round(uploaded/totalSize*100));this.updateTaskProgress(file,progress),progress>=100&&(clearInterval(task.intervalId),task.completed=!0,task.intervalId=null,this.uploadTasks=[...this.uploadTasks],this.ifxFileUploadComplete.emit({file}),this.ifxFileUploadChange.emit({files:this.files}),this.checkAndEmitAllComplete())},200)}}cancelUpload(file){const taskIndex=this.uploadTasks.findIndex(t=>t.file.name===file.name);if(-1!==taskIndex){const task=this.uploadTasks[taskIndex];null!==(null==task?void 0:task.intervalId)&&clearInterval(task.intervalId),this.uploadTasks=this.uploadTasks.filter((_,i)=>i!==taskIndex)}this.files=this.files.filter(f=>f.name!==file.name),this.ifxFileUploadAbort.emit({file}),this.ifxFileUploadChange.emit({files:this.files}),this.resetFileInput(),this.validateRequired()}removeFile(file){var _a;this.uploadTasks=this.uploadTasks.filter(task=>task.file.name!==file.name),this.files=this.files.filter(f=>f.name!==file.name),this.ifxFileUploadRemove.emit({removedFile:file,files:this.files}),this.ifxFileUploadChange.emit({files:this.files}),this.validateRequired(),this.resetFileInput(),this.maxFiles&&this.files.length<this.maxFiles&&(null===(_a=this.statusMessage)||void 0===_a?void 0:_a.text)!==this.labelRequiredError&&(this.statusMessage=null)}clearRejectedFile(fileName,type){"size"===type?this.rejectedSizeFiles=this.rejectedSizeFiles.filter(f=>f!==fileName):this.rejectedTypeFiles=this.rejectedTypeFiles.filter(f=>f!==fileName),this.resetFileInput(),this.maxFiles&&this.files.length<this.maxFiles&&(this.statusMessage=null),this.validateRequired()}splitFileNameParts(file){const name=file.name,dotIndex=name.lastIndexOf(".");return-1===dotIndex?{base:name,ext:""}:{base:name.substring(0,dotIndex),ext:name.substring(dotIndex)}}getFileIcon(file){var _a;switch(null===(_a=file.name.split(".").pop())||void 0===_a?void 0:_a.toLowerCase()){case"pdf":return"file-pdf-16";case"jpg":case"jpeg":return"file-jpg-16";case"png":return"file-png-16";case"mov":return"file-mov-16";case"mp3":return"file-mp3-16";case"mp4":return"file-mp4-16";default:return"file-16"}}formatSize(bytes){return bytes>=1073741824?`${(bytes/1073741824).toFixed(1)} GB`:bytes>=1048576?`${(bytes/1048576).toFixed(1)} MB`:bytes>=1024?`${(bytes/1024).toFixed(0)} KB`:`${bytes} B`}getAcceptAttribute(){if(this.allowAnyFileType)return"";const acceptValues=[],extensionTypes=this.getNormalizedFileTypes().map(ext=>"."+ext.toLowerCase());acceptValues.push(...extensionTypes);const mimeTypes=this.getAdditionalMimeTypes();acceptValues.push(...mimeTypes);return this.getNormalizedFileExtensions().forEach(ext=>{const normalizedExt=ext.startsWith(".")?ext:"."+ext;acceptValues.push(normalizedExt)}),acceptValues.join(",")}getFormattedProgressText(task){const uploadedSize=Math.round(task.progress/100*task.file.size);return`${this.formatSize(uploadedSize)} / ${this.formatSize(task.file.size)} uploaded`}getAdditionalMimeTypes(){return this.additionalAllowedFileTypes?Array.isArray(this.additionalAllowedFileTypes)?this.additionalAllowedFileTypes:this.additionalAllowedFileTypes.split(",").map(t=>t.trim()):[]}getSupportedFileText(){if(this.allowAnyFileType){let text=`All file types allowed. Max file size: ${this.maxFileSizeMB}MB.`;if(this.labelMaxFilesInfo&&this.maxFiles){const fileWord=this.pluralize(this.maxFiles);text+=` ${this.labelMaxFilesInfo.replace("{{count}}",this.maxFiles.toString()).replace("{{files}}",fileWord)}`}return text}const allTypes=[],extensions=this.getNormalizedFileTypes().map(ext=>ext.toUpperCase());allTypes.push(...extensions);const mimeTypes=this.getAdditionalMimeTypes().map(mime=>this.getLabelFromMimeType(mime));allTypes.push(...mimeTypes);const customExtensions=this.getNormalizedFileExtensions().map(ext=>(ext.startsWith(".")?ext.substring(1):ext).toUpperCase());allTypes.push(...customExtensions);const typesLabel=allTypes.join(", ");let text=this.labelSupportedFormatsTemplate.replace("{{types}}",typesLabel).replace("{{size}}",this.maxFileSizeMB.toString());if(this.labelMaxFilesInfo&&this.maxFiles){const fileWord=this.pluralize(this.maxFiles);text+=` ${this.labelMaxFilesInfo.replace("{{count}}",this.maxFiles.toString()).replace("{{files}}",fileWord)}`}return text}getFormattedFileTooLargeText(){return this.labelFileTooLarge.replace("{{size}}",this.maxFileSizeMB.toString())}renderStatusMessage(){return this.statusMessage?(0,_indexDtIEDtZ.h)("div",{class:`file-upload-status file-upload-status__${this.statusMessage.type}`},"error"===this.statusMessage.type&&(0,_indexDtIEDtZ.h)("ifx-icon",{icon:"c-warning-16"}),this.statusMessage.text):null}isInputDisabled(){return this.disabled||void 0!==this.maxFiles&&this.files.length>=this.maxFiles}async componentDidLoad(){if(!(0,_domUtilsBw2fh5LT.i)(this.hostElement)){const framework=(0,_frameworkDetectionDcmcuUOA.d)();(0,_frameworkDetectionDcmcuUOA.t)("ifx-file-upload",await framework)}this.hostElement.hasAttribute("show-demo-states")&&(this.showDemoStates=!0),this.showDemoStates&&this.injectDemoState()}async injectDemoState(){const dummyContent=new Array(5e4).fill("a").join(""),bigContent=dummyContent+dummyContent,uploading=new File([dummyContent],"Image.jpg",{type:"image/jpeg"}),uploaded=new File([bigContent],"File.pdf",{type:"application/pdf"}),failed=new File([dummyContent],"Text.docx",{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}),tooLarge=new File([bigContent+bigContent+bigContent],"Video.mp4",{type:"video/mp4"}),unsupported=new File(["demo"],"Script.exe",{type:"application/x-msdownload"});this.files=[uploaded,uploading,failed],this.uploadTasks=[{file:uploaded,progress:100,intervalId:null,completed:!0},{file:uploading,progress:40,intervalId:null,completed:!1},{file:failed,progress:80,intervalId:null,completed:!1,error:!0}],this.rejectedSizeFiles=[tooLarge.name],this.rejectedTypeFiles=[unsupported.name]}async triggerDemoValidation(){this.validateRequired()}render(){return(0,_indexDtIEDtZ.h)("div",{key:"7e52f855caeda6915d312c5c88b05d378aa2f075",class:{"file-upload-wrapper":!0,disabled:this.disabled}},this.label&&(0,_indexDtIEDtZ.h)("label",{key:"6957ac833303dd3385d82c4f97fcd4591f24b9fa",class:"file-upload-label",htmlFor:this.internalId},this.label,this.required&&(0,_indexDtIEDtZ.h)("span",{key:"486b6e4479247cd4abfcefa5a7ef8ae502c207e6",class:"required "+(this.requiredError?"error":"")},"*")),this.dragAndDrop?this.renderDragAndDropArea():this.renderUploadArea(),(this.files.length>0||this.rejectedSizeFiles.length>0||this.rejectedTypeFiles.length>0)&&(0,_indexDtIEDtZ.h)("div",{key:"6769f18cf6cfbee8b0929631c2f1f608fdcd4d2f",class:"file-list-wrapper"},(0,_indexDtIEDtZ.h)("div",{key:"d6af05d7b188e3313f3141e3948f32729ab51052",class:"upload-heading"},this.labelUploadedFilesHeading),(0,_indexDtIEDtZ.h)("ul",{key:"db4c5ad8564993ebf888a149efa45e44d4c4567d",class:"file-list"},this.rejectedSizeFiles.map(fileName=>(0,_indexDtIEDtZ.h)("li",{class:"file-item upload-failed",key:`rejected-size-${fileName}`},(0,_indexDtIEDtZ.h)("div",{class:"file-icon"},(0,_indexDtIEDtZ.h)("ifx-icon",{icon:"file-16"})),(0,_indexDtIEDtZ.h)("div",{class:"file-info"},(0,_indexDtIEDtZ.h)("div",{class:"file-top-row"},(0,_indexDtIEDtZ.h)("span",{class:"file-name-wrapper"},(0,_indexDtIEDtZ.h)("span",{class:"file-name-base"},this.splitFileNameParts({name:fileName}).base),(0,_indexDtIEDtZ.h)("span",{class:"file-name-ext"},this.splitFileNameParts({name:fileName}).ext)),(0,_indexDtIEDtZ.h)("div",{class:"file-actions"},(0,_indexDtIEDtZ.h)("ifx-icon-button",{shape:"square",variant:"tertiary",icon:"delete-forever-16",size:"s","aria-label":this.ariaLabelRemoveFile,onClick:()=>this.clearRejectedFile(fileName,"size")}))),(0,_indexDtIEDtZ.h)("div",{class:"file-middle-row"},(0,_indexDtIEDtZ.h)("span",{class:"file-status","aria-label":this.labelFileTooLarge.replace("{{size}}",this.maxFileSizeMB.toString())},this.getFormattedFileTooLargeText()))))),this.rejectedTypeFiles.map(fileName=>(0,_indexDtIEDtZ.h)("li",{class:"file-item upload-failed",key:`rejected-type-${fileName}`},(0,_indexDtIEDtZ.h)("div",{class:"file-icon"},(0,_indexDtIEDtZ.h)("ifx-icon",{icon:"file-16"})),(0,_indexDtIEDtZ.h)("div",{class:"file-info"},(0,_indexDtIEDtZ.h)("div",{class:"file-top-row"},(0,_indexDtIEDtZ.h)("span",{class:"file-name-wrapper"},(0,_indexDtIEDtZ.h)("span",{class:"file-name-base"},this.splitFileNameParts({name:fileName}).base),(0,_indexDtIEDtZ.h)("span",{class:"file-name-ext"},this.splitFileNameParts({name:fileName}).ext)),(0,_indexDtIEDtZ.h)("div",{class:"file-actions"},(0,_indexDtIEDtZ.h)("ifx-icon-button",{shape:"square",variant:"tertiary",icon:"delete-forever-16",size:"s","aria-label":this.ariaLabelRemoveFile,onClick:()=>this.clearRejectedFile(fileName,"type")}))),(0,_indexDtIEDtZ.h)("div",{class:"file-middle-row"},(0,_indexDtIEDtZ.h)("span",{class:"file-status","aria-label":this.labelUnsupportedFileType},this.labelUnsupportedFileType))))),this.files.map(file=>{var _a;const task=this.uploadTasks.find(t=>t.file.name===file.name),progress=null!==(_a=null==task?void 0:task.progress)&&void 0!==_a?_a:100,isUploading=task&&!task.completed,isError=!0===(null==task?void 0:task.error),itemClass=isError?"file-item upload-failed":isUploading?"file-item uploading":"file-item upload-success",uniqueKey=`${file.name}-${file.size}`,{base,ext}=this.splitFileNameParts(file);return(0,_indexDtIEDtZ.h)("li",{class:itemClass,key:uniqueKey},(0,_indexDtIEDtZ.h)("div",{class:"file-icon"},(0,_indexDtIEDtZ.h)("ifx-icon",{icon:this.getFileIcon(file)})),(0,_indexDtIEDtZ.h)("div",{class:"file-info"},(0,_indexDtIEDtZ.h)("div",{class:"file-top-row"},(0,_indexDtIEDtZ.h)("span",{class:"file-name-wrapper"},(0,_indexDtIEDtZ.h)("span",{class:"file-name-base"},base),(0,_indexDtIEDtZ.h)("span",{class:"file-name-ext"},ext)),(0,_indexDtIEDtZ.h)("div",{class:"file-actions"},(0,_indexDtIEDtZ.h)("ifx-icon-button",{shape:"square",variant:"tertiary",icon:"refresh-16",size:"s","aria-label":this.ariaLabelRetryUpload,onClick:()=>this.retryUpload(file),style:{display:isError?"inline-flex":"none"}}),(0,_indexDtIEDtZ.h)("ifx-icon-button",{shape:"square",variant:"tertiary",icon:"cross-16",size:"s","aria-label":this.ariaLabelCancelUpload,onClick:()=>this.cancelUpload(file),style:{display:isUploading?"inline-flex":"none"}}),(0,_indexDtIEDtZ.h)("ifx-icon-button",{shape:"square",variant:"tertiary",icon:"delete-forever-16",size:"s","aria-label":this.ariaLabelRemoveFile,onClick:()=>this.removeFile(file),style:{display:isUploading?"none":"inline-flex"}}))),(0,_indexDtIEDtZ.h)("div",{class:"file-middle-row"},isUploading&&task&&!task.error&&(0,_indexDtIEDtZ.h)("span",{class:"file-uploading","aria-label":this.ariaLabelUploadingStatus},this.getFormattedProgressText(task)),!isUploading&&!isError&&(0,_indexDtIEDtZ.h)("span",null,(0,_indexDtIEDtZ.h)("span",{class:"file-size"},this.formatSize(file.size)),(0,_indexDtIEDtZ.h)("span",{class:"file-status","aria-label":this.ariaLabelUploadedStatus},(0,_indexDtIEDtZ.h)("ifx-icon",{icon:"check-16"}),this.labelUploaded)),isError&&(0,_indexDtIEDtZ.h)("span",{class:"file-status","aria-label":this.ariaLabelUploadFailedStatus},this.labelUploadFailed)),isUploading&&task&&!task.error&&(0,_indexDtIEDtZ.h)("div",{class:"file-progress-row"},(0,_indexDtIEDtZ.h)("ifx-progress-bar",{size:"s",value:progress,"show-label":"true"}))))}))))}renderUploadArea(){return(0,_indexDtIEDtZ.h)("div",{class:{"upload-button":!0}},(0,_indexDtIEDtZ.h)("ifx-button",{variant:"secondary",onClick:()=>{var _a;return null===(_a=this.fileInputEl)||void 0===_a?void 0:_a.click()},disabled:this.isInputDisabled(),"aria-label":this.ariaLabelBrowseFiles},(0,_indexDtIEDtZ.h)("ifx-icon",{icon:"upload-16"}),this.labelBrowseFiles),(0,_indexDtIEDtZ.h)("input",{id:this.internalId,ref:el=>{this.fileInputEl=el},type:"file",accept:this.getAcceptAttribute(),multiple:!0,onChange:e=>this.handleFileChange(e),style:{display:"none"},disabled:this.isInputDisabled(),"aria-label":this.ariaLabelFileInput}),(0,_indexDtIEDtZ.h)("p",{class:"file-upload-info"},this.getSupportedFileText()),this.renderStatusMessage())}renderDragAndDropArea(){return(0,_indexDtIEDtZ.h)("div",{class:{disabled:this.isInputDisabled()}},(0,_indexDtIEDtZ.h)("div",{class:{"upload-dropzone":!0,"drag-over":this.isDragOver,error:this.requiredError},onClick:()=>{this.fileInputEl&&this.fileInputEl.click()},onDragOver:e=>this.handleDragOver(e),onDragLeave:e=>this.handleDragLeave(e),onDrop:e=>this.handleDrop(e),role:"button",tabIndex:0,"aria-label":this.ariaLabelDropzone},(0,_indexDtIEDtZ.h)("ifx-icon",{icon:"upload-16",class:"custom-icon"}),(0,_indexDtIEDtZ.h)("p",null,this.labelDragAndDrop),(0,_indexDtIEDtZ.h)("p",{class:"file-upload-info"},this.getSupportedFileText()),(0,_indexDtIEDtZ.h)("div",{style:{height:"0px",overflow:"hidden"}},(0,_indexDtIEDtZ.h)("input",{id:this.internalId,ref:el=>{this.fileInputEl=el},type:"file",accept:this.getAcceptAttribute(),multiple:!0,onChange:e=>this.handleFileChange(e),disabled:this.isInputDisabled(),"aria-label":this.ariaLabelFileInput}))),this.renderStatusMessage())}get hostElement(){return(0,_indexDtIEDtZ.a)(this)}};exports.ifx_file_upload=FileUpload,FileUpload.style=':root{--ifx-font-family:"Source Sans 3", \'Arial, sans-serif\'}:host{font-family:var(--ifx-font-family, sans-serif)}.file-upload-wrapper{display:flex;flex-direction:column}.file-upload-wrapper.disabled{pointer-events:none}.file-upload-wrapper.disabled label,.file-upload-wrapper.disabled .file-upload-info{color:#575352}.file-upload-label{font-style:normal;font-weight:400;font-size:1rem;line-height:1.5rem;color:#1D1D1D}.file-upload-label .required{display:inline-block;margin-left:4px}.file-upload-label .required.error{color:#CD002F}.upload-dropzone{border:1px dashed #BFBBBB;padding:40px;text-align:center;cursor:pointer;color:#1D1D1D;transition:border-color 0.3s ease;border-radius:1px;background:#FFFFFF}.upload-dropzone ifx-icon{color:#0A8276}.upload-dropzone:hover{border:1px dashed #8D8786}.upload-dropzone.drag-over{border:1px solid #0A8276;background:#F7F7F7}.upload-dropzone.drag-over.error{border:1px solid #0A8276}.upload-dropzone.error{border-color:#CD002F}.disabled .upload-dropzone{pointer-events:none;border-color:#BFBBBB;color:#BFBBBB}.disabled .upload-dropzone ifx-icon{color:#BFBBBB}.upload-dropzone input{display:none}.file-upload-info{font-style:normal;font-weight:400;font-size:0.75rem;line-height:1rem;letter-spacing:0em;color:#1D1D1D;margin:0;margin-top:4px}.file-upload-status{font-style:normal;font-weight:400;font-size:0.75rem;line-height:1rem;letter-spacing:0.2px;margin-top:8px}.file-upload-status.file-upload-status__error{display:flex;align-items:center;color:#CD002F}.file-upload-status.file-upload-status__error ifx-icon{position:relative;top:-1px;color:#CD002F;margin-right:8px}.upload-heading{font:600 1.125rem/1.625rem "Source Sans 3";margin-bottom:8px}.file-list-wrapper{margin-top:16px}.file-list{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:16px}.file-item{border:1px solid #BFBBBB;padding-top:12px;padding-right:16px;padding-bottom:8px;padding-left:16px;display:flex;gap:8px}.file-info{width:100%;min-width:0}.file-top-row{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-top:-8px}.file-top-row ifx-icon{flex-shrink:0}.file-name-wrapper{display:flex;min-width:0;max-width:100%;white-space:nowrap;overflow:hidden;font-weight:400;font-size:0.875rem}.file-name-base{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex-shrink:1;min-width:0}.file-name-ext{flex-shrink:0;margin-left:0}.file-middle-row{display:flex;align-items:center;font-size:0.75rem;line-height:1rem;flex-wrap:wrap;color:#575352}.file-middle-row .file-status{margin-left:12px}.file-middle-row .file-status ifx-icon{margin-right:8px}.file-progress-row{margin-top:4px}.file-progress-row ifx-progress-bar{width:100%}.upload-success{border-color:#0A8276}.upload-success .file-status ifx-icon{position:relative;top:1px;color:#4CA460}.upload-failed{border-color:#CD002F}.upload-failed .file-status{color:#CD002F;margin-left:0}'}}]);