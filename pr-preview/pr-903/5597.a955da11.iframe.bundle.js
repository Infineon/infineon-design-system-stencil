/*! For license information please see 5597.a955da11.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunk_infineon_infineon_design_system_stencil=self.webpackChunk_infineon_infineon_design_system_stencil||[]).push([[5597],{"./dist/esm/ag-grid-community.auto.esm-8a3e0bb4.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function makeNull(value){return null==value||""===value?null:value}function exists(value,allowEmptyString){return void 0===allowEmptyString&&(allowEmptyString=!1),null!=value&&(""!==value||allowEmptyString)}function missing(value){return!exists(value)}function missingOrEmpty(value){return null==value||0===value.length}function toStringOrNull(value){return null!=value&&"function"==typeof value.toString?value.toString():null}function attrToNumber(value){if(void 0!==value){if(null===value||""===value)return null;if("number"==typeof value)return isNaN(value)?void 0:value;var valueParsed=parseInt(value,10);return isNaN(valueParsed)?void 0:valueParsed}}function attrToBoolean(value){if(void 0!==value)return null!==value&&""!==value&&("boolean"==typeof value?value:/true/i.test(value))}function values(object){if(object instanceof Set||object instanceof Map){var arr_1=[];return object.forEach((function(value){return arr_1.push(value)})),arr_1}return Object.values(object)}__webpack_require__.d(__webpack_exports__,{G:()=>Grid});var GenericUtils=Object.freeze({__proto__:null,makeNull,exists,missing,missingOrEmpty,toStringOrNull,attrToNumber,attrToBoolean,attrToString:function attrToString(value){if(null!=value&&""!==value)return value},referenceCompare:function referenceCompare(left,right){return null==left&&null==right||(null!=left||null==right)&&((null==left||null!=right)&&left===right)},jsonEquals:function jsonEquals(val1,val2){return(val1?JSON.stringify(val1):null)===(val2?JSON.stringify(val2):null)},defaultComparator:function defaultComparator(valueA,valueB,accentedCompare){void 0===accentedCompare&&(accentedCompare=!1);var valueAMissing=null==valueA,valueBMissing=null==valueB;if(valueA&&valueA.toNumber&&(valueA=valueA.toNumber()),valueB&&valueB.toNumber&&(valueB=valueB.toNumber()),valueAMissing&&valueBMissing)return 0;if(valueAMissing)return-1;if(valueBMissing)return 1;function doQuickCompare(a,b){return a>b?1:a<b?-1:0}if("string"!=typeof valueA)return doQuickCompare(valueA,valueB);if(!accentedCompare)return doQuickCompare(valueA,valueB);try{return valueA.localeCompare(valueB)}catch(e){return doQuickCompare(valueA,valueB)}},values}),ColumnKeyCreator=function(){function ColumnKeyCreator(){this.existingKeys={}}return ColumnKeyCreator.prototype.addExistingKeys=function(keys){for(var i=0;i<keys.length;i++)this.existingKeys[keys[i]]=!0},ColumnKeyCreator.prototype.getUniqueKey=function(colId,colField){colId=toStringOrNull(colId);for(var count=0;;){var idToTry=void 0;if(colId?(idToTry=colId,0!==count&&(idToTry+="_"+count)):colField?(idToTry=colField,0!==count&&(idToTry+="_"+count)):idToTry=count,!this.existingKeys[idToTry])return this.existingKeys[idToTry]=!0,String(idToTry);count++}},ColumnKeyCreator}(),__values$8=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},__read$z=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar};function iterateObject(object,callback){var e_1,_a;if(null!=object)if(Array.isArray(object))for(var i=0;i<object.length;i++)callback(i.toString(),object[i]);else try{for(var _b=__values$8(Object.entries(object)),_c=_b.next();!_c.done;_c=_b.next()){var _d=__read$z(_c.value,2);callback(_d[0],_d[1])}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}}function cloneObject(object){for(var copy={},keys=Object.keys(object),i=0;i<keys.length;i++){var key=keys[i],value=object[key];copy[key]=value}return copy}function deepCloneDefinition(object,keysToSkip){if(object){var obj=object,res={};return Object.keys(obj).forEach((function(key){if(!(keysToSkip&&keysToSkip.indexOf(key)>=0)){var value=obj[key],sourceIsSimpleObject=isNonNullObject(value)&&value.constructor===Object;res[key]=sourceIsSimpleObject?deepCloneDefinition(value):value}})),res}}function getProperty(object,key){return object[key]}function setProperty(object,key,value){object[key]=value}function copyPropertyIfPresent(source,target,property,transform){var value=getProperty(source,property);void 0!==value&&setProperty(target,property,transform?transform(value):value)}function getAllKeysInObjects(objects){var allValues={};return objects.filter((function(obj){return null!=obj})).forEach((function(obj){Object.keys(obj).forEach((function(key){return allValues[key]=null}))})),Object.keys(allValues)}function getAllValuesInObject(obj){if(!obj)return[];var anyObject=Object;if("function"==typeof anyObject.values)return anyObject.values(obj);var ret=[];for(var key in obj)obj.hasOwnProperty(key)&&obj.propertyIsEnumerable(key)&&ret.push(obj[key]);return ret}function mergeDeep(dest,source,copyUndefined,makeCopyOfSimpleObjects){void 0===copyUndefined&&(copyUndefined=!0),void 0===makeCopyOfSimpleObjects&&(makeCopyOfSimpleObjects=!1),exists(source)&&iterateObject(source,(function(key,sourceValue){var destValue=dest[key];if(destValue!==sourceValue){if(makeCopyOfSimpleObjects)if(null==destValue&&null!=sourceValue)"object"==typeof sourceValue&&sourceValue.constructor===Object&&(destValue={},dest[key]=destValue);isNonNullObject(sourceValue)&&isNonNullObject(destValue)&&!Array.isArray(destValue)?mergeDeep(destValue,sourceValue,copyUndefined,makeCopyOfSimpleObjects):(copyUndefined||void 0!==sourceValue)&&(dest[key]=sourceValue)}}))}function getValueUsingField(data,field,fieldContainsDots){if(field&&data){if(!fieldContainsDots)return data[field];for(var fields=field.split("."),currentObject=data,i=0;i<fields.length;i++){if(null==currentObject)return;currentObject=currentObject[fields[i]]}return currentObject}}function removeAllReferences(obj,objectName){Object.keys(obj).forEach((function(key){"object"==typeof obj[key]&&(obj[key]=void 0)}));var proto=Object.getPrototypeOf(obj),properties={};Object.keys(proto).forEach((function(key){if("function"==typeof proto[key]){properties[key]={value:function(){console.warn("AG Grid: "+objectName+" function "+key+"() cannot be called as the grid has been destroyed.\n                     Please don't call grid API functions on destroyed grids - as a matter of fact you shouldn't\n                     be keeping the API reference, your application has a memory leak! Remove the API reference\n                     when the grid is destroyed.")},writable:!0}}})),Object.defineProperties(obj,properties)}function isNonNullObject(value){return"object"==typeof value&&null!==value}var ObjectUtils=Object.freeze({__proto__:null,iterateObject,cloneObject,deepCloneObject:function deepCloneObject(object){return JSON.parse(JSON.stringify(object))},deepCloneDefinition,getProperty,setProperty,copyPropertiesIfPresent:function copyPropertiesIfPresent(source,target){for(var properties=[],_i=2;_i<arguments.length;_i++)properties[_i-2]=arguments[_i];properties.forEach((function(p){return copyPropertyIfPresent(source,target,p)}))},copyPropertyIfPresent,getAllKeysInObjects,getAllValuesInObject,mergeDeep,missingOrEmptyObject:function missingOrEmptyObject(value){return missing(value)||0===Object.keys(value).length},get:function get(source,expression,defaultValue){if(null==source)return defaultValue;for(var keys=expression.split("."),objectToRead=source;keys.length>1;)if(null==(objectToRead=objectToRead[keys.shift()]))return defaultValue;var value=objectToRead[keys[0]];return null!=value?value:defaultValue},set:function set(target,expression,value){if(null!=target){var keys=expression.split("."),objectToUpdate=target;keys.forEach((function(key,i){objectToUpdate[key]||(objectToUpdate[key]={}),i<keys.length-1&&(objectToUpdate=objectToUpdate[key])})),objectToUpdate[keys[keys.length-1]]=value}},getValueUsingField,removeAllReferences,isNonNullObject}),doOnceFlags={};function doOnce(func,key){doOnceFlags[key]||(func(),doOnceFlags[key]=!0)}function getFunctionName(funcConstructor){if(funcConstructor.name)return funcConstructor.name;var matches=/function\s+([^\(]+)/.exec(funcConstructor.toString());return matches&&2===matches.length?matches[1].trim():null}function isFunction(val){return!!(val&&val.constructor&&val.call&&val.apply)}function executeInAWhile(funcs){executeAfter(funcs,400)}var executeNextVMTurnFuncs=[],executeNextVMTurnPending=!1;function executeNextVMTurn(func){executeNextVMTurnFuncs.push(func),executeNextVMTurnPending||(executeNextVMTurnPending=!0,window.setTimeout((function(){var funcsCopy=executeNextVMTurnFuncs.slice();executeNextVMTurnFuncs.length=0,executeNextVMTurnPending=!1,funcsCopy.forEach((function(func){return func()}))}),0))}function executeAfter(funcs,milliseconds){void 0===milliseconds&&(milliseconds=0),funcs.length>0&&window.setTimeout((function(){return funcs.forEach((function(func){return func()}))}),milliseconds)}function debounce(func,delay){var timeout;return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var context=this;window.clearTimeout(timeout),timeout=window.setTimeout((function(){func.apply(context,args)}),delay)}}function throttle(func,wait){var previousCall=0;return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var currentCall=(new Date).getTime();currentCall-previousCall<wait||(previousCall=currentCall,func.apply(this,args))}}function waitUntil(condition,callback,timeout,timeoutMessage){void 0===timeout&&(timeout=100);var timeStamp=(new Date).getTime(),interval=null,executed=!1,internalCallback=function(){var reachedTimeout=(new Date).getTime()-timeStamp>timeout;(condition()||reachedTimeout)&&(callback(),executed=!0,null!=interval&&(window.clearInterval(interval),interval=null),reachedTimeout&&timeoutMessage&&console.warn(timeoutMessage))};internalCallback(),executed||(interval=window.setInterval(internalCallback,10))}function callIfPresent(func){func&&func()}var ModuleNames,FunctionUtils=Object.freeze({__proto__:null,doOnce,getFunctionName,isFunction,executeInAWhile,executeNextVMTurn,executeAfter,debounce,throttle,waitUntil,compose:function compose(){for(var fns=[],_i=0;_i<arguments.length;_i++)fns[_i]=arguments[_i];return function(arg){return fns.reduce((function(composed,f){return f(composed)}),arg)}},callIfPresent,noop:function(){}});!function(ModuleNames){ModuleNames.CommunityCoreModule="@ag-grid-community/core",ModuleNames.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",ModuleNames.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",ModuleNames.CsvExportModule="@ag-grid-community/csv-export",ModuleNames.EnterpriseCoreModule="@ag-grid-enterprise/core",ModuleNames.RowGroupingModule="@ag-grid-enterprise/row-grouping",ModuleNames.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",ModuleNames.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",ModuleNames.MenuModule="@ag-grid-enterprise/menu",ModuleNames.SetFilterModule="@ag-grid-enterprise/set-filter",ModuleNames.MultiFilterModule="@ag-grid-enterprise/multi-filter",ModuleNames.StatusBarModule="@ag-grid-enterprise/status-bar",ModuleNames.SideBarModule="@ag-grid-enterprise/side-bar",ModuleNames.RangeSelectionModule="@ag-grid-enterprise/range-selection",ModuleNames.MasterDetailModule="@ag-grid-enterprise/master-detail",ModuleNames.RichSelectModule="@ag-grid-enterprise/rich-select",ModuleNames.GridChartsModule="@ag-grid-enterprise/charts",ModuleNames.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",ModuleNames.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",ModuleNames.ExcelExportModule="@ag-grid-enterprise/excel-export",ModuleNames.ClipboardModule="@ag-grid-enterprise/clipboard",ModuleNames.SparklinesModule="@ag-grid-enterprise/sparklines",ModuleNames.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",ModuleNames.AngularModule="@ag-grid-community/angular",ModuleNames.ReactModule="@ag-grid-community/react",ModuleNames.VueModule="@ag-grid-community/vue"}(ModuleNames||(ModuleNames={}));var __read$y=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spreadArray$r=function(to,from){for(var i=0,il=from.length,j=to.length;i<il;i++,j++)to[j]=from[i];return to},ModuleRegistry=function(){function ModuleRegistry(){}return ModuleRegistry.register=function(module){ModuleRegistry.__register(module,!0,void 0)},ModuleRegistry.registerModules=function(modules){ModuleRegistry.__registerModules(modules,!0,void 0)},ModuleRegistry.__register=function(module,moduleBased,gridId){ModuleRegistry.runVersionChecks(module),void 0!==gridId?(ModuleRegistry.areGridScopedModules=!0,void 0===ModuleRegistry.gridModulesMap[gridId]&&(ModuleRegistry.gridModulesMap[gridId]={}),ModuleRegistry.gridModulesMap[gridId][module.moduleName]=module):ModuleRegistry.globalModulesMap[module.moduleName]=module,ModuleRegistry.setModuleBased(moduleBased)},ModuleRegistry.__unRegisterGridModules=function(gridId){delete ModuleRegistry.gridModulesMap[gridId]},ModuleRegistry.__registerModules=function(modules,moduleBased,gridId){ModuleRegistry.setModuleBased(moduleBased),modules&&modules.forEach((function(module){return ModuleRegistry.__register(module,moduleBased,gridId)}))},ModuleRegistry.isValidModuleVersion=function(module){var _a=__read$y(module.version.split(".")||[],2),moduleMajor=_a[0],moduleMinor=_a[1],_b=__read$y(ModuleRegistry.currentModuleVersion.split(".")||[],2),currentModuleMajor=_b[0],currentModuleMinor=_b[1];return moduleMajor===currentModuleMajor&&moduleMinor===currentModuleMinor},ModuleRegistry.runVersionChecks=function(module){if(ModuleRegistry.currentModuleVersion||(ModuleRegistry.currentModuleVersion=module.version),module.version?ModuleRegistry.isValidModuleVersion(module)||console.error("AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '"+module.moduleName+"' is version "+module.version+" but the other modules are version "+this.currentModuleVersion+". Please update all modules to the same version."):console.error("AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '"+module.moduleName+"' is incompatible. Please update all modules to the same version."),module.validate){var result=module.validate();if(!result.isValid){var errorResult=result;console.error("AG Grid: "+errorResult.message)}}},ModuleRegistry.setModuleBased=function(moduleBased){void 0===ModuleRegistry.moduleBased?ModuleRegistry.moduleBased=moduleBased:ModuleRegistry.moduleBased!==moduleBased&&doOnce((function(){console.warn("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),console.warn("Please see https://www.ag-grid.com/javascript-grid/packages-modules/ for more information.")}),"ModulePackageCheck")},ModuleRegistry.__setIsBundled=function(){ModuleRegistry.isBundled=!0},ModuleRegistry.__assertRegistered=function(moduleName,reason,gridId){var _a;if(this.__isRegistered(moduleName,gridId))return!0;var warningMessage,warningKey=reason+moduleName;if(ModuleRegistry.isBundled)warningMessage="AG Grid: unable to use "+reason+" as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:\n        \n        <script src=\"https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js\"><\/script>\n        \nFor more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise";else if(ModuleRegistry.moduleBased||void 0===ModuleRegistry.moduleBased){var modName=null===(_a=Object.entries(ModuleNames).find((function(_a){return __read$y(_a,2)[1]===moduleName})))||void 0===_a?void 0:_a[0];warningMessage="AG Grid: unable to use "+reason+" as the "+modName+" is not registered"+(ModuleRegistry.areGridScopedModules?" for gridId: "+gridId:"")+". Check if you have registered the module:\n           \n    import { ModuleRegistry } from '@ag-grid-community/core';\n    import { "+modName+" } from '"+moduleName+"';\n    \n    ModuleRegistry.registerModules([ "+modName+" ]);\n\nFor more info see: https://www.ag-grid.com/javascript-grid/modules/"}else warningMessage="AG Grid: unable to use "+reason+" as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:\n            \n    import 'ag-grid-enterprise';\n            \nFor more info see: https://www.ag-grid.com/javascript-grid/packages/";return doOnce((function(){console.warn(warningMessage)}),warningKey),!1},ModuleRegistry.__isRegistered=function(moduleName,gridId){var _a;return!!ModuleRegistry.globalModulesMap[moduleName]||!!(null===(_a=ModuleRegistry.gridModulesMap[gridId])||void 0===_a?void 0:_a[moduleName])},ModuleRegistry.__getRegisteredModules=function(gridId){return __spreadArray$r(__spreadArray$r([],__read$y(values(ModuleRegistry.globalModulesMap))),__read$y(values(ModuleRegistry.gridModulesMap[gridId]||{})))},ModuleRegistry.__getGridRegisteredModules=function(gridId){var _a;return values(null!==(_a=ModuleRegistry.gridModulesMap[gridId])&&void 0!==_a?_a:{})||[]},ModuleRegistry.__isPackageBased=function(){return!ModuleRegistry.moduleBased},ModuleRegistry.globalModulesMap={},ModuleRegistry.gridModulesMap={},ModuleRegistry.areGridScopedModules=!1,ModuleRegistry}(),Context=function(){function Context(params,logger){if(this.beanWrappers={},this.destroyed=!1,params&&params.beanClasses){this.contextParams=params,this.logger=logger,this.logger.log(">> creating ag-Application Context"),this.createBeans();var beanInstances=this.getBeanInstances();this.wireBeans(beanInstances),this.logger.log(">> ag-Application Context ready - component is alive")}}return Context.prototype.getBeanInstances=function(){return values(this.beanWrappers).map((function(beanEntry){return beanEntry.beanInstance}))},Context.prototype.createBean=function(bean,afterPreCreateCallback){if(!bean)throw Error("Can't wire to bean since it is null");return this.wireBeans([bean],afterPreCreateCallback),bean},Context.prototype.wireBeans=function(beanInstances,afterPreCreateCallback){this.autoWireBeans(beanInstances),this.methodWireBeans(beanInstances),this.callLifeCycleMethods(beanInstances,"preConstructMethods"),exists(afterPreCreateCallback)&&beanInstances.forEach(afterPreCreateCallback),this.callLifeCycleMethods(beanInstances,"postConstructMethods")},Context.prototype.createBeans=function(){var _this=this;this.contextParams.beanClasses.forEach(this.createBeanWrapper.bind(this)),iterateObject(this.beanWrappers,(function(key,beanEntry){var constructorParamsMeta;beanEntry.bean.__agBeanMetaData&&beanEntry.bean.__agBeanMetaData.autowireMethods&&beanEntry.bean.__agBeanMetaData.autowireMethods.agConstructor&&(constructorParamsMeta=beanEntry.bean.__agBeanMetaData.autowireMethods.agConstructor);var constructorParams=_this.getBeansForParameters(constructorParamsMeta,beanEntry.bean.name),newInstance=new(beanEntry.bean.bind.apply(beanEntry.bean,function(to,from){for(var i=0,il=from.length,j=to.length;i<il;i++,j++)to[j]=from[i];return to}([null],function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}(constructorParams))));beanEntry.beanInstance=newInstance}));var createdBeanNames=Object.keys(this.beanWrappers).join(", ");this.logger.log("created beans: "+createdBeanNames)},Context.prototype.createBeanWrapper=function(BeanClass){var metaData=BeanClass.__agBeanMetaData;if(!metaData){var beanName=void 0;return beanName=BeanClass.prototype.constructor?getFunctionName(BeanClass.prototype.constructor):""+BeanClass,void console.error("Context item "+beanName+" is not a bean")}var beanEntry={bean:BeanClass,beanInstance:null,beanName:metaData.beanName};this.beanWrappers[metaData.beanName]=beanEntry},Context.prototype.autoWireBeans=function(beanInstances){var _this=this;beanInstances.forEach((function(beanInstance){_this.forEachMetaDataInHierarchy(beanInstance,(function(metaData,beanName){var attributes=metaData.agClassAttributes;attributes&&attributes.forEach((function(attribute){var otherBean=_this.lookupBeanInstance(beanName,attribute.beanName,attribute.optional);beanInstance[attribute.attributeName]=otherBean}))}))}))},Context.prototype.methodWireBeans=function(beanInstances){var _this=this;beanInstances.forEach((function(beanInstance){_this.forEachMetaDataInHierarchy(beanInstance,(function(metaData,beanName){iterateObject(metaData.autowireMethods,(function(methodName,wireParams){if("agConstructor"!==methodName){var initParams=_this.getBeansForParameters(wireParams,beanName);beanInstance[methodName].apply(beanInstance,initParams)}}))}))}))},Context.prototype.forEachMetaDataInHierarchy=function(beanInstance,callback){for(var prototype=Object.getPrototypeOf(beanInstance);null!=prototype;){var constructor=prototype.constructor;if(constructor.hasOwnProperty("__agBeanMetaData"))callback(constructor.__agBeanMetaData,this.getBeanName(constructor));prototype=Object.getPrototypeOf(prototype)}},Context.prototype.getBeanName=function(constructor){if(constructor.__agBeanMetaData&&constructor.__agBeanMetaData.beanName)return constructor.__agBeanMetaData.beanName;var constructorString=constructor.toString();return constructorString.substring(9,constructorString.indexOf("("))},Context.prototype.getBeansForParameters=function(parameters,beanName){var _this=this,beansList=[];return parameters&&iterateObject(parameters,(function(paramIndex,otherBeanName){var otherBean=_this.lookupBeanInstance(beanName,otherBeanName);beansList[Number(paramIndex)]=otherBean})),beansList},Context.prototype.lookupBeanInstance=function(wiringBean,beanName,optional){if(void 0===optional&&(optional=!1),this.destroyed)return this.logger.log("AG Grid: bean reference "+beanName+" is used after the grid is destroyed!"),null;if("context"===beanName)return this;if(this.contextParams.providedBeanInstances&&this.contextParams.providedBeanInstances.hasOwnProperty(beanName))return this.contextParams.providedBeanInstances[beanName];var beanEntry=this.beanWrappers[beanName];return beanEntry?beanEntry.beanInstance:(optional||console.error("AG Grid: unable to find bean reference "+beanName+" while initialising "+wiringBean),null)},Context.prototype.callLifeCycleMethods=function(beanInstances,lifeCycleMethod){var _this=this;beanInstances.forEach((function(beanInstance){return _this.callLifeCycleMethodsOnBean(beanInstance,lifeCycleMethod)}))},Context.prototype.callLifeCycleMethodsOnBean=function(beanInstance,lifeCycleMethod,methodToIgnore){var allMethods={};this.forEachMetaDataInHierarchy(beanInstance,(function(metaData){var methods=metaData[lifeCycleMethod];methods&&methods.forEach((function(methodName){methodName!=methodToIgnore&&(allMethods[methodName]=!0)}))})),Object.keys(allMethods).forEach((function(methodName){return beanInstance[methodName]()}))},Context.prototype.getBean=function(name){return this.lookupBeanInstance("getBean",name,!0)},Context.prototype.destroy=function(){if(!this.destroyed){this.destroyed=!0,this.logger.log(">> Shutting down ag-Application Context");var beanInstances=this.getBeanInstances();this.destroyBeans(beanInstances),this.contextParams.providedBeanInstances=null,ModuleRegistry.__unRegisterGridModules(this.contextParams.gridId),this.logger.log(">> ag-Application Context shut down - component is dead")}},Context.prototype.destroyBean=function(bean){bean&&this.destroyBeans([bean])},Context.prototype.destroyBeans=function(beans){var _this=this;return beans?(beans.forEach((function(bean){_this.callLifeCycleMethodsOnBean(bean,"preDestroyMethods","destroy");var beanAny=bean;"function"==typeof beanAny.destroy&&beanAny.destroy()})),[]):[]},Context.prototype.isDestroyed=function(){return this.destroyed},Context.prototype.getGridId=function(){return this.contextParams.gridId},Context}();function PreConstruct(target,methodName,descriptor){var props=getOrCreateProps$1(target.constructor);props.preConstructMethods||(props.preConstructMethods=[]),props.preConstructMethods.push(methodName)}function PostConstruct(target,methodName,descriptor){var props=getOrCreateProps$1(target.constructor);props.postConstructMethods||(props.postConstructMethods=[]),props.postConstructMethods.push(methodName)}function PreDestroy(target,methodName,descriptor){var props=getOrCreateProps$1(target.constructor);props.preDestroyMethods||(props.preDestroyMethods=[]),props.preDestroyMethods.push(methodName)}function Bean(beanName){return function(classConstructor){getOrCreateProps$1(classConstructor).beanName=beanName}}function Autowired(name){return function(target,propertyKey,descriptor){autowiredFunc(target,name,!1,target,propertyKey,null)}}function Optional(name){return function(target,propertyKey,descriptor){autowiredFunc(target,name,!0,target,propertyKey,null)}}function autowiredFunc(target,name,optional,classPrototype,methodOrAttributeName,index){if(null!==name)if("number"!=typeof index){var props=getOrCreateProps$1(target.constructor);props.agClassAttributes||(props.agClassAttributes=[]),props.agClassAttributes.push({attributeName:methodOrAttributeName,beanName:name,optional})}else console.error("AG Grid: Autowired should be on an attribute");else console.error("AG Grid: Autowired name should not be null")}function Qualifier(name){return function(classPrototype,methodOrAttributeName,index){var props,constructor="function"==typeof classPrototype?classPrototype:classPrototype.constructor;if("number"==typeof index){var methodName=void 0;methodOrAttributeName?(props=getOrCreateProps$1(constructor),methodName=methodOrAttributeName):(props=getOrCreateProps$1(constructor),methodName="agConstructor"),props.autowireMethods||(props.autowireMethods={}),props.autowireMethods[methodName]||(props.autowireMethods[methodName]={}),props.autowireMethods[methodName][index]=name}}}function getOrCreateProps$1(target){return target.hasOwnProperty("__agBeanMetaData")||(target.__agBeanMetaData={}),target.__agBeanMetaData}var __decorate$2J=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__param$a=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},EventService=function(){function EventService(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}return EventService.prototype.setBeans=function(loggerFactory,gridOptionsService,frameworkOverrides,globalEventListener,globalSyncEventListener){if(void 0===globalEventListener&&(globalEventListener=null),void 0===globalSyncEventListener&&(globalSyncEventListener=null),this.frameworkOverrides=frameworkOverrides,this.gridOptionsService=gridOptionsService,globalEventListener){var async=gridOptionsService.useAsyncEvents();this.addGlobalListener(globalEventListener,async)}globalSyncEventListener&&this.addGlobalListener(globalSyncEventListener,!1)},EventService.prototype.getListeners=function(eventType,async,autoCreateListenerCollection){var listenerMap=async?this.allAsyncListeners:this.allSyncListeners,listeners=listenerMap.get(eventType);return!listeners&&autoCreateListenerCollection&&(listeners=new Set,listenerMap.set(eventType,listeners)),listeners},EventService.prototype.noRegisteredListenersExist=function(){return 0===this.allSyncListeners.size&&0===this.allAsyncListeners.size&&0===this.globalSyncListeners.size&&0===this.globalAsyncListeners.size},EventService.prototype.addEventListener=function(eventType,listener,async){void 0===async&&(async=!1),this.getListeners(eventType,async,!0).add(listener)},EventService.prototype.removeEventListener=function(eventType,listener,async){void 0===async&&(async=!1);var listeners=this.getListeners(eventType,async,!1);listeners&&(listeners.delete(listener),0===listeners.size&&(async?this.allAsyncListeners:this.allSyncListeners).delete(eventType))},EventService.prototype.addGlobalListener=function(listener,async){void 0===async&&(async=!1),(async?this.globalAsyncListeners:this.globalSyncListeners).add(listener)},EventService.prototype.removeGlobalListener=function(listener,async){void 0===async&&(async=!1),(async?this.globalAsyncListeners:this.globalSyncListeners).delete(listener)},EventService.prototype.dispatchEvent=function(event){var agEvent=event;if(this.gridOptionsService){var _a=this.gridOptionsService,api=_a.api,columnApi=_a.columnApi,context=_a.context;agEvent.api=api,agEvent.columnApi=columnApi,agEvent.context=context}this.dispatchToListeners(agEvent,!0),this.dispatchToListeners(agEvent,!1),this.firedEvents[agEvent.type]=!0},EventService.prototype.dispatchEventOnce=function(event){this.firedEvents[event.type]||this.dispatchEvent(event)},EventService.prototype.dispatchToListeners=function(event,async){var _this=this,eventType=event.type;if(async&&"event"in event){var browserEvent=event.event;browserEvent instanceof Event&&(event.eventPath=browserEvent.composedPath())}var listeners=new Set(this.getListeners(eventType,async,!1));listeners.size>0&&function(listeners){listeners.forEach((function(listener){async?_this.dispatchAsync((function(){return listener(event)})):listener(event)}))}(listeners),new Set(async?this.globalAsyncListeners:this.globalSyncListeners).forEach((function(listener){async?_this.dispatchAsync((function(){return _this.frameworkOverrides.dispatchEvent(eventType,(function(){return listener(eventType,event)}),!0)})):_this.frameworkOverrides.dispatchEvent(eventType,(function(){return listener(eventType,event)}),!0)}))},EventService.prototype.dispatchAsync=function(func){this.asyncFunctionsQueue.push(func),this.scheduled||(window.setTimeout(this.flushAsyncQueue.bind(this),0),this.scheduled=!0)},EventService.prototype.flushAsyncQueue=function(){this.scheduled=!1;var queueCopy=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],queueCopy.forEach((function(func){return func()}))},__decorate$2J([__param$a(0,Qualifier("loggerFactory")),__param$a(1,Qualifier("gridOptionsService")),__param$a(2,Qualifier("frameworkOverrides")),__param$a(3,Qualifier("globalEventListener")),__param$a(4,Qualifier("globalSyncEventListener"))],EventService.prototype,"setBeans",null),EventService=__decorate$2J([Bean("eventService")],EventService)}(),__decorate$2I=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$w=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spreadArray$p=function(to,from){for(var i=0,il=from.length,j=to.length;i<il;i++,j++)to[j]=from[i];return to},instanceIdSequence$4=0;function getNextColInstanceId(){return instanceIdSequence$4++}var Column=function(){function Column(colDef,userProvidedColDef,colId,primary){this.instanceId=getNextColInstanceId(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.eventService=new EventService,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=colDef,this.userProvidedColDef=userProvidedColDef,this.colId=colId,this.primary=primary,this.setState(colDef)}return Column.prototype.getInstanceId=function(){return this.instanceId},Column.prototype.setState=function(colDef){void 0!==colDef.sort?"asc"!==colDef.sort&&"desc"!==colDef.sort||(this.sort=colDef.sort):"asc"!==colDef.initialSort&&"desc"!==colDef.initialSort||(this.sort=colDef.initialSort);var sortIndex=attrToNumber(colDef.sortIndex),initialSortIndex=attrToNumber(colDef.initialSortIndex);void 0!==sortIndex?null!==sortIndex&&(this.sortIndex=sortIndex):null!==initialSortIndex&&(this.sortIndex=initialSortIndex);var hide=attrToBoolean(colDef.hide),initialHide=attrToBoolean(colDef.initialHide);this.visible=void 0!==hide?!hide:!initialHide,void 0!==colDef.pinned?this.setPinned(colDef.pinned):this.setPinned(colDef.initialPinned);var flex=attrToNumber(colDef.flex),initialFlex=attrToNumber(colDef.initialFlex);void 0!==flex?this.flex=flex:void 0!==initialFlex&&(this.flex=initialFlex)},Column.prototype.setColDef=function(colDef,userProvidedColDef){this.colDef=colDef,this.userProvidedColDef=userProvidedColDef,this.initMinAndMaxWidths(),this.initDotNotation(),this.eventService.dispatchEvent(this.createColumnEvent("colDefChanged","api"))},Column.prototype.getUserProvidedColDef=function(){return this.userProvidedColDef},Column.prototype.setParent=function(parent){this.parent=parent},Column.prototype.getParent=function(){return this.parent},Column.prototype.setOriginalParent=function(originalParent){this.originalParent=originalParent},Column.prototype.getOriginalParent=function(){return this.originalParent},Column.prototype.initialise=function(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip(),this.validate()},Column.prototype.initDotNotation=function(){var suppressDotNotation=this.gridOptionsService.is("suppressFieldDotNotation");this.fieldContainsDots=exists(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!suppressDotNotation,this.tooltipFieldContainsDots=exists(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!suppressDotNotation},Column.prototype.initMinAndMaxWidths=function(){var colDef=this.colDef;this.minWidth=this.columnUtils.calculateColMinWidth(colDef),this.maxWidth=this.columnUtils.calculateColMaxWidth(colDef)},Column.prototype.initTooltip=function(){this.tooltipEnabled=exists(this.colDef.tooltipField)||exists(this.colDef.tooltipValueGetter)||exists(this.colDef.tooltipComponent)},Column.prototype.resetActualWidth=function(source){void 0===source&&(source="api");var initialWidth=this.columnUtils.calculateColInitialWidth(this.colDef);this.setActualWidth(initialWidth,source,!0)},Column.prototype.isEmptyGroup=function(){return!1},Column.prototype.isRowGroupDisplayed=function(colId){if(missing(this.colDef)||missing(this.colDef.showRowGroup))return!1;var showingAllGroups=!0===this.colDef.showRowGroup,showingThisGroup=this.colDef.showRowGroup===colId;return showingAllGroups||showingThisGroup},Column.prototype.isPrimary=function(){return this.primary},Column.prototype.isFilterAllowed=function(){return!!this.colDef.filter},Column.prototype.isFieldContainsDots=function(){return this.fieldContainsDots},Column.prototype.isTooltipEnabled=function(){return this.tooltipEnabled},Column.prototype.isTooltipFieldContainsDots=function(){return this.tooltipFieldContainsDots},Column.prototype.validate=function(){var colDefAny=this.colDef;function warnOnce(msg,key,obj){doOnce((function(){obj?console.warn(msg,obj):doOnce((function(){return console.warn(msg)}),key)}),key)}if(this.gridOptionsService.isRowModelType("clientSide")&&!ModuleRegistry.__isRegistered(ModuleNames.RowGroupingModule,this.gridOptionsService.getGridId())){(itemsUsed=["enableRowGroup","rowGroup","rowGroupIndex","enablePivot","enableValue","pivot","pivotIndex","aggFunc"].filter((function(x){return exists(colDefAny[x])}))).length>0&&ModuleRegistry.__assertRegistered(ModuleNames.RowGroupingModule,itemsUsed.map((function(i){return"colDef."+i})).join(", "),this.gridOptionsService.getGridId())}if("agRichSelect"!==this.colDef.cellEditor&&"agRichSelectCellEditor"!==this.colDef.cellEditor||ModuleRegistry.__assertRegistered(ModuleNames.RichSelectModule,this.colDef.cellEditor,this.gridOptionsService.getGridId()),this.gridOptionsService.is("treeData")){(itemsUsed=["rowGroup","rowGroupIndex","pivot","pivotIndex"].filter((function(x){return exists(colDefAny[x])}))).length>0&&warnOnce("AG Grid: "+itemsUsed.join()+" is not possible when doing tree data, your column definition should not have "+itemsUsed.join(),"TreeDataCannotRowGroup")}if(exists(colDefAny.menuTabs))if(Array.isArray(colDefAny.menuTabs)){var itemsUsed,communityMenuTabs_1=["filterMenuTab"],enterpriseMenuTabs_1=["columnsMenuTab","generalMenuTab"];(itemsUsed=enterpriseMenuTabs_1.filter((function(x){return colDefAny.menuTabs.includes(x)}))).length>0&&ModuleRegistry.__assertRegistered(ModuleNames.MenuModule,"menuTab(s): "+itemsUsed.map((function(t){return"'"+t+"'"})).join(),this.gridOptionsService.getGridId()),colDefAny.menuTabs.forEach((function(tab){enterpriseMenuTabs_1.includes(tab)||communityMenuTabs_1.includes(tab)||warnOnce("AG Grid: '"+tab+"' is not valid for 'colDef.menuTabs'. Valid values are: "+__spreadArray$p(__spreadArray$p([],__read$w(communityMenuTabs_1)),__read$w(enterpriseMenuTabs_1)).map((function(t){return"'"+t+"'"})).join()+".","wrongValue_menuTabs_"+tab)}))}else warnOnce("AG Grid: The typeof 'colDef.menuTabs' should be an array not:"+typeof colDefAny.menuTabs,"wrongType_menuTabs");exists(colDefAny.columnsMenuParams)&&ModuleRegistry.__assertRegistered(ModuleNames.MenuModule,"columnsMenuParams",this.gridOptionsService.getGridId()),exists(colDefAny.columnsMenuParams)&&ModuleRegistry.__assertRegistered(ModuleNames.ColumnsToolPanelModule,"columnsMenuParams",this.gridOptionsService.getGridId()),exists(this.colDef.width)&&"number"!=typeof this.colDef.width&&warnOnce("AG Grid: colDef.width should be a number, not "+typeof this.colDef.width,"ColumnCheck"),exists(colDefAny.columnGroupShow)&&"closed"!==colDefAny.columnGroupShow&&"open"!==colDefAny.columnGroupShow&&warnOnce("AG Grid: '"+colDefAny.columnGroupShow+"' is not valid for columnGroupShow. Valid values are 'open', 'closed', undefined, null","columnGroupShow_invalid")},Column.prototype.addEventListener=function(eventType,listener){this.eventService.addEventListener(eventType,listener)},Column.prototype.removeEventListener=function(eventType,listener){this.eventService.removeEventListener(eventType,listener)},Column.prototype.createColumnFunctionCallbackParams=function(rowNode){return{node:rowNode,data:rowNode.data,column:this,colDef:this.colDef,context:this.gridOptionsService.context,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi}},Column.prototype.isSuppressNavigable=function(rowNode){if("boolean"==typeof this.colDef.suppressNavigable)return this.colDef.suppressNavigable;if("function"==typeof this.colDef.suppressNavigable){var params=this.createColumnFunctionCallbackParams(rowNode);return(0,this.colDef.suppressNavigable)(params)}return!1},Column.prototype.isCellEditable=function(rowNode){return!(rowNode.group&&!this.gridOptionsService.is("enableGroupEdit"))&&this.isColumnFunc(rowNode,this.colDef.editable)},Column.prototype.isSuppressFillHandle=function(){return!!attrToBoolean(this.colDef.suppressFillHandle)},Column.prototype.isAutoHeight=function(){return!!attrToBoolean(this.colDef.autoHeight)},Column.prototype.isAutoHeaderHeight=function(){return!!attrToBoolean(this.colDef.autoHeaderHeight)},Column.prototype.isRowDrag=function(rowNode){return this.isColumnFunc(rowNode,this.colDef.rowDrag)},Column.prototype.isDndSource=function(rowNode){return this.isColumnFunc(rowNode,this.colDef.dndSource)},Column.prototype.isCellCheckboxSelection=function(rowNode){return this.isColumnFunc(rowNode,this.colDef.checkboxSelection)},Column.prototype.isSuppressPaste=function(rowNode){return this.isColumnFunc(rowNode,this.colDef?this.colDef.suppressPaste:null)},Column.prototype.isResizable=function(){return!!attrToBoolean(this.colDef.resizable)},Column.prototype.isColumnFunc=function(rowNode,value){return"boolean"==typeof value?value:"function"==typeof value&&value(this.createColumnFunctionCallbackParams(rowNode))},Column.prototype.setMoving=function(moving,source){void 0===source&&(source="api"),this.moving=moving,this.eventService.dispatchEvent(this.createColumnEvent("movingChanged",source))},Column.prototype.createColumnEvent=function(type,source){return{type,column:this,columns:[this],source,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}},Column.prototype.isMoving=function(){return this.moving},Column.prototype.getSort=function(){return this.sort},Column.prototype.setSort=function(sort,source){void 0===source&&(source="api"),this.sort!==sort&&(this.sort=sort,this.eventService.dispatchEvent(this.createColumnEvent("sortChanged",source))),this.dispatchStateUpdatedEvent("sort")},Column.prototype.setMenuVisible=function(visible,source){void 0===source&&(source="api"),this.menuVisible!==visible&&(this.menuVisible=visible,this.eventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",source)))},Column.prototype.isMenuVisible=function(){return this.menuVisible},Column.prototype.isSortAscending=function(){return"asc"===this.sort},Column.prototype.isSortDescending=function(){return"desc"===this.sort},Column.prototype.isSortNone=function(){return missing(this.sort)},Column.prototype.isSorting=function(){return exists(this.sort)},Column.prototype.getSortIndex=function(){return this.sortIndex},Column.prototype.setSortIndex=function(sortOrder){this.sortIndex=sortOrder,this.dispatchStateUpdatedEvent("sortIndex")},Column.prototype.setAggFunc=function(aggFunc){this.aggFunc=aggFunc,this.dispatchStateUpdatedEvent("aggFunc")},Column.prototype.getAggFunc=function(){return this.aggFunc},Column.prototype.getLeft=function(){return this.left},Column.prototype.getOldLeft=function(){return this.oldLeft},Column.prototype.getRight=function(){return this.left+this.actualWidth},Column.prototype.setLeft=function(left,source){void 0===source&&(source="api"),this.oldLeft=this.left,this.left!==left&&(this.left=left,this.eventService.dispatchEvent(this.createColumnEvent("leftChanged",source)))},Column.prototype.isFilterActive=function(){return this.filterActive},Column.prototype.setFilterActive=function(active,source,additionalEventAttributes){void 0===source&&(source="api"),this.filterActive!==active&&(this.filterActive=active,this.eventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",source)));var filterChangedEvent=this.createColumnEvent("filterChanged",source);additionalEventAttributes&&mergeDeep(filterChangedEvent,additionalEventAttributes),this.eventService.dispatchEvent(filterChangedEvent)},Column.prototype.isHovered=function(){return this.columnHoverService.isHovered(this)},Column.prototype.setPinned=function(pinned){this.pinned=!0===pinned||"left"===pinned?"left":"right"===pinned?"right":null,this.dispatchStateUpdatedEvent("pinned")},Column.prototype.setFirstRightPinned=function(firstRightPinned,source){void 0===source&&(source="api"),this.firstRightPinned!==firstRightPinned&&(this.firstRightPinned=firstRightPinned,this.eventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",source)))},Column.prototype.setLastLeftPinned=function(lastLeftPinned,source){void 0===source&&(source="api"),this.lastLeftPinned!==lastLeftPinned&&(this.lastLeftPinned=lastLeftPinned,this.eventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",source)))},Column.prototype.isFirstRightPinned=function(){return this.firstRightPinned},Column.prototype.isLastLeftPinned=function(){return this.lastLeftPinned},Column.prototype.isPinned=function(){return"left"===this.pinned||"right"===this.pinned},Column.prototype.isPinnedLeft=function(){return"left"===this.pinned},Column.prototype.isPinnedRight=function(){return"right"===this.pinned},Column.prototype.getPinned=function(){return this.pinned},Column.prototype.setVisible=function(visible,source){void 0===source&&(source="api");var newValue=!0===visible;this.visible!==newValue&&(this.visible=newValue,this.eventService.dispatchEvent(this.createColumnEvent("visibleChanged",source))),this.dispatchStateUpdatedEvent("hide")},Column.prototype.isVisible=function(){return this.visible},Column.prototype.isSpanHeaderHeight=function(){var colDef=this.getColDef();return!colDef.suppressSpanHeaderHeight&&!colDef.autoHeaderHeight},Column.prototype.getColDef=function(){return this.colDef},Column.prototype.getColumnGroupShow=function(){return this.colDef.columnGroupShow},Column.prototype.getColId=function(){return this.colId},Column.prototype.getId=function(){return this.colId},Column.prototype.getUniqueId=function(){return this.colId},Column.prototype.getDefinition=function(){return this.colDef},Column.prototype.getActualWidth=function(){return this.actualWidth},Column.prototype.getAutoHeaderHeight=function(){return this.autoHeaderHeight},Column.prototype.setAutoHeaderHeight=function(height){var changed=height!==this.autoHeaderHeight;return this.autoHeaderHeight=height,changed},Column.prototype.createBaseColDefParams=function(rowNode){return{node:rowNode,data:rowNode.data,colDef:this.colDef,column:this,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}},Column.prototype.getColSpan=function(rowNode){if(missing(this.colDef.colSpan))return 1;var params=this.createBaseColDefParams(rowNode),colSpan=this.colDef.colSpan(params);return Math.max(colSpan,1)},Column.prototype.getRowSpan=function(rowNode){if(missing(this.colDef.rowSpan))return 1;var params=this.createBaseColDefParams(rowNode),rowSpan=this.colDef.rowSpan(params);return Math.max(rowSpan,1)},Column.prototype.setActualWidth=function(actualWidth,source,silent){void 0===source&&(source="api"),void 0===silent&&(silent=!1),null!=this.minWidth&&(actualWidth=Math.max(actualWidth,this.minWidth)),null!=this.maxWidth&&(actualWidth=Math.min(actualWidth,this.maxWidth)),this.actualWidth!==actualWidth&&(this.actualWidth=actualWidth,this.flex&&"flex"!==source&&"gridInitializing"!==source&&(this.flex=null),silent||this.fireColumnWidthChangedEvent(source)),this.dispatchStateUpdatedEvent("width")},Column.prototype.fireColumnWidthChangedEvent=function(source){this.eventService.dispatchEvent(this.createColumnEvent("widthChanged",source))},Column.prototype.isGreaterThanMax=function(width){return null!=this.maxWidth&&width>this.maxWidth},Column.prototype.getMinWidth=function(){return this.minWidth},Column.prototype.getMaxWidth=function(){return this.maxWidth},Column.prototype.getFlex=function(){return this.flex||0},Column.prototype.setFlex=function(flex){this.flex!==flex&&(this.flex=flex),this.dispatchStateUpdatedEvent("flex")},Column.prototype.setMinimum=function(source){void 0===source&&(source="api"),exists(this.minWidth)&&this.setActualWidth(this.minWidth,source)},Column.prototype.setRowGroupActive=function(rowGroup,source){void 0===source&&(source="api"),this.rowGroupActive!==rowGroup&&(this.rowGroupActive=rowGroup,this.eventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",source))),this.dispatchStateUpdatedEvent("rowGroup")},Column.prototype.isRowGroupActive=function(){return this.rowGroupActive},Column.prototype.setPivotActive=function(pivot,source){void 0===source&&(source="api"),this.pivotActive!==pivot&&(this.pivotActive=pivot,this.eventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",source))),this.dispatchStateUpdatedEvent("pivot")},Column.prototype.isPivotActive=function(){return this.pivotActive},Column.prototype.isAnyFunctionActive=function(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()},Column.prototype.isAnyFunctionAllowed=function(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()},Column.prototype.setValueActive=function(value,source){void 0===source&&(source="api"),this.aggregationActive!==value&&(this.aggregationActive=value,this.eventService.dispatchEvent(this.createColumnEvent("columnValueChanged",source)))},Column.prototype.isValueActive=function(){return this.aggregationActive},Column.prototype.isAllowPivot=function(){return!0===this.colDef.enablePivot},Column.prototype.isAllowValue=function(){return!0===this.colDef.enableValue},Column.prototype.isAllowRowGroup=function(){return!0===this.colDef.enableRowGroup},Column.prototype.getMenuTabs=function(defaultValues){var menuTabs=this.getColDef().menuTabs;return null==menuTabs&&(menuTabs=defaultValues),menuTabs},Column.prototype.dispatchStateUpdatedEvent=function(key){this.eventService.dispatchEvent({type:Column.EVENT_STATE_UPDATED,key})},Column.EVENT_MOVING_CHANGED="movingChanged",Column.EVENT_LEFT_CHANGED="leftChanged",Column.EVENT_WIDTH_CHANGED="widthChanged",Column.EVENT_LAST_LEFT_PINNED_CHANGED="lastLeftPinnedChanged",Column.EVENT_FIRST_RIGHT_PINNED_CHANGED="firstRightPinnedChanged",Column.EVENT_VISIBLE_CHANGED="visibleChanged",Column.EVENT_FILTER_CHANGED="filterChanged",Column.EVENT_FILTER_ACTIVE_CHANGED="filterActiveChanged",Column.EVENT_SORT_CHANGED="sortChanged",Column.EVENT_COL_DEF_CHANGED="colDefChanged",Column.EVENT_MENU_VISIBLE_CHANGED="menuVisibleChanged",Column.EVENT_ROW_GROUP_CHANGED="columnRowGroupChanged",Column.EVENT_PIVOT_CHANGED="columnPivotChanged",Column.EVENT_VALUE_CHANGED="columnValueChanged",Column.EVENT_STATE_UPDATED="columnStateUpdated",__decorate$2I([Autowired("gridOptionsService")],Column.prototype,"gridOptionsService",void 0),__decorate$2I([Autowired("columnUtils")],Column.prototype,"columnUtils",void 0),__decorate$2I([Autowired("columnHoverService")],Column.prototype,"columnHoverService",void 0),__decorate$2I([PostConstruct],Column.prototype,"initialise",null),Column}(),ProvidedColumnGroup=function(){function ProvidedColumnGroup(colGroupDef,groupId,padding,level){this.localEventService=new EventService,this.expandable=!1,this.instanceId=getNextColInstanceId(),this.expandableListenerRemoveCallback=null,this.colGroupDef=colGroupDef,this.groupId=groupId,this.expanded=!!colGroupDef&&!!colGroupDef.openByDefault,this.padding=padding,this.level=level}return ProvidedColumnGroup.prototype.destroy=function(){this.expandableListenerRemoveCallback&&this.reset(null,void 0)},ProvidedColumnGroup.prototype.reset=function(colGroupDef,level){this.colGroupDef=colGroupDef,this.level=level,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0},ProvidedColumnGroup.prototype.getInstanceId=function(){return this.instanceId},ProvidedColumnGroup.prototype.setOriginalParent=function(originalParent){this.originalParent=originalParent},ProvidedColumnGroup.prototype.getOriginalParent=function(){return this.originalParent},ProvidedColumnGroup.prototype.getLevel=function(){return this.level},ProvidedColumnGroup.prototype.isVisible=function(){return!!this.children&&this.children.some((function(child){return child.isVisible()}))},ProvidedColumnGroup.prototype.isPadding=function(){return this.padding},ProvidedColumnGroup.prototype.setExpanded=function(expanded){this.expanded=void 0!==expanded&&expanded;var event={type:ProvidedColumnGroup.EVENT_EXPANDED_CHANGED};this.localEventService.dispatchEvent(event)},ProvidedColumnGroup.prototype.isExpandable=function(){return this.expandable},ProvidedColumnGroup.prototype.isExpanded=function(){return this.expanded},ProvidedColumnGroup.prototype.getGroupId=function(){return this.groupId},ProvidedColumnGroup.prototype.getId=function(){return this.getGroupId()},ProvidedColumnGroup.prototype.setChildren=function(children){this.children=children},ProvidedColumnGroup.prototype.getChildren=function(){return this.children},ProvidedColumnGroup.prototype.getColGroupDef=function(){return this.colGroupDef},ProvidedColumnGroup.prototype.getLeafColumns=function(){var result=[];return this.addLeafColumns(result),result},ProvidedColumnGroup.prototype.addLeafColumns=function(leafColumns){this.children&&this.children.forEach((function(child){child instanceof Column?leafColumns.push(child):child instanceof ProvidedColumnGroup&&child.addLeafColumns(leafColumns)}))},ProvidedColumnGroup.prototype.getColumnGroupShow=function(){var colGroupDef=this.colGroupDef;if(colGroupDef)return colGroupDef.columnGroupShow},ProvidedColumnGroup.prototype.setupExpandable=function(){var _this=this;this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();var listener=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach((function(col){return col.addEventListener("visibleChanged",listener)})),this.expandableListenerRemoveCallback=function(){_this.getLeafColumns().forEach((function(col){return col.removeEventListener("visibleChanged",listener)})),_this.expandableListenerRemoveCallback=null}},ProvidedColumnGroup.prototype.setExpandable=function(){if(!this.isPadding()){for(var atLeastOneShowingWhenOpen=!1,atLeastOneShowingWhenClosed=!1,atLeastOneChangeable=!1,children=this.findChildrenRemovingPadding(),i=0,j=children.length;i<j;i++){var abstractColumn=children[i];if(abstractColumn.isVisible()){var headerGroupShow=abstractColumn.getColumnGroupShow();"open"===headerGroupShow?(atLeastOneShowingWhenOpen=!0,atLeastOneChangeable=!0):"closed"===headerGroupShow?(atLeastOneShowingWhenClosed=!0,atLeastOneChangeable=!0):(atLeastOneShowingWhenOpen=!0,atLeastOneShowingWhenClosed=!0)}}var expandable=atLeastOneShowingWhenOpen&&atLeastOneShowingWhenClosed&&atLeastOneChangeable;if(this.expandable!==expandable){this.expandable=expandable;var event_1={type:ProvidedColumnGroup.EVENT_EXPANDABLE_CHANGED};this.localEventService.dispatchEvent(event_1)}}},ProvidedColumnGroup.prototype.findChildrenRemovingPadding=function(){var res=[],process=function(items){items.forEach((function(item){item instanceof ProvidedColumnGroup&&item.isPadding()?process(item.children):res.push(item)}))};return process(this.children),res},ProvidedColumnGroup.prototype.onColumnVisibilityChanged=function(){this.setExpandable()},ProvidedColumnGroup.prototype.addEventListener=function(eventType,listener){this.localEventService.addEventListener(eventType,listener)},ProvidedColumnGroup.prototype.removeEventListener=function(eventType,listener){this.localEventService.removeEventListener(eventType,listener)},ProvidedColumnGroup.EVENT_EXPANDED_CHANGED="expandedChanged",ProvidedColumnGroup.EVENT_EXPANDABLE_CHANGED="expandableChanged",function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([PreDestroy],ProvidedColumnGroup.prototype,"destroy",null),ProvidedColumnGroup}(),DefaultColumnTypes={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}};function firstExistingValue(){for(var values=[],_i=0;_i<arguments.length;_i++)values[_i]=arguments[_i];for(var i=0;i<values.length;i++){var value=values[i];if(exists(value))return value}return null}function last(arr){if(arr&&arr.length)return arr[arr.length-1]}function areEqual(a,b,comparator){return null==a&&null==b||null!=a&&null!=b&&a.length===b.length&&a.every((function(value,index){return comparator?comparator(value,b[index]):b[index]===value}))}function sortNumerically(array){return array.sort((function(a,b){return a-b}))}function removeFromUnorderedArray(array,object){var index=array.indexOf(object);index>=0&&(array[index]=array[array.length-1],array.pop())}function removeFromArray(array,object){var index=array.indexOf(object);index>=0&&array.splice(index,1)}function removeAllFromUnorderedArray(array,toRemove){for(var i=0;i<toRemove.length;i++)removeFromUnorderedArray(array,toRemove[i])}function removeAllFromArray(array,toRemove){for(var i=0;i<toRemove.length;i++)removeFromArray(array,toRemove[i])}function insertIntoArray(array,object,toIndex){array.splice(toIndex,0,object)}function moveInArray(array,objectsToMove,toIndex){removeAllFromArray(array,objectsToMove),objectsToMove.slice().reverse().forEach((function(obj){return insertIntoArray(array,obj,toIndex)}))}function includes(array,value){return array.indexOf(value)>-1}function flatten(arrayOfArrays){return[].concat.apply([],arrayOfArrays)}function pushAll(target,source){null!=source&&null!=target&&source.forEach((function(value){return target.push(value)}))}var ArrayUtils=Object.freeze({__proto__:null,firstExistingValue,existsAndNotEmpty:function existsAndNotEmpty(value){return null!=value&&value.length>0},last,areEqual,shallowCompare:function shallowCompare(arr1,arr2){return areEqual(arr1,arr2)},sortNumerically,removeRepeatsFromArray:function removeRepeatsFromArray(array,object){if(array)for(var index=array.length-2;index>=0;index--){var thisOneMatches=array[index]===object,nextOneMatches=array[index+1]===object;thisOneMatches&&nextOneMatches&&array.splice(index+1,1)}},removeFromUnorderedArray,removeFromArray,removeAllFromUnorderedArray,removeAllFromArray,insertIntoArray,insertArrayIntoArray:function insertArrayIntoArray(dest,src,toIndex){if(null!=dest&&null!=src)for(var i=src.length-1;i>=0;i--){insertIntoArray(dest,src[i],toIndex)}},moveInArray,includes,flatten,pushAll,toStrings:function toStrings(array){return array.map(toStringOrNull)},forEachReverse:function forEachReverse(list,action){if(null!=list)for(var i=list.length-1;i>=0;i--)action(list[i],i)}}),PASSIVE_EVENTS$1=["touchstart","touchend","touchmove","touchcancel","scroll"],supports={};function stopPropagationForAgGrid(event){event.__ag_Grid_Stop_Propagation=!0}function isStopPropagationForAgGrid(event){return!0===event.__ag_Grid_Stop_Propagation}var tags,isEventSupported=(tags={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"},function(eventName){if("boolean"==typeof supports[eventName])return supports[eventName];var el=document.createElement(tags[eventName]||"div");return supports[eventName="on"+eventName]=eventName in el});function getCtrlForEventTarget(gridOptionsService,eventTarget,type){for(var sourceElement=eventTarget;sourceElement;){var renderedComp=gridOptionsService.getDomData(sourceElement,type);if(renderedComp)return renderedComp;sourceElement=sourceElement.parentElement}return null}function isElementInEventPath(element,event){return!(!event||!element)&&getEventPath(event).indexOf(element)>=0}function createEventPath(event){for(var res=[],pointer=event.target;pointer;)res.push(pointer),pointer=pointer.parentElement;return res}function getEventPath(event){var eventNoType=event;return eventNoType.path?eventNoType.path:eventNoType.composedPath?eventNoType.composedPath():createEventPath(eventNoType)}function addSafePassiveEventListener(frameworkOverrides,eElement,event,listener){var options=includes(PASSIVE_EVENTS$1,event)?{passive:!0}:void 0;frameworkOverrides&&frameworkOverrides.addEventListener&&frameworkOverrides.addEventListener(eElement,event,listener,options)}var extendStatics,EventUtils=Object.freeze({__proto__:null,stopPropagationForAgGrid,isStopPropagationForAgGrid,isEventSupported,getCtrlForEventTarget,isElementInEventPath,createEventPath,getEventPath,addSafePassiveEventListener}),__decorate$2G=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},BeanStub=function(){function BeanStub(){var _this=this;this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.lastChangeSetIdLookup={},this.propertyListenerId=0,this.isAlive=function(){return!_this.destroyed}}return BeanStub.prototype.getFrameworkOverrides=function(){return this.frameworkOverrides},BeanStub.prototype.getContext=function(){return this.context},BeanStub.prototype.destroy=function(){this.destroyFunctions.forEach((function(func){return func()})),this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchEvent({type:BeanStub.EVENT_DESTROYED})},BeanStub.prototype.addEventListener=function(eventType,listener){this.localEventService||(this.localEventService=new EventService),this.localEventService.addEventListener(eventType,listener)},BeanStub.prototype.removeEventListener=function(eventType,listener){this.localEventService&&this.localEventService.removeEventListener(eventType,listener)},BeanStub.prototype.dispatchEventAsync=function(event){var _this=this;window.setTimeout((function(){return _this.dispatchEvent(event)}),0)},BeanStub.prototype.dispatchEvent=function(event){this.localEventService&&this.localEventService.dispatchEvent(event)},BeanStub.prototype.addManagedListener=function(object,event,listener){var _this=this;if(!this.destroyed){object instanceof HTMLElement?addSafePassiveEventListener(this.getFrameworkOverrides(),object,event,listener):object.addEventListener(event,listener);var destroyFunc=function(){return object.removeEventListener(event,listener),_this.destroyFunctions=_this.destroyFunctions.filter((function(fn){return fn!==destroyFunc})),null};return this.destroyFunctions.push(destroyFunc),destroyFunc}},BeanStub.prototype.setupGridOptionListener=function(event,listener){var _this=this;this.gridOptionsService.addEventListener(event,listener);var destroyFunc=function(){return _this.gridOptionsService.removeEventListener(event,listener),_this.destroyFunctions=_this.destroyFunctions.filter((function(fn){return fn!==destroyFunc})),null};this.destroyFunctions.push(destroyFunc)},BeanStub.prototype.addManagedPropertyListener=function(event,listener){this.destroyed||this.setupGridOptionListener(event,listener)},BeanStub.prototype.addManagedPropertyListeners=function(events,listener){var _this=this;if(!this.destroyed){var eventsKey=events.join("-")+this.propertyListenerId++,wrappedListener=function(event){if(event.changeSet){if(event.changeSet&&event.changeSet.id===_this.lastChangeSetIdLookup[eventsKey])return;_this.lastChangeSetIdLookup[eventsKey]=event.changeSet.id}var propertiesChangeEvent={type:"gridPropertyChanged",changeSet:event.changeSet};listener(propertiesChangeEvent)};events.forEach((function(event){return _this.setupGridOptionListener(event,wrappedListener)}))}},BeanStub.prototype.addDestroyFunc=function(func){this.isAlive()?this.destroyFunctions.push(func):func()},BeanStub.prototype.createManagedBean=function(bean,context){var res=this.createBean(bean,context);return this.addDestroyFunc(this.destroyBean.bind(this,bean,context)),res},BeanStub.prototype.createBean=function(bean,context,afterPreCreateCallback){return(context||this.getContext()).createBean(bean,afterPreCreateCallback)},BeanStub.prototype.destroyBean=function(bean,context){return(context||this.getContext()).destroyBean(bean)},BeanStub.prototype.destroyBeans=function(beans,context){var _this=this;return beans&&beans.forEach((function(bean){return _this.destroyBean(bean,context)})),[]},BeanStub.EVENT_DESTROYED="destroyed",__decorate$2G([Autowired("frameworkOverrides")],BeanStub.prototype,"frameworkOverrides",void 0),__decorate$2G([Autowired("context")],BeanStub.prototype,"context",void 0),__decorate$2G([Autowired("eventService")],BeanStub.prototype,"eventService",void 0),__decorate$2G([Autowired("gridOptionsService")],BeanStub.prototype,"gridOptionsService",void 0),__decorate$2G([Autowired("localeService")],BeanStub.prototype,"localeService",void 0),__decorate$2G([Autowired("environment")],BeanStub.prototype,"environment",void 0),__decorate$2G([PreDestroy],BeanStub.prototype,"destroy",null),BeanStub}(),__extends$36=(extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)},function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__decorate$2F=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ColumnFactory=function(_super){function ColumnFactory(){return null!==_super&&_super.apply(this,arguments)||this}var paramIndex,decorator;return __extends$36(ColumnFactory,_super),ColumnFactory.prototype.setBeans=function(loggerFactory){this.logger=loggerFactory.create("ColumnFactory")},ColumnFactory.prototype.createColumnTree=function(defs,primaryColumns,existingTree){var columnKeyCreator=new ColumnKeyCreator,_a=this.extractExistingTreeData(existingTree),existingCols=_a.existingCols,existingGroups=_a.existingGroups,existingColKeys=_a.existingColKeys;columnKeyCreator.addExistingKeys(existingColKeys);var unbalancedTree=this.recursivelyCreateColumns(defs,0,primaryColumns,existingCols,columnKeyCreator,existingGroups),treeDept=this.findMaxDept(unbalancedTree,0);this.logger.log("Number of levels for grouped columns is "+treeDept);var columnTree=this.balanceColumnTree(unbalancedTree,0,treeDept,columnKeyCreator);return this.columnUtils.depthFirstOriginalTreeSearch(null,columnTree,(function(child,parent){child instanceof ProvidedColumnGroup&&child.setupExpandable(),child.setOriginalParent(parent)})),{columnTree,treeDept}},ColumnFactory.prototype.extractExistingTreeData=function(existingTree){var existingCols=[],existingGroups=[],existingColKeys=[];return existingTree&&this.columnUtils.depthFirstOriginalTreeSearch(null,existingTree,(function(item){if(item instanceof ProvidedColumnGroup){var group=item;existingGroups.push(group)}else{var col=item;existingColKeys.push(col.getId()),existingCols.push(col)}})),{existingCols,existingGroups,existingColKeys}},ColumnFactory.prototype.createForAutoGroups=function(autoGroupCols,gridBalancedTree){var _this=this;return autoGroupCols.map((function(col){return _this.createAutoGroupTreeItem(gridBalancedTree,col)}))},ColumnFactory.prototype.createAutoGroupTreeItem=function(balancedColumnTree,column){for(var dept=this.findDepth(balancedColumnTree),nextChild=column,i=dept-1;i>=0;i--){var autoGroup=new ProvidedColumnGroup(null,"FAKE_PATH_"+column.getId()+"}_"+i,!0,i);this.createBean(autoGroup),autoGroup.setChildren([nextChild]),nextChild.setOriginalParent(autoGroup),nextChild=autoGroup}return 0===dept&&column.setOriginalParent(null),nextChild},ColumnFactory.prototype.findDepth=function(balancedColumnTree){for(var dept=0,pointer=balancedColumnTree;pointer&&pointer[0]&&pointer[0]instanceof ProvidedColumnGroup;)dept++,pointer=pointer[0].getChildren();return dept},ColumnFactory.prototype.balanceColumnTree=function(unbalancedTree,currentDept,columnDept,columnKeyCreator){for(var result=[],i=0;i<unbalancedTree.length;i++){var child=unbalancedTree[i];if(child instanceof ProvidedColumnGroup){var originalGroup=child,newChildren=this.balanceColumnTree(originalGroup.getChildren(),currentDept+1,columnDept,columnKeyCreator);originalGroup.setChildren(newChildren),result.push(originalGroup)}else{for(var firstPaddedGroup=void 0,currentPaddedGroup=void 0,j=columnDept-1;j>=currentDept;j--){var newColId=columnKeyCreator.getUniqueKey(null,null),colGroupDefMerged=this.createMergedColGroupDef(null),paddedGroup=new ProvidedColumnGroup(colGroupDefMerged,newColId,!0,currentDept);this.createBean(paddedGroup),currentPaddedGroup&&currentPaddedGroup.setChildren([paddedGroup]),currentPaddedGroup=paddedGroup,firstPaddedGroup||(firstPaddedGroup=currentPaddedGroup)}if(firstPaddedGroup&&currentPaddedGroup){if(result.push(firstPaddedGroup),unbalancedTree.some((function(leaf){return leaf instanceof ProvidedColumnGroup}))){currentPaddedGroup.setChildren([child]);continue}currentPaddedGroup.setChildren(unbalancedTree);break}result.push(child)}}return result},ColumnFactory.prototype.findMaxDept=function(treeChildren,dept){for(var maxDeptThisLevel=dept,i=0;i<treeChildren.length;i++){var abstractColumn=treeChildren[i];if(abstractColumn instanceof ProvidedColumnGroup){var originalGroup=abstractColumn,newDept=this.findMaxDept(originalGroup.getChildren(),dept+1);maxDeptThisLevel<newDept&&(maxDeptThisLevel=newDept)}}return maxDeptThisLevel},ColumnFactory.prototype.recursivelyCreateColumns=function(defs,level,primaryColumns,existingColsCopy,columnKeyCreator,existingGroups){if(!defs)return[];for(var result=new Array(defs.length),i=0;i<result.length;i++){var def=defs[i];this.isColumnGroup(def)?result[i]=this.createColumnGroup(primaryColumns,def,level,existingColsCopy,columnKeyCreator,existingGroups):result[i]=this.createColumn(primaryColumns,def,existingColsCopy,columnKeyCreator)}return result},ColumnFactory.prototype.createColumnGroup=function(primaryColumns,colGroupDef,level,existingColumns,columnKeyCreator,existingGroups){var colGroupDefMerged=this.createMergedColGroupDef(colGroupDef),groupId=columnKeyCreator.getUniqueKey(colGroupDefMerged.groupId||null,null),providedGroup=new ProvidedColumnGroup(colGroupDefMerged,groupId,!1,level);this.createBean(providedGroup);var existingGroupAndIndex=this.findExistingGroup(colGroupDef,existingGroups);existingGroupAndIndex&&existingGroups.splice(existingGroupAndIndex.idx,1);var existingGroup=null==existingGroupAndIndex?void 0:existingGroupAndIndex.group;existingGroup&&providedGroup.setExpanded(existingGroup.isExpanded());var children=this.recursivelyCreateColumns(colGroupDefMerged.children,level+1,primaryColumns,existingColumns,columnKeyCreator,existingGroups);return providedGroup.setChildren(children),providedGroup},ColumnFactory.prototype.createMergedColGroupDef=function(colGroupDef){var colGroupDefMerged={};return Object.assign(colGroupDefMerged,this.gridOptionsService.get("defaultColGroupDef")),Object.assign(colGroupDefMerged,colGroupDef),colGroupDefMerged},ColumnFactory.prototype.createColumn=function(primaryColumns,colDef,existingColsCopy,columnKeyCreator){var existingColAndIndex=this.findExistingColumn(colDef,existingColsCopy);existingColAndIndex&&(null==existingColsCopy||existingColsCopy.splice(existingColAndIndex.idx,1));var column=null==existingColAndIndex?void 0:existingColAndIndex.column;if(column){colDefMerged=this.addColumnDefaultAndTypes(colDef,column.getColId());column.setColDef(colDefMerged,colDef),this.applyColumnState(column,colDefMerged)}else{var colId=columnKeyCreator.getUniqueKey(colDef.colId,colDef.field),colDefMerged=this.addColumnDefaultAndTypes(colDef,colId);column=new Column(colDefMerged,colDef,colId,primaryColumns),this.context.createBean(column)}return this.dataTypeService.addColumnListeners(column),column},ColumnFactory.prototype.applyColumnState=function(column,colDef){var flex=attrToNumber(colDef.flex);if(void 0!==flex&&column.setFlex(flex),column.getFlex()<=0){var width=attrToNumber(colDef.width);if(null!=width)column.setActualWidth(width);else{var widthBeforeUpdate=column.getActualWidth();column.setActualWidth(widthBeforeUpdate)}}void 0!==colDef.sort&&("asc"==colDef.sort||"desc"==colDef.sort?column.setSort(colDef.sort):column.setSort(void 0));var sortIndex=attrToNumber(colDef.sortIndex);void 0!==sortIndex&&column.setSortIndex(sortIndex);var hide=attrToBoolean(colDef.hide);void 0!==hide&&column.setVisible(!hide),void 0!==colDef.pinned&&column.setPinned(colDef.pinned)},ColumnFactory.prototype.findExistingColumn=function(newColDef,existingColsCopy){if(existingColsCopy)for(var i=0;i<existingColsCopy.length;i++){var def=existingColsCopy[i].getUserProvidedColDef();if(def)if(null!=newColDef.colId){if(existingColsCopy[i].getId()===newColDef.colId)return{idx:i,column:existingColsCopy[i]}}else if(null!=newColDef.field){if(def.field===newColDef.field)return{idx:i,column:existingColsCopy[i]}}else if(def===newColDef)return{idx:i,column:existingColsCopy[i]}}},ColumnFactory.prototype.findExistingGroup=function(newGroupDef,existingGroups){if(null!=newGroupDef.groupId)for(var i=0;i<existingGroups.length;i++){var existingGroup=existingGroups[i];if(existingGroup.getColGroupDef()&&existingGroup.getId()===newGroupDef.groupId)return{idx:i,group:existingGroup}}},ColumnFactory.prototype.addColumnDefaultAndTypes=function(colDef,colId){var res={};mergeDeep(res,this.gridOptionsService.get("defaultColDef"),!1,!0);var columnType=this.dataTypeService.updateColDefAndGetColumnType(res,colDef,colId);columnType&&this.assignColumnTypes(columnType,res),mergeDeep(res,colDef,!1,!0);var autoGroupColDef=this.gridOptionsService.get("autoGroupColumnDef"),isSortingCoupled=this.gridOptionsService.isColumnsSortingCoupledToGroup();return colDef.rowGroup&&autoGroupColDef&&isSortingCoupled&&mergeDeep(res,{sort:autoGroupColDef.sort,initialSort:autoGroupColDef.initialSort},!1,!0),this.dataTypeService.validateColDef(res),res},ColumnFactory.prototype.assignColumnTypes=function(typeKeys,colDefMerged){if(typeKeys.length){var allColumnTypes=Object.assign({},DefaultColumnTypes);iterateObject(this.gridOptionsService.get("columnTypes")||{},(function(key,value){key in allColumnTypes?console.warn("AG Grid: the column type '"+key+"' is a default column type and cannot be overridden."):allColumnTypes[key]=value})),typeKeys.forEach((function(t){var typeColDef=allColumnTypes[t.trim()];typeColDef?mergeDeep(colDefMerged,typeColDef,!1,!0):console.warn("AG Grid: colDef.type '"+t+"' does not correspond to defined gridOptions.columnTypes")}))}},ColumnFactory.prototype.isColumnGroup=function(abstractColDef){return void 0!==abstractColDef.children},__decorate$2F([Autowired("columnUtils")],ColumnFactory.prototype,"columnUtils",void 0),__decorate$2F([Autowired("dataTypeService")],ColumnFactory.prototype,"dataTypeService",void 0),__decorate$2F([(paramIndex=0,decorator=Qualifier("loggerFactory"),function(target,key){decorator(target,key,paramIndex)})],ColumnFactory.prototype,"setBeans",null),ColumnFactory=__decorate$2F([Bean("columnFactory")],ColumnFactory)}(BeanStub),ColumnGroup=function(){function ColumnGroup(providedColumnGroup,groupId,partId,pinned){this.displayedChildren=[],this.localEventService=new EventService,this.groupId=groupId,this.partId=partId,this.providedColumnGroup=providedColumnGroup,this.pinned=pinned}return ColumnGroup.createUniqueId=function(groupId,instanceId){return groupId+"_"+instanceId},ColumnGroup.prototype.reset=function(){this.parent=null,this.children=null,this.displayedChildren=null},ColumnGroup.prototype.getParent=function(){return this.parent},ColumnGroup.prototype.setParent=function(parent){this.parent=parent},ColumnGroup.prototype.getUniqueId=function(){return ColumnGroup.createUniqueId(this.groupId,this.partId)},ColumnGroup.prototype.isEmptyGroup=function(){return 0===this.displayedChildren.length},ColumnGroup.prototype.isMoving=function(){var allLeafColumns=this.getProvidedColumnGroup().getLeafColumns();return!(!allLeafColumns||0===allLeafColumns.length)&&allLeafColumns.every((function(col){return col.isMoving()}))},ColumnGroup.prototype.checkLeft=function(){if(this.displayedChildren.forEach((function(child){child instanceof ColumnGroup&&child.checkLeft()})),this.displayedChildren.length>0)if(this.gridOptionsService.is("enableRtl")){var lastChildLeft=last(this.displayedChildren).getLeft();this.setLeft(lastChildLeft)}else{var firstChildLeft=this.displayedChildren[0].getLeft();this.setLeft(firstChildLeft)}else this.setLeft(null)},ColumnGroup.prototype.getLeft=function(){return this.left},ColumnGroup.prototype.getOldLeft=function(){return this.oldLeft},ColumnGroup.prototype.setLeft=function(left){this.oldLeft=left,this.left!==left&&(this.left=left,this.localEventService.dispatchEvent(this.createAgEvent(ColumnGroup.EVENT_LEFT_CHANGED)))},ColumnGroup.prototype.getPinned=function(){return this.pinned},ColumnGroup.prototype.createAgEvent=function(type){return{type}},ColumnGroup.prototype.addEventListener=function(eventType,listener){this.localEventService.addEventListener(eventType,listener)},ColumnGroup.prototype.removeEventListener=function(eventType,listener){this.localEventService.removeEventListener(eventType,listener)},ColumnGroup.prototype.getGroupId=function(){return this.groupId},ColumnGroup.prototype.getPartId=function(){return this.partId},ColumnGroup.prototype.isChildInThisGroupDeepSearch=function(wantedChild){var result=!1;return this.children.forEach((function(foundChild){wantedChild===foundChild&&(result=!0),foundChild instanceof ColumnGroup&&foundChild.isChildInThisGroupDeepSearch(wantedChild)&&(result=!0)})),result},ColumnGroup.prototype.getActualWidth=function(){var groupActualWidth=0;return this.displayedChildren&&this.displayedChildren.forEach((function(child){groupActualWidth+=child.getActualWidth()})),groupActualWidth},ColumnGroup.prototype.isResizable=function(){if(!this.displayedChildren)return!1;var result=!1;return this.displayedChildren.forEach((function(child){child.isResizable()&&(result=!0)})),result},ColumnGroup.prototype.getMinWidth=function(){var result=0;return this.displayedChildren.forEach((function(groupChild){result+=groupChild.getMinWidth()||0})),result},ColumnGroup.prototype.addChild=function(child){this.children||(this.children=[]),this.children.push(child)},ColumnGroup.prototype.getDisplayedChildren=function(){return this.displayedChildren},ColumnGroup.prototype.getLeafColumns=function(){var result=[];return this.addLeafColumns(result),result},ColumnGroup.prototype.getDisplayedLeafColumns=function(){var result=[];return this.addDisplayedLeafColumns(result),result},ColumnGroup.prototype.getDefinition=function(){return this.providedColumnGroup.getColGroupDef()},ColumnGroup.prototype.getColGroupDef=function(){return this.providedColumnGroup.getColGroupDef()},ColumnGroup.prototype.isPadding=function(){return this.providedColumnGroup.isPadding()},ColumnGroup.prototype.isExpandable=function(){return this.providedColumnGroup.isExpandable()},ColumnGroup.prototype.isExpanded=function(){return this.providedColumnGroup.isExpanded()},ColumnGroup.prototype.setExpanded=function(expanded){this.providedColumnGroup.setExpanded(expanded)},ColumnGroup.prototype.addDisplayedLeafColumns=function(leafColumns){this.displayedChildren.forEach((function(child){child instanceof Column?leafColumns.push(child):child instanceof ColumnGroup&&child.addDisplayedLeafColumns(leafColumns)}))},ColumnGroup.prototype.addLeafColumns=function(leafColumns){this.children.forEach((function(child){child instanceof Column?leafColumns.push(child):child instanceof ColumnGroup&&child.addLeafColumns(leafColumns)}))},ColumnGroup.prototype.getChildren=function(){return this.children},ColumnGroup.prototype.getColumnGroupShow=function(){return this.providedColumnGroup.getColumnGroupShow()},ColumnGroup.prototype.getProvidedColumnGroup=function(){return this.providedColumnGroup},ColumnGroup.prototype.getPaddingLevel=function(){var parent=this.getParent();return this.isPadding()&&parent&&parent.isPadding()?1+parent.getPaddingLevel():0},ColumnGroup.prototype.calculateDisplayedColumns=function(){var _this=this;this.displayedChildren=[];for(var parentWithExpansion=this;null!=parentWithExpansion&&parentWithExpansion.isPadding();)parentWithExpansion=parentWithExpansion.getParent();if(!(!!parentWithExpansion&&parentWithExpansion.providedColumnGroup.isExpandable()))return this.displayedChildren=this.children,void this.localEventService.dispatchEvent(this.createAgEvent(ColumnGroup.EVENT_DISPLAYED_CHILDREN_CHANGED));this.children.forEach((function(child){if(!(child instanceof ColumnGroup&&(!child.displayedChildren||!child.displayedChildren.length)))switch(child.getColumnGroupShow()){case"open":parentWithExpansion.providedColumnGroup.isExpanded()&&_this.displayedChildren.push(child);break;case"closed":parentWithExpansion.providedColumnGroup.isExpanded()||_this.displayedChildren.push(child);break;default:_this.displayedChildren.push(child)}})),this.localEventService.dispatchEvent(this.createAgEvent(ColumnGroup.EVENT_DISPLAYED_CHILDREN_CHANGED))},ColumnGroup.EVENT_LEFT_CHANGED="leftChanged",ColumnGroup.EVENT_DISPLAYED_CHILDREN_CHANGED="displayedChildrenChanged",function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([Autowired("gridOptionsService")],ColumnGroup.prototype,"gridOptionsService",void 0),ColumnGroup}(),Events=function(){function Events(){}return Events.EVENT_COLUMN_EVERYTHING_CHANGED="columnEverythingChanged",Events.EVENT_NEW_COLUMNS_LOADED="newColumnsLoaded",Events.EVENT_COLUMN_PIVOT_MODE_CHANGED="columnPivotModeChanged",Events.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged",Events.EVENT_EXPAND_COLLAPSE_ALL="expandOrCollapseAll",Events.EVENT_COLUMN_PIVOT_CHANGED="columnPivotChanged",Events.EVENT_GRID_COLUMNS_CHANGED="gridColumnsChanged",Events.EVENT_COLUMN_VALUE_CHANGED="columnValueChanged",Events.EVENT_COLUMN_MOVED="columnMoved",Events.EVENT_COLUMN_VISIBLE="columnVisible",Events.EVENT_COLUMN_PINNED="columnPinned",Events.EVENT_COLUMN_GROUP_OPENED="columnGroupOpened",Events.EVENT_COLUMN_RESIZED="columnResized",Events.EVENT_DISPLAYED_COLUMNS_CHANGED="displayedColumnsChanged",Events.EVENT_VIRTUAL_COLUMNS_CHANGED="virtualColumnsChanged",Events.EVENT_ASYNC_TRANSACTIONS_FLUSHED="asyncTransactionsFlushed",Events.EVENT_ROW_GROUP_OPENED="rowGroupOpened",Events.EVENT_ROW_DATA_CHANGED="rowDataChanged",Events.EVENT_ROW_DATA_UPDATED="rowDataUpdated",Events.EVENT_PINNED_ROW_DATA_CHANGED="pinnedRowDataChanged",Events.EVENT_RANGE_SELECTION_CHANGED="rangeSelectionChanged",Events.EVENT_CHART_CREATED="chartCreated",Events.EVENT_CHART_RANGE_SELECTION_CHANGED="chartRangeSelectionChanged",Events.EVENT_CHART_OPTIONS_CHANGED="chartOptionsChanged",Events.EVENT_CHART_DESTROYED="chartDestroyed",Events.EVENT_TOOL_PANEL_VISIBLE_CHANGED="toolPanelVisibleChanged",Events.EVENT_TOOL_PANEL_SIZE_CHANGED="toolPanelSizeChanged",Events.EVENT_COLUMN_PANEL_ITEM_DRAG_START="columnPanelItemDragStart",Events.EVENT_COLUMN_PANEL_ITEM_DRAG_END="columnPanelItemDragEnd",Events.EVENT_MODEL_UPDATED="modelUpdated",Events.EVENT_CUT_START="cutStart",Events.EVENT_CUT_END="cutEnd",Events.EVENT_PASTE_START="pasteStart",Events.EVENT_PASTE_END="pasteEnd",Events.EVENT_FILL_START="fillStart",Events.EVENT_FILL_END="fillEnd",Events.EVENT_RANGE_DELETE_START="rangeDeleteStart",Events.EVENT_RANGE_DELETE_END="rangeDeleteEnd",Events.EVENT_UNDO_STARTED="undoStarted",Events.EVENT_UNDO_ENDED="undoEnded",Events.EVENT_REDO_STARTED="redoStarted",Events.EVENT_REDO_ENDED="redoEnded",Events.EVENT_KEY_SHORTCUT_CHANGED_CELL_START="keyShortcutChangedCellStart",Events.EVENT_KEY_SHORTCUT_CHANGED_CELL_END="keyShortcutChangedCellEnd",Events.EVENT_CELL_CLICKED="cellClicked",Events.EVENT_CELL_DOUBLE_CLICKED="cellDoubleClicked",Events.EVENT_CELL_MOUSE_DOWN="cellMouseDown",Events.EVENT_CELL_CONTEXT_MENU="cellContextMenu",Events.EVENT_CELL_VALUE_CHANGED="cellValueChanged",Events.EVENT_CELL_EDIT_REQUEST="cellEditRequest",Events.EVENT_ROW_VALUE_CHANGED="rowValueChanged",Events.EVENT_CELL_FOCUSED="cellFocused",Events.EVENT_CELL_FOCUS_CLEARED="cellFocusCleared",Events.EVENT_FULL_WIDTH_ROW_FOCUSED="fullWidthRowFocused",Events.EVENT_ROW_SELECTED="rowSelected",Events.EVENT_SELECTION_CHANGED="selectionChanged",Events.EVENT_TOOLTIP_SHOW="tooltipShow",Events.EVENT_TOOLTIP_HIDE="tooltipHide",Events.EVENT_CELL_KEY_DOWN="cellKeyDown",Events.EVENT_CELL_MOUSE_OVER="cellMouseOver",Events.EVENT_CELL_MOUSE_OUT="cellMouseOut",Events.EVENT_FILTER_CHANGED="filterChanged",Events.EVENT_FILTER_MODIFIED="filterModified",Events.EVENT_FILTER_OPENED="filterOpened",Events.EVENT_ADVANCED_FILTER_BUILDER_VISIBLE_CHANGED="advancedFilterBuilderVisibleChanged",Events.EVENT_SORT_CHANGED="sortChanged",Events.EVENT_VIRTUAL_ROW_REMOVED="virtualRowRemoved",Events.EVENT_ROW_CLICKED="rowClicked",Events.EVENT_ROW_DOUBLE_CLICKED="rowDoubleClicked",Events.EVENT_GRID_READY="gridReady",Events.EVENT_GRID_PRE_DESTROYED="gridPreDestroyed",Events.EVENT_GRID_SIZE_CHANGED="gridSizeChanged",Events.EVENT_VIEWPORT_CHANGED="viewportChanged",Events.EVENT_SCROLLBAR_WIDTH_CHANGED="scrollbarWidthChanged",Events.EVENT_FIRST_DATA_RENDERED="firstDataRendered",Events.EVENT_DRAG_STARTED="dragStarted",Events.EVENT_DRAG_STOPPED="dragStopped",Events.EVENT_CHECKBOX_CHANGED="checkboxChanged",Events.EVENT_ROW_EDITING_STARTED="rowEditingStarted",Events.EVENT_ROW_EDITING_STOPPED="rowEditingStopped",Events.EVENT_CELL_EDITING_STARTED="cellEditingStarted",Events.EVENT_CELL_EDITING_STOPPED="cellEditingStopped",Events.EVENT_BODY_SCROLL="bodyScroll",Events.EVENT_BODY_SCROLL_END="bodyScrollEnd",Events.EVENT_HEIGHT_SCALE_CHANGED="heightScaleChanged",Events.EVENT_PAGINATION_CHANGED="paginationChanged",Events.EVENT_COMPONENT_STATE_CHANGED="componentStateChanged",Events.EVENT_STORE_REFRESHED="storeRefreshed",Events.EVENT_BODY_HEIGHT_CHANGED="bodyHeightChanged",Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED="displayedColumnsWidthChanged",Events.EVENT_SCROLL_VISIBILITY_CHANGED="scrollVisibilityChanged",Events.EVENT_COLUMN_HOVER_CHANGED="columnHoverChanged",Events.EVENT_FLASH_CELLS="flashCells",Events.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED="paginationPixelOffsetChanged",Events.EVENT_DISPLAYED_ROWS_CHANGED="displayedRowsChanged",Events.EVENT_LEFT_PINNED_WIDTH_CHANGED="leftPinnedWidthChanged",Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED="rightPinnedWidthChanged",Events.EVENT_ROW_CONTAINER_HEIGHT_CHANGED="rowContainerHeightChanged",Events.EVENT_HEADER_HEIGHT_CHANGED="headerHeightChanged",Events.EVENT_COLUMN_HEADER_HEIGHT_CHANGED="columnHeaderHeightChanged",Events.EVENT_ROW_DRAG_ENTER="rowDragEnter",Events.EVENT_ROW_DRAG_MOVE="rowDragMove",Events.EVENT_ROW_DRAG_LEAVE="rowDragLeave",Events.EVENT_ROW_DRAG_END="rowDragEnd",Events.EVENT_GRID_STYLES_CHANGED="gridStylesChanged",Events.EVENT_POPUP_TO_FRONT="popupToFront",Events.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST="columnRowGroupChangeRequest",Events.EVENT_COLUMN_PIVOT_CHANGE_REQUEST="columnPivotChangeRequest",Events.EVENT_COLUMN_VALUE_CHANGE_REQUEST="columnValueChangeRequest",Events.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST="columnAggFuncChangeRequest",Events.EVENT_KEYBOARD_FOCUS="keyboardFocus",Events.EVENT_MOUSE_FOCUS="mouseFocus",Events.EVENT_STORE_UPDATED="storeUpdated",Events.EVENT_FILTER_DESTROYED="filterDestroyed",Events.EVENT_ROW_DATA_UPDATE_STARTED="rowDataUpdateStarted",Events.EVENT_ADVANCED_FILTER_ENABLED_CHANGED="advancedFilterEnabledChanged",Events.EVENT_DATA_TYPES_INFERRED="dataTypesInferred",Events.EVENT_FIELD_VALUE_CHANGED="fieldValueChanged",Events.EVENT_FIELD_PICKER_VALUE_SELECTED="fieldPickerValueSelected",Events}(),GroupInstanceIdCreator=function(){function GroupInstanceIdCreator(){this.existingIds={}}return GroupInstanceIdCreator.prototype.getInstanceIdForKey=function(key){var result,lastResult=this.existingIds[key];return result="number"!=typeof lastResult?0:lastResult+1,this.existingIds[key]=result,result},GroupInstanceIdCreator}(),__extends$35=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2D=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AutoGroupColService=function(_super){function AutoGroupColService(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$35(AutoGroupColService,_super),AutoGroupColService.prototype.createAutoGroupColumns=function(rowGroupColumns){var _this=this,groupAutoColumns=[],doingTreeData=this.gridOptionsService.is("treeData"),doingMultiAutoColumn=this.gridOptionsService.isGroupMultiAutoColumn();return doingTreeData&&doingMultiAutoColumn&&(console.warn('AG Grid: you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data'),doingMultiAutoColumn=!1),doingMultiAutoColumn?rowGroupColumns.forEach((function(rowGroupCol,index){groupAutoColumns.push(_this.createOneAutoGroupColumn(rowGroupCol,index))})):groupAutoColumns.push(this.createOneAutoGroupColumn()),groupAutoColumns},AutoGroupColService.prototype.updateAutoGroupColumns=function(autoGroupColumns){var _this=this;autoGroupColumns.forEach((function(column,index){return _this.updateOneAutoGroupColumn(column,index)}))},AutoGroupColService.prototype.createOneAutoGroupColumn=function(rowGroupCol,index){var colId;colId=rowGroupCol?"ag-Grid-AutoColumn-"+rowGroupCol.getId():"ag-Grid-AutoColumn";var colDef=this.createAutoGroupColDef(colId,rowGroupCol,index);colDef.colId=colId;var newCol=new Column(colDef,null,colId,!0);return this.context.createBean(newCol),newCol},AutoGroupColService.prototype.updateOneAutoGroupColumn=function(colToUpdate,index){var oldColDef=colToUpdate.getColDef(),underlyingColId="string"==typeof oldColDef.showRowGroup?oldColDef.showRowGroup:void 0,underlyingColumn=null!=underlyingColId?this.columnModel.getPrimaryColumn(underlyingColId):void 0,colDef=this.createAutoGroupColDef(colToUpdate.getId(),null!=underlyingColumn?underlyingColumn:void 0,index);colToUpdate.setColDef(colDef,null),this.columnFactory.applyColumnState(colToUpdate,colDef)},AutoGroupColService.prototype.createAutoGroupColDef=function(colId,underlyingColumn,index){var res=this.createBaseColDef(underlyingColumn);(mergeDeep(res,this.gridOptionsService.get("autoGroupColumnDef")),res=this.columnFactory.addColumnDefaultAndTypes(res,colId),this.gridOptionsService.is("treeData"))||missing(res.field)&&missing(res.valueGetter)&&missing(res.filterValueGetter)&&"agGroupColumnFilter"!==res.filter&&(res.filter=!1);index&&index>0&&(res.headerCheckboxSelection=!1);var isSortingCoupled=this.gridOptionsService.isColumnsSortingCoupledToGroup(),hasOwnData=res.valueGetter||null!=res.field;return isSortingCoupled&&!hasOwnData&&(res.sortIndex=void 0,res.initialSort=void 0),res},AutoGroupColService.prototype.createBaseColDef=function(rowGroupCol){var userDef=this.gridOptionsService.get("autoGroupColumnDef"),res={headerName:this.localeService.getLocaleTextFunc()("group","Group")};if(userDef&&(userDef.cellRenderer||userDef.cellRendererSelector)||(res.cellRenderer="agGroupCellRenderer"),rowGroupCol){var colDef=rowGroupCol.getColDef();Object.assign(res,{headerName:this.columnModel.getDisplayNameForColumn(rowGroupCol,"header"),headerValueGetter:colDef.headerValueGetter}),colDef.cellRenderer&&Object.assign(res,{cellRendererParams:{innerRenderer:colDef.cellRenderer,innerRendererParams:colDef.cellRendererParams}}),res.showRowGroup=rowGroupCol.getColId()}else res.showRowGroup=!0;return res},__decorate$2D([Autowired("columnModel")],AutoGroupColService.prototype,"columnModel",void 0),__decorate$2D([Autowired("columnFactory")],AutoGroupColService.prototype,"columnFactory",void 0),AutoGroupColService=__decorate$2D([Bean("autoGroupColService")],AutoGroupColService)}(BeanStub),reUnescapedHtml=/[&<>"']/g,HTML_ESCAPES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function escapeString(toEscape,skipEscapingHtmlChars){if(null==toEscape)return null;var stringResult=toEscape.toString().toString();return skipEscapingHtmlChars?stringResult:stringResult.replace(reUnescapedHtml,(function(chr){return HTML_ESCAPES[chr]}))}function camelCaseToHumanText(camelCase){if(!camelCase||null==camelCase)return null;return camelCase.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z])([a-z])/g,"$1 $2$3").replace(/\./g," ").split(" ").map((function(word){return word.substring(0,1).toUpperCase()+(word.length>1?word.substring(1,word.length):"")})).join(" ")}function camelCaseToHyphenated(camelCase){return camelCase.replace(/[A-Z]/g,(function(s){return"-"+s.toLocaleLowerCase()}))}var StringUtils=Object.freeze({__proto__:null,utf8_encode:function utf8_encode(s){var stringFromCharCode=String.fromCharCode;function createByte(point,shift){return stringFromCharCode(point>>shift&63|128)}function encodeCodePoint(point){if(point>=0&&point<=31&&10!==point)return"_x"+point.toString(16).toUpperCase().padStart(4,"0")+"_";if(0==(4294967168&point))return stringFromCharCode(point);var symbol="";return 0==(4294965248&point)?symbol=stringFromCharCode(point>>6&31|192):0==(4294901760&point)?(!function checkScalarValue(point){if(point>=55296&&point<=57343)throw Error("Lone surrogate U+"+point.toString(16).toUpperCase()+" is not a scalar value")}(point),symbol=stringFromCharCode(point>>12&15|224),symbol+=createByte(point,6)):0==(4292870144&point)&&(symbol=stringFromCharCode(point>>18&7|240),symbol+=createByte(point,12),symbol+=createByte(point,6)),symbol+=stringFromCharCode(63&point|128)}for(var codePoints=function ucs2decode(string){var output=[];if(!string)return[];for(var value,extra,len=string.length,counter=0;counter<len;)(value=string.charCodeAt(counter++))>=55296&&value<=56319&&counter<len?56320==(64512&(extra=string.charCodeAt(counter++)))?output.push(((1023&value)<<10)+(1023&extra)+65536):(output.push(value),counter--):output.push(value);return output}(s),length=codePoints.length,index=-1,byteString="";++index<length;)byteString+=encodeCodePoint(codePoints[index]);return byteString},capitalise:function capitalise(str){return str[0].toUpperCase()+str.substr(1).toLowerCase()},escapeString,camelCaseToHumanText,camelCaseToHyphenated});function convertToMap(arr){var map=new Map;return arr.forEach((function(pair){return map.set(pair[0],pair[1])})),map}var MapUtils=Object.freeze({__proto__:null,convertToMap,mapById:function mapById(arr,callback){var map=new Map;return arr.forEach((function(item){return map.set(callback(item),item)})),map},keys:function keys(map){var arr=[];return map.forEach((function(_,key){return arr.push(key)})),arr}}),ColDefUtil=function(){function ColDefUtil(){}return ColDefUtil.ColDefPropertyMap={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0},ColDefUtil.ALL_PROPERTIES=Object.keys(ColDefUtil.ColDefPropertyMap),ColDefUtil}(),__read$v=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spreadArray$o=function(to,from){for(var i=0,il=from.length,j=to.length;i<il;i++,j++)to[j]=from[i];return to},PropertyKeys=function(){function PropertyKeys(){}return PropertyKeys.STRING_PROPERTIES=["rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","serverSideStoreType","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator"],PropertyKeys.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams"],PropertyKeys.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass"],PropertyKeys.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","tabIndex"],PropertyKeys.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHorizontalScroll","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupSelectsChildren","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressParentsInRowNodes","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","rememberGroupStateWhenNewData","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressAggAtRootLevel","suppressFocusAfterRefresh","functionsPassive","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","excludeHiddenColumnsFromQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","treeData","masterDetail","suppressMultiRangeSelection","enterMovesDown","enterMovesDownAfterEdit","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","enableChartToolPanelsButton","suppressChartToolPanelsButton","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideFilteringAlwaysResets","serverSideFilterAllLevels","serverSideSortingAlwaysResets","serverSideSortAllLevels","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","maintainColumnOrder","groupMaintainOrder","columnHoverHighlight","suppressReactUi","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","suppressCutToClipboard","enableAdvancedFilter","includeHiddenColumnsInAdvancedFilter"],PropertyKeys.FUNCTIONAL_PROPERTIES=["doesExternalFilterPass","processSecondaryColDef","processSecondaryColGroupDef","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher"],PropertyKeys.CALLBACK_PROPERTIES=["getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideStoreParams","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering"],PropertyKeys.FUNCTION_PROPERTIES=__spreadArray$o(__spreadArray$o([],__read$v(PropertyKeys.FUNCTIONAL_PROPERTIES)),__read$v(PropertyKeys.CALLBACK_PROPERTIES)),PropertyKeys.ALL_PROPERTIES=__spreadArray$o(__spreadArray$o(__spreadArray$o(__spreadArray$o(__spreadArray$o(__spreadArray$o([],__read$v(PropertyKeys.ARRAY_PROPERTIES)),__read$v(PropertyKeys.OBJECT_PROPERTIES)),__read$v(PropertyKeys.STRING_PROPERTIES)),__read$v(PropertyKeys.NUMBER_PROPERTIES)),__read$v(PropertyKeys.FUNCTION_PROPERTIES)),__read$v(PropertyKeys.BOOLEAN_PROPERTIES)),PropertyKeys}(),__assign$n=function(){return __assign$n=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$n.apply(this,arguments)},__read$u=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spreadArray$n=function(to,from){for(var i=0,il=from.length,j=to.length;i<il;i++,j++)to[j]=from[i];return to},ComponentUtil=function(){function ComponentUtil(){}return ComponentUtil.getCallbackForEvent=function(eventName){return!eventName||eventName.length<2?eventName:"on"+eventName[0].toUpperCase()+eventName.substr(1)},ComponentUtil.getCoercionLookup=function(){var coercionLookup={};return __spreadArray$n(__spreadArray$n(__spreadArray$n(__spreadArray$n(__spreadArray$n([],__read$u(ComponentUtil.ARRAY_PROPERTIES)),__read$u(ComponentUtil.OBJECT_PROPERTIES)),__read$u(ComponentUtil.STRING_PROPERTIES)),__read$u(ComponentUtil.FUNCTION_PROPERTIES)),__read$u(ComponentUtil.EVENT_CALLBACKS)).forEach((function(key){return coercionLookup[key]="none"})),ComponentUtil.BOOLEAN_PROPERTIES.forEach((function(key){return coercionLookup[key]="boolean"})),ComponentUtil.NUMBER_PROPERTIES.forEach((function(key){return coercionLookup[key]="number"})),coercionLookup},ComponentUtil.getValue=function(key,rawValue){var coercionStep=ComponentUtil.coercionLookup[key];if(coercionStep){var newValue=rawValue;switch(coercionStep){case"number":newValue=ComponentUtil.toNumber(rawValue);break;case"boolean":newValue=ComponentUtil.toBoolean(rawValue);break;case"none":"groupAggFiltering"===key&&"function"!=typeof rawValue&&(newValue=ComponentUtil.toBoolean(rawValue))}return newValue}},ComponentUtil.getGridOptionKeys=function(component,isVue){return isVue?Object.keys(ComponentUtil.coercionLookup):Object.keys(component)},ComponentUtil.copyAttributesToGridOptions=function(gridOptions,component,isVue){void 0===isVue&&(isVue=!1),"object"!=typeof gridOptions&&(gridOptions={});var pGridOptions=gridOptions;return ComponentUtil.getGridOptionKeys(component,isVue).forEach((function(key){var value=component[key];if(void 0!==value){var coercedValue=ComponentUtil.getValue(key,value);void 0!==coercedValue&&(pGridOptions[key]=coercedValue)}})),gridOptions},ComponentUtil.processOnChange=function(changes,api){var _this=this;if(changes&&0!==Object.keys(changes).length){this.changeSetId++;var changesToApply=__assign$n({},changes);changesToApply.columnTypes&&(api.setColumnTypes(changesToApply.columnTypes.currentValue,"gridOptionsChanged"),delete changesToApply.columnTypes),changesToApply.autoGroupColumnDef&&(api.setAutoGroupColumnDef(changesToApply.autoGroupColumnDef.currentValue,"gridOptionsChanged"),delete changesToApply.autoGroupColumnDef),changesToApply.defaultColDef&&(api.setDefaultColDef(changesToApply.defaultColDef.currentValue,"gridOptionsChanged"),delete changesToApply.defaultColDef),changesToApply.columnDefs&&(api.setColumnDefs(changesToApply.columnDefs.currentValue,"gridOptionsChanged"),delete changesToApply.columnDefs);var updates=Object.keys(changesToApply).map((function(key){var gridKey=key,coercedValue=ComponentUtil.getValue(gridKey,changesToApply[gridKey].currentValue);return{gridKey,coercedValue,isChanged:api.__setPropertyOnly(gridKey,coercedValue)}})).filter((function(u){return u.isChanged})),updatedKeys=updates.map((function(u){return u.gridKey}));updates.forEach((function(u){return api.__updateProperty(u.gridKey,u.coercedValue,u.isChanged,{id:_this.changeSetId,properties:updatedKeys})}));var event={type:Events.EVENT_COMPONENT_STATE_CHANGED};iterateObject(changes,(function(key,value){event[key]=value})),api.dispatchEvent(event)}},ComponentUtil.toBoolean=function(value){return"boolean"==typeof value?value:"string"==typeof value&&("TRUE"===value.toUpperCase()||""==value)},ComponentUtil.toNumber=function(value){return"number"==typeof value?value:"string"==typeof value?Number(value):void 0},ComponentUtil.EVENTS=values(Events),ComponentUtil.EXCLUDED_INTERNAL_EVENTS=[Events.EVENT_SCROLLBAR_WIDTH_CHANGED,Events.EVENT_CHECKBOX_CHANGED,Events.EVENT_HEIGHT_SCALE_CHANGED,Events.EVENT_BODY_HEIGHT_CHANGED,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,Events.EVENT_SCROLL_VISIBILITY_CHANGED,Events.EVENT_COLUMN_HOVER_CHANGED,Events.EVENT_FLASH_CELLS,Events.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,Events.EVENT_DISPLAYED_ROWS_CHANGED,Events.EVENT_LEFT_PINNED_WIDTH_CHANGED,Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED,Events.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,Events.EVENT_POPUP_TO_FRONT,Events.EVENT_KEYBOARD_FOCUS,Events.EVENT_MOUSE_FOCUS,Events.EVENT_STORE_UPDATED,Events.EVENT_COLUMN_PANEL_ITEM_DRAG_START,Events.EVENT_COLUMN_PANEL_ITEM_DRAG_END,Events.EVENT_FILL_START,Events.EVENT_FILL_END,Events.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,Events.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,Events.EVENT_FULL_WIDTH_ROW_FOCUSED,Events.EVENT_HEADER_HEIGHT_CHANGED,Events.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,Events.EVENT_CELL_FOCUS_CLEARED,Events.EVENT_GRID_STYLES_CHANGED,Events.EVENT_FILTER_DESTROYED,Events.EVENT_ROW_DATA_UPDATE_STARTED,Events.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,Events.EVENT_DATA_TYPES_INFERRED,Events.EVENT_FIELD_VALUE_CHANGED,Events.EVENT_FIELD_PICKER_VALUE_SELECTED],ComponentUtil.PUBLIC_EVENTS=ComponentUtil.EVENTS.filter((function(e){return!includes(ComponentUtil.EXCLUDED_INTERNAL_EVENTS,e)})),ComponentUtil.EVENT_CALLBACKS=ComponentUtil.EVENTS.map((function(event){return ComponentUtil.getCallbackForEvent(event)})),ComponentUtil.STRING_PROPERTIES=PropertyKeys.STRING_PROPERTIES,ComponentUtil.OBJECT_PROPERTIES=PropertyKeys.OBJECT_PROPERTIES,ComponentUtil.ARRAY_PROPERTIES=PropertyKeys.ARRAY_PROPERTIES,ComponentUtil.NUMBER_PROPERTIES=PropertyKeys.NUMBER_PROPERTIES,ComponentUtil.BOOLEAN_PROPERTIES=PropertyKeys.BOOLEAN_PROPERTIES,ComponentUtil.FUNCTION_PROPERTIES=PropertyKeys.FUNCTION_PROPERTIES,ComponentUtil.ALL_PROPERTIES=PropertyKeys.ALL_PROPERTIES,ComponentUtil.ALL_PROPERTIES_SET=new Set(PropertyKeys.ALL_PROPERTIES),ComponentUtil.changeSetId=0,ComponentUtil.coercionLookup=ComponentUtil.getCoercionLookup(),ComponentUtil}(),__values$7=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")};function fuzzyCheckStrings(inputValues,validValues,allSuggestions){var fuzzyMatches={},invalidInputs=inputValues.filter((function(inputValue){return!validValues.some((function(validValue){return validValue===inputValue}))}));return invalidInputs.length>0&&invalidInputs.forEach((function(invalidInput){return fuzzyMatches[invalidInput]=fuzzySuggestions(invalidInput,allSuggestions).values})),fuzzyMatches}function fuzzySuggestions(inputValue,allSuggestions,hideIrrelevant,filterByPercentageOfBestMatch){var e_1,_a,thisSuggestions=allSuggestions.map((function(text,idx){return{value:text,relevance:stringWeightedDistances(inputValue.toLowerCase(),text.toLocaleLowerCase()),idx}}));if(thisSuggestions.sort((function(a,b){return b.relevance-a.relevance})),hideIrrelevant&&(thisSuggestions=thisSuggestions.filter((function(suggestion){return 0!==suggestion.relevance}))),thisSuggestions.length>0&&filterByPercentageOfBestMatch&&filterByPercentageOfBestMatch>0){var limit_1=thisSuggestions[0].relevance*filterByPercentageOfBestMatch;thisSuggestions=thisSuggestions.filter((function(suggestion){return limit_1-suggestion.relevance<0}))}var values=[],indices=[];try{for(var thisSuggestions_1=__values$7(thisSuggestions),thisSuggestions_1_1=thisSuggestions_1.next();!thisSuggestions_1_1.done;thisSuggestions_1_1=thisSuggestions_1.next()){var suggestion=thisSuggestions_1_1.value;values.push(suggestion.value),indices.push(suggestion.idx)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{thisSuggestions_1_1&&!thisSuggestions_1_1.done&&(_a=thisSuggestions_1.return)&&_a.call(thisSuggestions_1)}finally{if(e_1)throw e_1.error}}return{values,indices}}function stringWeightedDistances(str1,str2){for(var a=str1.replace(/\s/g,""),b=str2.replace(/\s/g,""),weight=0,lastIndex=-1,i=0;i<a.length;i++){var idx=b.indexOf(a[i],lastIndex+1);-1!==idx&&(weight+=100-100*(lastIndex=idx)/1e4*100)}return weight}var FuzzyMatchUtils=Object.freeze({__proto__:null,fuzzyCheckStrings,fuzzySuggestions}),__decorate$2C=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$t=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spreadArray$m=function(to,from){for(var i=0,il=from.length,j=to.length;i<il;i++,j++)to[j]=from[i];return to};function logDeprecation(version,oldProp,newProp,message){var newPropMsg=newProp?"Please use '"+newProp+"' instead. ":"";doOnce((function(){return console.warn("AG Grid: since v"+version+", '"+oldProp+"' is deprecated. "+newPropMsg+(null!=message?message:""))}),"Deprecated_"+oldProp)}var VUE_FRAMEWORK_PROPS=["__ob__","__v_skip","__metadata__"],GridOptionsValidator=function(){function GridOptionsValidator(){this.deprecatedProperties={rememberGroupStateWhenNewData:{version:"24",message:"Now that transaction updates are possible and they keep group state, this feature is no longer needed."},serverSideFilteringAlwaysResets:{version:"28.0",newProp:"serverSideOnlyRefreshFilteredGroups",copyToNewProp:!0},serverSideSortingAlwaysResets:{version:"28.0",newProp:"serverSideSortAllLevels",copyToNewProp:!0},suppressReactUi:{version:"28",message:"The legacy React rendering engine is deprecated and will be removed in the next major version of the grid."},processSecondaryColDef:{version:"28",newProp:"processPivotResultColDef",copyToNewProp:!0},processSecondaryColGroupDef:{version:"28",newProp:"processPivotResultColGroupDef",copyToNewProp:!0},getServerSideStoreParams:{version:"28",newProp:"getServerSideGroupLevelParams",copyToNewProp:!0},serverSideInfiniteScroll:{version:"29",message:"Infinite Scrolling is now the default behaviour. This can be suppressed with `suppressServerSideInfiniteScroll`."},enableChartToolPanelsButton:{version:"29",message:"The Chart Tool Panels button is now enabled by default. To hide the Chart Tool Panels button and display the hamburger button instead, set suppressChartToolPanelsButton=true."},functionsPassive:{version:"29.2"},onColumnRowGroupChangeRequest:{version:"29.2"},onColumnPivotChangeRequest:{version:"29.2"},onColumnValueChangeRequest:{version:"29.2"},onColumnAggFuncChangeRequest:{version:"29.2"},serverSideFilterAllLevels:{version:"30",message:"All server-side group levels are now filtered by default. This can be toggled using `serverSideOnlyRefreshFilteredGroups`."},suppressAggAtRootLevel:{version:"30",message:"The root level aggregation is now suppressed by default. This can be toggled using  `alwaysAggregateAtRootLevel`."},excludeHiddenColumnsFromQuickFilter:{version:"30",message:"Hidden columns are now excluded from the Quick Filter by default. This can be toggled using `includeHiddenColumnsInQuickFilter`."},enterMovesDown:{version:"30",newProp:"enterNavigatesVertically",copyToNewProp:!0},enterMovesDownAfterEdit:{version:"30",newProp:"enterNavigatesVerticallyAfterEdit",copyToNewProp:!0},suppressParentsInRowNodes:{version:"30.2",message:"Using suppressParentsInRowNodes is no longer recommended. To serialize nodes it is now recommended to instead remove the parent node reference before serialization."}}}return GridOptionsValidator.prototype.pickOneWarning=function(prop1,prop2){console.warn("AG Grid: "+prop1+" and "+prop2+" do not work with each other, you need to pick one.")},GridOptionsValidator.prototype.init=function(){var _this=this;if(this.checkForDeprecated(),this.checkForViolations(),!0!==this.gridOptions.suppressPropertyNamesCheck&&(this.checkGridOptionsProperties(),this.checkColumnDefProperties()),this.checkColumnDefViolations(),this.gridOptionsService.is("groupSelectsChildren")&&this.gridOptionsService.is("suppressParentsInRowNodes")&&console.warn("AG Grid: 'groupSelectsChildren' does not work with 'suppressParentsInRowNodes', this selection method needs the part in rowNode to work"),this.gridOptionsService.is("groupSelectsChildren")&&"multiple"!==this.gridOptionsService.get("rowSelection")&&console.warn("AG Grid: rowSelection must be 'multiple' for groupSelectsChildren to make sense"),this.gridOptionsService.is("groupRemoveSingleChildren")&&this.gridOptionsService.is("groupHideOpenParents")&&this.pickOneWarning("groupRemoveSingleChildren","groupHideOpenParents"),this.gridOptionsService.isRowModelType("serverSide")){var msg=function(prop,alt){return"AG Grid: '"+prop+"' is not supported on the Server-Side Row Model."+(alt?" Please use "+alt+" instead.":"")};this.gridOptionsService.exists("groupDefaultExpanded")&&console.warn(msg("groupDefaultExpanded","isServerSideGroupOpenByDefault callback")),this.gridOptionsService.exists("groupIncludeFooter")&&this.gridOptionsService.is("suppressServerSideInfiniteScroll")&&console.warn(msg("groupIncludeFooter")),this.gridOptionsService.exists("groupIncludeTotalFooter")&&console.warn(msg("groupIncludeTotalFooter"))}this.gridOptionsService.is("enableRangeSelection")?ModuleRegistry.__assertRegistered(ModuleNames.RangeSelectionModule,"enableRangeSelection",this.gridOptionsService.getGridId()):(this.gridOptionsService.is("enableRangeHandle")||this.gridOptionsService.is("enableFillHandle"))&&console.warn("AG Grid: 'enableRangeHandle' or 'enableFillHandle' will not work unless 'enableRangeSelection' is set to true");var validateRegistered=function(prop,module){return _this.gridOptionsService.exists(prop)&&ModuleRegistry.__assertRegistered(module,prop,_this.gridOptionsService.getGridId())};validateRegistered("sideBar",ModuleNames.SideBarModule),validateRegistered("statusBar",ModuleNames.StatusBarModule),validateRegistered("enableCharts",ModuleNames.GridChartsModule),validateRegistered("getMainMenuItems",ModuleNames.MenuModule),validateRegistered("getContextMenuItems",ModuleNames.MenuModule),validateRegistered("allowContextMenuWithControlKey",ModuleNames.MenuModule),validateRegistered("enableAdvancedFilter",ModuleNames.AdvancedFilterModule),validateRegistered("treeData",ModuleNames.RowGroupingModule),validateRegistered("enableRangeSelection",ModuleNames.RangeSelectionModule),validateRegistered("masterDetail",ModuleNames.MasterDetailModule)},GridOptionsValidator.prototype.checkColumnDefProperties=function(){var _this=this;if(null!=this.gridOptions.columnDefs){var validProperties=ColDefUtil.ALL_PROPERTIES,validateColDef=function(colDef,propertyName){var userProperties=Object.getOwnPropertyNames(colDef);_this.checkProperties(userProperties,__spreadArray$m(__spreadArray$m([],__read$t(validProperties)),__read$t(VUE_FRAMEWORK_PROPS)),validProperties,propertyName,"https://www.ag-grid.com/javascript-data-grid/column-properties/"),colDef.children&&colDef.children.forEach((function(child){return validateColDef(child,"columnDefs.children")}))};this.gridOptions.columnDefs.forEach((function(colDef){return validateColDef(colDef,"columnDefs")})),this.gridOptions.defaultColDef&&validateColDef(this.gridOptions.defaultColDef,"defaultColDef")}},GridOptionsValidator.prototype.checkColumnDefViolations=function(){var _a,rowModel=null!==(_a=this.gridOptionsService.get("rowModelType"))&&void 0!==_a?_a:"clientSide",unsupportedProperties={infinite:["headerCheckboxSelection","headerCheckboxSelectionFilteredOnly","headerCheckboxSelectionCurrentPageOnly"],viewport:["headerCheckboxSelection","headerCheckboxSelectionFilteredOnly","headerCheckboxSelectionCurrentPageOnly"],serverSide:["headerCheckboxSelectionFilteredOnly","headerCheckboxSelectionCurrentPageOnly"],clientSide:[]}[rowModel];if(unsupportedProperties){var isMultiSelect="multiple"===this.gridOptionsService.get("rowSelection"),multiSelectDependencies=["headerCheckboxSelection","headerCheckboxSelectionFilteredOnly","headerCheckboxSelectionCurrentPageOnly"],validateColDef=function(colDef){isMultiSelect||multiSelectDependencies.forEach((function(property){property in colDef&&colDef[property]&&console.warn("AG Grid: Column property "+property+" is not supported unless rowSelection='multiple'.")})),unsupportedProperties.forEach((function(property){property in colDef&&colDef[property]&&console.warn("AG Grid: Column property "+property+" is not supported with the row model type "+rowModel+".")}))};null!=this.gridOptions.columnDefs&&this.gridOptions.columnDefs.forEach((function(colDef){return validateColDef(colDef)})),null!=this.gridOptions.autoGroupColumnDef&&validateColDef(this.gridOptions.autoGroupColumnDef),null!=this.gridOptions.defaultColDef&&validateColDef(this.gridOptions.defaultColDef)}},GridOptionsValidator.prototype.checkGridOptionsProperties=function(){var userProperties=Object.getOwnPropertyNames(this.gridOptions),validProperties=__spreadArray$m(__spreadArray$m([],__read$t(PropertyKeys.ALL_PROPERTIES)),__read$t(ComponentUtil.EVENT_CALLBACKS)),validPropertiesAndExceptions=__spreadArray$m(__spreadArray$m(__spreadArray$m(__spreadArray$m([],__read$t(validProperties)),["api","columnApi"]),__read$t(VUE_FRAMEWORK_PROPS)),__read$t(Object.keys(this.deprecatedProperties)));this.checkProperties(userProperties,validPropertiesAndExceptions,validProperties,"gridOptions","https://www.ag-grid.com/javascript-data-grid/grid-options/")},GridOptionsValidator.prototype.checkProperties=function(userProperties,validPropertiesAndExceptions,validProperties,containerName,docsUrl){var invalidProperties=fuzzyCheckStrings(userProperties,validPropertiesAndExceptions,validProperties);iterateObject(invalidProperties,(function(key,value){doOnce((function(){return console.warn("AG Grid: invalid "+containerName+" property '"+key+"' did you mean any of these: "+value.slice(0,8).join(", "))}),"invalidProperty"+containerName+key)})),Object.keys(invalidProperties).length>0&&doOnce((function(){return console.warn("AG Grid: to see all the valid "+containerName+" properties please check: "+docsUrl)}),"invalidProperties"+containerName+docsUrl)},GridOptionsValidator.prototype.checkForDeprecated=function(){var options=this.gridOptions;Object.entries(this.deprecatedProperties).forEach((function(_a){var _b,_c=__read$t(_a,2),oldProp=_c[0],details=_c[1],oldPropValue=options[oldProp];oldPropValue&&(logDeprecation(details.version,oldProp,details.newProp,details.message),details.copyToNewProp&&details.newProp&&null==options[details.newProp]&&(options[details.newProp]=null!==(_b=details.newPropValue)&&void 0!==_b?_b:oldPropValue))})),options.serverSideStoreType&&(console.warn("AG Grid: since v29.0, `serverSideStoreType` has been replaced by `suppressServerSideInfiniteScroll`. Set to false to use Partial Store, and true to use Full Store."),options.suppressServerSideInfiniteScroll="partial"!==options.serverSideStoreType)},GridOptionsValidator.prototype.checkForViolations=function(){this.gridOptionsService.is("treeData")&&this.treeDataViolations()},GridOptionsValidator.prototype.treeDataViolations=function(){this.gridOptionsService.isRowModelType("clientSide")&&(this.gridOptionsService.exists("getDataPath")||console.warn("AG Grid: property usingTreeData=true with rowModel=clientSide, but you did not provide getDataPath function, please provide getDataPath function if using tree data.")),this.gridOptionsService.isRowModelType("serverSide")&&(this.gridOptionsService.exists("isServerSideGroup")||console.warn("AG Grid: property usingTreeData=true with rowModel=serverSide, but you did not provide isServerSideGroup function, please provide isServerSideGroup function if using tree data."),this.gridOptionsService.exists("getServerSideGroupKey")||console.warn("AG Grid: property usingTreeData=true with rowModel=serverSide, but you did not provide getServerSideGroupKey function, please provide getServerSideGroupKey function if using tree data."))},__decorate$2C([Autowired("gridOptions")],GridOptionsValidator.prototype,"gridOptions",void 0),__decorate$2C([Autowired("gridOptionsService")],GridOptionsValidator.prototype,"gridOptionsService",void 0),__decorate$2C([PostConstruct],GridOptionsValidator.prototype,"init",null),GridOptionsValidator=__decorate$2C([Bean("gridOptionsValidator")],GridOptionsValidator)}();function matchesGroupDisplayType(toMatch,supplied){var groupDisplayTypeValues=["groupRows","multipleColumns","custom","singleColumn"];return groupDisplayTypeValues.indexOf(supplied)<0?(console.warn("AG Grid: '"+supplied+"' is not a valid groupDisplayType value - possible values are: '"+groupDisplayTypeValues.join("', '")+"'"),!1):supplied===toMatch}var __extends$34=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2B=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$s=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spreadArray$l=function(to,from){for(var i=0,il=from.length,j=to.length;i<il;i++,j++)to[j]=from[i];return to},__values$6=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},ColumnModel=function(_super){function ColumnModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.primaryHeaderRowCount=0,_this.secondaryHeaderRowCount=0,_this.gridHeaderRowCount=0,_this.displayedColumnsLeft=[],_this.displayedColumnsRight=[],_this.displayedColumnsCenter=[],_this.displayedColumns=[],_this.displayedColumnsAndGroupsMap={},_this.viewportColumns=[],_this.viewportColumnsHash="",_this.headerViewportColumns=[],_this.viewportColumnsCenter=[],_this.headerViewportColumnsCenter=[],_this.autoHeightActiveAtLeastOnce=!1,_this.rowGroupColumns=[],_this.valueColumns=[],_this.pivotColumns=[],_this.ready=!1,_this.autoGroupsNeedBuilding=!1,_this.forceRecreateAutoGroups=!1,_this.pivotMode=!1,_this.bodyWidth=0,_this.leftWidth=0,_this.rightWidth=0,_this.bodyWidthDirty=!0,_this.shouldQueueResizeOperations=!1,_this.resizeOperationQueue=[],_this}var paramIndex,decorator;return __extends$34(ColumnModel,_super),ColumnModel.prototype.init=function(){var _this=this;this.suppressColumnVirtualisation=this.gridOptionsService.is("suppressColumnVirtualisation");var pivotMode=this.gridOptionsService.is("pivotMode");this.isPivotSettingAllowed(pivotMode)&&(this.pivotMode=pivotMode),this.addManagedPropertyListeners(["groupDisplayType","treeData"],(function(){return _this.buildAutoGroupColumns()})),this.addManagedPropertyListener("autoGroupColumnDef",(function(){return _this.onAutoGroupColumnDefChanged()})),this.addManagedPropertyListener("defaultColDef",(function(params){return _this.onSharedColDefChanged(params.source)})),this.addManagedPropertyListener("columnTypes",(function(params){return _this.onSharedColDefChanged(params.source)}))},ColumnModel.prototype.buildAutoGroupColumns=function(){this.columnDefs&&(this.autoGroupsNeedBuilding=!0,this.forceRecreateAutoGroups=!0,this.updateGridColumns(),this.updateDisplayedColumns("gridOptionsChanged"))},ColumnModel.prototype.onAutoGroupColumnDefChanged=function(){this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns)},ColumnModel.prototype.onSharedColDefChanged=function(source){void 0===source&&(source="api"),this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns),this.createColumnsFromColumnDefs(!0,source)},ColumnModel.prototype.setColumnDefs=function(columnDefs,source){void 0===source&&(source="api");var colsPreviouslyExisted=!!this.columnDefs;this.columnDefs=columnDefs,this.createColumnsFromColumnDefs(colsPreviouslyExisted,source)},ColumnModel.prototype.recreateColumnDefs=function(source){void 0===source&&(source="api"),this.onSharedColDefChanged(source)},ColumnModel.prototype.destroyOldColumns=function(oldTree,newTree){var oldObjectsById={};if(oldTree){this.columnUtils.depthFirstOriginalTreeSearch(null,oldTree,(function(child){oldObjectsById[child.getInstanceId()]=child})),newTree&&this.columnUtils.depthFirstOriginalTreeSearch(null,newTree,(function(child){oldObjectsById[child.getInstanceId()]=null}));var colsToDestroy=Object.values(oldObjectsById).filter((function(item){return null!=item}));this.destroyBeans(colsToDestroy)}},ColumnModel.prototype.destroyColumns=function(){this.destroyOldColumns(this.primaryColumnTree),this.destroyOldColumns(this.secondaryBalancedTree),this.destroyOldColumns(this.groupAutoColsBalancedTree)},ColumnModel.prototype.createColumnsFromColumnDefs=function(colsPreviouslyExisted,source){var _this=this;void 0===source&&(source="api");var dispatchEventsFunc=colsPreviouslyExisted?this.compareColumnStatesAndDispatchEvents(source):void 0;this.valueCache.expire(),this.autoGroupsNeedBuilding=!0;var oldPrimaryColumns=this.primaryColumns,oldPrimaryTree=this.primaryColumnTree,balancedTreeResult=this.columnFactory.createColumnTree(this.columnDefs,!0,oldPrimaryTree);this.destroyOldColumns(this.primaryColumnTree,balancedTreeResult.columnTree),this.primaryColumnTree=balancedTreeResult.columnTree,this.primaryHeaderRowCount=balancedTreeResult.treeDept+1,this.primaryColumns=this.getColumnsFromTree(this.primaryColumnTree),this.primaryColumnsMap={},this.primaryColumns.forEach((function(col){return _this.primaryColumnsMap[col.getId()]=col})),this.extractRowGroupColumns(source,oldPrimaryColumns),this.extractPivotColumns(source,oldPrimaryColumns),this.extractValueColumns(source,oldPrimaryColumns),this.ready=!0;var gridColsNotProcessed=void 0===this.gridColsArePrimary;(this.gridColsArePrimary||gridColsNotProcessed||this.autoGroupsNeedBuilding)&&(this.updateGridColumns(),colsPreviouslyExisted&&this.gridColsArePrimary&&!this.gridOptionsService.is("maintainColumnOrder")&&this.orderGridColumnsLikePrimary(),this.updateDisplayedColumns(source),this.checkViewportColumns()),this.dispatchEverythingChanged(source),dispatchEventsFunc&&dispatchEventsFunc(),this.dispatchNewColumnsLoaded(source)},ColumnModel.prototype.dispatchNewColumnsLoaded=function(source){var newColumnsLoadedEvent={type:Events.EVENT_NEW_COLUMNS_LOADED,source};this.eventService.dispatchEvent(newColumnsLoadedEvent)},ColumnModel.prototype.dispatchEverythingChanged=function(source){void 0===source&&(source="api");var eventEverythingChanged={type:Events.EVENT_COLUMN_EVERYTHING_CHANGED,source};this.eventService.dispatchEvent(eventEverythingChanged)},ColumnModel.prototype.orderGridColumnsLikePrimary=function(){var _this=this,primaryColumns=this.primaryColumns;if(primaryColumns){var primaryColsOrdered=primaryColumns.filter((function(col){return _this.gridColumns.indexOf(col)>=0})),otherCols=this.gridColumns.filter((function(col){return primaryColsOrdered.indexOf(col)<0}));this.gridColumns=__spreadArray$l(__spreadArray$l([],__read$s(otherCols)),__read$s(primaryColsOrdered)),this.gridColumns=this.placeLockedColumns(this.gridColumns)}},ColumnModel.prototype.getAllDisplayedAutoHeightCols=function(){return this.displayedAutoHeightCols},ColumnModel.prototype.setViewport=function(){this.gridOptionsService.is("enableRtl")?(this.viewportLeft=this.bodyWidth-this.scrollPosition-this.scrollWidth,this.viewportRight=this.bodyWidth-this.scrollPosition):(this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition)},ColumnModel.prototype.getDisplayedColumnsStartingAt=function(column){for(var currentColumn=column,columns=[];null!=currentColumn;)columns.push(currentColumn),currentColumn=this.getDisplayedColAfter(currentColumn);return columns},ColumnModel.prototype.checkViewportColumns=function(afterScroll){if((void 0===afterScroll&&(afterScroll=!1),null!=this.displayedColumnsCenter)&&this.extractViewport()){var event={type:Events.EVENT_VIRTUAL_COLUMNS_CHANGED,afterScroll};this.eventService.dispatchEvent(event)}},ColumnModel.prototype.setViewportPosition=function(scrollWidth,scrollPosition,afterScroll){void 0===afterScroll&&(afterScroll=!1),(scrollWidth!==this.scrollWidth||scrollPosition!==this.scrollPosition||this.bodyWidthDirty)&&(this.scrollWidth=scrollWidth,this.scrollPosition=scrollPosition,this.bodyWidthDirty=!0,this.setViewport(),this.ready&&this.checkViewportColumns(afterScroll))},ColumnModel.prototype.isPivotMode=function(){return this.pivotMode},ColumnModel.prototype.isPivotSettingAllowed=function(pivot){return!pivot||!this.gridOptionsService.is("treeData")||(console.warn("AG Grid: Pivot mode not available in conjunction Tree Data i.e. 'gridOptions.treeData: true'"),!1)},ColumnModel.prototype.setPivotMode=function(pivotMode,source){if(void 0===source&&(source="api"),pivotMode!==this.pivotMode&&this.isPivotSettingAllowed(this.pivotMode)){this.pivotMode=pivotMode,this.autoGroupsNeedBuilding=!0,this.updateGridColumns(),this.updateDisplayedColumns(source);var event={type:Events.EVENT_COLUMN_PIVOT_MODE_CHANGED};this.eventService.dispatchEvent(event)}},ColumnModel.prototype.getSecondaryPivotColumn=function(pivotKeys,valueColKey){if(missing(this.secondaryColumns))return null;var valueColumnToFind=this.getPrimaryColumn(valueColKey),foundColumn=null;return this.secondaryColumns.forEach((function(column){var thisPivotKeys=column.getColDef().pivotKeys,pivotValueColumn=column.getColDef().pivotValueColumn;areEqual(thisPivotKeys,pivotKeys)&&pivotValueColumn===valueColumnToFind&&(foundColumn=column)})),foundColumn},ColumnModel.prototype.setBeans=function(loggerFactory){this.logger=loggerFactory.create("columnModel")},ColumnModel.prototype.setFirstRightAndLastLeftPinned=function(source){var lastLeft,firstRight;this.gridOptionsService.is("enableRtl")?(lastLeft=this.displayedColumnsLeft?this.displayedColumnsLeft[0]:null,firstRight=this.displayedColumnsRight?last(this.displayedColumnsRight):null):(lastLeft=this.displayedColumnsLeft?last(this.displayedColumnsLeft):null,firstRight=this.displayedColumnsRight?this.displayedColumnsRight[0]:null),this.gridColumns.forEach((function(column){column.setLastLeftPinned(column===lastLeft,source),column.setFirstRightPinned(column===firstRight,source)}))},ColumnModel.prototype.autoSizeColumns=function(params){var _this=this;if(this.shouldQueueResizeOperations)this.resizeOperationQueue.push((function(){return _this.autoSizeColumns(params)}));else{var columns=params.columns,skipHeader=params.skipHeader,skipHeaderGroups=params.skipHeaderGroups,stopAtGroup=params.stopAtGroup,_a=params.source,source=void 0===_a?"api":_a;this.animationFrameService.flushAllFrames();for(var columnsAutosized=[],changesThisTimeAround=-1,shouldSkipHeader=null!=skipHeader?skipHeader:this.gridOptionsService.is("skipHeaderOnAutoSize"),shouldSkipHeaderGroups=null!=skipHeaderGroups?skipHeaderGroups:shouldSkipHeader;0!==changesThisTimeAround;)changesThisTimeAround=0,this.actionOnGridColumns(columns,(function(column){if(columnsAutosized.indexOf(column)>=0)return!1;var preferredWidth=_this.autoWidthCalculator.getPreferredWidthForColumn(column,shouldSkipHeader);if(preferredWidth>0){var newWidth=_this.normaliseColumnWidth(column,preferredWidth);column.setActualWidth(newWidth,source),columnsAutosized.push(column),changesThisTimeAround++}return!0}),source);shouldSkipHeaderGroups||this.autoSizeColumnGroupsByColumns(columns,source,stopAtGroup),this.dispatchColumnResizedEvent(columnsAutosized,!0,"autosizeColumns")}},ColumnModel.prototype.dispatchColumnResizedEvent=function(columns,finished,source,flexColumns){if(void 0===flexColumns&&(flexColumns=null),columns&&columns.length){var event_1={type:Events.EVENT_COLUMN_RESIZED,columns,column:1===columns.length?columns[0]:null,flexColumns,finished,source};this.eventService.dispatchEvent(event_1)}},ColumnModel.prototype.dispatchColumnChangedEvent=function(type,columns,source){var event={type,columns,column:columns&&1==columns.length?columns[0]:null,source};this.eventService.dispatchEvent(event)},ColumnModel.prototype.dispatchColumnMovedEvent=function(params){var movedColumns=params.movedColumns,source=params.source,toIndex=params.toIndex,finished=params.finished,event={type:Events.EVENT_COLUMN_MOVED,columns:movedColumns,column:movedColumns&&1===movedColumns.length?movedColumns[0]:null,toIndex,finished,source};this.eventService.dispatchEvent(event)},ColumnModel.prototype.dispatchColumnPinnedEvent=function(changedColumns,source){if(changedColumns.length){var column=1===changedColumns.length?changedColumns[0]:null,pinned=this.getCommonValue(changedColumns,(function(col){return col.getPinned()})),event={type:Events.EVENT_COLUMN_PINNED,pinned:null!=pinned?pinned:null,columns:changedColumns,column,source};this.eventService.dispatchEvent(event)}},ColumnModel.prototype.dispatchColumnVisibleEvent=function(changedColumns,source){if(changedColumns.length){var column=1===changedColumns.length?changedColumns[0]:null,visible=this.getCommonValue(changedColumns,(function(col){return col.isVisible()})),event={type:Events.EVENT_COLUMN_VISIBLE,visible,columns:changedColumns,column,source};this.eventService.dispatchEvent(event)}},ColumnModel.prototype.autoSizeColumn=function(key,skipHeader,source){void 0===source&&(source="api"),key&&this.autoSizeColumns({columns:[key],skipHeader,skipHeaderGroups:!0,source})},ColumnModel.prototype.autoSizeColumnGroupsByColumns=function(keys,source,stopAtGroup){var e_1,_a,e_2,_b,headerGroupCtrl,columnGroups=new Set;this.getGridColumns(keys).forEach((function(col){for(var parent=col.getParent();parent&&parent!=stopAtGroup;)parent.isPadding()||columnGroups.add(parent),parent=parent.getParent()}));try{for(var columnGroups_1=__values$6(columnGroups),columnGroups_1_1=columnGroups_1.next();!columnGroups_1_1.done;columnGroups_1_1=columnGroups_1.next()){var columnGroup=columnGroups_1_1.value;try{for(var _c=(e_2=void 0,__values$6(this.ctrlsService.getHeaderRowContainerCtrls())),_d=_c.next();!_d.done;_d=_c.next()){if(headerGroupCtrl=_d.value.getHeaderCtrlForColumn(columnGroup))break}}catch(e_2_1){e_2={error:e_2_1}}finally{try{_d&&!_d.done&&(_b=_c.return)&&_b.call(_c)}finally{if(e_2)throw e_2.error}}headerGroupCtrl&&headerGroupCtrl.resizeLeafColumnsToFit(source)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{columnGroups_1_1&&!columnGroups_1_1.done&&(_a=columnGroups_1.return)&&_a.call(columnGroups_1)}finally{if(e_1)throw e_1.error}}return[]},ColumnModel.prototype.autoSizeAllColumns=function(skipHeader,source){var _this=this;if(void 0===source&&(source="api"),this.shouldQueueResizeOperations)this.resizeOperationQueue.push((function(){return _this.autoSizeAllColumns(skipHeader,source)}));else{var allDisplayedColumns=this.getAllDisplayedColumns();this.autoSizeColumns({columns:allDisplayedColumns,skipHeader,source})}},ColumnModel.prototype.getColumnsFromTree=function(rootColumns){var result=[],recursiveFindColumns=function(childColumns){for(var i=0;i<childColumns.length;i++){var child=childColumns[i];child instanceof Column?result.push(child):child instanceof ProvidedColumnGroup&&recursiveFindColumns(child.getChildren())}};return recursiveFindColumns(rootColumns),result},ColumnModel.prototype.getAllDisplayedTrees=function(){return this.displayedTreeLeft&&this.displayedTreeRight&&this.displayedTreeCentre?this.displayedTreeLeft.concat(this.displayedTreeCentre).concat(this.displayedTreeRight):null},ColumnModel.prototype.getPrimaryColumnTree=function(){return this.primaryColumnTree},ColumnModel.prototype.getHeaderRowCount=function(){return this.gridHeaderRowCount},ColumnModel.prototype.getDisplayedTreeLeft=function(){return this.displayedTreeLeft},ColumnModel.prototype.getDisplayedTreeRight=function(){return this.displayedTreeRight},ColumnModel.prototype.getDisplayedTreeCentre=function(){return this.displayedTreeCentre},ColumnModel.prototype.isColumnDisplayed=function(column){return this.getAllDisplayedColumns().indexOf(column)>=0},ColumnModel.prototype.getAllDisplayedColumns=function(){return this.displayedColumns},ColumnModel.prototype.getViewportColumns=function(){return this.viewportColumns},ColumnModel.prototype.getDisplayedLeftColumnsForRow=function(rowNode){return this.colSpanActive?this.getDisplayedColumnsForRow(rowNode,this.displayedColumnsLeft):this.displayedColumnsLeft},ColumnModel.prototype.getDisplayedRightColumnsForRow=function(rowNode){return this.colSpanActive?this.getDisplayedColumnsForRow(rowNode,this.displayedColumnsRight):this.displayedColumnsRight},ColumnModel.prototype.isColSpanActive=function(){return this.colSpanActive},ColumnModel.prototype.getDisplayedColumnsForRow=function(rowNode,displayedColumns,filterCallback,emptySpaceBeforeColumn){for(var out_i_1,result=[],lastConsideredCol=null,_loop_1=function(i){var filterPasses,col=displayedColumns[i],maxAllowedColSpan=displayedColumns.length-i,colSpan=Math.min(col.getColSpan(rowNode),maxAllowedColSpan),columnsToCheckFilter=[col];if(colSpan>1){for(var colsToRemove=colSpan-1,j=1;j<=colsToRemove;j++)columnsToCheckFilter.push(displayedColumns[i+j]);i+=colsToRemove}if(filterCallback?(filterPasses=!1,columnsToCheckFilter.forEach((function(colForFilter){filterCallback(colForFilter)&&(filterPasses=!0)}))):filterPasses=!0,filterPasses){if(0===result.length&&lastConsideredCol)!!emptySpaceBeforeColumn&&emptySpaceBeforeColumn(col)&&result.push(lastConsideredCol);result.push(col)}lastConsideredCol=col,out_i_1=i},i=0;i<displayedColumns.length;i++)_loop_1(i),i=out_i_1;return result},ColumnModel.prototype.getViewportCenterColumnsForRow=function(rowNode){var _this=this;if(!this.colSpanActive)return this.viewportColumnsCenter;var filterCallback=this.suppressColumnVirtualisation?null:this.isColumnInRowViewport.bind(this);return this.getDisplayedColumnsForRow(rowNode,this.displayedColumnsCenter,filterCallback,(function(col){var left=col.getLeft();return exists(left)&&left>_this.viewportLeft}))},ColumnModel.prototype.getAriaColumnIndex=function(col){return this.getAllGridColumns().indexOf(col)+1},ColumnModel.prototype.isColumnInHeaderViewport=function(col){return!!col.isAutoHeaderHeight()||this.isColumnInRowViewport(col)},ColumnModel.prototype.isColumnInRowViewport=function(col){if(col.isAutoHeight())return!0;var columnLeft=col.getLeft()||0,columnRight=columnLeft+col.getActualWidth(),leftBounds=this.viewportLeft-200,rightBounds=this.viewportRight+200;return!(columnLeft<leftBounds&&columnRight<leftBounds)&&!(columnLeft>rightBounds&&columnRight>rightBounds)},ColumnModel.prototype.getDisplayedColumnsLeftWidth=function(){return this.getWidthOfColsInList(this.displayedColumnsLeft)},ColumnModel.prototype.getDisplayedColumnsRightWidth=function(){return this.getWidthOfColsInList(this.displayedColumnsRight)},ColumnModel.prototype.updatePrimaryColumnList=function(keys,masterList,actionIsAdd,columnCallback,eventType,source){var _this=this;if(void 0===source&&(source="api"),keys&&!missingOrEmpty(keys)){var atLeastOne=!1;if(keys.forEach((function(key){var columnToAdd=_this.getPrimaryColumn(key);if(columnToAdd){if(actionIsAdd){if(masterList.indexOf(columnToAdd)>=0)return;masterList.push(columnToAdd)}else{if(masterList.indexOf(columnToAdd)<0)return;removeFromArray(masterList,columnToAdd)}columnCallback(columnToAdd),atLeastOne=!0}})),atLeastOne){this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(source);var event={type:eventType,columns:masterList,column:1===masterList.length?masterList[0]:null,source};this.eventService.dispatchEvent(event)}}},ColumnModel.prototype.setRowGroupColumns=function(colKeys,source){void 0===source&&(source="api"),this.autoGroupsNeedBuilding=!0,this.setPrimaryColumnList(colKeys,this.rowGroupColumns,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,!0,this.setRowGroupActive.bind(this),source)},ColumnModel.prototype.setRowGroupActive=function(active,column,source){active!==column.isRowGroupActive()&&(column.setRowGroupActive(active,source),active&&!this.gridOptionsService.is("suppressRowGroupHidesColumns")&&this.setColumnVisible(column,!1,source),active||this.gridOptionsService.is("suppressMakeColumnVisibleAfterUnGroup")||this.setColumnVisible(column,!0,source))},ColumnModel.prototype.addRowGroupColumn=function(key,source){void 0===source&&(source="api"),key&&this.addRowGroupColumns([key],source)},ColumnModel.prototype.addRowGroupColumns=function(keys,source){void 0===source&&(source="api"),this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(keys,this.rowGroupColumns,!0,this.setRowGroupActive.bind(this,!0),Events.EVENT_COLUMN_ROW_GROUP_CHANGED,source)},ColumnModel.prototype.removeRowGroupColumns=function(keys,source){void 0===source&&(source="api"),this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(keys,this.rowGroupColumns,!1,this.setRowGroupActive.bind(this,!1),Events.EVENT_COLUMN_ROW_GROUP_CHANGED,source)},ColumnModel.prototype.removeRowGroupColumn=function(key,source){void 0===source&&(source="api"),key&&this.removeRowGroupColumns([key],source)},ColumnModel.prototype.addPivotColumns=function(keys,source){void 0===source&&(source="api"),this.updatePrimaryColumnList(keys,this.pivotColumns,!0,(function(column){return column.setPivotActive(!0,source)}),Events.EVENT_COLUMN_PIVOT_CHANGED,source)},ColumnModel.prototype.setPivotColumns=function(colKeys,source){void 0===source&&(source="api"),this.setPrimaryColumnList(colKeys,this.pivotColumns,Events.EVENT_COLUMN_PIVOT_CHANGED,!0,(function(added,column){column.setPivotActive(added,source)}),source)},ColumnModel.prototype.addPivotColumn=function(key,source){void 0===source&&(source="api"),this.addPivotColumns([key],source)},ColumnModel.prototype.removePivotColumns=function(keys,source){void 0===source&&(source="api"),this.updatePrimaryColumnList(keys,this.pivotColumns,!1,(function(column){return column.setPivotActive(!1,source)}),Events.EVENT_COLUMN_PIVOT_CHANGED,source)},ColumnModel.prototype.removePivotColumn=function(key,source){void 0===source&&(source="api"),this.removePivotColumns([key],source)},ColumnModel.prototype.setPrimaryColumnList=function(colKeys,masterList,eventName,detectOrderChange,columnCallback,source){var _this=this,changes=new Map;masterList.forEach((function(col,idx){return changes.set(col,idx)})),masterList.length=0,exists(colKeys)&&colKeys.forEach((function(key){var column=_this.getPrimaryColumn(key);column&&masterList.push(column)})),masterList.forEach((function(col,idx){var oldIndex=changes.get(col);void 0!==oldIndex?detectOrderChange&&oldIndex!==idx||changes.delete(col):changes.set(col,0)})),(this.primaryColumns||[]).forEach((function(column){var added=masterList.indexOf(column)>=0;columnCallback(added,column)})),this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(source),this.dispatchColumnChangedEvent(eventName,__spreadArray$l([],__read$s(changes.keys())),source)},ColumnModel.prototype.setValueColumns=function(colKeys,source){void 0===source&&(source="api"),this.setPrimaryColumnList(colKeys,this.valueColumns,Events.EVENT_COLUMN_VALUE_CHANGED,!1,this.setValueActive.bind(this),source)},ColumnModel.prototype.setValueActive=function(active,column,source){if(active!==column.isValueActive()&&(column.setValueActive(active,source),active&&!column.getAggFunc())){var initialAggFunc=this.aggFuncService.getDefaultAggFunc(column);column.setAggFunc(initialAggFunc)}},ColumnModel.prototype.addValueColumns=function(keys,source){void 0===source&&(source="api"),this.updatePrimaryColumnList(keys,this.valueColumns,!0,this.setValueActive.bind(this,!0),Events.EVENT_COLUMN_VALUE_CHANGED,source)},ColumnModel.prototype.addValueColumn=function(colKey,source){void 0===source&&(source="api"),colKey&&this.addValueColumns([colKey],source)},ColumnModel.prototype.removeValueColumn=function(colKey,source){void 0===source&&(source="api"),this.removeValueColumns([colKey],source)},ColumnModel.prototype.removeValueColumns=function(keys,source){void 0===source&&(source="api"),this.updatePrimaryColumnList(keys,this.valueColumns,!1,this.setValueActive.bind(this,!1),Events.EVENT_COLUMN_VALUE_CHANGED,source)},ColumnModel.prototype.normaliseColumnWidth=function(column,newWidth){var minWidth=column.getMinWidth();exists(minWidth)&&newWidth<minWidth&&(newWidth=minWidth);var maxWidth=column.getMaxWidth();return exists(maxWidth)&&column.isGreaterThanMax(newWidth)&&(newWidth=maxWidth),newWidth},ColumnModel.prototype.getPrimaryOrGridColumn=function(key){return this.getPrimaryColumn(key)||this.getGridColumn(key)},ColumnModel.prototype.setColumnWidths=function(columnWidths,shiftKey,finished,source){var _this=this;void 0===source&&(source="api");var sets=[];columnWidths.forEach((function(columnWidth){var col=_this.getPrimaryOrGridColumn(columnWidth.key);if(col&&(sets.push({width:columnWidth.newWidth,ratios:[1],columns:[col]}),"shift"===_this.gridOptionsService.get("colResizeDefault")&&(shiftKey=!shiftKey),shiftKey)){var otherCol=_this.getDisplayedColAfter(col);if(!otherCol)return;var widthDiff=col.getActualWidth()-columnWidth.newWidth,otherColWidth=otherCol.getActualWidth()+widthDiff;sets.push({width:otherColWidth,ratios:[1],columns:[otherCol]})}})),0!==sets.length&&this.resizeColumnSets({resizeSets:sets,finished,source})},ColumnModel.prototype.checkMinAndMaxWidthsForSet=function(columnResizeSet){var columns=columnResizeSet.columns,width=columnResizeSet.width,minWidthAccumulated=0,maxWidthAccumulated=0,maxWidthActive=!0;return columns.forEach((function(col){var minWidth=col.getMinWidth();minWidthAccumulated+=minWidth||0;var maxWidth=col.getMaxWidth();exists(maxWidth)&&maxWidth>0?maxWidthAccumulated+=maxWidth:maxWidthActive=!1})),width>=minWidthAccumulated&&(!maxWidthActive||width<=maxWidthAccumulated)},ColumnModel.prototype.resizeColumnSets=function(params){var _this=this,resizeSets=params.resizeSets,finished=params.finished,source=params.source;if(!resizeSets||resizeSets.every((function(columnResizeSet){return _this.checkMinAndMaxWidthsForSet(columnResizeSet)}))){var changedCols=[],allResizedCols=[];resizeSets.forEach((function(set){var width=set.width,columns=set.columns,ratios=set.ratios,newWidths={},finishedCols={};columns.forEach((function(col){return allResizedCols.push(col)}));for(var finishedColsGrew=!0,loopCount=0,_loop_2=function(){if(++loopCount>1e3)return console.error("AG Grid: infinite loop in resizeColumnSets"),"break";finishedColsGrew=!1;var subsetCols=[],subsetRatioTotal=0,pixelsToDistribute=width;columns.forEach((function(col,index){if(finishedCols[col.getId()])pixelsToDistribute-=newWidths[col.getId()];else{subsetCols.push(col);var ratioThisCol=ratios[index];subsetRatioTotal+=ratioThisCol}}));var ratioScale=1/subsetRatioTotal;subsetCols.forEach((function(col,index){var colNewWidth;index===subsetCols.length-1?colNewWidth=pixelsToDistribute:(colNewWidth=Math.round(ratios[index]*width*ratioScale),pixelsToDistribute-=colNewWidth);var minWidth=col.getMinWidth(),maxWidth=col.getMaxWidth();exists(minWidth)&&colNewWidth<minWidth?(colNewWidth=minWidth,finishedCols[col.getId()]=!0,finishedColsGrew=!0):exists(maxWidth)&&maxWidth>0&&colNewWidth>maxWidth&&(colNewWidth=maxWidth,finishedCols[col.getId()]=!0,finishedColsGrew=!0),newWidths[col.getId()]=colNewWidth}))};finishedColsGrew;){if("break"===_loop_2())break}columns.forEach((function(col){var newWidth=newWidths[col.getId()];col.getActualWidth()!==newWidth&&(col.setActualWidth(newWidth,source),changedCols.push(col))}))}));var atLeastOneColChanged=changedCols.length>0,flexedCols=[];atLeastOneColChanged&&(flexedCols=this.refreshFlexedColumns({resizingCols:allResizedCols,skipSetLeft:!0}),this.setLeftValues(source),this.updateBodyWidths(),this.checkViewportColumns());var colsForEvent=allResizedCols.concat(flexedCols);(atLeastOneColChanged||finished)&&this.dispatchColumnResizedEvent(colsForEvent,finished,source,flexedCols)}else if(finished){var columns=resizeSets&&resizeSets.length>0?resizeSets[0].columns:null;this.dispatchColumnResizedEvent(columns,finished,source)}},ColumnModel.prototype.setColumnAggFunc=function(key,aggFunc,source){if(void 0===source&&(source="api"),key){var column=this.getPrimaryColumn(key);column&&(column.setAggFunc(aggFunc),this.dispatchColumnChangedEvent(Events.EVENT_COLUMN_VALUE_CHANGED,[column],source))}},ColumnModel.prototype.moveRowGroupColumn=function(fromIndex,toIndex,source){void 0===source&&(source="api");var column=this.rowGroupColumns[fromIndex],impactedColumns=this.rowGroupColumns.slice(fromIndex,toIndex);this.rowGroupColumns.splice(fromIndex,1),this.rowGroupColumns.splice(toIndex,0,column);var event={type:Events.EVENT_COLUMN_ROW_GROUP_CHANGED,columns:impactedColumns,column:1===impactedColumns.length?impactedColumns[0]:null,source};this.eventService.dispatchEvent(event)},ColumnModel.prototype.moveColumns=function(columnsToMoveKeys,toIndex,source,finished){if(void 0===source&&(source="api"),void 0===finished&&(finished=!0),this.columnAnimationService.start(),toIndex>this.gridColumns.length-columnsToMoveKeys.length)return console.warn("AG Grid: tried to insert columns in invalid location, toIndex = "+toIndex),void console.warn("AG Grid: remember that you should not count the moving columns when calculating the new index");var movedColumns=this.getGridColumns(columnsToMoveKeys);!this.doesMovePassRules(movedColumns,toIndex)||(moveInArray(this.gridColumns,movedColumns,toIndex),this.updateDisplayedColumns(source),this.dispatchColumnMovedEvent({movedColumns,source,toIndex,finished}),this.columnAnimationService.finish())},ColumnModel.prototype.doesMovePassRules=function(columnsToMove,toIndex){var proposedColumnOrder=this.getProposedColumnOrder(columnsToMove,toIndex);return this.doesOrderPassRules(proposedColumnOrder)},ColumnModel.prototype.doesOrderPassRules=function(gridOrder){return!!this.doesMovePassMarryChildren(gridOrder)&&!!this.doesMovePassLockedPositions(gridOrder)},ColumnModel.prototype.getProposedColumnOrder=function(columnsToMove,toIndex){var proposedColumnOrder=this.gridColumns.slice();return moveInArray(proposedColumnOrder,columnsToMove,toIndex),proposedColumnOrder},ColumnModel.prototype.sortColumnsLikeGridColumns=function(cols){var _this=this;!cols||cols.length<=1||(cols.filter((function(c){return _this.gridColumns.indexOf(c)<0})).length>0||cols.sort((function(a,b){return _this.gridColumns.indexOf(a)-_this.gridColumns.indexOf(b)})))},ColumnModel.prototype.doesMovePassLockedPositions=function(proposedColumnOrder){var lastPlacement=0,rulePassed=!0;return proposedColumnOrder.forEach((function(col){var position,placement=(position=col.getColDef().lockPosition)?!0===position||"left"===position?0:2:1;placement<lastPlacement&&(rulePassed=!1),lastPlacement=placement})),rulePassed},ColumnModel.prototype.doesMovePassMarryChildren=function(allColumnsCopy){var rulePassed=!0;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,(function(child){if(child instanceof ProvidedColumnGroup){var columnGroup=child,colGroupDef=columnGroup.getColGroupDef();if(colGroupDef&&colGroupDef.marryChildren){var newIndexes=[];columnGroup.getLeafColumns().forEach((function(col){var newColIndex=allColumnsCopy.indexOf(col);newIndexes.push(newColIndex)})),Math.max.apply(Math,newIndexes)-Math.min.apply(Math,newIndexes)>columnGroup.getLeafColumns().length-1&&(rulePassed=!1)}}})),rulePassed},ColumnModel.prototype.moveColumn=function(key,toIndex,source){void 0===source&&(source="api"),this.moveColumns([key],toIndex,source)},ColumnModel.prototype.moveColumnByIndex=function(fromIndex,toIndex,source){void 0===source&&(source="api");var column=this.gridColumns[fromIndex];this.moveColumn(column,toIndex,source)},ColumnModel.prototype.getColumnDefs=function(){var _this=this;if(this.primaryColumns){var cols=this.primaryColumns.slice();return this.gridColsArePrimary?cols.sort((function(a,b){return _this.gridColumns.indexOf(a)-_this.gridColumns.indexOf(b)})):this.lastPrimaryOrder&&cols.sort((function(a,b){return _this.lastPrimaryOrder.indexOf(a)-_this.lastPrimaryOrder.indexOf(b)})),this.columnDefFactory.buildColumnDefs(cols,this.rowGroupColumns,this.pivotColumns)}},ColumnModel.prototype.getBodyContainerWidth=function(){return this.bodyWidth},ColumnModel.prototype.getContainerWidth=function(pinned){switch(pinned){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}},ColumnModel.prototype.updateBodyWidths=function(){var newBodyWidth=this.getWidthOfColsInList(this.displayedColumnsCenter),newLeftWidth=this.getWidthOfColsInList(this.displayedColumnsLeft),newRightWidth=this.getWidthOfColsInList(this.displayedColumnsRight);if(this.bodyWidthDirty=this.bodyWidth!==newBodyWidth,this.bodyWidth!==newBodyWidth||this.leftWidth!==newLeftWidth||this.rightWidth!==newRightWidth){this.bodyWidth=newBodyWidth,this.leftWidth=newLeftWidth,this.rightWidth=newRightWidth;var event_2={type:Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED};this.eventService.dispatchEvent(event_2)}},ColumnModel.prototype.getValueColumns=function(){return this.valueColumns?this.valueColumns:[]},ColumnModel.prototype.getPivotColumns=function(){return this.pivotColumns?this.pivotColumns:[]},ColumnModel.prototype.isPivotActive=function(){return this.pivotColumns&&this.pivotColumns.length>0&&this.pivotMode},ColumnModel.prototype.getRowGroupColumns=function(){return this.rowGroupColumns?this.rowGroupColumns:[]},ColumnModel.prototype.getDisplayedCenterColumns=function(){return this.displayedColumnsCenter},ColumnModel.prototype.getDisplayedLeftColumns=function(){return this.displayedColumnsLeft},ColumnModel.prototype.getDisplayedRightColumns=function(){return this.displayedColumnsRight},ColumnModel.prototype.getDisplayedColumns=function(type){switch(type){case"left":return this.getDisplayedLeftColumns();case"right":return this.getDisplayedRightColumns();default:return this.getDisplayedCenterColumns()}},ColumnModel.prototype.getAllPrimaryColumns=function(){return this.primaryColumns?this.primaryColumns.slice():null},ColumnModel.prototype.getSecondaryColumns=function(){return this.secondaryColumns?this.secondaryColumns.slice():null},ColumnModel.prototype.getAllColumnsForQuickFilter=function(){return this.columnsForQuickFilter},ColumnModel.prototype.getAllGridColumns=function(){return this.gridColumns},ColumnModel.prototype.isEmpty=function(){return missingOrEmpty(this.gridColumns)},ColumnModel.prototype.isRowGroupEmpty=function(){return missingOrEmpty(this.rowGroupColumns)},ColumnModel.prototype.setColumnVisible=function(key,visible,source){void 0===source&&(source="api"),this.setColumnsVisible([key],visible,source)},ColumnModel.prototype.setColumnsVisible=function(keys,visible,source){void 0===visible&&(visible=!1),void 0===source&&(source="api"),this.applyColumnState({state:keys.map((function(key){return{colId:"string"==typeof key?key:key.getColId(),hide:!visible}}))},source)},ColumnModel.prototype.setColumnPinned=function(key,pinned,source){void 0===source&&(source="api"),key&&this.setColumnsPinned([key],pinned,source)},ColumnModel.prototype.setColumnsPinned=function(keys,pinned,source){var actualPinned;(void 0===source&&(source="api"),this.gridOptionsService.isDomLayout("print"))?console.warn("AG Grid: Changing the column pinning status is not allowed with domLayout='print'"):(this.columnAnimationService.start(),actualPinned=!0===pinned||"left"===pinned?"left":"right"===pinned?"right":null,this.actionOnGridColumns(keys,(function(col){return col.getPinned()!==actualPinned&&(col.setPinned(actualPinned),!0)}),source,(function(){return{type:Events.EVENT_COLUMN_PINNED,pinned:actualPinned,column:null,columns:null,source}})),this.columnAnimationService.finish())},ColumnModel.prototype.actionOnGridColumns=function(keys,action,source,createEvent){var _this=this;if(!missingOrEmpty(keys)){var updatedColumns=[];if(keys.forEach((function(key){var column=_this.getGridColumn(key);column&&(!1!==action(column)&&updatedColumns.push(column))})),updatedColumns.length&&(this.updateDisplayedColumns(source),exists(createEvent)&&createEvent)){var event_3=createEvent();event_3.columns=updatedColumns,event_3.column=1===updatedColumns.length?updatedColumns[0]:null,this.eventService.dispatchEvent(event_3)}}},ColumnModel.prototype.getDisplayedColBefore=function(col){var allDisplayedColumns=this.getAllDisplayedColumns(),oldIndex=allDisplayedColumns.indexOf(col);return oldIndex>0?allDisplayedColumns[oldIndex-1]:null},ColumnModel.prototype.getDisplayedColAfter=function(col){var allDisplayedColumns=this.getAllDisplayedColumns(),oldIndex=allDisplayedColumns.indexOf(col);return oldIndex<allDisplayedColumns.length-1?allDisplayedColumns[oldIndex+1]:null},ColumnModel.prototype.getDisplayedGroupAfter=function(columnGroup){return this.getDisplayedGroupAtDirection(columnGroup,"After")},ColumnModel.prototype.getDisplayedGroupBefore=function(columnGroup){return this.getDisplayedGroupAtDirection(columnGroup,"Before")},ColumnModel.prototype.getDisplayedGroupAtDirection=function(columnGroup,direction){for(var requiredLevel=columnGroup.getProvidedColumnGroup().getLevel()+columnGroup.getPaddingLevel(),colGroupLeafColumns=columnGroup.getDisplayedLeafColumns(),col="After"===direction?last(colGroupLeafColumns):colGroupLeafColumns[0],getDisplayColMethod="getDisplayedCol"+direction;;){var column=this[getDisplayColMethod](col);if(!column)return null;var groupPointer=this.getColumnGroupAtLevel(column,requiredLevel);if(groupPointer!==columnGroup)return groupPointer}},ColumnModel.prototype.getColumnGroupAtLevel=function(column,level){for(var groupPointer=column.getParent();;){if(groupPointer.getProvidedColumnGroup().getLevel()+groupPointer.getPaddingLevel()<=level)break;groupPointer=groupPointer.getParent()}return groupPointer},ColumnModel.prototype.isPinningLeft=function(){return this.displayedColumnsLeft.length>0},ColumnModel.prototype.isPinningRight=function(){return this.displayedColumnsRight.length>0},ColumnModel.prototype.getPrimaryAndSecondaryAndAutoColumns=function(){var _a;return(_a=[]).concat.apply(_a,[this.primaryColumns||[],this.groupAutoColumns||[],this.secondaryColumns||[]])},ColumnModel.prototype.createStateItemFromColumn=function(column){var rowGroupIndex=column.isRowGroupActive()?this.rowGroupColumns.indexOf(column):null,pivotIndex=column.isPivotActive()?this.pivotColumns.indexOf(column):null,aggFunc=column.isValueActive()?column.getAggFunc():null,sort=null!=column.getSort()?column.getSort():null,sortIndex=null!=column.getSortIndex()?column.getSortIndex():null,flex=null!=column.getFlex()&&column.getFlex()>0?column.getFlex():null;return{colId:column.getColId(),width:column.getActualWidth(),hide:!column.isVisible(),pinned:column.getPinned(),sort,sortIndex,aggFunc,rowGroup:column.isRowGroupActive(),rowGroupIndex,pivot:column.isPivotActive(),pivotIndex,flex}},ColumnModel.prototype.getColumnState=function(){if(missing(this.primaryColumns)||!this.isAlive())return[];var res=this.getPrimaryAndSecondaryAndAutoColumns().map(this.createStateItemFromColumn.bind(this));return this.orderColumnStateList(res),res},ColumnModel.prototype.orderColumnStateList=function(columnStateList){var colIdToGridIndexMap=convertToMap(this.gridColumns.map((function(col,index){return[col.getColId(),index]})));columnStateList.sort((function(itemA,itemB){return(colIdToGridIndexMap.has(itemA.colId)?colIdToGridIndexMap.get(itemA.colId):-1)-(colIdToGridIndexMap.has(itemB.colId)?colIdToGridIndexMap.get(itemB.colId):-1)}))},ColumnModel.prototype.resetColumnState=function(source){var _this=this;void 0===source&&(source="api");var primaryColumns=this.getColumnsFromTree(this.primaryColumnTree),columnStates=[],letRowGroupIndex=1e3,letPivotIndex=1e3,colsToProcess=[];this.groupAutoColumns&&(colsToProcess=colsToProcess.concat(this.groupAutoColumns)),primaryColumns&&(colsToProcess=colsToProcess.concat(primaryColumns)),colsToProcess.forEach((function(column){var stateItem=_this.getColumnStateFromColDef(column);missing(stateItem.rowGroupIndex)&&stateItem.rowGroup&&(stateItem.rowGroupIndex=letRowGroupIndex++),missing(stateItem.pivotIndex)&&stateItem.pivot&&(stateItem.pivotIndex=letPivotIndex++),columnStates.push(stateItem)})),this.applyColumnState({state:columnStates,applyOrder:!0},source)},ColumnModel.prototype.getColumnStateFromColDef=function(column){var getValueOrNull=function(a,b){return null!=a?a:null!=b?b:null},colDef=column.getColDef(),sort=getValueOrNull(colDef.sort,colDef.initialSort),sortIndex=getValueOrNull(colDef.sortIndex,colDef.initialSortIndex),hide=getValueOrNull(colDef.hide,colDef.initialHide),pinned=getValueOrNull(colDef.pinned,colDef.initialPinned),width=getValueOrNull(colDef.width,colDef.initialWidth),flex=getValueOrNull(colDef.flex,colDef.initialFlex),rowGroupIndex=getValueOrNull(colDef.rowGroupIndex,colDef.initialRowGroupIndex),rowGroup=getValueOrNull(colDef.rowGroup,colDef.initialRowGroup);null!=rowGroupIndex||null!=rowGroup&&0!=rowGroup||(rowGroupIndex=null,rowGroup=null);var pivotIndex=getValueOrNull(colDef.pivotIndex,colDef.initialPivotIndex),pivot=getValueOrNull(colDef.pivot,colDef.initialPivot);null!=pivotIndex||null!=pivot&&0!=pivot||(pivotIndex=null,pivot=null);var aggFunc=getValueOrNull(colDef.aggFunc,colDef.initialAggFunc);return{colId:column.getColId(),sort,sortIndex,hide,pinned,width,flex,rowGroup,rowGroupIndex,pivot,pivotIndex,aggFunc}},ColumnModel.prototype.applyColumnState=function(params,source){var _this=this;if(missingOrEmpty(this.primaryColumns))return!1;if(params&&params.state&&!params.state.forEach)return console.warn("AG Grid: applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;var applyStates=function(states,existingColumns,getById){var dispatchEventsFunc=_this.compareColumnStatesAndDispatchEvents(source);_this.autoGroupsNeedBuilding=!0;var columnsWithNoState=existingColumns.slice(),rowGroupIndexes={},pivotIndexes={},autoGroupColumnStates=[],unmatchedAndAutoStates=[],unmatchedCount=0,previousRowGroupCols=_this.rowGroupColumns.slice(),previousPivotCols=_this.pivotColumns.slice();states.forEach((function(state){var colId=state.colId||"";if(colId.startsWith("ag-Grid-AutoColumn"))return autoGroupColumnStates.push(state),void unmatchedAndAutoStates.push(state);var column=getById(colId);column?(_this.syncColumnWithStateItem(column,state,params.defaultState,rowGroupIndexes,pivotIndexes,!1,source),removeFromArray(columnsWithNoState,column)):(unmatchedAndAutoStates.push(state),unmatchedCount+=1)}));var applyDefaultsFunc=function(col){return _this.syncColumnWithStateItem(col,null,params.defaultState,rowGroupIndexes,pivotIndexes,!1,source)};columnsWithNoState.forEach(applyDefaultsFunc);var comparator=function(indexes,oldList,colA,colB){var indexA=indexes[colA.getId()],indexB=indexes[colB.getId()],aHasIndex=null!=indexA,bHasIndex=null!=indexB;if(aHasIndex&&bHasIndex)return indexA-indexB;if(aHasIndex)return-1;if(bHasIndex)return 1;var oldIndexA=oldList.indexOf(colA),oldIndexB=oldList.indexOf(colB),aHasOldIndex=oldIndexA>=0;return aHasOldIndex&&oldIndexB>=0?oldIndexA-oldIndexB:aHasOldIndex?-1:1};_this.rowGroupColumns.sort(comparator.bind(_this,rowGroupIndexes,previousRowGroupCols)),_this.pivotColumns.sort(comparator.bind(_this,pivotIndexes,previousPivotCols)),_this.updateGridColumns();var autoGroupColsCopy=_this.groupAutoColumns?_this.groupAutoColumns.slice():[];return autoGroupColumnStates.forEach((function(stateItem){var autoCol=_this.getAutoColumn(stateItem.colId);removeFromArray(autoGroupColsCopy,autoCol),_this.syncColumnWithStateItem(autoCol,stateItem,params.defaultState,null,null,!0,source)})),autoGroupColsCopy.forEach(applyDefaultsFunc),_this.applyOrderAfterApplyState(params),_this.updateDisplayedColumns(source),_this.dispatchEverythingChanged(source),dispatchEventsFunc(),{unmatchedAndAutoStates,unmatchedCount}};this.columnAnimationService.start();var _a=applyStates(params.state||[],this.primaryColumns||[],(function(id){return _this.getPrimaryColumn(id)})),unmatchedAndAutoStates=_a.unmatchedAndAutoStates,unmatchedCount=_a.unmatchedCount;return(unmatchedAndAutoStates.length>0||exists(params.defaultState))&&(unmatchedCount=applyStates(unmatchedAndAutoStates,this.secondaryColumns||[],(function(id){return _this.getSecondaryColumn(id)})).unmatchedCount),this.columnAnimationService.finish(),0===unmatchedCount},ColumnModel.prototype.applyOrderAfterApplyState=function(params){var _this=this;if(params.applyOrder&&params.state){var newOrder=[],processedColIds={};params.state.forEach((function(item){if(item.colId&&!processedColIds[item.colId]){var col=_this.gridColumnsMap[item.colId];col&&(newOrder.push(col),processedColIds[item.colId]=!0)}}));var autoGroupInsertIndex=0;this.gridColumns.forEach((function(col){var colId=col.getColId();null!=processedColIds[colId]||(colId.startsWith("ag-Grid-AutoColumn")?insertIntoArray(newOrder,col,autoGroupInsertIndex++):newOrder.push(col))})),newOrder=this.placeLockedColumns(newOrder),this.doesMovePassMarryChildren(newOrder)?this.gridColumns=newOrder:console.warn("AG Grid: Applying column order broke a group where columns should be married together. Applying new order has been discarded.")}},ColumnModel.prototype.compareColumnStatesAndDispatchEvents=function(source){var _this=this,startState={rowGroupColumns:this.rowGroupColumns.slice(),pivotColumns:this.pivotColumns.slice(),valueColumns:this.valueColumns.slice()},columnStateBefore=this.getColumnState(),columnStateBeforeMap={};return columnStateBefore.forEach((function(col){columnStateBeforeMap[col.colId]=col})),function(){var colsForState=_this.getPrimaryAndSecondaryAndAutoColumns(),dispatchWhenListsDifferent=function(eventType,colsBefore,colsAfter,idMapper){if(!areEqual(colsBefore.map(idMapper),colsAfter.map(idMapper))){var changes=new Set(colsBefore);colsAfter.forEach((function(id){changes.delete(id)||changes.add(id)}));var changesArr=__spreadArray$l([],__read$s(changes)),event={type:eventType,columns:changesArr,column:1===changesArr.length?changesArr[0]:null,source};_this.eventService.dispatchEvent(event)}},getChangedColumns=function(changedPredicate){var changedColumns=[];return colsForState.forEach((function(column){var colStateBefore=columnStateBeforeMap[column.getColId()];colStateBefore&&changedPredicate(colStateBefore,column)&&changedColumns.push(column)})),changedColumns},columnIdMapper=function(c){return c.getColId()};dispatchWhenListsDifferent(Events.EVENT_COLUMN_ROW_GROUP_CHANGED,startState.rowGroupColumns,_this.rowGroupColumns,columnIdMapper),dispatchWhenListsDifferent(Events.EVENT_COLUMN_PIVOT_CHANGED,startState.pivotColumns,_this.pivotColumns,columnIdMapper);var changedValues=getChangedColumns((function(cs,c){var oldActive=null!=cs.aggFunc,activeChanged=oldActive!=c.isValueActive(),aggFuncChanged=oldActive&&cs.aggFunc!=c.getAggFunc();return activeChanged||aggFuncChanged}));changedValues.length>0&&_this.dispatchColumnChangedEvent(Events.EVENT_COLUMN_VALUE_CHANGED,changedValues,source);_this.dispatchColumnResizedEvent(getChangedColumns((function(cs,c){return cs.width!=c.getActualWidth()})),!0,source);_this.dispatchColumnPinnedEvent(getChangedColumns((function(cs,c){return cs.pinned!=c.getPinned()})),source);_this.dispatchColumnVisibleEvent(getChangedColumns((function(cs,c){return cs.hide==c.isVisible()})),source);getChangedColumns((function(cs,c){return cs.sort!=c.getSort()||cs.sortIndex!=c.getSortIndex()})).length>0&&_this.sortController.dispatchSortChangedEvents(source),_this.normaliseColumnMovedEventForColumnState(columnStateBefore,source)}},ColumnModel.prototype.getCommonValue=function(cols,valueGetter){if(cols&&0!=cols.length){for(var firstValue=valueGetter(cols[0]),i=1;i<cols.length;i++)if(firstValue!==valueGetter(cols[i]))return;return firstValue}},ColumnModel.prototype.normaliseColumnMovedEventForColumnState=function(colStateBefore,source){var _this=this,colStateAfter=this.getColumnState(),colStateAfterMapped={};colStateAfter.forEach((function(s){return colStateAfterMapped[s.colId]=s}));var colsIntersectIds={};colStateBefore.forEach((function(s){colStateAfterMapped[s.colId]&&(colsIntersectIds[s.colId]=!0)}));var beforeFiltered=colStateBefore.filter((function(c){return colsIntersectIds[c.colId]})),afterFiltered=colStateAfter.filter((function(c){return colsIntersectIds[c.colId]})),movedColumns=[];afterFiltered.forEach((function(csAfter,index){var csBefore=beforeFiltered&&beforeFiltered[index];if(csBefore&&csBefore.colId!==csAfter.colId){var gridCol=_this.getGridColumn(csBefore.colId);gridCol&&movedColumns.push(gridCol)}})),movedColumns.length&&this.dispatchColumnMovedEvent({movedColumns,source,finished:!0})},ColumnModel.prototype.syncColumnWithStateItem=function(column,stateItem,defaultState,rowGroupIndexes,pivotIndexes,autoCol,source){if(column){var getValue=function(key1,key2){var obj={value1:void 0,value2:void 0},calculated=!1;return stateItem&&(void 0!==stateItem[key1]&&(obj.value1=stateItem[key1],calculated=!0),exists(key2)&&void 0!==stateItem[key2]&&(obj.value2=stateItem[key2],calculated=!0)),!calculated&&defaultState&&(void 0!==defaultState[key1]&&(obj.value1=defaultState[key1]),exists(key2)&&void 0!==defaultState[key2]&&(obj.value2=defaultState[key2])),obj},hide=getValue("hide").value1;void 0!==hide&&column.setVisible(!hide,source);var pinned=getValue("pinned").value1;void 0!==pinned&&column.setPinned(pinned);var minColWidth=this.columnUtils.calculateColMinWidth(column.getColDef()),flex=getValue("flex").value1;if(void 0!==flex&&column.setFlex(flex),column.getFlex()<=0){var width=getValue("width").value1;null!=width&&null!=minColWidth&&width>=minColWidth&&column.setActualWidth(width,source)}var sort=getValue("sort").value1;void 0!==sort&&("desc"===sort||"asc"===sort?column.setSort(sort,source):column.setSort(void 0,source));var sortIndex=getValue("sortIndex").value1;if(void 0!==sortIndex&&column.setSortIndex(sortIndex),!autoCol&&column.isPrimary()){var aggFunc=getValue("aggFunc").value1;void 0!==aggFunc&&("string"==typeof aggFunc?(column.setAggFunc(aggFunc),column.isValueActive()||(column.setValueActive(!0,source),this.valueColumns.push(column))):(exists(aggFunc)&&console.warn("AG Grid: stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),column.isValueActive()&&(column.setValueActive(!1,source),removeFromArray(this.valueColumns,column))));var _a=getValue("rowGroup","rowGroupIndex"),rowGroup=_a.value1,rowGroupIndex=_a.value2;void 0===rowGroup&&void 0===rowGroupIndex||("number"==typeof rowGroupIndex||rowGroup?(column.isRowGroupActive()||(column.setRowGroupActive(!0,source),this.rowGroupColumns.push(column)),rowGroupIndexes&&"number"==typeof rowGroupIndex&&(rowGroupIndexes[column.getId()]=rowGroupIndex)):column.isRowGroupActive()&&(column.setRowGroupActive(!1,source),removeFromArray(this.rowGroupColumns,column)));var _b=getValue("pivot","pivotIndex"),pivot=_b.value1,pivotIndex=_b.value2;void 0===pivot&&void 0===pivotIndex||("number"==typeof pivotIndex||pivot?(column.isPivotActive()||(column.setPivotActive(!0,source),this.pivotColumns.push(column)),pivotIndexes&&"number"==typeof pivotIndex&&(pivotIndexes[column.getId()]=pivotIndex)):column.isPivotActive()&&(column.setPivotActive(!1,source),removeFromArray(this.pivotColumns,column)))}}},ColumnModel.prototype.getGridColumns=function(keys){return this.getColumns(keys,this.getGridColumn.bind(this))},ColumnModel.prototype.getColumns=function(keys,columnLookupCallback){var foundColumns=[];return keys&&keys.forEach((function(key){var column=columnLookupCallback(key);column&&foundColumns.push(column)})),foundColumns},ColumnModel.prototype.getColumnWithValidation=function(key){if(null==key)return null;var column=this.getGridColumn(key);return column||console.warn("AG Grid: could not find column "+key),column},ColumnModel.prototype.getPrimaryColumn=function(key){return this.primaryColumns?this.getColumn(key,this.primaryColumns,this.primaryColumnsMap):null},ColumnModel.prototype.getGridColumn=function(key){return this.getColumn(key,this.gridColumns,this.gridColumnsMap)},ColumnModel.prototype.lookupGridColumn=function(key){return this.gridColumnsMap[key]},ColumnModel.prototype.getSecondaryColumn=function(key){return this.secondaryColumns?this.getColumn(key,this.secondaryColumns,this.secondaryColumnsMap):null},ColumnModel.prototype.getColumn=function(key,columnList,columnMap){if(!key)return null;if("string"==typeof key&&columnMap[key])return columnMap[key];for(var i=0;i<columnList.length;i++)if(this.columnsMatch(columnList[i],key))return columnList[i];return this.getAutoColumn(key)},ColumnModel.prototype.getSourceColumnsForGroupColumn=function(groupCol){var sourceColumnId=groupCol.getColDef().showRowGroup;if(!sourceColumnId)return null;if(!0===sourceColumnId)return this.rowGroupColumns.slice(0);var column=this.getPrimaryColumn(sourceColumnId);return column?[column]:null},ColumnModel.prototype.getAutoColumn=function(key){var _this=this;return this.groupAutoColumns&&exists(this.groupAutoColumns)&&!missing(this.groupAutoColumns)&&this.groupAutoColumns.find((function(groupCol){return _this.columnsMatch(groupCol,key)}))||null},ColumnModel.prototype.columnsMatch=function(column,key){var columnMatches=column===key,colDefMatches=column.getColDef()===key,idMatches=column.getColId()==key;return columnMatches||colDefMatches||idMatches},ColumnModel.prototype.getDisplayNameForColumn=function(column,location,includeAggFunc){if(void 0===includeAggFunc&&(includeAggFunc=!1),!column)return null;var headerName=this.getHeaderName(column.getColDef(),column,null,null,location);return includeAggFunc?this.wrapHeaderNameWithAggFunc(column,headerName):headerName},ColumnModel.prototype.getDisplayNameForProvidedColumnGroup=function(columnGroup,providedColumnGroup,location){var colGroupDef=providedColumnGroup?providedColumnGroup.getColGroupDef():null;return colGroupDef?this.getHeaderName(colGroupDef,null,columnGroup,providedColumnGroup,location):null},ColumnModel.prototype.getDisplayNameForColumnGroup=function(columnGroup,location){return this.getDisplayNameForProvidedColumnGroup(columnGroup,columnGroup.getProvidedColumnGroup(),location)},ColumnModel.prototype.getHeaderName=function(colDef,column,columnGroup,providedColumnGroup,location){var headerValueGetter=colDef.headerValueGetter;if(headerValueGetter){var params={colDef,column,columnGroup,providedColumnGroup,location,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};return"function"==typeof headerValueGetter?headerValueGetter(params):"string"==typeof headerValueGetter?this.expressionService.evaluate(headerValueGetter,params):(console.warn("AG Grid: headerValueGetter must be a function or a string"),"")}return null!=colDef.headerName?colDef.headerName:colDef.field?camelCaseToHumanText(colDef.field):""},ColumnModel.prototype.wrapHeaderNameWithAggFunc=function(column,headerName){if(this.gridOptionsService.is("suppressAggFuncInHeader"))return headerName;var aggFuncFound,pivotValueColumn=column.getColDef().pivotValueColumn,aggFunc=null;if(exists(pivotValueColumn)){var isCollapsedHeaderEnabled=this.gridOptionsService.is("removePivotHeaderRowWhenSingleValueColumn")&&1===this.valueColumns.length,isTotalColumn=void 0!==column.getColDef().pivotTotalColumnIds;if(isCollapsedHeaderEnabled&&!isTotalColumn)return headerName;aggFunc=pivotValueColumn?pivotValueColumn.getAggFunc():null,aggFuncFound=!0}else{var measureActive=column.isValueActive(),aggregationPresent=this.pivotMode||!this.isRowGroupEmpty();measureActive&&aggregationPresent?(aggFunc=column.getAggFunc(),aggFuncFound=!0):aggFuncFound=!1}if(aggFuncFound){var aggFuncString="string"==typeof aggFunc?aggFunc:"func";return this.localeService.getLocaleTextFunc()(aggFuncString,aggFuncString)+"("+headerName+")"}return headerName},ColumnModel.prototype.getColumnGroup=function(colId,partId){if(!colId)return null;if(colId instanceof ColumnGroup)return colId;var allColumnGroups=this.getAllDisplayedTrees(),checkPartId="number"==typeof partId,result=null;return this.columnUtils.depthFirstAllColumnTreeSearch(allColumnGroups,(function(child){if(child instanceof ColumnGroup){var columnGroup=child;(checkPartId?colId===columnGroup.getGroupId()&&partId===columnGroup.getPartId():colId===columnGroup.getGroupId())&&(result=columnGroup)}})),result},ColumnModel.prototype.isReady=function(){return this.ready},ColumnModel.prototype.extractValueColumns=function(source,oldPrimaryColumns){this.valueColumns=this.extractColumns(oldPrimaryColumns,this.valueColumns,(function(col,flag){return col.setValueActive(flag,source)}),(function(){}),(function(){}),(function(colDef){var aggFunc=colDef.aggFunc;return null===aggFunc||""===aggFunc?null:void 0!==aggFunc?!!aggFunc:void 0}),(function(colDef){return null!=colDef.initialAggFunc&&""!=colDef.initialAggFunc})),this.valueColumns.forEach((function(col){var colDef=col.getColDef();null!=colDef.aggFunc&&""!=colDef.aggFunc?col.setAggFunc(colDef.aggFunc):col.getAggFunc()||col.setAggFunc(colDef.initialAggFunc)}))},ColumnModel.prototype.extractRowGroupColumns=function(source,oldPrimaryColumns){this.rowGroupColumns=this.extractColumns(oldPrimaryColumns,this.rowGroupColumns,(function(col,flag){return col.setRowGroupActive(flag,source)}),(function(colDef){return colDef.rowGroupIndex}),(function(colDef){return colDef.initialRowGroupIndex}),(function(colDef){return colDef.rowGroup}),(function(colDef){return colDef.initialRowGroup}))},ColumnModel.prototype.extractColumns=function(oldPrimaryColumns,previousCols,setFlagFunc,getIndexFunc,getInitialIndexFunc,getValueFunc,getInitialValueFunc){void 0===oldPrimaryColumns&&(oldPrimaryColumns=[]),void 0===previousCols&&(previousCols=[]);var colsWithIndex=[],colsWithValue=[];(this.primaryColumns||[]).forEach((function(col){var colIsNew=oldPrimaryColumns.indexOf(col)<0,colDef=col.getColDef(),value=attrToBoolean(getValueFunc(colDef)),initialValue=attrToBoolean(getInitialValueFunc(colDef)),index=attrToNumber(getIndexFunc(colDef)),initialIndex=attrToNumber(getInitialIndexFunc(colDef));(void 0!==value?value:void 0!==index?null!==index&&index>=0:colIsNew?void 0!==initialValue?initialValue:!!(void 0!==initialIndex)&&(null!=initialIndex&&initialIndex>=0):previousCols.indexOf(col)>=0)&&((colIsNew?null!=index||null!=initialIndex:null!=index)?colsWithIndex.push(col):colsWithValue.push(col))}));var getIndexForCol=function(col){var index=getIndexFunc(col.getColDef()),defaultIndex=getInitialIndexFunc(col.getColDef());return null!=index?index:defaultIndex};colsWithIndex.sort((function(colA,colB){var indexA=getIndexForCol(colA),indexB=getIndexForCol(colB);return indexA===indexB?0:indexA<indexB?-1:1}));var res=[].concat(colsWithIndex);return previousCols.forEach((function(col){colsWithValue.indexOf(col)>=0&&res.push(col)})),colsWithValue.forEach((function(col){res.indexOf(col)<0&&res.push(col)})),previousCols.forEach((function(col){res.indexOf(col)<0&&setFlagFunc(col,!1)})),res.forEach((function(col){previousCols.indexOf(col)<0&&setFlagFunc(col,!0)})),res},ColumnModel.prototype.extractPivotColumns=function(source,oldPrimaryColumns){this.pivotColumns=this.extractColumns(oldPrimaryColumns,this.pivotColumns,(function(col,flag){return col.setPivotActive(flag,source)}),(function(colDef){return colDef.pivotIndex}),(function(colDef){return colDef.initialPivotIndex}),(function(colDef){return colDef.pivot}),(function(colDef){return colDef.initialPivot}))},ColumnModel.prototype.resetColumnGroupState=function(source){void 0===source&&(source="api");var stateItems=[];this.columnUtils.depthFirstOriginalTreeSearch(null,this.primaryColumnTree,(function(child){if(child instanceof ProvidedColumnGroup){var colGroupDef=child.getColGroupDef(),groupState={groupId:child.getGroupId(),open:colGroupDef?colGroupDef.openByDefault:void 0};stateItems.push(groupState)}})),this.setColumnGroupState(stateItems,source)},ColumnModel.prototype.getColumnGroupState=function(){var columnGroupState=[];return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,(function(node){node instanceof ProvidedColumnGroup&&columnGroupState.push({groupId:node.getGroupId(),open:node.isExpanded()})})),columnGroupState},ColumnModel.prototype.setColumnGroupState=function(stateItems,source){var _this=this;void 0===source&&(source="api"),this.columnAnimationService.start();var impactedGroups=[];stateItems.forEach((function(stateItem){var groupKey=stateItem.groupId,newValue=stateItem.open,providedColumnGroup=_this.getProvidedColumnGroup(groupKey);providedColumnGroup&&providedColumnGroup.isExpanded()!==newValue&&(_this.logger.log("columnGroupOpened("+providedColumnGroup.getGroupId()+","+newValue+")"),providedColumnGroup.setExpanded(newValue),impactedGroups.push(providedColumnGroup))})),this.updateGroupsAndDisplayedColumns(source),this.setFirstRightAndLastLeftPinned(source),impactedGroups.forEach((function(providedColumnGroup){var event={type:Events.EVENT_COLUMN_GROUP_OPENED,columnGroup:providedColumnGroup};_this.eventService.dispatchEvent(event)})),this.columnAnimationService.finish()},ColumnModel.prototype.setColumnGroupOpened=function(key,newValue,source){var keyAsString;void 0===source&&(source="api"),keyAsString=key instanceof ProvidedColumnGroup?key.getId():key||"",this.setColumnGroupState([{groupId:keyAsString,open:newValue}],source)},ColumnModel.prototype.getProvidedColumnGroup=function(key){"string"!=typeof key&&console.error("AG Grid: group key must be a string");var res=null;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,(function(node){node instanceof ProvidedColumnGroup&&node.getId()===key&&(res=node)})),res},ColumnModel.prototype.calculateColumnsForDisplay=function(){var _this=this;return this.pivotMode&&missing(this.secondaryColumns)?this.gridColumns.filter((function(column){var isAutoGroupCol=_this.groupAutoColumns&&includes(_this.groupAutoColumns,column),isValueCol=_this.valueColumns&&includes(_this.valueColumns,column);return isAutoGroupCol||isValueCol})):this.gridColumns.filter((function(column){return _this.groupAutoColumns&&includes(_this.groupAutoColumns,column)||column.isVisible()}))},ColumnModel.prototype.checkColSpanActiveInCols=function(columns){var result=!1;return columns.forEach((function(col){exists(col.getColDef().colSpan)&&(result=!0)})),result},ColumnModel.prototype.calculateColumnsForGroupDisplay=function(){var _this=this;this.groupDisplayColumns=[],this.groupDisplayColumnsMap={};this.gridColumns.forEach((function(col){var colDef=col.getColDef(),underlyingColumn=colDef.showRowGroup;colDef&&exists(underlyingColumn)&&(_this.groupDisplayColumns.push(col),"string"==typeof underlyingColumn?_this.groupDisplayColumnsMap[underlyingColumn]=col:!0===underlyingColumn&&_this.getRowGroupColumns().forEach((function(rowGroupCol){_this.groupDisplayColumnsMap[rowGroupCol.getId()]=col})))}))},ColumnModel.prototype.getGroupDisplayColumns=function(){return this.groupDisplayColumns},ColumnModel.prototype.getGroupDisplayColumnForGroup=function(rowGroupColumnId){return this.groupDisplayColumnsMap[rowGroupColumnId]},ColumnModel.prototype.updateDisplayedColumns=function(source){var columnsForDisplay=this.calculateColumnsForDisplay();this.buildDisplayedTrees(columnsForDisplay),this.updateGroupsAndDisplayedColumns(source),this.setFirstRightAndLastLeftPinned(source)},ColumnModel.prototype.isSecondaryColumnsPresent=function(){return exists(this.secondaryColumns)},ColumnModel.prototype.setSecondaryColumns=function(colDefs,source){var _this=this;void 0===source&&(source="api");var newColsPresent=colDefs&&colDefs.length>0;if(newColsPresent||!missing(this.secondaryColumns)){if(newColsPresent){this.processSecondaryColumnDefinitions(colDefs);var balancedTreeResult=this.columnFactory.createColumnTree(colDefs,!1,this.secondaryBalancedTree||this.previousSecondaryColumns||void 0);this.destroyOldColumns(this.secondaryBalancedTree,balancedTreeResult.columnTree),this.secondaryBalancedTree=balancedTreeResult.columnTree,this.secondaryHeaderRowCount=balancedTreeResult.treeDept+1,this.secondaryColumns=this.getColumnsFromTree(this.secondaryBalancedTree),this.secondaryColumnsMap={},this.secondaryColumns.forEach((function(col){return _this.secondaryColumnsMap[col.getId()]=col})),this.previousSecondaryColumns=null}else this.previousSecondaryColumns=this.secondaryBalancedTree,this.secondaryBalancedTree=null,this.secondaryHeaderRowCount=-1,this.secondaryColumns=null,this.secondaryColumnsMap={};this.updateGridColumns(),this.updateDisplayedColumns(source)}},ColumnModel.prototype.processSecondaryColumnDefinitions=function(colDefs){var columnCallback=this.gridOptionsService.get("processPivotResultColDef")||this.gridOptionsService.get("processSecondaryColDef"),groupCallback=this.gridOptionsService.get("processPivotResultColGroupDef")||this.gridOptionsService.get("processSecondaryColGroupDef");if(columnCallback||groupCallback){var searchForColDefs=function(colDefs2){colDefs2.forEach((function(abstractColDef){if(exists(abstractColDef.children)){var colGroupDef=abstractColDef;groupCallback&&groupCallback(colGroupDef),searchForColDefs(colGroupDef.children)}else{columnCallback&&columnCallback(abstractColDef)}}))};colDefs&&searchForColDefs(colDefs)}},ColumnModel.prototype.updateGridColumns=function(){var sortOrderToRecover,_this=this,prevGridCols=this.gridBalancedTree;if(this.gridColsArePrimary?this.lastPrimaryOrder=this.gridColumns:this.lastSecondaryOrder=this.gridColumns,this.secondaryColumns&&this.secondaryBalancedTree){var hasSameColumns=this.secondaryColumns.every((function(col){return void 0!==_this.gridColumnsMap[col.getColId()]}));this.gridBalancedTree=this.secondaryBalancedTree.slice(),this.gridHeaderRowCount=this.secondaryHeaderRowCount,this.gridColumns=this.secondaryColumns.slice(),this.gridColsArePrimary=!1,hasSameColumns&&(sortOrderToRecover=this.lastSecondaryOrder)}else this.primaryColumns&&(this.gridBalancedTree=this.primaryColumnTree.slice(),this.gridHeaderRowCount=this.primaryHeaderRowCount,this.gridColumns=this.primaryColumns.slice(),this.gridColsArePrimary=!0,sortOrderToRecover=this.lastPrimaryOrder);if(this.createGroupAutoColumnsIfNeeded()&&sortOrderToRecover){var groupAutoColsMap_1=convertToMap(this.groupAutoColumns.map((function(col){return[col,!0]})));sortOrderToRecover=sortOrderToRecover.filter((function(col){return!groupAutoColsMap_1.has(col)})),sortOrderToRecover=__spreadArray$l(__spreadArray$l([],__read$s(this.groupAutoColumns)),__read$s(sortOrderToRecover))}if(this.addAutoGroupToGridColumns(),this.orderGridColsLike(sortOrderToRecover),this.gridColumns=this.placeLockedColumns(this.gridColumns),this.calculateColumnsForGroupDisplay(),this.refreshQuickFilterColumns(),this.clearDisplayedAndViewportColumns(),this.colSpanActive=this.checkColSpanActiveInCols(this.gridColumns),this.gridColumnsMap={},this.gridColumns.forEach((function(col){return _this.gridColumnsMap[col.getId()]=col})),this.setAutoHeightActive(),!areEqual(prevGridCols,this.gridBalancedTree)){var event_4={type:Events.EVENT_GRID_COLUMNS_CHANGED};this.eventService.dispatchEvent(event_4)}},ColumnModel.prototype.setAutoHeightActive=function(){if((this.autoHeightActive=this.gridColumns.filter((function(col){return col.isAutoHeight()})).length>0,this.autoHeightActive)&&(this.autoHeightActiveAtLeastOnce=!0,!(this.gridOptionsService.isRowModelType("clientSide")||this.gridOptionsService.isRowModelType("serverSide")))){doOnce((function(){return console.warn("AG Grid - autoHeight columns only work with Client Side Row Model and Server Side Row Model.")}),"autoHeightActive.wrongRowModel")}},ColumnModel.prototype.orderGridColsLike=function(colsOrder){if(!missing(colsOrder)){var lastOrderMapped=convertToMap(colsOrder.map((function(col,index){return[col,index]}))),noColsFound=!0;if(this.gridColumns.forEach((function(col){lastOrderMapped.has(col)&&(noColsFound=!1)})),!noColsFound){var gridColsMap=convertToMap(this.gridColumns.map((function(col){return[col,!0]}))),oldColsOrdered=colsOrder.filter((function(col){return gridColsMap.has(col)})),oldColsMap=convertToMap(oldColsOrdered.map((function(col){return[col,!0]}))),newColsOrdered=this.gridColumns.filter((function(col){return!oldColsMap.has(col)})),newGridColumns=oldColsOrdered.slice();newColsOrdered.forEach((function(newCol){var parent=newCol.getOriginalParent();if(parent){for(var siblings=[];!siblings.length&&parent;){parent.getLeafColumns().forEach((function(leafCol){var presentInNewGriColumns=newGridColumns.indexOf(leafCol)>=0,noYetInSiblings=siblings.indexOf(leafCol)<0;presentInNewGriColumns&&noYetInSiblings&&siblings.push(leafCol)})),parent=parent.getOriginalParent()}if(siblings.length){var indexes=siblings.map((function(col){return newGridColumns.indexOf(col)})),lastIndex=Math.max.apply(Math,__spreadArray$l([],__read$s(indexes)));insertIntoArray(newGridColumns,newCol,lastIndex+1)}else newGridColumns.push(newCol)}else newGridColumns.push(newCol)})),this.gridColumns=newGridColumns}}},ColumnModel.prototype.isPrimaryColumnGroupsPresent=function(){return this.primaryHeaderRowCount>1},ColumnModel.prototype.refreshQuickFilterColumns=function(){var _a,columnsForQuickFilter=null!==(_a=this.isPivotMode()?this.secondaryColumns:this.primaryColumns)&&void 0!==_a?_a:[];this.groupAutoColumns&&(columnsForQuickFilter=columnsForQuickFilter.concat(this.groupAutoColumns)),this.columnsForQuickFilter=this.gridOptionsService.is("includeHiddenColumnsInQuickFilter")?columnsForQuickFilter:columnsForQuickFilter.filter((function(col){return col.isVisible()||col.isRowGroupActive()}))},ColumnModel.prototype.placeLockedColumns=function(cols){var left=[],normal=[],right=[];return cols.forEach((function(col){var position=col.getColDef().lockPosition;"right"===position?right.push(col):"left"===position||!0===position?left.push(col):normal.push(col)})),__spreadArray$l(__spreadArray$l(__spreadArray$l([],__read$s(left)),__read$s(normal)),__read$s(right))},ColumnModel.prototype.addAutoGroupToGridColumns=function(){if(missing(this.groupAutoColumns))return this.destroyOldColumns(this.groupAutoColsBalancedTree),void(this.groupAutoColsBalancedTree=null);this.gridColumns=this.groupAutoColumns?this.groupAutoColumns.concat(this.gridColumns):this.gridColumns;var newAutoColsTree=this.columnFactory.createForAutoGroups(this.groupAutoColumns,this.gridBalancedTree);this.destroyOldColumns(this.groupAutoColsBalancedTree,newAutoColsTree),this.groupAutoColsBalancedTree=newAutoColsTree,this.gridBalancedTree=newAutoColsTree.concat(this.gridBalancedTree)},ColumnModel.prototype.clearDisplayedAndViewportColumns=function(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.viewportColumns=[],this.headerViewportColumns=[],this.viewportColumnsHash=""},ColumnModel.prototype.updateGroupsAndDisplayedColumns=function(source){this.updateOpenClosedVisibilityInColumnGroups(),this.deriveDisplayedColumns(source),this.refreshFlexedColumns(),this.extractViewport(),this.updateBodyWidths();var event={type:Events.EVENT_DISPLAYED_COLUMNS_CHANGED};this.eventService.dispatchEvent(event)},ColumnModel.prototype.deriveDisplayedColumns=function(source){this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeLeft,this.displayedColumnsLeft),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeCentre,this.displayedColumnsCenter),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeRight,this.displayedColumnsRight),this.joinDisplayedColumns(),this.setLeftValues(source),this.displayedAutoHeightCols=this.displayedColumns.filter((function(col){return col.isAutoHeight()}))},ColumnModel.prototype.isAutoRowHeightActive=function(){return this.autoHeightActive},ColumnModel.prototype.wasAutoRowHeightEverActive=function(){return this.autoHeightActiveAtLeastOnce},ColumnModel.prototype.joinDisplayedColumns=function(){this.gridOptionsService.is("enableRtl")?this.displayedColumns=this.displayedColumnsRight.concat(this.displayedColumnsCenter).concat(this.displayedColumnsLeft):this.displayedColumns=this.displayedColumnsLeft.concat(this.displayedColumnsCenter).concat(this.displayedColumnsRight)},ColumnModel.prototype.setLeftValues=function(source){this.setLeftValuesOfColumns(source),this.setLeftValuesOfGroups()},ColumnModel.prototype.setLeftValuesOfColumns=function(source){var _this=this;if(this.primaryColumns){var allColumns=this.primaryColumns.slice(0),doingRtl=this.gridOptionsService.is("enableRtl");[this.displayedColumnsLeft,this.displayedColumnsRight,this.displayedColumnsCenter].forEach((function(columns){if(doingRtl){var left_1=_this.getWidthOfColsInList(columns);columns.forEach((function(column){left_1-=column.getActualWidth(),column.setLeft(left_1,source)}))}else{var left_2=0;columns.forEach((function(column){column.setLeft(left_2,source),left_2+=column.getActualWidth()}))}removeAllFromUnorderedArray(allColumns,columns)})),allColumns.forEach((function(column){column.setLeft(null,source)}))}},ColumnModel.prototype.setLeftValuesOfGroups=function(){[this.displayedTreeLeft,this.displayedTreeRight,this.displayedTreeCentre].forEach((function(columns){columns.forEach((function(column){column instanceof ColumnGroup&&column.checkLeft()}))}))},ColumnModel.prototype.derivedDisplayedColumnsFromDisplayedTree=function(tree,columns){columns.length=0,this.columnUtils.depthFirstDisplayedColumnTreeSearch(tree,(function(child){child instanceof Column&&columns.push(child)}))},ColumnModel.prototype.extractViewportColumns=function(){this.suppressColumnVirtualisation?(this.viewportColumnsCenter=this.displayedColumnsCenter,this.headerViewportColumnsCenter=this.displayedColumnsCenter):(this.viewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInRowViewport.bind(this)),this.headerViewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInHeaderViewport.bind(this))),this.viewportColumns=this.viewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight),this.headerViewportColumns=this.headerViewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight)},ColumnModel.prototype.getVirtualHeaderGroupRow=function(type,dept){var result;switch(type){case"left":result=this.viewportRowLeft[dept];break;case"right":result=this.viewportRowRight[dept];break;default:result=this.viewportRowCenter[dept]}return missing(result)&&(result=[]),result},ColumnModel.prototype.calculateHeaderRows=function(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={};var virtualColIds={};this.headerViewportColumns.forEach((function(col){return virtualColIds[col.getId()]=!0}));var testGroup=function(children,result,dept){for(var returnValue=!1,i=0;i<children.length;i++){var child=children[i],addThisItem=!1;if(child instanceof Column)addThisItem=!0===virtualColIds[child.getId()];else{var displayedChildren=child.getDisplayedChildren();displayedChildren&&(addThisItem=testGroup(displayedChildren,result,dept+1))}addThisItem&&(returnValue=!0,result[dept]||(result[dept]=[]),result[dept].push(child))}return returnValue};testGroup(this.displayedTreeLeft,this.viewportRowLeft,0),testGroup(this.displayedTreeRight,this.viewportRowRight,0),testGroup(this.displayedTreeCentre,this.viewportRowCenter,0)},ColumnModel.prototype.extractViewport=function(){this.extractViewportColumns();var newHash=this.viewportColumns.map((function(c){return c.getId()+"-"+(c.getPinned()||"normal")})).join("#"),changed=this.viewportColumnsHash!==newHash;return changed&&(this.viewportColumnsHash=newHash,this.calculateHeaderRows()),changed},ColumnModel.prototype.refreshFlexedColumns=function(params){var _a;void 0===params&&(params={});var source=params.source?params.source:"flex";if(null!=params.viewportWidth&&(this.flexViewportWidth=params.viewportWidth),!this.flexViewportWidth)return[];var flexAfterDisplayIndex=-1;if(params.resizingCols)for(var allResizingCols=new Set(params.resizingCols),displayedCols=this.displayedColumnsCenter,i=displayedCols.length-1;i>=0;i--)if(allResizingCols.has(displayedCols[i])){flexAfterDisplayIndex=i;break}var knownColumnsWidth=0,flexingColumns=[],minimumFlexedWidth=0,totalFlex=0;for(i=0;i<this.displayedColumnsCenter.length;i++){this.displayedColumnsCenter[i].getFlex()&&i>flexAfterDisplayIndex?(flexingColumns.push(this.displayedColumnsCenter[i]),totalFlex+=this.displayedColumnsCenter[i].getFlex(),minimumFlexedWidth+=null!==(_a=this.displayedColumnsCenter[i].getMinWidth())&&void 0!==_a?_a:0):knownColumnsWidth+=this.displayedColumnsCenter[i].getActualWidth()}if(!flexingColumns.length)return[];var changedColumns=[];knownColumnsWidth+minimumFlexedWidth>this.flexViewportWidth&&(flexingColumns.forEach((function(col){var _a;return col.setActualWidth(null!==(_a=col.getMinWidth())&&void 0!==_a?_a:0,source)})),changedColumns=flexingColumns,flexingColumns=[]);var spaceForFlexingColumns,flexingColumnSizes=[];outer:for(;;){var spacePerFlex=(spaceForFlexingColumns=this.flexViewportWidth-knownColumnsWidth)/totalFlex;for(i=0;i<flexingColumns.length;i++){var col=flexingColumns[i],widthByFlexRule=spacePerFlex*col.getFlex(),constrainedWidth=0,minWidth=col.getMinWidth(),maxWidth=col.getMaxWidth();if(exists(minWidth)&&widthByFlexRule<minWidth?constrainedWidth=minWidth:exists(maxWidth)&&widthByFlexRule>maxWidth&&(constrainedWidth=maxWidth),constrainedWidth){col.setActualWidth(constrainedWidth,source),removeFromUnorderedArray(flexingColumns,col),totalFlex-=col.getFlex(),changedColumns.push(col),knownColumnsWidth+=col.getActualWidth();continue outer}flexingColumnSizes[i]=Math.round(widthByFlexRule)}break}var remainingSpace=spaceForFlexingColumns;return flexingColumns.forEach((function(col,i){col.setActualWidth(Math.min(flexingColumnSizes[i],remainingSpace),source),changedColumns.push(col),remainingSpace-=flexingColumnSizes[i]})),params.skipSetLeft||this.setLeftValues(source),params.updateBodyWidths&&this.updateBodyWidths(),params.fireResizedEvent&&this.dispatchColumnResizedEvent(changedColumns,!0,source,flexingColumns),flexingColumns},ColumnModel.prototype.sizeColumnsToFit=function(gridWidth,source,silent,params){var _a,_b,_c,_d,_e,_this=this;if(void 0===source&&(source="sizeColumnsToFit"),this.shouldQueueResizeOperations)this.resizeOperationQueue.push((function(){return _this.sizeColumnsToFit(gridWidth,source,silent,params)}));else{var limitsMap={};params&&(null===(_a=null==params?void 0:params.columnLimits)||void 0===_a||_a.forEach((function(_a){var key=_a.key,dimensions=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}(_a,["key"]);limitsMap["string"==typeof key?key:key.getColId()]=dimensions})));var allDisplayedColumns=this.getAllDisplayedColumns(),doColumnsAlreadyFit=gridWidth===this.getWidthOfColsInList(allDisplayedColumns);if(!(gridWidth<=0||!allDisplayedColumns.length||doColumnsAlreadyFit)){var colsToSpread=[],colsToNotSpread=[];allDisplayedColumns.forEach((function(column){!0===column.getColDef().suppressSizeToFit?colsToNotSpread.push(column):colsToSpread.push(column)}));var colsToDispatchEventFor=colsToSpread.slice(0),finishedResizing=!1,moveToNotSpread=function(column){removeFromArray(colsToSpread,column),colsToNotSpread.push(column)};for(colsToSpread.forEach((function(column){var _a,_b;column.resetActualWidth(source);var widthOverride=null==limitsMap?void 0:limitsMap[column.getId()],minOverride=null!==(_a=null==widthOverride?void 0:widthOverride.minWidth)&&void 0!==_a?_a:null==params?void 0:params.defaultMinWidth,maxOverride=null!==(_b=null==widthOverride?void 0:widthOverride.maxWidth)&&void 0!==_b?_b:null==params?void 0:params.defaultMaxWidth,colWidth=column.getActualWidth();"number"==typeof minOverride&&colWidth<minOverride?column.setActualWidth(minOverride,source,!0):"number"==typeof maxOverride&&colWidth>maxOverride&&column.setActualWidth(maxOverride,source,!0)}));!finishedResizing;){finishedResizing=!0;var availablePixels=gridWidth-this.getWidthOfColsInList(colsToNotSpread);if(availablePixels<=0)colsToSpread.forEach((function(column){var _a,_b,widthOverride=null!==(_b=null===(_a=null==limitsMap?void 0:limitsMap[column.getId()])||void 0===_a?void 0:_a.minWidth)&&void 0!==_b?_b:null==params?void 0:params.defaultMinWidth;"number"!=typeof widthOverride?column.setMinimum(source):column.setActualWidth(widthOverride,source,!0)}));else for(var scale=availablePixels/this.getWidthOfColsInList(colsToSpread),pixelsForLastCol=availablePixels,i=colsToSpread.length-1;i>=0;i--){var column=colsToSpread[i],widthOverride=null==limitsMap?void 0:limitsMap[column.getId()],minOverride=null!==(_b=null==widthOverride?void 0:widthOverride.minWidth)&&void 0!==_b?_b:null==params?void 0:params.defaultMinWidth,maxOverride=null!==(_c=null==widthOverride?void 0:widthOverride.maxWidth)&&void 0!==_c?_c:null==params?void 0:params.defaultMaxWidth,colMinWidth=null!==(_d=column.getMinWidth())&&void 0!==_d?_d:0,colMaxWidth=null!==(_e=column.getMaxWidth())&&void 0!==_e?_e:Number.MAX_VALUE,minWidth="number"==typeof minOverride&&minOverride>colMinWidth?minOverride:column.getMinWidth(),maxWidth="number"==typeof maxOverride&&maxOverride<colMaxWidth?maxOverride:column.getMaxWidth(),newWidth=Math.round(column.getActualWidth()*scale);exists(minWidth)&&newWidth<minWidth?(newWidth=minWidth,moveToNotSpread(column),finishedResizing=!1):exists(maxWidth)&&newWidth>maxWidth?(newWidth=maxWidth,moveToNotSpread(column),finishedResizing=!1):0===i&&(newWidth=pixelsForLastCol),column.setActualWidth(newWidth,source,!0),pixelsForLastCol-=newWidth}}colsToDispatchEventFor.forEach((function(col){col.fireColumnWidthChangedEvent(source)})),this.setLeftValues(source),this.updateBodyWidths(),silent||this.dispatchColumnResizedEvent(colsToDispatchEventFor,!0,source)}}},ColumnModel.prototype.buildDisplayedTrees=function(visibleColumns){var leftVisibleColumns=[],rightVisibleColumns=[],centerVisibleColumns=[];visibleColumns.forEach((function(column){switch(column.getPinned()){case"left":leftVisibleColumns.push(column);break;case"right":rightVisibleColumns.push(column);break;default:centerVisibleColumns.push(column)}}));var groupInstanceIdCreator=new GroupInstanceIdCreator;this.displayedTreeLeft=this.displayedGroupCreator.createDisplayedGroups(leftVisibleColumns,groupInstanceIdCreator,"left",this.displayedTreeLeft),this.displayedTreeRight=this.displayedGroupCreator.createDisplayedGroups(rightVisibleColumns,groupInstanceIdCreator,"right",this.displayedTreeRight),this.displayedTreeCentre=this.displayedGroupCreator.createDisplayedGroups(centerVisibleColumns,groupInstanceIdCreator,null,this.displayedTreeCentre),this.updateDisplayedMap()},ColumnModel.prototype.updateDisplayedMap=function(){var _this=this;this.displayedColumnsAndGroupsMap={};var func=function(child){_this.displayedColumnsAndGroupsMap[child.getUniqueId()]=child};this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeCentre,func),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeLeft,func),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeRight,func)},ColumnModel.prototype.isDisplayed=function(item){return this.displayedColumnsAndGroupsMap[item.getUniqueId()]===item},ColumnModel.prototype.updateOpenClosedVisibilityInColumnGroups=function(){var allColumnGroups=this.getAllDisplayedTrees();this.columnUtils.depthFirstAllColumnTreeSearch(allColumnGroups,(function(child){child instanceof ColumnGroup&&child.calculateDisplayedColumns()}))},ColumnModel.prototype.getGroupAutoColumns=function(){return this.groupAutoColumns},ColumnModel.prototype.createGroupAutoColumnsIfNeeded=function(){var forceRecreateAutoGroups=this.forceRecreateAutoGroups;if(this.forceRecreateAutoGroups=!1,!this.autoGroupsNeedBuilding)return!1;this.autoGroupsNeedBuilding=!1;var groupFullWidthRow=this.gridOptionsService.isGroupUseEntireRow(this.pivotMode),suppressAutoColumn=this.pivotMode?this.gridOptionsService.is("pivotSuppressAutoColumn"):this.isGroupSuppressAutoColumn();if((this.rowGroupColumns.length>0||this.gridOptionsService.is("treeData"))&&!suppressAutoColumn&&!groupFullWidthRow){var newAutoGroupCols=this.autoGroupColService.createAutoGroupColumns(this.rowGroupColumns);if(!this.autoColsEqual(newAutoGroupCols,this.groupAutoColumns)||forceRecreateAutoGroups)return this.groupAutoColumns=newAutoGroupCols,!0}else this.groupAutoColumns=null;return!1},ColumnModel.prototype.isGroupSuppressAutoColumn=function(){var groupDisplayType=this.gridOptionsService.get("groupDisplayType");if(!!groupDisplayType&&matchesGroupDisplayType("custom",groupDisplayType))return!0;var treeDataDisplayType=this.gridOptionsService.get("treeDataDisplayType");return!!treeDataDisplayType&&function matchesTreeDataDisplayType(toMatch,supplied){var treeDataDisplayTypeValues=["auto","custom"];return treeDataDisplayTypeValues.indexOf(supplied)<0?(console.warn("AG Grid: '"+supplied+"' is not a valid treeDataDisplayType value - possible values are: '"+treeDataDisplayTypeValues.join("', '")+"'"),!1):supplied===toMatch}("custom",treeDataDisplayType)},ColumnModel.prototype.autoColsEqual=function(colsA,colsB){return areEqual(colsA,colsB,(function(a,b){return a.getColId()===b.getColId()}))},ColumnModel.prototype.getWidthOfColsInList=function(columnList){return columnList.reduce((function(width,col){return width+col.getActualWidth()}),0)},ColumnModel.prototype.getGridBalancedTree=function(){return this.gridBalancedTree},ColumnModel.prototype.getFirstDisplayedColumn=function(){var isRtl=this.gridOptionsService.is("enableRtl"),queryOrder=["getDisplayedLeftColumns","getDisplayedCenterColumns","getDisplayedRightColumns"];isRtl&&queryOrder.reverse();for(var i=0;i<queryOrder.length;i++){var container=this[queryOrder[i]]();if(container.length)return isRtl?last(container):container[0]}return null},ColumnModel.prototype.setColumnHeaderHeight=function(col,height){if(col.setAutoHeaderHeight(height)){var event_5={type:Events.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,column:col,columns:[col],source:"autosizeColumnHeaderHeight"};this.eventService.dispatchEvent(event_5)}},ColumnModel.prototype.getColumnGroupHeaderRowHeight=function(){return this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight()},ColumnModel.prototype.getColumnHeaderRowHeight=function(){var defaultHeight=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),displayedHeights=this.getAllDisplayedColumns().filter((function(col){return col.isAutoHeaderHeight()})).map((function(col){return col.getAutoHeaderHeight()||0}));return Math.max.apply(Math,__spreadArray$l([defaultHeight],__read$s(displayedHeights)))},ColumnModel.prototype.getHeaderHeight=function(){var _a;return null!==(_a=this.gridOptionsService.getNum("headerHeight"))&&void 0!==_a?_a:this.environment.getFromTheme(25,"headerHeight")},ColumnModel.prototype.getFloatingFiltersHeight=function(){var _a;return null!==(_a=this.gridOptionsService.getNum("floatingFiltersHeight"))&&void 0!==_a?_a:this.getHeaderHeight()},ColumnModel.prototype.getGroupHeaderHeight=function(){var _a;return null!==(_a=this.gridOptionsService.getNum("groupHeaderHeight"))&&void 0!==_a?_a:this.getHeaderHeight()},ColumnModel.prototype.getPivotHeaderHeight=function(){var _a;return null!==(_a=this.gridOptionsService.getNum("pivotHeaderHeight"))&&void 0!==_a?_a:this.getHeaderHeight()},ColumnModel.prototype.getPivotGroupHeaderHeight=function(){var _a;return null!==(_a=this.gridOptionsService.getNum("pivotGroupHeaderHeight"))&&void 0!==_a?_a:this.getGroupHeaderHeight()},ColumnModel.prototype.queueResizeOperations=function(){this.shouldQueueResizeOperations=!0},ColumnModel.prototype.processResizeOperations=function(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach((function(resizeOperation){return resizeOperation()})),this.resizeOperationQueue=[]},ColumnModel.prototype.resetColumnDefIntoColumn=function(column){var userColDef=column.getUserProvidedColDef();if(!userColDef)return!1;var newColDef=this.columnFactory.addColumnDefaultAndTypes(userColDef,column.getColId());return column.setColDef(newColDef,userColDef),!0},ColumnModel.prototype.generateColumnStateForRowGroupAndPivotIndexes=function(updatedRowGroupColumnState,updatedPivotColumnState){var _this=this,existingColumnStateUpdates={},orderColumns=function(updatedColumnState,colList,enableProp,initialEnableProp,indexProp,initialIndexProp){if(!colList.length||!_this.primaryColumns)return[];for(var updatedColIdArray=Object.keys(updatedColumnState),updatedColIds=new Set(updatedColIdArray),newColIds=new Set(updatedColIdArray),allColIds=new Set(colList.map((function(column){var colId=column.getColId();return newColIds.delete(colId),colId})).concat(updatedColIdArray)),colIdsInOriginalOrder=[],originalOrderMap={},orderIndex=0,i=0;i<_this.primaryColumns.length;i++){var colId=_this.primaryColumns[i].getColId();allColIds.has(colId)&&(colIdsInOriginalOrder.push(colId),originalOrderMap[colId]=orderIndex++)}var index=1e3,hasAddedNewCols=!1,lastIndex=0,processPrecedingNewCols=function(colId){for(var originalOrderIndex=originalOrderMap[colId],i=lastIndex;i<originalOrderIndex;i++){var newColId=colIdsInOriginalOrder[i];newColIds.has(newColId)&&(updatedColumnState[newColId][indexProp]=index++,newColIds.delete(newColId))}lastIndex=originalOrderIndex};colList.forEach((function(column){var colId=column.getColId();if(updatedColIds.has(colId))processPrecedingNewCols(colId),updatedColumnState[colId][indexProp]=index++;else{var colDef=column.getColDef();if(null===colDef[indexProp]||void 0===colDef[indexProp]&&null==colDef[initialIndexProp]){if(!hasAddedNewCols)colDef[enableProp]||void 0===colDef[enableProp]&&colDef[initialEnableProp]?processPrecedingNewCols(colId):(newColIds.forEach((function(newColId){updatedColumnState[newColId][indexProp]=index+originalOrderMap[newColId]})),index+=colIdsInOriginalOrder.length,hasAddedNewCols=!0);existingColumnStateUpdates[colId]||(existingColumnStateUpdates[colId]={colId}),existingColumnStateUpdates[colId][indexProp]=index++}}}))};return orderColumns(updatedRowGroupColumnState,this.rowGroupColumns,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),orderColumns(updatedPivotColumnState,this.pivotColumns,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(existingColumnStateUpdates)},__decorate$2B([Autowired("expressionService")],ColumnModel.prototype,"expressionService",void 0),__decorate$2B([Autowired("columnFactory")],ColumnModel.prototype,"columnFactory",void 0),__decorate$2B([Autowired("displayedGroupCreator")],ColumnModel.prototype,"displayedGroupCreator",void 0),__decorate$2B([Autowired("ctrlsService")],ColumnModel.prototype,"ctrlsService",void 0),__decorate$2B([Autowired("autoWidthCalculator")],ColumnModel.prototype,"autoWidthCalculator",void 0),__decorate$2B([Autowired("columnUtils")],ColumnModel.prototype,"columnUtils",void 0),__decorate$2B([Autowired("columnAnimationService")],ColumnModel.prototype,"columnAnimationService",void 0),__decorate$2B([Autowired("autoGroupColService")],ColumnModel.prototype,"autoGroupColService",void 0),__decorate$2B([Optional("aggFuncService")],ColumnModel.prototype,"aggFuncService",void 0),__decorate$2B([Optional("valueCache")],ColumnModel.prototype,"valueCache",void 0),__decorate$2B([Optional("animationFrameService")],ColumnModel.prototype,"animationFrameService",void 0),__decorate$2B([Autowired("sortController")],ColumnModel.prototype,"sortController",void 0),__decorate$2B([Autowired("columnDefFactory")],ColumnModel.prototype,"columnDefFactory",void 0),__decorate$2B([PostConstruct],ColumnModel.prototype,"init",null),__decorate$2B([PreDestroy],ColumnModel.prototype,"destroyColumns",null),__decorate$2B([(paramIndex=0,decorator=Qualifier("loggerFactory"),function(target,key){decorator(target,key,paramIndex)})],ColumnModel.prototype,"setBeans",null),ColumnModel=__decorate$2B([Bean("columnModel")],ColumnModel)}(BeanStub),__extends$33=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),ColumnUtils=function(_super){function ColumnUtils(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$33(ColumnUtils,_super),ColumnUtils.prototype.calculateColMinWidth=function(colDef){return null!=colDef.minWidth?colDef.minWidth:this.environment.getMinColWidth()},ColumnUtils.prototype.calculateColMaxWidth=function(colDef){return null!=colDef.maxWidth?colDef.maxWidth:Number.MAX_SAFE_INTEGER},ColumnUtils.prototype.calculateColInitialWidth=function(colDef){var width,minColWidth=this.calculateColMinWidth(colDef),maxColWidth=this.calculateColMaxWidth(colDef),colDefWidth=attrToNumber(colDef.width),colDefInitialWidth=attrToNumber(colDef.initialWidth);return width=null!=colDefWidth?colDefWidth:null!=colDefInitialWidth?colDefInitialWidth:200,Math.max(Math.min(width,maxColWidth),minColWidth)},ColumnUtils.prototype.getOriginalPathForColumn=function(column,originalBalancedTree){var result=[],found=!1,recursePath=function(balancedColumnTree,dept){for(var i=0;i<balancedColumnTree.length;i++){if(found)return;var node=balancedColumnTree[i];if(node instanceof ProvidedColumnGroup)recursePath(node.getChildren(),dept+1),result[dept]=node;else node===column&&(found=!0)}};return recursePath(originalBalancedTree,0),found?result:null},ColumnUtils.prototype.depthFirstOriginalTreeSearch=function(parent,tree,callback){var _this=this;tree&&tree.forEach((function(child){child instanceof ProvidedColumnGroup&&_this.depthFirstOriginalTreeSearch(child,child.getChildren(),callback),callback(child,parent)}))},ColumnUtils.prototype.depthFirstAllColumnTreeSearch=function(tree,callback){var _this=this;tree&&tree.forEach((function(child){child instanceof ColumnGroup&&_this.depthFirstAllColumnTreeSearch(child.getChildren(),callback),callback(child)}))},ColumnUtils.prototype.depthFirstDisplayedColumnTreeSearch=function(tree,callback){var _this=this;tree&&tree.forEach((function(child){child instanceof ColumnGroup&&_this.depthFirstDisplayedColumnTreeSearch(child.getDisplayedChildren(),callback),callback(child)}))},ColumnUtils=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}([Bean("columnUtils")],ColumnUtils),ColumnUtils}(BeanStub),__extends$32=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),DisplayedGroupCreator=function(_super){function DisplayedGroupCreator(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$32(DisplayedGroupCreator,_super),DisplayedGroupCreator.prototype.createDisplayedGroups=function(sortedVisibleColumns,groupInstanceIdCreator,pinned,oldDisplayedGroups){for(var _this=this,oldColumnsMapped=this.mapOldGroupsById(oldDisplayedGroups),topLevelResultCols=[],groupsOrColsAtCurrentLevel=sortedVisibleColumns,_loop_1=function(){var currentlyIterating=groupsOrColsAtCurrentLevel;groupsOrColsAtCurrentLevel=[];for(var lastGroupedColIdx=0,createGroupToIndex=function(to){var from=lastGroupedColIdx;lastGroupedColIdx=to;var previousNode=currentlyIterating[from],previousNodeParent=(previousNode instanceof ColumnGroup?previousNode.getProvidedColumnGroup():previousNode).getOriginalParent();if(null!=previousNodeParent){var newGroup=_this.createColumnGroup(previousNodeParent,groupInstanceIdCreator,oldColumnsMapped,pinned);for(i=from;i<to;i++)newGroup.addChild(currentlyIterating[i]);groupsOrColsAtCurrentLevel.push(newGroup)}else for(var i=from;i<to;i++)topLevelResultCols.push(currentlyIterating[i])},i=1;i<currentlyIterating.length;i++){var thisNode=currentlyIterating[i],thisNodeParent=(thisNode instanceof ColumnGroup?thisNode.getProvidedColumnGroup():thisNode).getOriginalParent(),previousNode=currentlyIterating[lastGroupedColIdx];thisNodeParent!==(previousNode instanceof ColumnGroup?previousNode.getProvidedColumnGroup():previousNode).getOriginalParent()&&createGroupToIndex(i)}lastGroupedColIdx<currentlyIterating.length&&createGroupToIndex(currentlyIterating.length)};groupsOrColsAtCurrentLevel.length;)_loop_1();return this.setupParentsIntoColumns(topLevelResultCols,null),topLevelResultCols},DisplayedGroupCreator.prototype.createColumnGroup=function(providedGroup,groupInstanceIdCreator,oldColumnsMapped,pinned){var groupId=providedGroup.getGroupId(),instanceId=groupInstanceIdCreator.getInstanceIdForKey(groupId),columnGroup=oldColumnsMapped[ColumnGroup.createUniqueId(groupId,instanceId)];return columnGroup&&columnGroup.getProvidedColumnGroup()!==providedGroup&&(columnGroup=null),exists(columnGroup)?columnGroup.reset():(columnGroup=new ColumnGroup(providedGroup,groupId,instanceId,pinned),this.context.createBean(columnGroup)),columnGroup},DisplayedGroupCreator.prototype.mapOldGroupsById=function(displayedGroups){var result={},recursive=function(columnsOrGroups){columnsOrGroups.forEach((function(columnOrGroup){if(columnOrGroup instanceof ColumnGroup){var columnGroup=columnOrGroup;result[columnOrGroup.getUniqueId()]=columnGroup,recursive(columnGroup.getChildren())}}))};return displayedGroups&&recursive(displayedGroups),result},DisplayedGroupCreator.prototype.setupParentsIntoColumns=function(columnsOrGroups,parent){var _this=this;columnsOrGroups.forEach((function(columnsOrGroup){if(columnsOrGroup.setParent(parent),columnsOrGroup instanceof ColumnGroup){var columnGroup=columnsOrGroup;_this.setupParentsIntoColumns(columnGroup.getChildren(),columnGroup)}}))},DisplayedGroupCreator=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}([Bean("displayedGroupCreator")],DisplayedGroupCreator),DisplayedGroupCreator}(BeanStub),__extends$31=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgStackComponentsRegistry=function(_super){function AgStackComponentsRegistry(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.componentsMappedByName={},_this}return __extends$31(AgStackComponentsRegistry,_super),AgStackComponentsRegistry.prototype.setupComponents=function(components){var _this=this;components&&components.forEach((function(componentMeta){return _this.addComponent(componentMeta)}))},AgStackComponentsRegistry.prototype.addComponent=function(componentMeta){var classUpperCase=componentMeta.componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase().toUpperCase();this.componentsMappedByName[classUpperCase]=componentMeta.componentClass},AgStackComponentsRegistry.prototype.getComponentClass=function(htmlTag){return this.componentsMappedByName[htmlTag]},AgStackComponentsRegistry=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}([Bean("agStackComponentsRegistry")],AgStackComponentsRegistry),AgStackComponentsRegistry}(BeanStub);function toggleAriaAttribute(element,attribute,value){null==value||""==value?removeAriaAttribute(element,attribute):setAriaAttribute(element,attribute,value)}function setAriaAttribute(element,attribute,value){element.setAttribute(ariaAttributeName(attribute),value.toString())}function removeAriaAttribute(element,attribute){element.removeAttribute(ariaAttributeName(attribute))}function ariaAttributeName(attribute){return"aria-"+attribute}function setAriaRole(element,role){role?element.setAttribute("role",role):element.removeAttribute("role")}function getAriaSortState(sortDirection){return"asc"===sortDirection?"ascending":"desc"===sortDirection?"descending":"mixed"===sortDirection?"other":"none"}function getAriaLevel(element){return parseInt(element.getAttribute("aria-level"),10)}function getAriaPosInSet(element){return parseInt(element.getAttribute("aria-posinset"),10)}function setAriaLabel(element,label){toggleAriaAttribute(element,"label",label)}function setAriaLabelledBy(element,labelledBy){toggleAriaAttribute(element,"labelledby",labelledBy)}function setAriaDescription(element,description){toggleAriaAttribute(element,"description",description)}function setAriaDescribedBy(element,describedby){toggleAriaAttribute(element,"describedby",describedby)}function setAriaLive(element,live){toggleAriaAttribute(element,"live",live)}function setAriaLevel(element,level){toggleAriaAttribute(element,"level",level)}function setAriaDisabled(element,disabled){toggleAriaAttribute(element,"disabled",disabled)}function setAriaHidden(element,hidden){toggleAriaAttribute(element,"hidden",hidden)}function setAriaActiveDescendant(element,descendantId){toggleAriaAttribute(element,"activedescendant",descendantId)}function setAriaExpanded(element,expanded){setAriaAttribute(element,"expanded",expanded)}function removeAriaExpanded(element){removeAriaAttribute(element,"expanded")}function setAriaSetSize(element,setsize){setAriaAttribute(element,"setsize",setsize)}function setAriaPosInSet(element,position){setAriaAttribute(element,"posinset",position)}function setAriaMultiSelectable(element,multiSelectable){setAriaAttribute(element,"multiselectable",multiSelectable)}function setAriaRowCount(element,rowCount){setAriaAttribute(element,"rowcount",rowCount)}function setAriaRowIndex(element,rowIndex){setAriaAttribute(element,"rowindex",rowIndex)}function setAriaColCount(element,colCount){setAriaAttribute(element,"colcount",colCount)}function setAriaColIndex(element,colIndex){setAriaAttribute(element,"colindex",colIndex)}function setAriaColSpan(element,colSpan){setAriaAttribute(element,"colspan",colSpan)}function setAriaSort(element,sort){setAriaAttribute(element,"sort",sort)}function removeAriaSort(element){removeAriaAttribute(element,"sort")}function setAriaSelected(element,selected){toggleAriaAttribute(element,"selected",selected)}function setAriaChecked(element,checked){setAriaAttribute(element,"checked",void 0===checked?"mixed":checked)}function setAriaControls(controllerElement,controlledElement){toggleAriaAttribute(controllerElement,"controls",controlledElement.id),setAriaLabelledBy(controlledElement,controllerElement.id)}function getAriaCheckboxStateName(translate,state){return void 0===state?translate("ariaIndeterminate","indeterminate"):!0===state?translate("ariaChecked","checked"):translate("ariaUnchecked","unchecked")}var isSafari,safariVersion,isChrome,isFirefox,isMacOs,isIOS,invisibleScrollbar,browserScrollbarWidth,AriaUtils=Object.freeze({__proto__:null,setAriaRole,getAriaSortState,getAriaLevel,getAriaPosInSet,getAriaDescribedBy:function getAriaDescribedBy(element){return element.getAttribute("aria-describedby")||""},setAriaLabel,setAriaLabelledBy,setAriaDescription,setAriaDescribedBy,setAriaLive,setAriaLevel,setAriaDisabled,setAriaHidden,setAriaActiveDescendant,setAriaExpanded,removeAriaExpanded,setAriaSetSize,setAriaPosInSet,setAriaMultiSelectable,setAriaRowCount,setAriaRowIndex,setAriaColCount,setAriaColIndex,setAriaColSpan,setAriaSort,removeAriaSort,setAriaSelected,setAriaChecked,setAriaControls,getAriaCheckboxStateName});function isBrowserSafari(){return void 0===isSafari&&(isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),isSafari}function getSafariVersion(){if(void 0===safariVersion)if(isBrowserSafari()){var versionMatch=navigator.userAgent.match(/version\/(\d+)/i);versionMatch&&(safariVersion=null!=versionMatch[1]?parseFloat(versionMatch[1]):0)}else safariVersion=0;return safariVersion}function isBrowserChrome(){if(void 0===isChrome){var win=window;isChrome=!!win.chrome&&(!!win.chrome.webstore||!!win.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return isChrome}function isBrowserFirefox(){return void 0===isFirefox&&(isFirefox=/(firefox)/i.test(navigator.userAgent)),isFirefox}function isMacOsUserAgent(){return void 0===isMacOs&&(isMacOs=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),isMacOs}function isIOSUserAgent(){return void 0===isIOS&&(isIOS=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1),isIOS}function browserSupportsPreventScroll(){return!isBrowserSafari()||getSafariVersion()>=15}function getTabIndex(el){if(!el)return null;var numberTabIndex=el.tabIndex,tabIndex=el.getAttribute("tabIndex");return-1!==numberTabIndex||null!==tabIndex&&(""!==tabIndex||isBrowserFirefox())?numberTabIndex.toString():null}function getMaxDivHeight(){if(!document.body)return-1;var res=1e6,testUpTo=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,div=document.createElement("div");for(document.body.appendChild(div);;){var test=2*res;if(div.style.height=test+"px",test>testUpTo||div.clientHeight!==test)break;res=test}return document.body.removeChild(div),res}function getBodyWidth(){var _a,_b,_c;return null!==(_b=null===(_a=document.body)||void 0===_a?void 0:_a.clientWidth)&&void 0!==_b?_b:window.innerHeight||(null===(_c=document.documentElement)||void 0===_c?void 0:_c.clientWidth)||-1}function getBodyHeight(){var _a,_b,_c;return null!==(_b=null===(_a=document.body)||void 0===_a?void 0:_a.clientHeight)&&void 0!==_b?_b:window.innerHeight||(null===(_c=document.documentElement)||void 0===_c?void 0:_c.clientHeight)||-1}function getScrollbarWidth(){return null==browserScrollbarWidth&&initScrollbarWidthAndVisibility(),browserScrollbarWidth}function initScrollbarWidthAndVisibility(){var body=document.body,div=document.createElement("div");div.style.width=div.style.height="100px",div.style.opacity="0",div.style.overflow="scroll",div.style.msOverflowStyle="scrollbar",div.style.position="absolute",body.appendChild(div);var width=div.offsetWidth-div.clientWidth;0===width&&0===div.clientWidth&&(width=null),div.parentNode&&div.parentNode.removeChild(div),null!=width&&(browserScrollbarWidth=width,invisibleScrollbar=0===width)}function isInvisibleScrollbar(){return null==invisibleScrollbar&&initScrollbarWidthAndVisibility(),invisibleScrollbar}var BrowserUtils=Object.freeze({__proto__:null,isBrowserSafari,getSafariVersion,isBrowserChrome,isBrowserFirefox,isMacOsUserAgent,isIOSUserAgent,browserSupportsPreventScroll,getTabIndex,getMaxDivHeight,getBodyWidth,getBodyHeight,getScrollbarWidth,isInvisibleScrollbar});function padStartWidthZeros(value,totalStringSize){return value.toString().padStart(totalStringSize,"0")}function createArrayOfNumbers(first,last){for(var result=[],i=first;i<=last;i++)result.push(i);return result}function formatNumberCommas(value,thousandSeparator,decimalSeparator){return"number"!=typeof value?"":value.toString().replace(".",decimalSeparator).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+thousandSeparator)}var NumberUtils=Object.freeze({__proto__:null,padStartWidthZeros,createArrayOfNumbers,cleanNumber:function cleanNumber(value){return"string"==typeof value&&(value=parseInt(value,10)),"number"==typeof value?Math.floor(value):null},decToHex:function decToHex(number,bytes){for(var hex="",i=0;i<bytes;i++)hex+=String.fromCharCode(255&number),number>>>=8;return hex},formatNumberTwoDecimalPlacesAndCommas:function formatNumberTwoDecimalPlacesAndCommas(value,thousandSeparator,decimalSeparator){return"number"!=typeof value?"":formatNumberCommas(Math.round(100*value)/100,thousandSeparator,decimalSeparator)},formatNumberCommas,sum:function sum(values){return null==values?null:values.reduce((function(total,value){return total+value}),0)},zeroOrGreater:function zeroOrGreater(value,defaultValue){return value>=0?value:defaultValue},oneOrGreater:function oneOrGreater(value,defaultValue){var valueNumber=parseInt(value,10);return!isNaN(valueNumber)&&isFinite(valueNumber)&&valueNumber>0?valueNumber:defaultValue}}),__read$r=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar};function serialiseDate(date,includeTime,separator){if(void 0===includeTime&&(includeTime=!0),void 0===separator&&(separator="-"),!date)return null;var serialised=[date.getFullYear(),date.getMonth()+1,date.getDate()].map((function(part){return padStartWidthZeros(part,2)})).join(separator);return includeTime&&(serialised+=" "+[date.getHours(),date.getMinutes(),date.getSeconds()].map((function(part){return padStartWidthZeros(part,2)})).join(":")),serialised}var calculateOrdinal=function(value){if(value>3&&value<21)return"th";switch(value%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function dateToFormattedString(date,format){void 0===format&&(format="YYYY-MM-DD");var fullYear=padStartWidthZeros(date.getFullYear(),4),months=["January","February","March","April","May","June","July","August","September","October","November","December"],days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],replace={YYYY:function(){return fullYear.slice(fullYear.length-4,fullYear.length)},YY:function(){return fullYear.slice(fullYear.length-2,fullYear.length)},Y:function(){return""+date.getFullYear()},MMMM:function(){return months[date.getMonth()]},MMM:function(){return months[date.getMonth()].slice(0,3)},MM:function(){return padStartWidthZeros(date.getMonth()+1,2)},Mo:function(){return""+(date.getMonth()+1)+calculateOrdinal(date.getMonth()+1)},M:function(){return""+(date.getMonth()+1)},Do:function(){return""+date.getDate()+calculateOrdinal(date.getDate())},DD:function(){return padStartWidthZeros(date.getDate(),2)},D:function(){return""+date.getDate()},dddd:function(){return days[date.getDay()]},ddd:function(){return days[date.getDay()].slice(0,3)},dd:function(){return days[date.getDay()].slice(0,2)},do:function(){return""+date.getDay()+calculateOrdinal(date.getDay())},d:function(){return""+date.getDay()}},regexp=new RegExp(Object.keys(replace).join("|"),"g");return format.replace(regexp,(function(match){return match in replace?replace[match]():match}))}function parseDateTimeFromString(value){if(!value)return null;var _a=__read$r(value.split(" "),2),dateStr=_a[0],timeStr=_a[1];if(!dateStr)return null;var fields=dateStr.split("-").map((function(f){return parseInt(f,10)}));if(3!==fields.filter((function(f){return!isNaN(f)})).length)return null;var _b=__read$r(fields,3),year=_b[0],month=_b[1],day=_b[2],date=new Date(year,month-1,day);if(date.getFullYear()!==year||date.getMonth()!==month-1||date.getDate()!==day)return null;if(!timeStr||"00:00:00"===timeStr)return date;var _c=__read$r(timeStr.split(":").map((function(part){return parseInt(part,10)})),3),hours=_c[0],minutes=_c[1],seconds=_c[2];return hours>=0&&hours<24&&date.setHours(hours),minutes>=0&&minutes<60&&date.setMinutes(minutes),seconds>=0&&seconds<60&&date.setSeconds(seconds),date}var rtlNegativeScroll,DateUtils=Object.freeze({__proto__:null,serialiseDate,dateToFormattedString,parseDateTimeFromString}),__read$q=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar};function radioCssClass(element,elementClass,otherElementClass){for(var parent=element.parentElement,sibling=parent&&parent.firstChild;sibling;)elementClass&&sibling.classList.toggle(elementClass,sibling===element),otherElementClass&&sibling.classList.toggle(otherElementClass,sibling!==element),sibling=sibling.nextSibling}var FOCUSABLE_EXCLUDE=".ag-hidden, .ag-hidden *, [disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function isFocusableFormField(element){var matches=Element.prototype.matches||Element.prototype.msMatchesSelector,isFocusable=matches.call(element,"input, select, button, textarea"),isNotFocusable=matches.call(element,FOCUSABLE_EXCLUDE),isElementVisible=isVisible(element);return isFocusable&&!isNotFocusable&&isElementVisible}function setDisplayed(element,displayed,options){void 0===options&&(options={});var skipAriaHidden=options.skipAriaHidden;element.classList.toggle("ag-hidden",!displayed),skipAriaHidden||setAriaHidden(element,!displayed)}function setVisible(element,visible,options){void 0===options&&(options={});var skipAriaHidden=options.skipAriaHidden;element.classList.toggle("ag-invisible",!visible),skipAriaHidden||setAriaHidden(element,!visible)}function setDisabled(element,disabled){var addOrRemoveDisabledAttribute=disabled?function(e){return e.setAttribute("disabled","")}:function(e){return e.removeAttribute("disabled")};addOrRemoveDisabledAttribute(element),nodeListForEach(element.querySelectorAll("input"),(function(input){return addOrRemoveDisabledAttribute(input)}))}function isElementChildOfClass(element,cls,maxNest){for(var counter=0;element;){if(element.classList.contains(cls))return!0;if(element=element.parentElement,"number"==typeof maxNest){if(++counter>maxNest)break}else if(element===maxNest)break}return!1}function getElementSize(el){var _a=window.getComputedStyle(el),height=_a.height,width=_a.width,borderTopWidth=_a.borderTopWidth,borderRightWidth=_a.borderRightWidth,borderBottomWidth=_a.borderBottomWidth,borderLeftWidth=_a.borderLeftWidth,paddingTop=_a.paddingTop,paddingRight=_a.paddingRight,paddingBottom=_a.paddingBottom,paddingLeft=_a.paddingLeft,marginTop=_a.marginTop,marginRight=_a.marginRight,marginBottom=_a.marginBottom,marginLeft=_a.marginLeft,boxSizing=_a.boxSizing;return{height:parseFloat(height),width:parseFloat(width),borderTopWidth:parseFloat(borderTopWidth),borderRightWidth:parseFloat(borderRightWidth),borderBottomWidth:parseFloat(borderBottomWidth),borderLeftWidth:parseFloat(borderLeftWidth),paddingTop:parseFloat(paddingTop),paddingRight:parseFloat(paddingRight),paddingBottom:parseFloat(paddingBottom),paddingLeft:parseFloat(paddingLeft),marginTop:parseFloat(marginTop),marginRight:parseFloat(marginRight),marginBottom:parseFloat(marginBottom),marginLeft:parseFloat(marginLeft),boxSizing}}function getInnerHeight(el){var size=getElementSize(el);return"border-box"===size.boxSizing?size.height-size.paddingTop-size.paddingBottom:size.height}function getInnerWidth(el){var size=getElementSize(el);return"border-box"===size.boxSizing?size.width-size.paddingLeft-size.paddingRight:size.width}function getAbsoluteHeight(el){var size=getElementSize(el),marginRight=size.marginBottom+size.marginTop;return Math.ceil(el.offsetHeight+marginRight)}function getAbsoluteWidth(el){var size=getElementSize(el),marginWidth=size.marginLeft+size.marginRight;return Math.ceil(el.offsetWidth+marginWidth)}function getElementRectWithOffset(el){var offsetElementRect=el.getBoundingClientRect(),_a=getElementSize(el),borderTopWidth=_a.borderTopWidth,borderLeftWidth=_a.borderLeftWidth,borderRightWidth=_a.borderRightWidth,borderBottomWidth=_a.borderBottomWidth;return{top:offsetElementRect.top+(borderTopWidth||0),left:offsetElementRect.left+(borderLeftWidth||0),right:offsetElementRect.right+(borderRightWidth||0),bottom:offsetElementRect.bottom+(borderBottomWidth||0)}}function isRtlNegativeScroll(){if("boolean"==typeof rtlNegativeScroll)return rtlNegativeScroll;var template=document.createElement("div");return template.style.direction="rtl",template.style.width="1px",template.style.height="1px",template.style.position="fixed",template.style.top="0px",template.style.overflow="hidden",template.dir="rtl",template.innerHTML='<div style="width: 2px">\n            <span style="display: inline-block; width: 1px"></span>\n            <span style="display: inline-block; width: 1px"></span>\n        </div>',document.body.appendChild(template),template.scrollLeft=1,rtlNegativeScroll=0===Math.floor(template.scrollLeft),document.body.removeChild(template),rtlNegativeScroll}function getScrollLeft(element,rtl){var scrollLeft=element.scrollLeft;return rtl&&(scrollLeft=Math.abs(scrollLeft),isBrowserChrome()&&!isRtlNegativeScroll()&&(scrollLeft=element.scrollWidth-element.clientWidth-scrollLeft)),scrollLeft}function setScrollLeft(element,value,rtl){rtl&&(isRtlNegativeScroll()?value*=-1:(isBrowserSafari()||isBrowserChrome())&&(value=element.scrollWidth-element.clientWidth-value)),element.scrollLeft=value}function clearElement(el){for(;el&&el.firstChild;)el.removeChild(el.firstChild)}function removeFromParent(node){node&&node.parentNode&&node.parentNode.removeChild(node)}function isVisible(element){return null!==element.offsetParent}function loadTemplate(template){var tempDiv=document.createElement("div");return tempDiv.innerHTML=(template||"").trim(),tempDiv.firstChild}function offsetHeight(element){return element&&element.clientHeight?element.clientHeight:0}function offsetWidth(element){return element&&element.clientWidth?element.clientWidth:0}function ensureDomOrder(eContainer,eChild,eChildBefore){if(!eChildBefore||eChildBefore.nextSibling!==eChild){var focusedEl=document.activeElement,eChildHasFocus=eChild.contains(focusedEl);eChildBefore?eChildBefore.nextSibling?eContainer.insertBefore(eChild,eChildBefore.nextSibling):eContainer.appendChild(eChild):eContainer.firstChild&&eContainer.firstChild!==eChild&&eContainer.insertAdjacentElement("afterbegin",eChild),eChildHasFocus&&focusedEl&&browserSupportsPreventScroll()&&focusedEl.focus({preventScroll:!0})}}function setDomChildOrder(eContainer,orderedChildren){for(var i=0;i<orderedChildren.length;i++){var correctCellAtIndex=orderedChildren[i],actualCellAtIndex=eContainer.children[i];actualCellAtIndex!==correctCellAtIndex&&eContainer.insertBefore(correctCellAtIndex,actualCellAtIndex)}}function insertWithDomOrder(eContainer,eToInsert,eChildBefore){eChildBefore?eChildBefore.insertAdjacentElement("afterend",eToInsert):eContainer.firstChild?eContainer.insertAdjacentElement("afterbegin",eToInsert):eContainer.appendChild(eToInsert)}function addStylesToElement(eElement,styles){var e_1,_a;if(styles)try{for(var _b=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.entries(styles)),_c=_b.next();!_c.done;_c=_b.next()){var _d=__read$q(_c.value,2),key=_d[0],value=_d[1];if(key&&key.length&&null!=value){var parsedKey=camelCaseToHyphenated(key),valueAsString=value.toString(),parsedValue=valueAsString.replace(/\s*!important/g,""),priority=parsedValue.length!=valueAsString.length?"important":void 0;eElement.style.setProperty(parsedKey,parsedValue,priority)}}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}}function isHorizontalScrollShowing(element){return element.clientWidth<element.scrollWidth}function isVerticalScrollShowing(element){return element.clientHeight<element.scrollHeight}function setElementWidth(element,width){"flex"===width?(element.style.removeProperty("width"),element.style.removeProperty("minWidth"),element.style.removeProperty("maxWidth"),element.style.flex="1 1 auto"):setFixedWidth(element,width)}function setFixedWidth(element,width){width=formatSize(width),element.style.width=width.toString(),element.style.maxWidth=width.toString(),element.style.minWidth=width.toString()}function setFixedHeight(element,height){height=formatSize(height),element.style.height=height.toString(),element.style.maxHeight=height.toString(),element.style.minHeight=height.toString()}function formatSize(size){return"number"==typeof size?size+"px":size}function isNodeOrElement(o){return o instanceof Node||o instanceof HTMLElement}function copyNodeList(nodeList){if(null==nodeList)return[];var result=[];return nodeListForEach(nodeList,(function(node){return result.push(node)})),result}function iterateNamedNodeMap(map,callback){if(map)for(var i=0;i<map.length;i++){var attr=map[i];callback(attr.name,attr.value)}}function addOrRemoveAttribute(element,name,value){null==value?element.removeAttribute(name):element.setAttribute(name,value.toString())}function nodeListForEach(nodeList,action){if(null!=nodeList)for(var i=0;i<nodeList.length;i++)action(nodeList[i])}function bindCellRendererToHtmlElement(cellRendererPromise,eTarget){cellRendererPromise.then((function(cellRenderer){var gui=cellRenderer.getGui();null!=gui&&("object"==typeof gui?eTarget.appendChild(gui):eTarget.innerHTML=gui)}))}var DomUtils=Object.freeze({__proto__:null,radioCssClass,FOCUSABLE_SELECTOR:"[tabindex], input, select, button, textarea, [href]",FOCUSABLE_EXCLUDE,isFocusableFormField,setDisplayed,setVisible,setDisabled,isElementChildOfClass,getElementSize,getInnerHeight,getInnerWidth,getAbsoluteHeight,getAbsoluteWidth,getElementRectWithOffset,isRtlNegativeScroll,getScrollLeft,setScrollLeft,clearElement,removeElement:function removeElement(parent,cssSelector){removeFromParent(parent.querySelector(cssSelector))},removeFromParent,isVisible,loadTemplate,appendHtml:function appendHtml(eContainer,htmlTemplate){eContainer.lastChild?eContainer.insertAdjacentHTML("afterbegin",htmlTemplate):eContainer.innerHTML=htmlTemplate},getElementAttribute:function getElementAttribute(element,attributeName){return element.attributes&&element.attributes[attributeName]?element.attributes[attributeName].value:null},offsetHeight,offsetWidth,ensureDomOrder,setDomChildOrder,insertWithDomOrder,prependDC:function prependDC(parent,documentFragment){exists(parent.firstChild)?parent.insertBefore(documentFragment,parent.firstChild):parent.appendChild(documentFragment)},addStylesToElement,isHorizontalScrollShowing,isVerticalScrollShowing,setElementWidth,setFixedWidth,setElementHeight:function setElementHeight(element,height){"flex"===height?(element.style.removeProperty("height"),element.style.removeProperty("minHeight"),element.style.removeProperty("maxHeight"),element.style.flex="1 1 auto"):setFixedHeight(element,height)},setFixedHeight,formatSize,isNodeOrElement,copyNodeList,iterateNamedNodeMap,addOrRemoveAttribute,nodeListForEach,bindCellRendererToHtmlElement}),iconNameClassMap={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus"};function createIcon(iconName,gridOptionsService,column){var iconContents=createIconNoSpan(iconName,gridOptionsService,column);if(iconContents){var className=iconContents.className;if("string"==typeof className&&className.indexOf("ag-icon")>-1||"object"==typeof className&&className["ag-icon"])return iconContents}var eResult=document.createElement("span");return eResult.appendChild(iconContents),eResult}function createIconNoSpan(iconName,gridOptionsService,column,forceCreate){var userProvidedIcon=null,icons=column&&column.getColDef().icons;if(icons&&(userProvidedIcon=icons[iconName]),gridOptionsService&&!userProvidedIcon){var optionsIcons=gridOptionsService.get("icons");optionsIcons&&(userProvidedIcon=optionsIcons[iconName])}if(!userProvidedIcon){var span=document.createElement("span"),cssClass=iconNameClassMap[iconName];return cssClass||(forceCreate?cssClass=iconName:(console.warn("AG Grid: Did not find icon "+iconName),cssClass="")),span.setAttribute("class","ag-icon ag-icon-"+cssClass),span.setAttribute("unselectable","on"),setAriaRole(span,"presentation"),span}var rendererResult=void 0;if("function"==typeof userProvidedIcon)rendererResult=userProvidedIcon();else{if("string"!=typeof userProvidedIcon)throw new Error("icon from grid options needs to be a string or a function");rendererResult=userProvidedIcon}return"string"==typeof rendererResult?loadTemplate(rendererResult):isNodeOrElement(rendererResult)?rendererResult:void console.warn("AG Grid: iconRenderer should return back a string or a dom object")}var IconUtils=Object.freeze({__proto__:null,iconNameClassMap,createIcon,createIconNoSpan}),KeyCode=function(){function KeyCode(){}return KeyCode.BACKSPACE="Backspace",KeyCode.TAB="Tab",KeyCode.ENTER="Enter",KeyCode.ESCAPE="Escape",KeyCode.SPACE=" ",KeyCode.LEFT="ArrowLeft",KeyCode.UP="ArrowUp",KeyCode.RIGHT="ArrowRight",KeyCode.DOWN="ArrowDown",KeyCode.DELETE="Delete",KeyCode.F2="F2",KeyCode.PAGE_UP="PageUp",KeyCode.PAGE_DOWN="PageDown",KeyCode.PAGE_HOME="Home",KeyCode.PAGE_END="End",KeyCode.A="KeyA",KeyCode.C="KeyC",KeyCode.D="KeyD",KeyCode.V="KeyV",KeyCode.X="KeyX",KeyCode.Y="KeyY",KeyCode.Z="KeyZ",KeyCode}();function isEventFromPrintableCharacter(event){return!(event.altKey||event.ctrlKey||event.metaKey)&&1===event.key.length}function isUserSuppressingKeyboardEvent(gridOptionsService,keyboardEvent,rowNode,column,editing){var colDefFunc=column?column.getColDef().suppressKeyboardEvent:void 0;if(!colDefFunc)return!1;var params={event:keyboardEvent,editing,column,api:gridOptionsService.api,node:rowNode,data:rowNode.data,colDef:column.getColDef(),context:gridOptionsService.context,columnApi:gridOptionsService.columnApi};if(colDefFunc&&colDefFunc(params))return!0;return!1}function isUserSuppressingHeaderKeyboardEvent(gridOptionsService,keyboardEvent,headerRowIndex,column){var colDef=column.getDefinition(),colDefFunc=colDef&&colDef.suppressHeaderKeyboardEvent;return!!exists(colDefFunc)&&!!colDefFunc({api:gridOptionsService.api,columnApi:gridOptionsService.columnApi,context:gridOptionsService.context,colDef,column,headerRowIndex,event:keyboardEvent})}function normaliseQwertyAzerty(keyboardEvent){var code;switch(keyboardEvent.keyCode){case 65:code=KeyCode.A;break;case 67:code=KeyCode.C;break;case 86:code=KeyCode.V;break;case 68:code=KeyCode.D;break;case 90:code=KeyCode.Z;break;case 89:code=KeyCode.Y;break;default:code=keyboardEvent.code}return code}function isDeleteKey(key,alwaysReturnFalseOnBackspace){return void 0===alwaysReturnFalseOnBackspace&&(alwaysReturnFalseOnBackspace=!1),key===KeyCode.DELETE||!alwaysReturnFalseOnBackspace&&key===KeyCode.BACKSPACE&&isMacOsUserAgent()}var KeyboardUtils=Object.freeze({__proto__:null,isEventFromPrintableCharacter,isUserSuppressingKeyboardEvent,isUserSuppressingHeaderKeyboardEvent,normaliseQwertyAzerty,isDeleteKey});function areEventsNear(e1,e2,pixelCount){if(0===pixelCount)return!1;var diffX=Math.abs(e1.clientX-e2.clientX),diffY=Math.abs(e1.clientY-e2.clientY);return Math.max(diffX,diffY)<=pixelCount}var MouseUtils=Object.freeze({__proto__:null,areEventsNear});var RowNodeUtils=Object.freeze({__proto__:null,sortRowNodesByOrder:function sortRowNodesByOrder(rowNodes,rowNodeOrder){if(!rowNodes)return!1;for(var comparator=function(nodeA,nodeB){var positionA=rowNodeOrder[nodeA.id],positionB=rowNodeOrder[nodeB.id],aHasIndex=void 0!==positionA,bHasIndex=void 0!==positionB;return aHasIndex&&bHasIndex?positionA-positionB:!aHasIndex&&!bHasIndex?nodeA.__objectId-nodeB.__objectId:aHasIndex?1:-1},atLeastOneOutOfOrder=!1,i=0;i<rowNodes.length-1;i++)if(comparator(rowNodes[i],rowNodes[i+1])>0){atLeastOneOutOfOrder=!0;break}return!!atLeastOneOutOfOrder&&(rowNodes.sort(comparator),!0)},traverseNodesWithKey:function traverseNodesWithKey(nodes,callback){var keyParts=[];!function recursiveSearchNodes(currentNodes){if(!currentNodes)return;currentNodes.forEach((function(node){if(node.group||node.hasChildren()){keyParts.push(node.key);var key=keyParts.join("|");callback(node,key),recursiveSearchNodes(node.childrenAfterGroup),keyParts.pop()}}))}(nodes)}});function convertToSet(list){var set=new Set;return list.forEach((function(x){return set.add(x)})),set}var AgPromiseStatus,SetUtils=Object.freeze({__proto__:null,convertToSet}),__assign$m=function(){return __assign$m=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$m.apply(this,arguments)},_=__assign$m(__assign$m(__assign$m(__assign$m(__assign$m(__assign$m(__assign$m(__assign$m(__assign$m(__assign$m(__assign$m(__assign$m(__assign$m(__assign$m(__assign$m(__assign$m(__assign$m(__assign$m({},AriaUtils),ArrayUtils),BrowserUtils),DateUtils),DomUtils),EventUtils),FunctionUtils),FuzzyMatchUtils),GenericUtils),IconUtils),KeyboardUtils),MapUtils),MouseUtils),NumberUtils),ObjectUtils),RowNodeUtils),SetUtils),StringUtils),NumberSequence=function(){function NumberSequence(initValue,step){void 0===initValue&&(initValue=0),void 0===step&&(step=1),this.nextValue=initValue,this.step=step}return NumberSequence.prototype.next=function(){var valToReturn=this.nextValue;return this.nextValue+=this.step,valToReturn},NumberSequence.prototype.peek=function(){return this.nextValue},NumberSequence.prototype.skip=function(count){this.nextValue+=count},NumberSequence}();!function(AgPromiseStatus){AgPromiseStatus[AgPromiseStatus.IN_PROGRESS=0]="IN_PROGRESS",AgPromiseStatus[AgPromiseStatus.RESOLVED=1]="RESOLVED"}(AgPromiseStatus||(AgPromiseStatus={}));var TooltipStates,TooltipTrigger,AgPromise=function(){function AgPromise(callback){var _this=this;this.status=AgPromiseStatus.IN_PROGRESS,this.resolution=null,this.waiters=[],callback((function(value){return _this.onDone(value)}),(function(params){return _this.onReject(params)}))}return AgPromise.all=function(promises){return new AgPromise((function(resolve){var remainingToResolve=promises.length,combinedValues=new Array(remainingToResolve);promises.forEach((function(promise,index){promise.then((function(value){combinedValues[index]=value,0===--remainingToResolve&&resolve(combinedValues)}))}))}))},AgPromise.resolve=function(value){return void 0===value&&(value=null),new AgPromise((function(resolve){return resolve(value)}))},AgPromise.prototype.then=function(func){var _this=this;return new AgPromise((function(resolve){_this.status===AgPromiseStatus.RESOLVED?resolve(func(_this.resolution)):_this.waiters.push((function(value){return resolve(func(value))}))}))},AgPromise.prototype.resolveNow=function(ifNotResolvedValue,ifResolved){return this.status===AgPromiseStatus.RESOLVED?ifResolved(this.resolution):ifNotResolvedValue},AgPromise.prototype.onDone=function(value){this.status=AgPromiseStatus.RESOLVED,this.resolution=value,this.waiters.forEach((function(waiter){return waiter(value)}))},AgPromise.prototype.onReject=function(params){console.warn("TBI")},AgPromise}(),__extends$30=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$l=function(){return __assign$l=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$l.apply(this,arguments)},__decorate$2x=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};!function(TooltipStates){TooltipStates[TooltipStates.NOTHING=0]="NOTHING",TooltipStates[TooltipStates.WAITING_TO_SHOW=1]="WAITING_TO_SHOW",TooltipStates[TooltipStates.SHOWING=2]="SHOWING"}(TooltipStates||(TooltipStates={})),function(TooltipTrigger){TooltipTrigger[TooltipTrigger.HOVER=0]="HOVER",TooltipTrigger[TooltipTrigger.FOCUS=1]="FOCUS"}(TooltipTrigger||(TooltipTrigger={}));var CustomTooltipFeature=function(_super){function CustomTooltipFeature(parentComp,tooltipShowDelayOverride,tooltipHideDelayOverride){var _this=_super.call(this)||this;return _this.parentComp=parentComp,_this.tooltipShowDelayOverride=tooltipShowDelayOverride,_this.tooltipHideDelayOverride=tooltipHideDelayOverride,_this.DEFAULT_SHOW_TOOLTIP_DELAY=2e3,_this.DEFAULT_HIDE_TOOLTIP_DELAY=1e4,_this.SHOW_QUICK_TOOLTIP_DIFF=1e3,_this.FADE_OUT_TOOLTIP_TIMEOUT=1e3,_this.INTERACTIVE_HIDE_DELAY=100,_this.interactionEnabled=!1,_this.isInteractingWithTooltip=!1,_this.state=TooltipStates.NOTHING,_this.tooltipInstanceCount=0,_this.tooltipMouseTrack=!1,_this}return __extends$30(CustomTooltipFeature,_super),CustomTooltipFeature.prototype.postConstruct=function(){this.gridOptionsService.is("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipShowDelay=this.getTooltipDelay("show"),this.tooltipHideDelay=this.getTooltipDelay("hide"),this.tooltipMouseTrack=this.gridOptionsService.is("tooltipMouseTrack");var el=this.parentComp.getGui();this.tooltipTrigger===TooltipTrigger.HOVER&&(this.addManagedListener(el,"mouseenter",this.onMouseEnter.bind(this)),this.addManagedListener(el,"mouseleave",this.onMouseLeave.bind(this))),this.tooltipTrigger===TooltipTrigger.FOCUS&&(this.addManagedListener(el,"focusin",this.onFocusIn.bind(this)),this.addManagedListener(el,"focusout",this.onFocusOut.bind(this))),this.addManagedListener(el,"mousemove",this.onMouseMove.bind(this)),this.interactionEnabled||(this.addManagedListener(el,"mousedown",this.onMouseDown.bind(this)),this.addManagedListener(el,"keydown",this.onKeyDown.bind(this)))},CustomTooltipFeature.prototype.getGridOptionsTooltipDelay=function(delayOption){var delay=this.gridOptionsService.getNum(delayOption);if(exists(delay))return delay<0&&doOnce((function(){return console.warn("AG Grid: "+delayOption+" should not be lower than 0")}),delayOption+"Warn"),Math.max(200,delay)},CustomTooltipFeature.prototype.getTooltipDelay=function(type){var _a,_b,_c,_d;return"show"===type?null!==(_b=null!==(_a=this.getGridOptionsTooltipDelay("tooltipShowDelay"))&&void 0!==_a?_a:this.tooltipShowDelayOverride)&&void 0!==_b?_b:this.DEFAULT_SHOW_TOOLTIP_DELAY:null!==(_d=null!==(_c=this.getGridOptionsTooltipDelay("tooltipHideDelay"))&&void 0!==_c?_c:this.tooltipHideDelayOverride)&&void 0!==_d?_d:this.DEFAULT_HIDE_TOOLTIP_DELAY},CustomTooltipFeature.prototype.destroy=function(){this.setToDoNothing(),_super.prototype.destroy.call(this)},CustomTooltipFeature.prototype.getTooltipTrigger=function(){var trigger=this.gridOptionsService.get("tooltipTrigger");return trigger&&"hover"!==trigger?TooltipTrigger.FOCUS:TooltipTrigger.HOVER},CustomTooltipFeature.prototype.onMouseEnter=function(e){var _this=this;this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),isIOSUserAgent()||(CustomTooltipFeature.isLocked?this.showTooltipTimeoutId=window.setTimeout((function(){_this.prepareToShowTooltip(e)}),this.INTERACTIVE_HIDE_DELAY):this.prepareToShowTooltip(e))},CustomTooltipFeature.prototype.onMouseMove=function(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&this.state===TooltipStates.SHOWING&&this.tooltipComp&&this.positionTooltip()},CustomTooltipFeature.prototype.onMouseDown=function(){this.setToDoNothing()},CustomTooltipFeature.prototype.onMouseLeave=function(){this.interactionEnabled?this.lockService():this.setToDoNothing()},CustomTooltipFeature.prototype.onFocusIn=function(){this.prepareToShowTooltip()},CustomTooltipFeature.prototype.onFocusOut=function(e){var _a,relatedTarget=e.relatedTarget,parentCompGui=this.parentComp.getGui(),tooltipGui=null===(_a=this.tooltipComp)||void 0===_a?void 0:_a.getGui();this.isInteractingWithTooltip||parentCompGui.contains(relatedTarget)||this.interactionEnabled&&(null==tooltipGui?void 0:tooltipGui.contains(relatedTarget))||this.setToDoNothing()},CustomTooltipFeature.prototype.onKeyDown=function(){this.setToDoNothing()},CustomTooltipFeature.prototype.prepareToShowTooltip=function(mouseEvent){if(this.state!=TooltipStates.NOTHING||CustomTooltipFeature.isLocked)return!1;var delay=0;return mouseEvent&&(delay=this.isLastTooltipHiddenRecently()?200:this.tooltipShowDelay),this.lastMouseEvent=mouseEvent||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),delay),this.state=TooltipStates.WAITING_TO_SHOW,!0},CustomTooltipFeature.prototype.isLastTooltipHiddenRecently=function(){return(new Date).getTime()-CustomTooltipFeature.lastTooltipHideTime<this.SHOW_QUICK_TOOLTIP_DIFF},CustomTooltipFeature.prototype.setToDoNothing=function(){this.state===TooltipStates.SHOWING&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.clearTimeouts(),this.state=TooltipStates.NOTHING,this.lastMouseEvent=null},CustomTooltipFeature.prototype.showTooltip=function(){var params=__assign$l({},this.parentComp.getTooltipParams());if(exists(params.value)){this.state=TooltipStates.SHOWING,this.tooltipInstanceCount++;var callback=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(params).newAgStackInstance().then(callback)}else this.setToDoNothing()},CustomTooltipFeature.prototype.hideTooltip=function(forceHide){if(forceHide||!this.isInteractingWithTooltip){this.tooltipComp&&(this.destroyTooltipComp(),CustomTooltipFeature.lastTooltipHideTime=(new Date).getTime());var event={type:Events.EVENT_TOOLTIP_HIDE,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(event),this.state=TooltipStates.NOTHING}},CustomTooltipFeature.prototype.newTooltipComponentCallback=function(tooltipInstanceCopy,tooltipComp){if(this.state!==TooltipStates.SHOWING||this.tooltipInstanceCount!==tooltipInstanceCopy)this.getContext().destroyBean(tooltipComp);else{var eGui=tooltipComp.getGui();this.tooltipComp=tooltipComp,eGui.classList.contains("ag-tooltip")||eGui.classList.add("ag-tooltip-custom"),this.tooltipTrigger===TooltipTrigger.HOVER&&eGui.classList.add("ag-tooltip-animate"),this.interactionEnabled&&eGui.classList.add("ag-tooltip-interactive");var translate=this.localeService.getLocaleTextFunc(),addPopupRes=this.popupService.addPopup({eChild:eGui,ariaLabel:translate("ariaLabelTooltip","Tooltip")});addPopupRes&&(this.tooltipPopupDestroyFunc=addPopupRes.hideFunc),this.positionTooltip(),this.tooltipTrigger===TooltipTrigger.FOCUS&&(this.onBodyScrollEventCallback=this.addManagedListener(this.eventService,Events.EVENT_BODY_SCROLL,this.setToDoNothing.bind(this)),this.onColumnMovedEventCallback=this.addManagedListener(this.eventService,Events.EVENT_COLUMN_MOVED,this.setToDoNothing.bind(this))),this.interactionEnabled&&(this.tooltipTrigger===TooltipTrigger.HOVER?(this.tooltipMouseEnterListener=this.addManagedListener(eGui,"mouseenter",this.onTooltipMouseEnter.bind(this))||null,this.tooltipMouseLeaveListener=this.addManagedListener(eGui,"mouseleave",this.onTooltipMouseLeave.bind(this))||null):(this.tooltipFocusInListener=this.addManagedListener(eGui,"focusin",this.onTooltipFocusIn.bind(this))||null,this.tooltipFocusOutListener=this.addManagedListener(eGui,"focusout",this.onTooltipFocusOut.bind(this))||null));var event={type:Events.EVENT_TOOLTIP_SHOW,tooltipGui:eGui,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(event),this.startHideTimeout()}},CustomTooltipFeature.prototype.onTooltipMouseEnter=function(){this.isInteractingWithTooltip=!0,this.unlockService()},CustomTooltipFeature.prototype.onTooltipMouseLeave=function(){this.isInteractingWithTooltip=!1,this.lockService()},CustomTooltipFeature.prototype.onTooltipFocusIn=function(){this.isInteractingWithTooltip=!0},CustomTooltipFeature.prototype.onTooltipFocusOut=function(e){var _a,parentGui=this.parentComp.getGui(),tooltipGui=null===(_a=this.tooltipComp)||void 0===_a?void 0:_a.getGui(),relatedTarget=e.relatedTarget;(null==tooltipGui?void 0:tooltipGui.contains(relatedTarget))||(this.isInteractingWithTooltip=!1,parentGui.contains(relatedTarget)?this.startHideTimeout():this.hideTooltip())},CustomTooltipFeature.prototype.positionTooltip=function(){var params={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent(__assign$l(__assign$l({},params),{mouseEvent:this.lastMouseEvent})):this.popupService.positionPopupByComponent(__assign$l(__assign$l({},params),{eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))},CustomTooltipFeature.prototype.destroyTooltipComp=function(){var _this=this;this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");var tooltipPopupDestroyFunc=this.tooltipPopupDestroyFunc,tooltipComp=this.tooltipComp,delay=this.tooltipTrigger===TooltipTrigger.HOVER?this.FADE_OUT_TOOLTIP_TIMEOUT:0;window.setTimeout((function(){tooltipPopupDestroyFunc(),_this.getContext().destroyBean(tooltipComp)}),delay),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0},CustomTooltipFeature.prototype.clearTooltipListeners=function(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach((function(listener){listener&&listener()})),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null},CustomTooltipFeature.prototype.lockService=function(){var _this=this;CustomTooltipFeature.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout((function(){_this.unlockService(),_this.setToDoNothing()}),this.INTERACTIVE_HIDE_DELAY)},CustomTooltipFeature.prototype.unlockService=function(){CustomTooltipFeature.isLocked=!1,this.clearInteractiveTimeout()},CustomTooltipFeature.prototype.startHideTimeout=function(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.tooltipHideDelay)},CustomTooltipFeature.prototype.clearShowTimeout=function(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)},CustomTooltipFeature.prototype.clearHideTimeout=function(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)},CustomTooltipFeature.prototype.clearInteractiveTimeout=function(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)},CustomTooltipFeature.prototype.clearTimeouts=function(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()},CustomTooltipFeature.isLocked=!1,__decorate$2x([Autowired("popupService")],CustomTooltipFeature.prototype,"popupService",void 0),__decorate$2x([Autowired("userComponentFactory")],CustomTooltipFeature.prototype,"userComponentFactory",void 0),__decorate$2x([PostConstruct],CustomTooltipFeature.prototype,"postConstruct",null),CustomTooltipFeature}(BeanStub),CssClassManager=function(){function CssClassManager(getGui){this.cssClassStates={},this.getGui=getGui}return CssClassManager.prototype.addCssClass=function(className){var _this=this,list=(className||"").split(" ");if(list.length>1)list.forEach((function(cls){return _this.addCssClass(cls)}));else if(!0!==this.cssClassStates[className]&&className.length){var eGui=this.getGui();eGui&&eGui.classList.add(className),this.cssClassStates[className]=!0}},CssClassManager.prototype.removeCssClass=function(className){var _this=this,list=(className||"").split(" ");if(list.length>1)list.forEach((function(cls){return _this.removeCssClass(cls)}));else if(!1!==this.cssClassStates[className]&&className.length){var eGui=this.getGui();eGui&&eGui.classList.remove(className),this.cssClassStates[className]=!1}},CssClassManager.prototype.containsCssClass=function(className){var eGui=this.getGui();return!!eGui&&eGui.classList.contains(className)},CssClassManager.prototype.addOrRemoveCssClass=function(className,addOrRemove){var _this=this;if(className){if(className.indexOf(" ")>=0){var list=(className||"").split(" ");if(list.length>1)return void list.forEach((function(cls){return _this.addOrRemoveCssClass(cls,addOrRemove)}))}if(this.cssClassStates[className]!==addOrRemove&&className.length){var eGui=this.getGui();eGui&&eGui.classList.toggle(className,addOrRemove),this.cssClassStates[className]=addOrRemove}}},CssClassManager}(),__extends$2$=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2w=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},compIdSequence=new NumberSequence,Component=function(_super){function Component(template){var _this=_super.call(this)||this;return _this.displayed=!0,_this.visible=!0,_this.compId=compIdSequence.next(),_this.cssClassManager=new CssClassManager((function(){return _this.eGui})),template&&_this.setTemplate(template),_this}return __extends$2$(Component,_super),Component.prototype.preConstructOnComponent=function(){this.usingBrowserTooltips=this.gridOptionsService.is("enableBrowserTooltips")},Component.prototype.getCompId=function(){return this.compId},Component.prototype.getTooltipParams=function(){return{value:this.tooltipText,location:"UNKNOWN"}},Component.prototype.setTooltip=function(newTooltipText,showDelayOverride,hideDelayOverride){var _this=this;this.tooltipText!=newTooltipText&&(this.tooltipText&&(_this.usingBrowserTooltips?_this.getGui().removeAttribute("title"):_this.tooltipFeature=_this.destroyBean(_this.tooltipFeature)),null!=newTooltipText&&(this.tooltipText=newTooltipText,this.tooltipText&&(_this.usingBrowserTooltips?_this.getGui().setAttribute("title",_this.tooltipText):_this.tooltipFeature=_this.createBean(new CustomTooltipFeature(_this,showDelayOverride,hideDelayOverride)))))},Component.prototype.createChildComponentsFromTags=function(parentNode,paramsMap){var _this=this;copyNodeList(parentNode.childNodes).forEach((function(childNode){if(childNode instanceof HTMLElement){var childComp=_this.createComponentFromElement(childNode,(function(childComp){childComp.getGui()&&_this.copyAttributesFromNode(childNode,childComp.getGui())}),paramsMap);if(childComp){if(childComp.addItems&&childNode.children.length){_this.createChildComponentsFromTags(childNode,paramsMap);var items=Array.prototype.slice.call(childNode.children);childComp.addItems(items)}_this.swapComponentForNode(childComp,parentNode,childNode)}else childNode.childNodes&&_this.createChildComponentsFromTags(childNode,paramsMap)}}))},Component.prototype.createComponentFromElement=function(element,afterPreCreateCallback,paramsMap){var key=element.nodeName,componentParams=paramsMap?paramsMap[element.getAttribute("ref")]:void 0,ComponentClass=this.agStackComponentsRegistry.getComponentClass(key);if(ComponentClass){Component.elementGettingCreated=element;var newComponent=new ComponentClass(componentParams);return newComponent.setParentComponent(this),this.createBean(newComponent,null,afterPreCreateCallback),newComponent}return null},Component.prototype.copyAttributesFromNode=function(source,dest){iterateNamedNodeMap(source.attributes,(function(name,value){return dest.setAttribute(name,value)}))},Component.prototype.swapComponentForNode=function(newComponent,parentNode,childNode){var eComponent=newComponent.getGui();parentNode.replaceChild(eComponent,childNode),parentNode.insertBefore(document.createComment(childNode.nodeName),eComponent),this.addDestroyFunc(this.destroyBean.bind(this,newComponent)),this.swapInComponentForQuerySelectors(newComponent,childNode)},Component.prototype.swapInComponentForQuerySelectors=function(newComponent,childNode){var thisNoType=this;this.iterateOverQuerySelectors((function(querySelector){thisNoType[querySelector.attributeName]===childNode&&(thisNoType[querySelector.attributeName]=newComponent)}))},Component.prototype.iterateOverQuerySelectors=function(action){for(var thisPrototype=Object.getPrototypeOf(this);null!=thisPrototype;){var metaData=thisPrototype.__agComponentMetaData,currentProtoName=getFunctionName(thisPrototype.constructor);metaData&&metaData[currentProtoName]&&metaData[currentProtoName].querySelectors&&metaData[currentProtoName].querySelectors.forEach((function(querySelector){return action(querySelector)})),thisPrototype=Object.getPrototypeOf(thisPrototype)}},Component.prototype.activateTabIndex=function(elements){var tabIndex=this.gridOptionsService.getNum("tabIndex")||0;elements||(elements=[]),elements.length||elements.push(this.getGui()),elements.forEach((function(el){return el.setAttribute("tabindex",tabIndex.toString())}))},Component.prototype.setTemplate=function(template,paramsMap){var eGui=loadTemplate(template);this.setTemplateFromElement(eGui,paramsMap)},Component.prototype.setTemplateFromElement=function(element,paramsMap){this.eGui=element,this.eGui.__agComponent=this,this.wireQuerySelectors(),this.getContext()&&this.createChildComponentsFromTags(this.getGui(),paramsMap)},Component.prototype.createChildComponentsPreConstruct=function(){this.getGui()&&this.createChildComponentsFromTags(this.getGui())},Component.prototype.wireQuerySelectors=function(){var _this=this;if(this.eGui){var thisNoType=this;this.iterateOverQuerySelectors((function(querySelector){var setResult=function(result){return thisNoType[querySelector.attributeName]=result};if(querySelector.refSelector&&_this.getAttribute("ref")===querySelector.refSelector)setResult(_this.eGui);else{var resultOfQuery=_this.eGui.querySelector(querySelector.querySelector);resultOfQuery&&setResult(resultOfQuery.__agComponent||resultOfQuery)}}))}},Component.prototype.getGui=function(){return this.eGui},Component.prototype.getFocusableElement=function(){return this.eGui},Component.prototype.getAriaElement=function(){return this.getFocusableElement()},Component.prototype.setParentComponent=function(component){this.parentComponent=component},Component.prototype.getParentComponent=function(){return this.parentComponent},Component.prototype.setGui=function(eGui){this.eGui=eGui},Component.prototype.queryForHtmlElement=function(cssSelector){return this.eGui.querySelector(cssSelector)},Component.prototype.queryForHtmlInputElement=function(cssSelector){return this.eGui.querySelector(cssSelector)},Component.prototype.appendChild=function(newChild,container){if(null!=newChild)if(container||(container=this.eGui),isNodeOrElement(newChild))container.appendChild(newChild);else{var childComponent=newChild;container.appendChild(childComponent.getGui())}},Component.prototype.isDisplayed=function(){return this.displayed},Component.prototype.setVisible=function(visible,options){if(void 0===options&&(options={}),visible!==this.visible){this.visible=visible;var skipAriaHidden=options.skipAriaHidden;setVisible(this.eGui,visible,{skipAriaHidden})}},Component.prototype.setDisplayed=function(displayed,options){if(void 0===options&&(options={}),displayed!==this.displayed){this.displayed=displayed;var skipAriaHidden=options.skipAriaHidden;setDisplayed(this.eGui,displayed,{skipAriaHidden});var event_1={type:Component.EVENT_DISPLAYED_CHANGED,visible:this.displayed};this.dispatchEvent(event_1)}},Component.prototype.destroy=function(){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.parentComponent&&(this.parentComponent=void 0);var eGui=this.eGui;eGui&&eGui.__agComponent&&(eGui.__agComponent=void 0),_super.prototype.destroy.call(this)},Component.prototype.addGuiEventListener=function(event,listener,options){var _this=this;this.eGui.addEventListener(event,listener,options),this.addDestroyFunc((function(){return _this.eGui.removeEventListener(event,listener)}))},Component.prototype.addCssClass=function(className){this.cssClassManager.addCssClass(className)},Component.prototype.removeCssClass=function(className){this.cssClassManager.removeCssClass(className)},Component.prototype.containsCssClass=function(className){return this.cssClassManager.containsCssClass(className)},Component.prototype.addOrRemoveCssClass=function(className,addOrRemove){this.cssClassManager.addOrRemoveCssClass(className,addOrRemove)},Component.prototype.getAttribute=function(key){var eGui=this.eGui;return eGui?eGui.getAttribute(key):null},Component.prototype.getRefElement=function(refName){return this.queryForHtmlElement('[ref="'+refName+'"]')},Component.EVENT_DISPLAYED_CHANGED="displayedChanged",__decorate$2w([Autowired("agStackComponentsRegistry")],Component.prototype,"agStackComponentsRegistry",void 0),__decorate$2w([PreConstruct],Component.prototype,"preConstructOnComponent",null),__decorate$2w([PreConstruct],Component.prototype,"createChildComponentsPreConstruct",null),Component}(BeanStub);function RefSelector(ref){return querySelectorFunc.bind(this,"[ref="+ref+"]",ref)}function querySelectorFunc(selector,refSelector,classPrototype,methodOrAttributeName,index){null!==selector?"number"!=typeof index?function addToObjectProps(target,key,value){var props=function getOrCreateProps(target,instanceName){target.__agComponentMetaData||(target.__agComponentMetaData={});target.__agComponentMetaData[instanceName]||(target.__agComponentMetaData[instanceName]={});return target.__agComponentMetaData[instanceName]}(target,getFunctionName(target.constructor));props[key]||(props[key]=[]);props[key].push(value)}(classPrototype,"querySelectors",{attributeName:methodOrAttributeName,querySelector:selector,refSelector}):console.error("AG Grid: QuerySelector should be on an attribute"):console.error("AG Grid: QuerySelector selector should not be null")}var __extends$2_=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2v=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ReadOnlyFloatingFilter=function(_super){function ReadOnlyFloatingFilter(){return _super.call(this,'\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>\n            </div>')||this}return __extends$2_(ReadOnlyFloatingFilter,_super),ReadOnlyFloatingFilter.prototype.destroy=function(){_super.prototype.destroy.call(this)},ReadOnlyFloatingFilter.prototype.init=function(params){this.params=params;var displayName=this.columnModel.getDisplayNameForColumn(params.column,"header",!0),translate=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(displayName+" "+translate("ariaFilterInput","Filter Input"))},ReadOnlyFloatingFilter.prototype.onParentModelChanged=function(parentModel){var _this=this;parentModel?this.params.parentFilterInstance((function(filterInstance){if(filterInstance.getModelAsString){var modelAsString=filterInstance.getModelAsString(parentModel);_this.eFloatingFilterText.setValue(modelAsString)}})):this.eFloatingFilterText.setValue("")},ReadOnlyFloatingFilter.prototype.onParamsUpdated=function(params){this.init(params)},__decorate$2v([RefSelector("eFloatingFilterText")],ReadOnlyFloatingFilter.prototype,"eFloatingFilterText",void 0),__decorate$2v([Autowired("columnModel")],ReadOnlyFloatingFilter.prototype,"columnModel",void 0),ReadOnlyFloatingFilter}(Component),DateCompWrapper=function(){function DateCompWrapper(context,userComponentFactory,dateComponentParams,eParent){var _this=this;this.alive=!0,this.context=context,this.eParent=eParent,userComponentFactory.getDateCompDetails(dateComponentParams).newAgStackInstance().then((function(dateComp){_this.alive?(_this.dateComp=dateComp,dateComp&&(eParent.appendChild(dateComp.getGui()),dateComp.afterGuiAttached&&dateComp.afterGuiAttached(),_this.tempValue&&dateComp.setDate(_this.tempValue),null!=_this.disabled&&_this.setDateCompDisabled(_this.disabled))):context.destroyBean(dateComp)}))}return DateCompWrapper.prototype.destroy=function(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)},DateCompWrapper.prototype.getDate=function(){return this.dateComp?this.dateComp.getDate():this.tempValue},DateCompWrapper.prototype.setDate=function(value){this.dateComp?this.dateComp.setDate(value):this.tempValue=value},DateCompWrapper.prototype.setDisabled=function(disabled){this.dateComp?this.setDateCompDisabled(disabled):this.disabled=disabled},DateCompWrapper.prototype.setDisplayed=function(displayed){setDisplayed(this.eParent,displayed)},DateCompWrapper.prototype.setInputPlaceholder=function(placeholder){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(placeholder)},DateCompWrapper.prototype.setInputAriaLabel=function(label){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(label)},DateCompWrapper.prototype.afterGuiAttached=function(params){this.dateComp&&"function"==typeof this.dateComp.afterGuiAttached&&this.dateComp.afterGuiAttached(params)},DateCompWrapper.prototype.updateParams=function(params){var _a;(null===(_a=this.dateComp)||void 0===_a?void 0:_a.onParamsUpdated)&&"function"==typeof this.dateComp.onParamsUpdated&&this.dateComp.onParamsUpdated(params)},DateCompWrapper.prototype.setDateCompDisabled=function(disabled){null!=this.dateComp&&null!=this.dateComp.setDisabled&&this.dateComp.setDisabled(disabled)},DateCompWrapper}(),OptionsFactory=function(){function OptionsFactory(){this.customFilterOptions={}}return OptionsFactory.prototype.init=function(params,defaultOptions){this.filterOptions=params.filterOptions||defaultOptions,this.mapCustomOptions(),this.selectDefaultItem(params)},OptionsFactory.prototype.getFilterOptions=function(){return this.filterOptions},OptionsFactory.prototype.mapCustomOptions=function(){var _this=this;this.filterOptions&&this.filterOptions.forEach((function(filterOption){if("string"!=typeof filterOption){[["displayKey"],["displayName"],["predicate","test"]].every((function(keys){return!!keys.some((function(key){return null!=filterOption[key]}))||(console.warn("AG Grid: ignoring FilterOptionDef as it doesn't contain one of '"+keys+"'"),!1)}))?_this.customFilterOptions[filterOption.displayKey]=filterOption:_this.filterOptions=_this.filterOptions.filter((function(v){return v===filterOption}))||[]}}))},OptionsFactory.prototype.selectDefaultItem=function(params){if(params.defaultOption)this.defaultOption=params.defaultOption;else if(this.filterOptions.length>=1){var firstFilterOption=this.filterOptions[0];"string"==typeof firstFilterOption?this.defaultOption=firstFilterOption:firstFilterOption.displayKey?this.defaultOption=firstFilterOption.displayKey:console.warn("AG Grid: invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else console.warn("AG Grid: no filter options for filter")},OptionsFactory.prototype.getDefaultOption=function(){return this.defaultOption},OptionsFactory.prototype.getCustomOption=function(name){return this.customFilterOptions[name]},OptionsFactory}(),DEFAULT_FILTER_LOCALE_TEXT={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose One",equals:"Equals",notEqual:"Not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"In range",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equals",greaterThanOrEqual:"Greater than or equals",contains:"Contains",notContains:"Not contains",startsWith:"Starts with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"},__extends$2Z=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$k=function(){return __assign$k=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$k.apply(this,arguments)},__decorate$2u=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ManagedFocusFeature=function(_super){function ManagedFocusFeature(eFocusableElement,callbacks){void 0===callbacks&&(callbacks={});var _this=_super.call(this)||this;return _this.eFocusableElement=eFocusableElement,_this.callbacks=callbacks,_this.callbacks=__assign$k({shouldStopEventPropagation:function(){return!1},onTabKeyDown:function(e){if(!e.defaultPrevented){var nextRoot=_this.focusService.findNextFocusableElement(_this.eFocusableElement,!1,e.shiftKey);nextRoot&&(nextRoot.focus(),e.preventDefault())}}},callbacks),_this}return __extends$2Z(ManagedFocusFeature,_super),ManagedFocusFeature.prototype.postConstruct=function(){this.eFocusableElement.classList.add(ManagedFocusFeature.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedListener(this.eFocusableElement,"focusin",this.callbacks.onFocusIn),this.callbacks.onFocusOut&&this.addManagedListener(this.eFocusableElement,"focusout",this.callbacks.onFocusOut)},ManagedFocusFeature.prototype.addKeyDownListeners=function(eGui){var _this=this;this.addManagedListener(eGui,"keydown",(function(e){e.defaultPrevented||isStopPropagationForAgGrid(e)||(_this.callbacks.shouldStopEventPropagation(e)?stopPropagationForAgGrid(e):e.key===KeyCode.TAB?_this.callbacks.onTabKeyDown(e):_this.callbacks.handleKeyDown&&_this.callbacks.handleKeyDown(e))}))},ManagedFocusFeature.FOCUS_MANAGED_CLASS="ag-focus-managed",__decorate$2u([Autowired("focusService")],ManagedFocusFeature.prototype,"focusService",void 0),__decorate$2u([PostConstruct],ManagedFocusFeature.prototype,"postConstruct",null),ManagedFocusFeature}(BeanStub),__extends$2Y=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2t=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},PositionableFeature=function(_super){function PositionableFeature(element,config){var _this=_super.call(this)||this;return _this.element=element,_this.dragStartPosition={x:0,y:0},_this.position={x:0,y:0},_this.lastSize={width:-1,height:-1},_this.positioned=!1,_this.resizersAdded=!1,_this.resizeListeners=[],_this.boundaryEl=null,_this.isResizing=!1,_this.isMoving=!1,_this.resizable={},_this.movable=!1,_this.currentResizer=null,_this.config=Object.assign({},{popup:!1},config),_this}return __extends$2Y(PositionableFeature,_super),PositionableFeature.prototype.center=function(){var _a=this.offsetParent,clientHeight=_a.clientHeight,x=_a.clientWidth/2-this.getWidth()/2,y=clientHeight/2-this.getHeight()/2;this.offsetElement(x,y)},PositionableFeature.prototype.initialisePosition=function(){if(!this.positioned){var _a=this.config,centered=_a.centered,forcePopupParentAsOffsetParent=_a.forcePopupParentAsOffsetParent,minWidth=_a.minWidth,width=_a.width,minHeight=_a.minHeight,height=_a.height,x=_a.x,y=_a.y;this.offsetParent||this.setOffsetParent();var computedMinHeight=0,computedMinWidth=0,isVisible=!!this.element.offsetParent;if(isVisible){var boundaryEl=this.findBoundaryElement(),offsetParentComputedStyles=window.getComputedStyle(boundaryEl);if(null!=offsetParentComputedStyles.minWidth){var paddingWidth=boundaryEl.offsetWidth-this.element.offsetWidth;computedMinWidth=parseInt(offsetParentComputedStyles.minWidth,10)-paddingWidth}if(null!=offsetParentComputedStyles.minHeight){var paddingHeight=boundaryEl.offsetHeight-this.element.offsetHeight;computedMinHeight=parseInt(offsetParentComputedStyles.minHeight,10)-paddingHeight}}if(this.minHeight=minHeight||computedMinHeight,this.minWidth=minWidth||computedMinWidth,width&&this.setWidth(width),height&&this.setHeight(height),width&&height||this.refreshSize(),centered)this.center();else if(x||y)this.offsetElement(x,y);else if(isVisible&&forcePopupParentAsOffsetParent){var initialisedDuringPositioning=!0;if((boundaryEl=this.boundaryEl)||(boundaryEl=this.findBoundaryElement(),initialisedDuringPositioning=!1),boundaryEl){var top_1=parseFloat(boundaryEl.style.top),left=parseFloat(boundaryEl.style.left);initialisedDuringPositioning?this.offsetElement(isNaN(left)?0:left,isNaN(top_1)?0:top_1):this.setPosition(left,top_1)}}this.positioned=!!this.offsetParent}},PositionableFeature.prototype.isPositioned=function(){return this.positioned},PositionableFeature.prototype.getPosition=function(){return this.position},PositionableFeature.prototype.setMovable=function(movable,moveElement){if(this.config.popup&&movable!==this.movable){this.movable=movable;var params=this.moveElementDragListener||{eElement:moveElement,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};movable?(this.dragService.addDragSource(params),this.moveElementDragListener=params):(this.dragService.removeDragSource(params),this.moveElementDragListener=void 0)}},PositionableFeature.prototype.setResizable=function(resizable){var _this=this;if(this.clearResizeListeners(),resizable?this.addResizers():this.removeResizers(),"boolean"==typeof resizable){if(!1===resizable)return;resizable={topLeft:resizable,top:resizable,topRight:resizable,right:resizable,bottomRight:resizable,bottom:resizable,bottomLeft:resizable,left:resizable}}Object.keys(resizable).forEach((function(side){var isSideResizable=!!resizable[side],resizerEl=_this.getResizerElement(side),params={dragStartPixels:0,eElement:resizerEl,onDragStart:function(e){return _this.onResizeStart(e,side)},onDragging:_this.onResize.bind(_this),onDragStop:function(e){return _this.onResizeEnd(e,side)}};(isSideResizable||!_this.isAlive()&&!isSideResizable)&&(isSideResizable?(_this.dragService.addDragSource(params),_this.resizeListeners.push(params),resizerEl.style.pointerEvents="all"):resizerEl.style.pointerEvents="none",_this.resizable[side]=isSideResizable)}))},PositionableFeature.prototype.removeSizeFromEl=function(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")},PositionableFeature.prototype.restoreLastSize=function(){this.element.style.flex="0 0 auto";var _a=this.lastSize,height=_a.height,width=_a.width;-1!==width&&(this.element.style.width=width+"px"),-1!==height&&(this.element.style.height=height+"px")},PositionableFeature.prototype.getHeight=function(){return this.element.offsetHeight},PositionableFeature.prototype.setHeight=function(height){var popup=this.config.popup,eGui=this.element,isPercent=!1;if("string"==typeof height&&-1!==height.indexOf("%"))setFixedHeight(eGui,height),height=getAbsoluteHeight(eGui),isPercent=!0;else if(height=Math.max(this.minHeight,height),this.positioned){var availableHeight=this.getAvailableHeight();availableHeight&&height>availableHeight&&(height=availableHeight)}this.getHeight()!==height&&(isPercent?(eGui.style.maxHeight="unset",eGui.style.minHeight="unset"):popup?setFixedHeight(eGui,height):(eGui.style.height=height+"px",eGui.style.flex="0 0 auto",this.lastSize.height="number"==typeof height?height:parseFloat(height)))},PositionableFeature.prototype.getAvailableHeight=function(){var _a=this.config,popup=_a.popup,forcePopupParentAsOffsetParent=_a.forcePopupParentAsOffsetParent;this.positioned||this.initialisePosition();var clientHeight=this.offsetParent.clientHeight;if(!clientHeight)return null;var elRect=this.element.getBoundingClientRect(),offsetParentRect=this.offsetParent.getBoundingClientRect(),yPosition=popup?this.position.y:elRect.top,parentTop=popup?0:offsetParentRect.top,additionalHeight=0;if(forcePopupParentAsOffsetParent){var parentEl=this.element.parentElement;if(parentEl)additionalHeight=parentEl.getBoundingClientRect().bottom-elRect.bottom}return clientHeight+parentTop-yPosition-additionalHeight},PositionableFeature.prototype.getWidth=function(){return this.element.offsetWidth},PositionableFeature.prototype.setWidth=function(width){var eGui=this.element,popup=this.config.popup,isPercent=!1;if("string"==typeof width&&-1!==width.indexOf("%"))setFixedWidth(eGui,width),width=getAbsoluteWidth(eGui),isPercent=!0;else if(this.positioned){width=Math.max(this.minWidth,width);var clientWidth=this.offsetParent.clientWidth,xPosition=popup?this.position.x:this.element.getBoundingClientRect().left;clientWidth&&width+xPosition>clientWidth&&(width=clientWidth-xPosition)}this.getWidth()!==width&&(isPercent?(eGui.style.maxWidth="unset",eGui.style.minWidth="unset"):this.config.popup?setFixedWidth(eGui,width):(eGui.style.width=width+"px",eGui.style.flex=" unset",this.lastSize.width="number"==typeof width?width:parseFloat(width)))},PositionableFeature.prototype.offsetElement=function(x,y){void 0===x&&(x=0),void 0===y&&(y=0);var ePopup=this.config.forcePopupParentAsOffsetParent?this.boundaryEl:this.element;ePopup&&(this.popupService.positionPopup({ePopup,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:function(){return{x,y}}}),this.setPosition(parseFloat(ePopup.style.left),parseFloat(ePopup.style.top)))},PositionableFeature.prototype.constrainSizeToAvailableHeight=function(constrain){var _this=this;if(this.config.forcePopupParentAsOffsetParent){constrain?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),(function(){var availableHeight=_this.getAvailableHeight();_this.element.style.setProperty("max-height",availableHeight+"px")})):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}},PositionableFeature.prototype.setPosition=function(x,y){this.position.x=x,this.position.y=y},PositionableFeature.prototype.updateDragStartPosition=function(x,y){this.dragStartPosition={x,y}},PositionableFeature.prototype.calculateMouseMovement=function(params){var e=params.e,isLeft=params.isLeft,isTop=params.isTop,anywhereWithin=params.anywhereWithin,topBuffer=params.topBuffer,xDiff=e.clientX-this.dragStartPosition.x,yDiff=e.clientY-this.dragStartPosition.y;return{movementX:this.shouldSkipX(e,!!isLeft,!!anywhereWithin,xDiff)?0:xDiff,movementY:this.shouldSkipY(e,!!isTop,topBuffer,yDiff)?0:yDiff}},PositionableFeature.prototype.shouldSkipX=function(e,isLeft,anywhereWithin,diff){var elRect=this.element.getBoundingClientRect(),parentRect=this.offsetParent.getBoundingClientRect(),boundaryElRect=this.boundaryEl.getBoundingClientRect(),xPosition=this.config.popup?this.position.x:elRect.left,skipX=xPosition<=0&&parentRect.left>=e.clientX||parentRect.right<=e.clientX&&parentRect.right<=boundaryElRect.right;return!!skipX||(skipX=isLeft?diff<0&&e.clientX>xPosition+parentRect.left||diff>0&&e.clientX<xPosition+parentRect.left:anywhereWithin?diff<0&&e.clientX>boundaryElRect.right||diff>0&&e.clientX<xPosition+parentRect.left:diff<0&&e.clientX>boundaryElRect.right||diff>0&&e.clientX<boundaryElRect.right)},PositionableFeature.prototype.shouldSkipY=function(e,isTop,topBuffer,diff){void 0===topBuffer&&(topBuffer=0);var elRect=this.element.getBoundingClientRect(),parentRect=this.offsetParent.getBoundingClientRect(),boundaryElRect=this.boundaryEl.getBoundingClientRect(),yPosition=this.config.popup?this.position.y:elRect.top,skipY=yPosition<=0&&parentRect.top>=e.clientY||parentRect.bottom<=e.clientY&&parentRect.bottom<=boundaryElRect.bottom;return!!skipY||(skipY=isTop?diff<0&&e.clientY>yPosition+parentRect.top+topBuffer||diff>0&&e.clientY<yPosition+parentRect.top:diff<0&&e.clientY>boundaryElRect.bottom||diff>0&&e.clientY<boundaryElRect.bottom)},PositionableFeature.prototype.createResizeMap=function(){var eGui=this.element;this.resizerMap={topLeft:{element:eGui.querySelector("[ref=eTopLeftResizer]")},top:{element:eGui.querySelector("[ref=eTopResizer]")},topRight:{element:eGui.querySelector("[ref=eTopRightResizer]")},right:{element:eGui.querySelector("[ref=eRightResizer]")},bottomRight:{element:eGui.querySelector("[ref=eBottomRightResizer]")},bottom:{element:eGui.querySelector("[ref=eBottomResizer]")},bottomLeft:{element:eGui.querySelector("[ref=eBottomLeftResizer]")},left:{element:eGui.querySelector("[ref=eLeftResizer]")}}},PositionableFeature.prototype.addResizers=function(){if(!this.resizersAdded){var eGui=this.element;if(eGui){var resizers=(new DOMParser).parseFromString('<div class="ag-resizer-wrapper">\n        <div ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>\n        <div ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>\n        <div ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>\n        <div ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>\n        <div ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>\n        <div ref="eBottomResizer" class="ag-resizer ag-resizer-bottom"></div>\n        <div ref="eBottomLeftResizer" class="ag-resizer ag-resizer-bottomLeft"></div>\n        <div ref="eLeftResizer" class="ag-resizer ag-resizer-left"></div>\n    </div>',"text/html").body;eGui.appendChild(resizers.firstChild),this.createResizeMap(),this.resizersAdded=!0}}},PositionableFeature.prototype.removeResizers=function(){this.resizerMap=void 0;var resizerEl=this.element.querySelector(".ag-resizer-wrapper");resizerEl&&this.element.removeChild(resizerEl),this.resizersAdded=!1},PositionableFeature.prototype.getResizerElement=function(side){return this.resizerMap[side].element},PositionableFeature.prototype.onResizeStart=function(e,side){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!side.match(/top/i),isRight:!!side.match(/right/i),isBottom:!!side.match(/bottom/i),isLeft:!!side.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[side].element.classList.add("ag-active");var _a=this.config,popup=_a.popup,forcePopupParentAsOffsetParent=_a.forcePopupParentAsOffsetParent;popup||forcePopupParentAsOffsetParent||this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)},PositionableFeature.prototype.getSiblings=function(){var parent=this.element.parentElement;return parent?Array.prototype.slice.call(parent.children).filter((function(el){return!el.classList.contains("ag-hidden")})):null},PositionableFeature.prototype.getMinSizeOfSiblings=function(){for(var siblings=this.getSiblings()||[],height=0,width=0,i=0;i<siblings.length;i++){var currentEl=siblings[i],isFlex=!!currentEl.style.flex&&"0 0 auto"!==currentEl.style.flex;if(currentEl!==this.element){var nextHeight=this.minHeight||0,nextWidth=this.minWidth||0;if(isFlex){var computedStyle=window.getComputedStyle(currentEl);computedStyle.minHeight&&(nextHeight=parseInt(computedStyle.minHeight,10)),computedStyle.minWidth&&(nextWidth=parseInt(computedStyle.minWidth,10))}else nextHeight=currentEl.offsetHeight,nextWidth=currentEl.offsetWidth;height+=nextHeight,width+=nextWidth}}return{height,width}},PositionableFeature.prototype.applySizeToSiblings=function(vertical){var containerToFlex=null,siblings=this.getSiblings();if(siblings){for(var i=0;i<siblings.length;i++){var el=siblings[i];el!==containerToFlex&&(vertical?el.style.height=el.offsetHeight+"px":el.style.width=el.offsetWidth+"px",el.style.flex="0 0 auto",el===this.element&&(containerToFlex=siblings[i+1]))}containerToFlex&&(containerToFlex.style.removeProperty("height"),containerToFlex.style.removeProperty("min-height"),containerToFlex.style.removeProperty("max-height"),containerToFlex.style.flex="1 1 auto")}},PositionableFeature.prototype.isResizable=function(){return Object.values(this.resizable).some((function(value){return value}))},PositionableFeature.prototype.onResize=function(e){if(this.isResizing&&this.currentResizer){var _a=this.config,popup=_a.popup,forcePopupParentAsOffsetParent=_a.forcePopupParentAsOffsetParent,_b=this.currentResizer,isTop=_b.isTop,isRight=_b.isRight,isBottom=_b.isBottom,isLeft=_b.isLeft,isHorizontal=isRight||isLeft,isVertical=isBottom||isTop,_c=this.calculateMouseMovement({e,isLeft,isTop}),movementX=_c.movementX,movementY=_c.movementY,xPosition=this.position.x,yPosition=this.position.y,offsetLeft=0,offsetTop=0;if(isHorizontal&&movementX){var direction=isLeft?-1:1,oldWidth=this.getWidth(),newWidth=oldWidth+movementX*direction,skipWidth=!1;isLeft&&(xPosition+(offsetLeft=oldWidth-newWidth)<=0||newWidth<=this.minWidth)&&(skipWidth=!0,offsetLeft=0),skipWidth||this.setWidth(newWidth)}if(isVertical&&movementY){direction=isTop?-1:1;var oldHeight=this.getHeight(),newHeight=oldHeight+movementY*direction,skipHeight=!1;isTop?(yPosition+(offsetTop=oldHeight-newHeight)<=0||newHeight<=this.minHeight)&&(skipHeight=!0,offsetTop=0):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&oldHeight<newHeight&&this.getMinSizeOfSiblings().height+newHeight>this.element.parentElement.offsetHeight&&(skipHeight=!0),skipHeight||this.setHeight(newHeight)}this.updateDragStartPosition(e.clientX,e.clientY),((popup||forcePopupParentAsOffsetParent)&&offsetLeft||offsetTop)&&this.offsetElement(xPosition+offsetLeft,yPosition+offsetTop)}},PositionableFeature.prototype.onResizeEnd=function(e,side){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null;var params={type:"resize",api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi};this.element.classList.remove("ag-resizing"),this.resizerMap[side].element.classList.remove("ag-active"),this.dispatchEvent(params)},PositionableFeature.prototype.refreshSize=function(){var eGui=this.element;this.config.popup&&(this.config.width||this.setWidth(eGui.offsetWidth),this.config.height||this.setHeight(eGui.offsetHeight))},PositionableFeature.prototype.onMoveStart=function(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)},PositionableFeature.prototype.onMove=function(e){if(this.isMoving){var topBuffer,_a=this.position,x=_a.x,y=_a.y;this.config.calculateTopBuffer&&(topBuffer=this.config.calculateTopBuffer());var _b=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer}),movementX=_b.movementX,movementY=_b.movementY;this.offsetElement(x+movementX,y+movementY),this.updateDragStartPosition(e.clientX,e.clientY)}},PositionableFeature.prototype.onMoveEnd=function(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")},PositionableFeature.prototype.setOffsetParent=function(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent},PositionableFeature.prototype.findBoundaryElement=function(){for(var el=this.element;el;){if("static"!==window.getComputedStyle(el).position)return el;el=el.parentElement}return this.element},PositionableFeature.prototype.clearResizeListeners=function(){for(;this.resizeListeners.length;){var params=this.resizeListeners.pop();this.dragService.removeDragSource(params)}},PositionableFeature.prototype.destroy=function(){_super.prototype.destroy.call(this),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()},__decorate$2t([Autowired("popupService")],PositionableFeature.prototype,"popupService",void 0),__decorate$2t([Autowired("resizeObserverService")],PositionableFeature.prototype,"resizeObserverService",void 0),__decorate$2t([Autowired("dragService")],PositionableFeature.prototype,"dragService",void 0),PositionableFeature}(BeanStub),__extends$2X=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2s=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ProvidedFilter=function(_super){function ProvidedFilter(filterNameKey){var _this=_super.call(this)||this;return _this.filterNameKey=filterNameKey,_this.applyActive=!1,_this.hidePopup=null,_this.debouncePending=!1,_this.appliedModel=null,_this}return __extends$2X(ProvidedFilter,_super),ProvidedFilter.prototype.postConstruct=function(){this.resetTemplate(),this.createManagedBean(new ManagedFocusFeature(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new PositionableFeature(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)},ProvidedFilter.prototype.handleKeyDown=function(e){},ProvidedFilter.prototype.getFilterTitle=function(){return this.translate(this.filterNameKey)},ProvidedFilter.prototype.isFilterActive=function(){return!!this.appliedModel},ProvidedFilter.prototype.resetTemplate=function(paramsMap){var eGui=this.getGui();eGui&&eGui.removeEventListener("submit",this.onFormSubmit);var templateString='\n            <form class="ag-filter-wrapper">\n                <div class="ag-filter-body-wrapper ag-'+this.getCssIdentifier()+'-body-wrapper" ref="eFilterBody">\n                    '+this.createBodyTemplate()+"\n                </div>\n            </form>";this.setTemplate(templateString,paramsMap),(eGui=this.getGui())&&eGui.addEventListener("submit",this.onFormSubmit)},ProvidedFilter.prototype.isReadOnly=function(){return!!this.providedFilterParams.readOnly},ProvidedFilter.prototype.init=function(params){var _this=this;this.setParams(params),this.resetUiToDefaults(!0).then((function(){_this.updateUiVisibility(),_this.setupOnBtApplyDebounce()}))},ProvidedFilter.prototype.setParams=function(params){this.providedFilterParams=params,this.applyActive=ProvidedFilter.isUseApplyButton(params),this.createButtonPanel()},ProvidedFilter.prototype.createButtonPanel=function(){var _this=this,buttons=this.providedFilterParams.buttons;if(!(!buttons||buttons.length<1||this.isReadOnly())){var eButtonsPanel=document.createElement("div");eButtonsPanel.classList.add("ag-filter-apply-panel");convertToSet(buttons).forEach((function(type){return function(type){var text,clickListener;switch(type){case"apply":text=_this.translate("applyFilter"),clickListener=function(e){return _this.onBtApply(!1,!1,e)};break;case"clear":text=_this.translate("clearFilter"),clickListener=function(){return _this.onBtClear()};break;case"reset":text=_this.translate("resetFilter"),clickListener=function(){return _this.onBtReset()};break;case"cancel":text=_this.translate("cancelFilter"),clickListener=function(e){_this.onBtCancel(e)};break;default:return void console.warn("AG Grid: Unknown button type specified")}var button=loadTemplate('<button\n                    type="'+("apply"===type?"submit":"button")+'"\n                    ref="'+type+'FilterButton"\n                    class="ag-button ag-standard-button ag-filter-apply-panel-button"\n                >'+text+"\n                </button>");eButtonsPanel.appendChild(button),_this.addManagedListener(button,"click",clickListener)}(type)})),this.getGui().appendChild(eButtonsPanel)}},ProvidedFilter.prototype.getDefaultDebounceMs=function(){return 0},ProvidedFilter.prototype.setupOnBtApplyDebounce=function(){var _this=this,debounceMs=ProvidedFilter.getDebounceMs(this.providedFilterParams,this.getDefaultDebounceMs()),debounceFunc=debounce(this.checkApplyDebounce.bind(this),debounceMs);this.onBtApplyDebounce=function(){_this.debouncePending=!0,debounceFunc()}},ProvidedFilter.prototype.checkApplyDebounce=function(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())},ProvidedFilter.prototype.getModel=function(){return this.appliedModel?this.appliedModel:null},ProvidedFilter.prototype.setModel=function(model){var _this=this;return(null!=model?this.setModelIntoUi(model):this.resetUiToDefaults()).then((function(){_this.updateUiVisibility(),_this.applyModel("api")}))},ProvidedFilter.prototype.onBtCancel=function(e){var _this=this;this.resetUiToActiveModel(this.getModel(),(function(){_this.handleCancelEnd(e)}))},ProvidedFilter.prototype.handleCancelEnd=function(e){this.providedFilterParams.closeOnApply&&this.close(e)},ProvidedFilter.prototype.resetUiToActiveModel=function(currentModel,afterUiUpdatedFunc){var _this=this,afterAppliedFunc=function(){_this.onUiChanged(!1,"prevent"),null==afterUiUpdatedFunc||afterUiUpdatedFunc()};null!=currentModel?this.setModelIntoUi(currentModel).then(afterAppliedFunc):this.resetUiToDefaults().then(afterAppliedFunc)},ProvidedFilter.prototype.onBtClear=function(){var _this=this;this.resetUiToDefaults().then((function(){return _this.onUiChanged()}))},ProvidedFilter.prototype.onBtReset=function(){this.onBtClear(),this.onBtApply()},ProvidedFilter.prototype.applyModel=function(source){var newModel=this.getModelFromUi();if(!this.isModelValid(newModel))return!1;var previousModel=this.appliedModel;return this.appliedModel=newModel,!this.areModelsEqual(previousModel,newModel)},ProvidedFilter.prototype.isModelValid=function(model){return!0},ProvidedFilter.prototype.onFormSubmit=function(e){e.preventDefault()},ProvidedFilter.prototype.onBtApply=function(afterFloatingFilter,afterDataChange,e){if(void 0===afterFloatingFilter&&(afterFloatingFilter=!1),void 0===afterDataChange&&(afterDataChange=!1),e&&e.preventDefault(),this.applyModel(afterDataChange?"rowDataUpdated":"ui")){this.providedFilterParams.filterChangedCallback({afterFloatingFilter,afterDataChange,source:"columnFilter"})}this.providedFilterParams.closeOnApply&&this.applyActive&&!afterFloatingFilter&&!afterDataChange&&this.close(e)},ProvidedFilter.prototype.onNewRowsLoaded=function(){},ProvidedFilter.prototype.close=function(e){if(this.hidePopup){var params,keyboardEvent=e,key=keyboardEvent&&keyboardEvent.key;"Enter"!==key&&"Space"!==key||(params={keyboardEvent}),this.hidePopup(params),this.hidePopup=null}},ProvidedFilter.prototype.onUiChanged=function(fromFloatingFilter,apply){if(void 0===fromFloatingFilter&&(fromFloatingFilter=!1),this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){var isValid=this.isModelValid(this.getModelFromUi());setDisabled(this.getRefElement("applyFilterButton"),!isValid)}fromFloatingFilter&&!apply||"immediately"===apply?this.onBtApply(fromFloatingFilter):(this.applyActive||apply)&&"debounce"!==apply||this.onBtApplyDebounce()},ProvidedFilter.prototype.afterGuiAttached=function(params){params&&(this.hidePopup=params.hidePopup),this.refreshFilterResizer(null==params?void 0:params.container)},ProvidedFilter.prototype.refreshFilterResizer=function(containerType){if(this.positionableFeature&&"toolPanel"!==containerType){var isFloatingFilter="floatingFilter"===containerType,positionableFeature=this.positionableFeature,gridOptionsService=this.gridOptionsService;isFloatingFilter?(positionableFeature.restoreLastSize(),positionableFeature.setResizable(gridOptionsService.is("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}},ProvidedFilter.prototype.afterGuiDetached=function(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)},ProvidedFilter.getDebounceMs=function(params,debounceDefault){return ProvidedFilter.isUseApplyButton(params)?(null!=params.debounceMs&&console.warn("AG Grid: debounceMs is ignored when apply button is present"),0):null!=params.debounceMs?params.debounceMs:debounceDefault},ProvidedFilter.isUseApplyButton=function(params){return!!params.buttons&&params.buttons.indexOf("apply")>=0},ProvidedFilter.prototype.destroy=function(){var eGui=this.getGui();eGui&&eGui.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),_super.prototype.destroy.call(this)},ProvidedFilter.prototype.translate=function(key){return this.localeService.getLocaleTextFunc()(key,DEFAULT_FILTER_LOCALE_TEXT[key])},ProvidedFilter.prototype.getCellValue=function(rowNode){var _a=this.providedFilterParams,api=_a.api,colDef=_a.colDef,column=_a.column,columnApi=_a.columnApi,context=_a.context;return this.providedFilterParams.valueGetter({api,colDef,column,columnApi,context,data:rowNode.data,getValue:function(field){return rowNode.data[field]},node:rowNode})},ProvidedFilter.prototype.getPositionableElement=function(){return this.eFilterBody},__decorate$2s([Autowired("rowModel")],ProvidedFilter.prototype,"rowModel",void 0),__decorate$2s([RefSelector("eFilterBody")],ProvidedFilter.prototype,"eFilterBody",void 0),__decorate$2s([PostConstruct],ProvidedFilter.prototype,"postConstruct",null),ProvidedFilter}(Component),__extends$2W=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgAbstractLabel=function(_super){function AgAbstractLabel(config,template){var _this=_super.call(this,template)||this;return _this.labelSeparator="",_this.labelAlignment="left",_this.disabled=!1,_this.label="",_this.config=config||{},_this}return __extends$2W(AgAbstractLabel,_super),AgAbstractLabel.prototype.postConstruct=function(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");var _a=this.config,labelSeparator=_a.labelSeparator,label=_a.label,labelWidth=_a.labelWidth,labelAlignment=_a.labelAlignment;null!=labelSeparator&&this.setLabelSeparator(labelSeparator),null!=label&&this.setLabel(label),null!=labelWidth&&this.setLabelWidth(labelWidth),this.setLabelAlignment(labelAlignment||this.labelAlignment),this.refreshLabel()},AgAbstractLabel.prototype.refreshLabel=function(){clearElement(this.eLabel),"string"==typeof this.label?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),""===this.label?(setDisplayed(this.eLabel,!1),setAriaRole(this.eLabel,"presentation")):(setDisplayed(this.eLabel,!0),setAriaRole(this.eLabel,null))},AgAbstractLabel.prototype.setLabelSeparator=function(labelSeparator){return this.labelSeparator===labelSeparator||(this.labelSeparator=labelSeparator,null!=this.label&&this.refreshLabel()),this},AgAbstractLabel.prototype.getLabelId=function(){return this.eLabel.id=this.eLabel.id||"ag-"+this.getCompId()+"-label",this.eLabel.id},AgAbstractLabel.prototype.getLabel=function(){return this.label},AgAbstractLabel.prototype.setLabel=function(label){return this.label===label||(this.label=label,this.refreshLabel()),this},AgAbstractLabel.prototype.setLabelAlignment=function(alignment){var eGuiClassList=this.getGui().classList;return eGuiClassList.toggle("ag-label-align-left","left"===alignment),eGuiClassList.toggle("ag-label-align-right","right"===alignment),eGuiClassList.toggle("ag-label-align-top","top"===alignment),this},AgAbstractLabel.prototype.setLabelEllipsis=function(hasEllipsis){return this.eLabel.classList.toggle("ag-label-ellipsis",hasEllipsis),this},AgAbstractLabel.prototype.setLabelWidth=function(width){return null==this.label||setElementWidth(this.eLabel,width),this},AgAbstractLabel.prototype.setDisabled=function(disabled){disabled=!!disabled;var element=this.getGui();return setDisabled(element,disabled),element.classList.toggle("ag-disabled",disabled),this.disabled=disabled,this},AgAbstractLabel.prototype.isDisabled=function(){return!!this.disabled},function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([PostConstruct],AgAbstractLabel.prototype,"postConstruct",null),AgAbstractLabel}(Component),__extends$2V=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgAbstractField=function(_super){function AgAbstractField(config,template,className){var _this=_super.call(this,config,template)||this;return _this.className=className,_this}return __extends$2V(AgAbstractField,_super),AgAbstractField.prototype.postConstruct=function(){_super.prototype.postConstruct.call(this),this.className&&this.addCssClass(this.className)},AgAbstractField.prototype.onValueChange=function(callbackFn){var _this=this;return this.addManagedListener(this,Events.EVENT_FIELD_VALUE_CHANGED,(function(){return callbackFn(_this.getValue())})),this},AgAbstractField.prototype.getWidth=function(){return this.getGui().clientWidth},AgAbstractField.prototype.setWidth=function(width){return setFixedWidth(this.getGui(),width),this},AgAbstractField.prototype.getPreviousValue=function(){return this.previousValue},AgAbstractField.prototype.getValue=function(){return this.value},AgAbstractField.prototype.setValue=function(value,silent){return this.value===value||(this.previousValue=this.value,this.value=value,silent||this.dispatchEvent({type:Events.EVENT_FIELD_VALUE_CHANGED})),this},AgAbstractField}(AgAbstractLabel),__extends$2U=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2q=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AgPickerField=function(_super){function AgPickerField(config){var _this=_super.call(this,config,(null==config?void 0:config.template)||'\n    <div class="ag-picker-field" role="presentation">\n        <div ref="eLabel"></div>\n            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">\n            <div ref="eDisplayField" class="ag-picker-field-display"></div>\n            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n        </div>\n    </div>',null==config?void 0:config.className)||this;if(_this.isPickerDisplayed=!1,_this.skipClick=!1,_this.pickerGap=4,_this.hideCurrentPicker=null,_this.ariaRole=null==config?void 0:config.ariaRole,_this.onPickerFocusIn=_this.onPickerFocusIn.bind(_this),_this.onPickerFocusOut=_this.onPickerFocusOut.bind(_this),!config)return _this;var pickerGap=config.pickerGap,maxPickerHeight=config.maxPickerHeight,variableWidth=config.variableWidth,minPickerWidth=config.minPickerWidth,maxPickerWidth=config.maxPickerWidth;return null!=pickerGap&&(_this.pickerGap=pickerGap),_this.variableWidth=!!variableWidth,null!=maxPickerHeight&&_this.setPickerMaxHeight(maxPickerHeight),null!=minPickerWidth&&_this.setPickerMinWidth(minPickerWidth),null!=maxPickerWidth&&_this.setPickerMaxWidth(maxPickerWidth),_this}return __extends$2U(AgPickerField,_super),AgPickerField.prototype.postConstruct=function(){_super.prototype.postConstruct.call(this),this.setupAria();var displayId="ag-"+this.getCompId()+"-display";this.eDisplayField.setAttribute("id",displayId);var ariaEl=this.getAriaElement();setAriaDescribedBy(ariaEl,displayId),this.addManagedListener(ariaEl,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(this.eLabel,"mousedown",this.onLabelOrWrapperMouseDown.bind(this)),this.addManagedListener(this.eWrapper,"mousedown",this.onLabelOrWrapperMouseDown.bind(this));var pickerIcon=this.config.pickerIcon;if(pickerIcon){var icon=createIconNoSpan(pickerIcon,this.gridOptionsService);icon&&this.eIcon.appendChild(icon)}},AgPickerField.prototype.setupAria=function(){var ariaEl=this.getAriaElement();ariaEl.setAttribute("tabindex",(this.gridOptionsService.getNum("tabIndex")||0).toString()),setAriaExpanded(ariaEl,!1),this.ariaRole&&setAriaRole(ariaEl,this.ariaRole)},AgPickerField.prototype.refreshLabel=function(){var _a;setAriaLabelledBy(this.getAriaElement(),null!==(_a=this.getLabelId())&&void 0!==_a?_a:""),_super.prototype.refreshLabel.call(this)},AgPickerField.prototype.onLabelOrWrapperMouseDown=function(e){e&&(e.preventDefault(),this.getFocusableElement().focus()),this.skipClick?this.skipClick=!1:this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())},AgPickerField.prototype.onKeyDown=function(e){switch(e.key){case KeyCode.UP:case KeyCode.DOWN:case KeyCode.ENTER:case KeyCode.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case KeyCode.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker())}},AgPickerField.prototype.showPicker=function(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());var pickerGui=this.pickerComponent.getGui();pickerGui.addEventListener("focusin",this.onPickerFocusIn),pickerGui.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)},AgPickerField.prototype.renderAndPositionPicker=function(){var _this=this,eDocument=this.gridOptionsService.getDocument(),ePicker=this.pickerComponent.getGui();this.gridOptionsService.is("suppressScrollWhenPopupsAreOpen")||(this.destroyMouseWheelFunc=this.addManagedListener(eDocument.body,"wheel",(function(e){ePicker.contains(e.target)||_this.hidePicker()})));var translate=this.localeService.getLocaleTextFunc(),_a=this.config,pickerType=_a.pickerType,pickerAriaLabelKey=_a.pickerAriaLabelKey,pickerAriaLabelValue=_a.pickerAriaLabelValue,_b=_a.modalPicker,popupParams={modal:void 0===_b||_b,eChild:ePicker,closeOnEsc:!0,closedCallback:function(){var shouldRestoreFocus=eDocument.activeElement===eDocument.body;_this.beforeHidePicker(),shouldRestoreFocus&&_this.isAlive()&&_this.getFocusableElement().focus()},ariaLabel:translate(pickerAriaLabelKey,pickerAriaLabelValue)},addPopupRes=this.popupService.addPopup(popupParams),_c=this,maxPickerHeight=_c.maxPickerHeight,minPickerWidth=_c.minPickerWidth,maxPickerWidth=_c.maxPickerWidth,pickerGap=_c.pickerGap;_c.variableWidth?(minPickerWidth&&(ePicker.style.minWidth=minPickerWidth),ePicker.style.width=formatSize(getAbsoluteWidth(this.eWrapper)),maxPickerWidth&&(ePicker.style.maxWidth=maxPickerWidth)):setElementWidth(ePicker,null!=maxPickerWidth?maxPickerWidth:getAbsoluteWidth(this.eWrapper));var maxHeight=null!=maxPickerHeight?maxPickerHeight:getInnerHeight(this.popupService.getPopupParent())+"px";ePicker.style.setProperty("max-height",maxHeight),ePicker.style.position="absolute";var alignSide=this.gridOptionsService.is("enableRtl")?"right":"left";return this.popupService.positionPopupByComponent({type:pickerType,eventSource:this.eWrapper,ePopup:ePicker,position:"under",alignSide,keepWithinBounds:!0,nudgeY:pickerGap}),addPopupRes.hideFunc},AgPickerField.prototype.beforeHidePicker=function(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);var pickerGui=this.pickerComponent.getGui();pickerGui.removeEventListener("focusin",this.onPickerFocusIn),pickerGui.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null},AgPickerField.prototype.toggleExpandedStyles=function(expanded){this.isAlive()&&(setAriaExpanded(this.getAriaElement(),expanded),this.eWrapper.classList.toggle("ag-picker-expanded",expanded),this.eWrapper.classList.toggle("ag-picker-collapsed",!expanded))},AgPickerField.prototype.onPickerFocusIn=function(){this.togglePickerHasFocus(!0)},AgPickerField.prototype.onPickerFocusOut=function(e){var _a;(null===(_a=this.pickerComponent)||void 0===_a?void 0:_a.getGui().contains(e.relatedTarget))||this.togglePickerHasFocus(!1)},AgPickerField.prototype.togglePickerHasFocus=function(focused){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",focused)},AgPickerField.prototype.hidePicker=function(){this.hideCurrentPicker&&this.hideCurrentPicker()},AgPickerField.prototype.setAriaLabel=function(label){return setAriaLabel(this.getAriaElement(),label),this},AgPickerField.prototype.setInputWidth=function(width){return setElementWidth(this.eWrapper,width),this},AgPickerField.prototype.getFocusableElement=function(){return this.eWrapper},AgPickerField.prototype.setPickerGap=function(gap){return this.pickerGap=gap,this},AgPickerField.prototype.setPickerMinWidth=function(width){return"number"==typeof width&&(width+="px"),this.minPickerWidth=null==width?void 0:width,this},AgPickerField.prototype.setPickerMaxWidth=function(width){return"number"==typeof width&&(width+="px"),this.maxPickerWidth=null==width?void 0:width,this},AgPickerField.prototype.setPickerMaxHeight=function(height){return"number"==typeof height&&(height+="px"),this.maxPickerHeight=null==height?void 0:height,this},AgPickerField.prototype.destroy=function(){this.hidePicker(),_super.prototype.destroy.call(this)},__decorate$2q([Autowired("popupService")],AgPickerField.prototype,"popupService",void 0),__decorate$2q([RefSelector("eLabel")],AgPickerField.prototype,"eLabel",void 0),__decorate$2q([RefSelector("eWrapper")],AgPickerField.prototype,"eWrapper",void 0),__decorate$2q([RefSelector("eDisplayField")],AgPickerField.prototype,"eDisplayField",void 0),__decorate$2q([RefSelector("eIcon")],AgPickerField.prototype,"eIcon",void 0),AgPickerField}(AgAbstractField),__extends$2T=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgList=function(_super){function AgList(cssIdentifier){void 0===cssIdentifier&&(cssIdentifier="default");var _this=_super.call(this,'<div class="ag-list ag-'+cssIdentifier+'-list" role="listbox"></div>')||this;return _this.cssIdentifier=cssIdentifier,_this.options=[],_this.itemEls=[],_this}return __extends$2T(AgList,_super),AgList.prototype.init=function(){this.addManagedListener(this.getGui(),"keydown",this.handleKeyDown.bind(this))},AgList.prototype.handleKeyDown=function(e){var key=e.key;switch(key){case KeyCode.ENTER:if(this.highlightedEl){var pos=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(pos)}else this.setValue(this.getValue());break;case KeyCode.DOWN:case KeyCode.UP:var isDown=key===KeyCode.DOWN,itemToHighlight=void 0;if(e.preventDefault(),this.highlightedEl){var nextPos=this.itemEls.indexOf(this.highlightedEl)+(isDown?1:-1);nextPos=Math.min(Math.max(nextPos,0),this.itemEls.length-1),itemToHighlight=this.itemEls[nextPos]}else itemToHighlight=this.itemEls[isDown?0:this.itemEls.length-1];this.highlightItem(itemToHighlight)}},AgList.prototype.addOptions=function(listOptions){var _this=this;return listOptions.forEach((function(listOption){return _this.addOption(listOption)})),this},AgList.prototype.addOption=function(listOption){var value=listOption.value,sanitisedText=escapeString(listOption.text||value);return this.options.push({value,text:sanitisedText}),this.renderOption(value,sanitisedText),this.updateIndices(),this},AgList.prototype.updateIndices=function(){var options=this.getGui().querySelectorAll(".ag-list-item");options.forEach((function(option,idx){setAriaPosInSet(option,idx+1),setAriaSetSize(option,options.length)}))},AgList.prototype.renderOption=function(value,text){var _this=this,itemEl=document.createElement("div");setAriaRole(itemEl,"option"),itemEl.classList.add("ag-list-item","ag-"+this.cssIdentifier+"-list-item"),itemEl.innerHTML="<span>"+text+"</span>",itemEl.tabIndex=-1,this.itemEls.push(itemEl),this.addManagedListener(itemEl,"mouseover",(function(){return _this.highlightItem(itemEl)})),this.addManagedListener(itemEl,"mouseleave",(function(){return _this.clearHighlighted()})),this.addManagedListener(itemEl,"click",(function(){return _this.setValue(value)})),this.getGui().appendChild(itemEl)},AgList.prototype.setValue=function(value,silent){if(this.value===value)return this.fireItemSelected(),this;if(null==value)return this.reset(),this;var idx=this.options.findIndex((function(option){return option.value===value}));if(-1!==idx){var option=this.options[idx];this.value=option.value,this.displayValue=null!=option.text?option.text:option.value,this.highlightItem(this.itemEls[idx]),silent||this.fireChangeEvent()}return this},AgList.prototype.setValueByIndex=function(idx){return this.setValue(this.options[idx].value)},AgList.prototype.getValue=function(){return this.value},AgList.prototype.getDisplayValue=function(){return this.displayValue},AgList.prototype.refreshHighlighted=function(){var _this=this;this.clearHighlighted();var idx=this.options.findIndex((function(option){return option.value===_this.value}));-1!==idx&&this.highlightItem(this.itemEls[idx])},AgList.prototype.reset=function(){this.value=null,this.displayValue=null,this.clearHighlighted(),this.fireChangeEvent()},AgList.prototype.highlightItem=function(el){el.offsetParent&&(this.clearHighlighted(),this.highlightedEl=el,this.highlightedEl.classList.add(AgList.ACTIVE_CLASS),setAriaSelected(this.highlightedEl,!0),this.highlightedEl.focus())},AgList.prototype.clearHighlighted=function(){this.highlightedEl&&this.highlightedEl.offsetParent&&(this.highlightedEl.classList.remove(AgList.ACTIVE_CLASS),setAriaSelected(this.highlightedEl,!1),this.highlightedEl=null)},AgList.prototype.fireChangeEvent=function(){this.dispatchEvent({type:Events.EVENT_FIELD_VALUE_CHANGED}),this.fireItemSelected()},AgList.prototype.fireItemSelected=function(){this.dispatchEvent({type:AgList.EVENT_ITEM_SELECTED})},AgList.EVENT_ITEM_SELECTED="selectedItem",AgList.ACTIVE_CLASS="ag-active-item",function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([PostConstruct],AgList.prototype,"init",null),AgList}(Component),__extends$2S=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$j=function(){return __assign$j=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$j.apply(this,arguments)},AgSelect=function(_super){function AgSelect(config){return _super.call(this,__assign$j({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"listbox"},config))||this}return __extends$2S(AgSelect,_super),AgSelect.prototype.postConstruct=function(){var _a;_super.prototype.postConstruct.call(this),this.createListComponent(),this.eWrapper.tabIndex=null!==(_a=this.gridOptionsService.getNum("tabIndex"))&&void 0!==_a?_a:0},AgSelect.prototype.createListComponent=function(){var _this=this;this.listComponent=this.createBean(new AgList("select")),this.listComponent.setParentComponent(this),this.listComponent.addGuiEventListener("keydown",(function(e){e.key===KeyCode.TAB&&(e.preventDefault(),e.stopImmediatePropagation(),_this.getGui().dispatchEvent(new KeyboardEvent("keydown",{key:e.key,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,bubbles:!0})))})),this.listComponent.addManagedListener(this.listComponent,AgList.EVENT_ITEM_SELECTED,(function(){_this.hidePicker(),_this.dispatchEvent({type:AgSelect.EVENT_ITEM_SELECTED})})),this.listComponent.addManagedListener(this.listComponent,Events.EVENT_FIELD_VALUE_CHANGED,(function(){_this.listComponent&&(_this.setValue(_this.listComponent.getValue(),!1,!0),_this.hidePicker())}))},AgSelect.prototype.createPickerComponent=function(){return this.listComponent},AgSelect.prototype.showPicker=function(){this.listComponent&&(_super.prototype.showPicker.call(this),this.listComponent.refreshHighlighted())},AgSelect.prototype.addOptions=function(options){var _this=this;return options.forEach((function(option){return _this.addOption(option)})),this},AgSelect.prototype.addOption=function(option){return this.listComponent.addOption(option),this},AgSelect.prototype.setValue=function(value,silent,fromPicker){return this.value!==value&&this.listComponent?(fromPicker||this.listComponent.setValue(value,!0),this.listComponent.getValue()===this.getValue()?this:(this.eDisplayField.innerHTML=this.listComponent.getDisplayValue(),_super.prototype.setValue.call(this,value,silent))):this},AgSelect.prototype.destroy=function(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),_super.prototype.destroy.call(this)},AgSelect.EVENT_ITEM_SELECTED="selectedItem",AgSelect}(AgPickerField),__extends$2R=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2o=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AgAbstractInputField=function(_super){function AgAbstractInputField(config,className,inputType,displayFieldTag){void 0===inputType&&(inputType="text"),void 0===displayFieldTag&&(displayFieldTag="input");var _this=_super.call(this,config,'\n            <div role="presentation">\n                <div ref="eLabel" class="ag-input-field-label"></div>\n                <div ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">\n                    <'+displayFieldTag+' ref="eInput" class="ag-input-field-input"></'+displayFieldTag+">\n                </div>\n            </div>",className)||this;return _this.inputType=inputType,_this.displayFieldTag=displayFieldTag,_this}return __extends$2R(AgAbstractInputField,_super),AgAbstractInputField.prototype.postConstruct=function(){_super.prototype.postConstruct.call(this),this.setInputType(),this.eLabel.classList.add(this.className+"-label"),this.eWrapper.classList.add(this.className+"-input-wrapper"),this.eInput.classList.add(this.className+"-input"),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||"ag-"+this.getCompId()+"-input";var _a=this.config,width=_a.width,value=_a.value;null!=width&&this.setWidth(width),null!=value&&this.setValue(value),this.addInputListeners(),this.activateTabIndex([this.eInput])},AgAbstractInputField.prototype.refreshLabel=function(){exists(this.getLabel())?setAriaLabelledBy(this.eInput,this.getLabelId()):this.eInput.removeAttribute("aria-labelledby"),_super.prototype.refreshLabel.call(this)},AgAbstractInputField.prototype.addInputListeners=function(){var _this=this;this.addManagedListener(this.eInput,"input",(function(e){return _this.setValue(e.target.value)}))},AgAbstractInputField.prototype.setInputType=function(){"input"===this.displayFieldTag&&this.eInput.setAttribute("type",this.inputType)},AgAbstractInputField.prototype.getInputElement=function(){return this.eInput},AgAbstractInputField.prototype.setInputWidth=function(width){return setElementWidth(this.eWrapper,width),this},AgAbstractInputField.prototype.setInputName=function(name){return this.getInputElement().setAttribute("name",name),this},AgAbstractInputField.prototype.getFocusableElement=function(){return this.eInput},AgAbstractInputField.prototype.setMaxLength=function(length){return this.eInput.maxLength=length,this},AgAbstractInputField.prototype.setInputPlaceholder=function(placeholder){return addOrRemoveAttribute(this.eInput,"placeholder",placeholder),this},AgAbstractInputField.prototype.setInputAriaLabel=function(label){return setAriaLabel(this.eInput,label),this},AgAbstractInputField.prototype.setDisabled=function(disabled){return setDisabled(this.eInput,disabled),_super.prototype.setDisabled.call(this,disabled)},AgAbstractInputField.prototype.setAutoComplete=function(value){if(!0===value)addOrRemoveAttribute(this.eInput,"autocomplete",null);else{var autoCompleteValue="string"==typeof value?value:"off";addOrRemoveAttribute(this.eInput,"autocomplete",autoCompleteValue)}return this},__decorate$2o([RefSelector("eLabel")],AgAbstractInputField.prototype,"eLabel",void 0),__decorate$2o([RefSelector("eWrapper")],AgAbstractInputField.prototype,"eWrapper",void 0),__decorate$2o([RefSelector("eInput")],AgAbstractInputField.prototype,"eInput",void 0),AgAbstractInputField}(AgAbstractField),__extends$2Q=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgCheckbox=function(_super){function AgCheckbox(config,className,inputType){void 0===className&&(className="ag-checkbox"),void 0===inputType&&(inputType="checkbox");var _this=_super.call(this,config,className,inputType)||this;return _this.labelAlignment="right",_this.selected=!1,_this.readOnly=!1,_this.passive=!1,_this}return __extends$2Q(AgCheckbox,_super),AgCheckbox.prototype.addInputListeners=function(){this.addManagedListener(this.eInput,"click",this.onCheckboxClick.bind(this)),this.addManagedListener(this.eLabel,"click",this.toggle.bind(this))},AgCheckbox.prototype.getNextValue=function(){return void 0===this.selected||!this.selected},AgCheckbox.prototype.setPassive=function(passive){this.passive=passive},AgCheckbox.prototype.isReadOnly=function(){return this.readOnly},AgCheckbox.prototype.setReadOnly=function(readOnly){this.eWrapper.classList.toggle("ag-disabled",readOnly),this.eInput.disabled=readOnly,this.readOnly=readOnly},AgCheckbox.prototype.setDisabled=function(disabled){return this.eWrapper.classList.toggle("ag-disabled",disabled),_super.prototype.setDisabled.call(this,disabled)},AgCheckbox.prototype.toggle=function(){if(!this.eInput.disabled){var previousValue=this.isSelected(),nextValue=this.getNextValue();this.passive?this.dispatchChange(nextValue,previousValue):this.setValue(nextValue)}},AgCheckbox.prototype.getValue=function(){return this.isSelected()},AgCheckbox.prototype.setValue=function(value,silent){return this.refreshSelectedClass(value),this.setSelected(value,silent),this},AgCheckbox.prototype.setName=function(name){return this.getInputElement().name=name,this},AgCheckbox.prototype.isSelected=function(){return this.selected},AgCheckbox.prototype.setSelected=function(selected,silent){this.isSelected()!==selected&&(this.previousValue=this.isSelected(),selected=this.selected="boolean"==typeof selected?selected:void 0,this.eInput.checked=selected,this.eInput.indeterminate=void 0===selected,silent||this.dispatchChange(this.selected,this.previousValue))},AgCheckbox.prototype.dispatchChange=function(selected,previousValue,event){this.dispatchEvent({type:Events.EVENT_FIELD_VALUE_CHANGED,selected,previousValue,event});var input=this.getInputElement(),checkboxChangedEvent={type:Events.EVENT_CHECKBOX_CHANGED,id:input.id,name:input.name,selected,previousValue};this.eventService.dispatchEvent(checkboxChangedEvent)},AgCheckbox.prototype.onCheckboxClick=function(e){if(!this.passive&&!this.eInput.disabled){var previousValue=this.isSelected(),selected=this.selected=e.target.checked;this.refreshSelectedClass(selected),this.dispatchChange(selected,previousValue,e)}},AgCheckbox.prototype.refreshSelectedClass=function(value){this.eWrapper.classList.toggle("ag-checked",!0===value),this.eWrapper.classList.toggle("ag-indeterminate",null==value)},AgCheckbox}(AgAbstractInputField),__extends$2P=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgRadioButton=function(_super){function AgRadioButton(config){return _super.call(this,config,"ag-radio-button","radio")||this}return __extends$2P(AgRadioButton,_super),AgRadioButton.prototype.isSelected=function(){return this.eInput.checked},AgRadioButton.prototype.toggle=function(){this.eInput.disabled||this.isSelected()||this.setValue(!0)},AgRadioButton.prototype.addInputListeners=function(){_super.prototype.addInputListeners.call(this),this.addManagedListener(this.eventService,Events.EVENT_CHECKBOX_CHANGED,this.onChange.bind(this))},AgRadioButton.prototype.onChange=function(event){event.selected&&event.name&&this.eInput.name&&this.eInput.name===event.name&&event.id&&this.eInput.id!==event.id&&this.setValue(!1,!0)},AgRadioButton}(AgCheckbox),__extends$2O=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),SimpleFilterModelFormatter=function(){function SimpleFilterModelFormatter(localeService,optionsFactory,valueFormatter){this.localeService=localeService,this.optionsFactory=optionsFactory,this.valueFormatter=valueFormatter}return SimpleFilterModelFormatter.prototype.getModelAsString=function(model){var _this=this;if(!model)return null;var isCombined=null!=model.operator,translate=this.localeService.getLocaleTextFunc();if(isCombined){var combinedModel=model,conditions=combinedModel.conditions;if(!conditions)conditions=[combinedModel.condition1,combinedModel.condition2];var customOptions=conditions.map((function(condition){return _this.getModelAsString(condition)})),joinOperatorTranslateKey="AND"===combinedModel.operator?"andCondition":"orCondition";return customOptions.join(" "+translate(joinOperatorTranslateKey,DEFAULT_FILTER_LOCALE_TEXT[joinOperatorTranslateKey])+" ")}if(model.type===SimpleFilter.BLANK||model.type===SimpleFilter.NOT_BLANK)return translate(model.type,model.type);var condition=model,customOption=this.optionsFactory.getCustomOption(condition.type),_a=customOption||{},displayKey=_a.displayKey,displayName=_a.displayName,numberOfInputs=_a.numberOfInputs;return displayKey&&displayName&&0===numberOfInputs?(translate(displayKey,displayName),displayName):this.conditionToString(condition,customOption)},SimpleFilterModelFormatter.prototype.updateParams=function(params){this.optionsFactory=params.optionsFactory},SimpleFilterModelFormatter.prototype.formatValue=function(value){var _a;return this.valueFormatter?null!==(_a=this.valueFormatter(null!=value?value:null))&&void 0!==_a?_a:"":String(value)},SimpleFilterModelFormatter}(),SimpleFilter=function(_super){function SimpleFilter(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.eTypes=[],_this.eJoinOperatorPanels=[],_this.eJoinOperatorsAnd=[],_this.eJoinOperatorsOr=[],_this.eConditionBodies=[],_this.listener=function(){return _this.onUiChanged()},_this.lastUiCompletePosition=null,_this.joinOperatorId=0,_this}return __extends$2O(SimpleFilter,_super),SimpleFilter.prototype.getNumberOfInputs=function(type){var customOpts=this.optionsFactory.getCustomOption(type);if(customOpts){var numberOfInputs=customOpts.numberOfInputs;return null!=numberOfInputs?numberOfInputs:1}var zeroInputTypes=[SimpleFilter.EMPTY,SimpleFilter.NOT_BLANK,SimpleFilter.BLANK];return type&&zeroInputTypes.indexOf(type)>=0?0:type===SimpleFilter.IN_RANGE?2:1},SimpleFilter.prototype.onFloatingFilterChanged=function(type,value){this.setTypeFromFloatingFilter(type),this.setValueFromFloatingFilter(value),this.onUiChanged(!0)},SimpleFilter.prototype.setTypeFromFloatingFilter=function(type){var _this=this;this.eTypes.forEach((function(eType,position){0===position?eType.setValue(type,!0):eType.setValue(_this.optionsFactory.getDefaultOption(),!0)}))},SimpleFilter.prototype.getModelFromUi=function(){var conditions=this.getUiCompleteConditions();return 0===conditions.length?null:this.maxNumConditions>1&&conditions.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),condition1:conditions[0],condition2:conditions[1],conditions}:conditions[0]},SimpleFilter.prototype.getConditionTypes=function(){return this.eTypes.map((function(eType){return eType.getValue()}))},SimpleFilter.prototype.getConditionType=function(position){return this.eTypes[position].getValue()},SimpleFilter.prototype.getJoinOperator=function(){return 0===this.eJoinOperatorsOr.length?this.defaultJoinOperator:!0===this.eJoinOperatorsOr[0].getValue()?"OR":"AND"},SimpleFilter.prototype.areModelsEqual=function(a,b){var _this=this;if(!a&&!b)return!0;if(!a&&b||a&&!b)return!1;var res,aIsSimple=!a.operator,bIsSimple=!b.operator;if(!aIsSimple&&bIsSimple||aIsSimple&&!bIsSimple)return!1;if(aIsSimple){var aSimple=a,bSimple=b;res=this.areSimpleModelsEqual(aSimple,bSimple)}else{var aCombined=a,bCombined=b;res=aCombined.operator===bCombined.operator&&areEqual(aCombined.conditions,bCombined.conditions,(function(aModel,bModel){return _this.areSimpleModelsEqual(aModel,bModel)}))}return res},SimpleFilter.prototype.setModelIntoUi=function(model){var _this=this;if(model.operator){var combinedModel=model;combinedModel.conditions||(combinedModel.conditions=[combinedModel.condition1,combinedModel.condition2]);var numConditions=this.validateAndUpdateConditions(combinedModel.conditions),numPrevConditions=this.getNumConditions();if(numConditions<numPrevConditions)this.removeConditionsAndOperators(numConditions);else if(numConditions>numPrevConditions)for(var i=numPrevConditions;i<numConditions;i++)this.createJoinOperatorPanel(),this.createOption();var orChecked_1="OR"===combinedModel.operator;this.eJoinOperatorsAnd.forEach((function(eJoinOperatorAnd){return eJoinOperatorAnd.setValue(!orChecked_1,!0)})),this.eJoinOperatorsOr.forEach((function(eJoinOperatorOr){return eJoinOperatorOr.setValue(orChecked_1,!0)})),combinedModel.conditions.forEach((function(condition,position){_this.eTypes[position].setValue(condition.type,!0),_this.setConditionIntoUi(condition,position)}))}else{var simpleModel=model;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(simpleModel.type,!0),this.setConditionIntoUi(simpleModel,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),AgPromise.resolve()},SimpleFilter.prototype.validateAndUpdateConditions=function(conditions){var numConditions=conditions.length;return numConditions>this.maxNumConditions&&(conditions.splice(this.maxNumConditions),doOnce((function(){return console.warn('AG Grid: Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.')}),"simpleFilterSetModelMaxNumConditions"),numConditions=this.maxNumConditions),numConditions},SimpleFilter.prototype.doesFilterPass=function(params){var _a,_this=this,model=this.getModel();if(null==model)return!0;var operator=model.operator,models=[];if(operator){var combinedModel=model;models.push.apply(models,function(to,from){for(var i=0,il=from.length,j=to.length;i<il;i++,j++)to[j]=from[i];return to}([],function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}(null!==(_a=combinedModel.conditions)&&void 0!==_a?_a:[])))}else models.push(model);return models[operator&&"OR"===operator?"some":"every"]((function(m){return _this.individualConditionPasses(params,m)}))},SimpleFilter.prototype.setParams=function(params){_super.prototype.setParams.call(this,params),this.setNumConditions(params),this.defaultJoinOperator=this.getDefaultJoinOperator(params.defaultJoinOperator),this.filterPlaceholder=params.filterPlaceholder,this.optionsFactory=new OptionsFactory,this.optionsFactory.init(params,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")},SimpleFilter.prototype.setNumConditions=function(params){var _a,_b;null!=params.suppressAndOrCondition&&doOnce((function(){return console.warn('AG Grid: Since v29.2 "filterParams.suppressAndOrCondition" is deprecated. Use "filterParams.maxNumConditions = 1" instead.')}),"simpleFilterSuppressAndOrCondition"),null!=params.alwaysShowBothConditions&&doOnce((function(){return console.warn('AG Grid: Since v29.2 "filterParams.alwaysShowBothConditions" is deprecated. Use "filterParams.numAlwaysVisibleConditions = 2" instead.')}),"simpleFilterAlwaysShowBothConditions"),this.maxNumConditions=null!==(_a=params.maxNumConditions)&&void 0!==_a?_a:params.suppressAndOrCondition?1:2,this.maxNumConditions<1&&(doOnce((function(){return console.warn('AG Grid: "filterParams.maxNumConditions" must be greater than or equal to zero.')}),"simpleFilterMaxNumConditions"),this.maxNumConditions=1),this.numAlwaysVisibleConditions=null!==(_b=params.numAlwaysVisibleConditions)&&void 0!==_b?_b:params.alwaysShowBothConditions?2:1,this.numAlwaysVisibleConditions<1&&(doOnce((function(){return console.warn('AG Grid: "filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.')}),"simpleFilterNumAlwaysVisibleConditions"),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(doOnce((function(){return console.warn('AG Grid: "filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".')}),"simpleFilterNumAlwaysVisibleGreaterThanMaxNumConditions"),this.numAlwaysVisibleConditions=this.maxNumConditions)},SimpleFilter.prototype.createOption=function(){var _this=this,eType=this.createManagedBean(new AgSelect);this.eTypes.push(eType),eType.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(eType.getGui());var eConditionBody=this.createValueElement();this.eConditionBodies.push(eConditionBody),this.eFilterBody.appendChild(eConditionBody),this.putOptionsIntoDropdown(eType),this.resetType(eType);var position=this.getNumConditions()-1;this.forEachPositionInput(position,(function(element){return _this.resetInput(element)})),this.addChangedListeners(eType,position)},SimpleFilter.prototype.createJoinOperatorPanel=function(){var eJoinOperatorPanel=document.createElement("div");this.eJoinOperatorPanels.push(eJoinOperatorPanel),eJoinOperatorPanel.classList.add("ag-filter-condition");var eJoinOperatorAnd=this.createJoinOperator(this.eJoinOperatorsAnd,eJoinOperatorPanel,"and"),eJoinOperatorOr=this.createJoinOperator(this.eJoinOperatorsOr,eJoinOperatorPanel,"or");this.eFilterBody.appendChild(eJoinOperatorPanel);var index=this.eJoinOperatorPanels.length-1,uniqueGroupId=this.joinOperatorId++;this.resetJoinOperatorAnd(eJoinOperatorAnd,index,uniqueGroupId),this.resetJoinOperatorOr(eJoinOperatorOr,index,uniqueGroupId),this.isReadOnly()||(eJoinOperatorAnd.onValueChange(this.listener),eJoinOperatorOr.onValueChange(this.listener))},SimpleFilter.prototype.createJoinOperator=function(eJoinOperators,eJoinOperatorPanel,andOr){var eJoinOperator=this.createManagedBean(new AgRadioButton);return eJoinOperators.push(eJoinOperator),eJoinOperator.addCssClass("ag-filter-condition-operator"),eJoinOperator.addCssClass("ag-filter-condition-operator-"+andOr),eJoinOperatorPanel.appendChild(eJoinOperator.getGui()),eJoinOperator},SimpleFilter.prototype.getDefaultJoinOperator=function(defaultJoinOperator){return"AND"===defaultJoinOperator||"OR"===defaultJoinOperator?defaultJoinOperator:"AND"},SimpleFilter.prototype.createFilterListOptions=function(){var _this=this,filterOptions=this.optionsFactory.getFilterOptions();this.filterListOptions=filterOptions.map((function(option){return"string"==typeof option?_this.createBoilerplateListOption(option):_this.createCustomListOption(option)}))},SimpleFilter.prototype.putOptionsIntoDropdown=function(eType){this.filterListOptions.forEach((function(listOption){eType.addOption(listOption)})),eType.setDisabled(this.filterListOptions.length<=1)},SimpleFilter.prototype.createBoilerplateListOption=function(option){return{value:option,text:this.translate(option)}},SimpleFilter.prototype.createCustomListOption=function(option){var displayKey=option.displayKey,customOption=this.optionsFactory.getCustomOption(option.displayKey);return{value:displayKey,text:customOption?this.localeService.getLocaleTextFunc()(customOption.displayKey,customOption.displayName):this.translate(displayKey)}},SimpleFilter.prototype.isAllowTwoConditions=function(){return this.maxNumConditions>=2},SimpleFilter.prototype.createBodyTemplate=function(){return""},SimpleFilter.prototype.getCssIdentifier=function(){return"simple-filter"},SimpleFilter.prototype.updateUiVisibility=function(){var joinOperator=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,joinOperator)},SimpleFilter.prototype.updateNumConditions=function(){for(var _a,lastUiCompletePosition=-1,areAllConditionsUiComplete=!0,position=0;position<this.getNumConditions();position++)this.isConditionUiComplete(position)?lastUiCompletePosition=position:areAllConditionsUiComplete=!1;if(this.shouldAddNewConditionAtEnd(areAllConditionsUiComplete))this.createJoinOperatorPanel(),this.createOption();else{var activePosition=null!==(_a=this.lastUiCompletePosition)&&void 0!==_a?_a:this.getNumConditions()-2;if(lastUiCompletePosition<activePosition){this.removeConditionsAndOperators(activePosition+1);var removeStartPosition=lastUiCompletePosition+1,numConditionsToRemove=activePosition-removeStartPosition;numConditionsToRemove>0&&this.removeConditionsAndOperators(removeStartPosition,numConditionsToRemove),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=lastUiCompletePosition},SimpleFilter.prototype.updateConditionStatusesAndValues=function(lastUiCompletePosition,joinOperator){var _this=this;this.eTypes.forEach((function(eType,position){var disabled=_this.isConditionDisabled(position,lastUiCompletePosition);eType.setDisabled(disabled||_this.filterListOptions.length<=1),1===position&&(setDisabled(_this.eJoinOperatorPanels[0],disabled),_this.eJoinOperatorsAnd[0].setDisabled(disabled),_this.eJoinOperatorsOr[0].setDisabled(disabled))})),this.eConditionBodies.forEach((function(element,index){setDisplayed(element,_this.isConditionBodyVisible(index))}));var orChecked="OR"===(null!=joinOperator?joinOperator:this.getJoinOperator());this.eJoinOperatorsAnd.forEach((function(eJoinOperatorAnd,index){eJoinOperatorAnd.setValue(!orChecked,!0)})),this.eJoinOperatorsOr.forEach((function(eJoinOperatorOr,index){eJoinOperatorOr.setValue(orChecked,!0)})),this.forEachInput((function(element,index,position,numberOfInputs){_this.setElementDisplayed(element,index<numberOfInputs),_this.setElementDisabled(element,_this.isConditionDisabled(position,lastUiCompletePosition))})),this.resetPlaceholder()},SimpleFilter.prototype.shouldAddNewConditionAtEnd=function(areAllConditionsUiComplete){return areAllConditionsUiComplete&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()},SimpleFilter.prototype.removeConditionsAndOperators=function(startPosition,deleteCount){if(!(startPosition>=this.getNumConditions())){this.removeComponents(this.eTypes,startPosition,deleteCount),this.removeElements(this.eConditionBodies,startPosition,deleteCount),this.removeValueElements(startPosition,deleteCount);var joinOperatorIndex=Math.max(startPosition-1,0);this.removeElements(this.eJoinOperatorPanels,joinOperatorIndex,deleteCount),this.removeComponents(this.eJoinOperatorsAnd,joinOperatorIndex,deleteCount),this.removeComponents(this.eJoinOperatorsOr,joinOperatorIndex,deleteCount)}},SimpleFilter.prototype.removeElements=function(elements,startPosition,deleteCount){this.removeItems(elements,startPosition,deleteCount).forEach((function(element){return removeFromParent(element)}))},SimpleFilter.prototype.removeComponents=function(components,startPosition,deleteCount){var _this=this;this.removeItems(components,startPosition,deleteCount).forEach((function(comp){removeFromParent(comp.getGui()),_this.destroyBean(comp)}))},SimpleFilter.prototype.removeItems=function(items,startPosition,deleteCount){return null==deleteCount?items.splice(startPosition):items.splice(startPosition,deleteCount)},SimpleFilter.prototype.afterGuiAttached=function(params){if(_super.prototype.afterGuiAttached.call(this,params),this.resetPlaceholder(),!(null==params?void 0:params.suppressFocus))if(this.isReadOnly())this.eFilterBody.focus();else{var firstInput=this.getInputs(0)[0];if(!firstInput)return;firstInput instanceof AgAbstractInputField&&firstInput.getInputElement().focus()}},SimpleFilter.prototype.afterGuiDetached=function(){_super.prototype.afterGuiDetached.call(this);var appliedModel=this.getModel();this.areModelsEqual(appliedModel,this.getModelFromUi())&&!this.hasInvalidInputs()||this.resetUiToActiveModel(appliedModel);for(var lastUiCompletePosition=-1,updatedLastUiCompletePosition=-1,conditionsRemoved=!1,joinOperator=this.getJoinOperator(),position=this.getNumConditions()-1;position>=0;position--)if(this.isConditionUiComplete(position))-1===lastUiCompletePosition&&(lastUiCompletePosition=position,updatedLastUiCompletePosition=position);else{var positionBeforeLastUiCompletePosition=position<lastUiCompletePosition;(position>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(position-1)||positionBeforeLastUiCompletePosition)&&(this.removeConditionsAndOperators(position,1),conditionsRemoved=!0,positionBeforeLastUiCompletePosition&&updatedLastUiCompletePosition--)}var shouldUpdateConditionStatusesAndValues=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),shouldUpdateConditionStatusesAndValues=!0),this.shouldAddNewConditionAtEnd(updatedLastUiCompletePosition===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),shouldUpdateConditionStatusesAndValues=!0),shouldUpdateConditionStatusesAndValues&&this.updateConditionStatusesAndValues(updatedLastUiCompletePosition,joinOperator),conditionsRemoved&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=updatedLastUiCompletePosition},SimpleFilter.prototype.getPlaceholderText=function(defaultPlaceholder,position){var placeholder=this.translate(defaultPlaceholder);if(isFunction(this.filterPlaceholder)){var filterPlaceholderFn=this.filterPlaceholder,filterOptionKey=this.eTypes[position].getValue();placeholder=filterPlaceholderFn({filterOptionKey,filterOption:this.translate(filterOptionKey),placeholder})}else"string"==typeof this.filterPlaceholder&&(placeholder=this.filterPlaceholder);return placeholder},SimpleFilter.prototype.resetPlaceholder=function(){var _this=this,globalTranslate=this.localeService.getLocaleTextFunc();this.forEachInput((function(element,index,position,numberOfInputs){if(element instanceof AgAbstractInputField){var placeholder=0===index&&numberOfInputs>1?"inRangeStart":0===index?"filterOoo":"inRangeEnd",ariaLabel=0===index&&numberOfInputs>1?globalTranslate("ariaFilterFromValue","Filter from value"):0===index?globalTranslate("ariaFilterValue","Filter Value"):globalTranslate("ariaFilterToValue","Filter to Value");element.setInputPlaceholder(_this.getPlaceholderText(placeholder,position)),element.setInputAriaLabel(ariaLabel)}}))},SimpleFilter.prototype.setElementValue=function(element,value,fromFloatingFilter){element instanceof AgAbstractInputField&&element.setValue(null!=value?String(value):null,!0)},SimpleFilter.prototype.setElementDisplayed=function(element,displayed){element instanceof Component&&setDisplayed(element.getGui(),displayed)},SimpleFilter.prototype.setElementDisabled=function(element,disabled){element instanceof Component&&setDisabled(element.getGui(),disabled)},SimpleFilter.prototype.attachElementOnChange=function(element,listener){element instanceof AgAbstractInputField&&element.onValueChange(listener)},SimpleFilter.prototype.forEachInput=function(cb){var _this=this;this.getConditionTypes().forEach((function(type,position){_this.forEachPositionTypeInput(position,type,cb)}))},SimpleFilter.prototype.forEachPositionInput=function(position,cb){var type=this.getConditionType(position);this.forEachPositionTypeInput(position,type,cb)},SimpleFilter.prototype.forEachPositionTypeInput=function(position,type,cb){for(var numberOfInputs=this.getNumberOfInputs(type),inputs=this.getInputs(position),index=0;index<inputs.length;index++){var input=inputs[index];null!=input&&cb(input,index,position,numberOfInputs)}},SimpleFilter.prototype.isConditionDisabled=function(position,lastUiCompletePosition){return!!this.isReadOnly()||0!==position&&position>lastUiCompletePosition+1},SimpleFilter.prototype.isConditionBodyVisible=function(position){var type=this.getConditionType(position);return this.getNumberOfInputs(type)>0},SimpleFilter.prototype.isConditionUiComplete=function(position){return!(position>=this.getNumConditions())&&(this.getConditionType(position)!==SimpleFilter.EMPTY&&!this.getValues(position).some((function(v){return null==v})))},SimpleFilter.prototype.getNumConditions=function(){return this.eTypes.length},SimpleFilter.prototype.getUiCompleteConditions=function(){for(var conditions=[],position=0;position<this.getNumConditions();position++)this.isConditionUiComplete(position)&&conditions.push(this.createCondition(position));return conditions},SimpleFilter.prototype.createMissingConditionsAndOperators=function(){if(!this.isReadOnly())for(var i=this.getNumConditions();i<this.numAlwaysVisibleConditions;i++)this.createJoinOperatorPanel(),this.createOption()},SimpleFilter.prototype.resetUiToDefaults=function(silent){var _this=this;return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach((function(eType){return _this.resetType(eType)})),this.eJoinOperatorsAnd.forEach((function(eJoinOperatorAnd,index){return _this.resetJoinOperatorAnd(eJoinOperatorAnd,index,_this.joinOperatorId+index)})),this.eJoinOperatorsOr.forEach((function(eJoinOperatorOr,index){return _this.resetJoinOperatorOr(eJoinOperatorOr,index,_this.joinOperatorId+index)})),this.joinOperatorId++,this.forEachInput((function(element){return _this.resetInput(element)})),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,silent||this.onUiChanged(),AgPromise.resolve()},SimpleFilter.prototype.resetType=function(eType){var filteringLabel=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");eType.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(filteringLabel).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)},SimpleFilter.prototype.resetJoinOperatorAnd=function(eJoinOperatorAnd,index,uniqueGroupId){this.resetJoinOperator(eJoinOperatorAnd,index,this.isDefaultOperator("AND"),this.translate("andCondition"),uniqueGroupId)},SimpleFilter.prototype.resetJoinOperatorOr=function(eJoinOperatorOr,index,uniqueGroupId){this.resetJoinOperator(eJoinOperatorOr,index,this.isDefaultOperator("OR"),this.translate("orCondition"),uniqueGroupId)},SimpleFilter.prototype.resetJoinOperator=function(eJoinOperator,index,value,label,uniqueGroupId){this.updateJoinOperatorDisabled(eJoinOperator.setValue(value,!0).setName("ag-simple-filter-and-or-"+this.getCompId()+"-"+uniqueGroupId).setLabel(label),index)},SimpleFilter.prototype.updateJoinOperatorsDisabled=function(){var _this=this;this.eJoinOperatorsAnd.forEach((function(eJoinOperator,index){return _this.updateJoinOperatorDisabled(eJoinOperator,index)})),this.eJoinOperatorsOr.forEach((function(eJoinOperator,index){return _this.updateJoinOperatorDisabled(eJoinOperator,index)}))},SimpleFilter.prototype.updateJoinOperatorDisabled=function(eJoinOperator,index){eJoinOperator.setDisabled(this.isReadOnly()||index>0)},SimpleFilter.prototype.resetInput=function(element){this.setElementValue(element,null),this.setElementDisabled(element,this.isReadOnly())},SimpleFilter.prototype.setConditionIntoUi=function(model,position){var _this=this,values=this.mapValuesFromModel(model);this.forEachInput((function(element,index,elPosition,_){elPosition===position&&_this.setElementValue(element,null!=values[index]?values[index]:null)}))},SimpleFilter.prototype.setValueFromFloatingFilter=function(value){var _this=this;this.forEachInput((function(element,index,position,_){_this.setElementValue(element,0===index&&0===position?value:null,!0)}))},SimpleFilter.prototype.isDefaultOperator=function(operator){return operator===this.defaultJoinOperator},SimpleFilter.prototype.addChangedListeners=function(eType,position){var _this=this;this.isReadOnly()||(eType.onValueChange(this.listener),this.forEachPositionInput(position,(function(element){_this.attachElementOnChange(element,_this.listener)})))},SimpleFilter.prototype.individualConditionPasses=function(params,filterModel){var cellValue=this.getCellValue(params.node),values=this.mapValuesFromModel(filterModel),customFilterOption=this.optionsFactory.getCustomOption(filterModel.type),customFilterResult=this.evaluateCustomFilter(customFilterOption,values,cellValue);return null!=customFilterResult?customFilterResult:null==cellValue?this.evaluateNullValue(filterModel.type):this.evaluateNonNullValue(values,cellValue,filterModel,params)},SimpleFilter.prototype.evaluateCustomFilter=function(customFilterOption,values,cellValue){if(null!=customFilterOption){var predicate=customFilterOption.predicate;return null==predicate||values.some((function(v){return null==v}))?void 0:predicate(values,cellValue)}},SimpleFilter.prototype.isBlank=function(cellValue){return null==cellValue||"string"==typeof cellValue&&0===cellValue.trim().length},SimpleFilter.prototype.hasInvalidInputs=function(){return!1},SimpleFilter.EMPTY="empty",SimpleFilter.BLANK="blank",SimpleFilter.NOT_BLANK="notBlank",SimpleFilter.EQUALS="equals",SimpleFilter.NOT_EQUAL="notEqual",SimpleFilter.LESS_THAN="lessThan",SimpleFilter.LESS_THAN_OR_EQUAL="lessThanOrEqual",SimpleFilter.GREATER_THAN="greaterThan",SimpleFilter.GREATER_THAN_OR_EQUAL="greaterThanOrEqual",SimpleFilter.IN_RANGE="inRange",SimpleFilter.CONTAINS="contains",SimpleFilter.NOT_CONTAINS="notContains",SimpleFilter.STARTS_WITH="startsWith",SimpleFilter.ENDS_WITH="endsWith",SimpleFilter}(ProvidedFilter),__extends$2N=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),ScalarFilter=function(_super){function ScalarFilter(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2N(ScalarFilter,_super),ScalarFilter.prototype.setParams=function(params){_super.prototype.setParams.call(this,params),this.scalarFilterParams=params},ScalarFilter.prototype.evaluateNullValue=function(filterType){switch(filterType){case ScalarFilter.EQUALS:case ScalarFilter.NOT_EQUAL:if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case ScalarFilter.GREATER_THAN:case ScalarFilter.GREATER_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case ScalarFilter.LESS_THAN:case ScalarFilter.LESS_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case ScalarFilter.IN_RANGE:if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case ScalarFilter.BLANK:return!0;case ScalarFilter.NOT_BLANK:return!1}return!1},ScalarFilter.prototype.evaluateNonNullValue=function(values,cellValue,filterModel){var comparator=this.comparator(),compareResult=null!=values[0]?comparator(values[0],cellValue):0;switch(filterModel.type){case ScalarFilter.EQUALS:return 0===compareResult;case ScalarFilter.NOT_EQUAL:return 0!==compareResult;case ScalarFilter.GREATER_THAN:return compareResult>0;case ScalarFilter.GREATER_THAN_OR_EQUAL:return compareResult>=0;case ScalarFilter.LESS_THAN:return compareResult<0;case ScalarFilter.LESS_THAN_OR_EQUAL:return compareResult<=0;case ScalarFilter.IN_RANGE:var compareToResult=comparator(values[1],cellValue);return this.scalarFilterParams.inRangeInclusive?compareResult>=0&&compareToResult<=0:compareResult>0&&compareToResult<0;case ScalarFilter.BLANK:return this.isBlank(cellValue);case ScalarFilter.NOT_BLANK:return!this.isBlank(cellValue);default:return console.warn('AG Grid: Unexpected type of filter "'+filterModel.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}},ScalarFilter}(SimpleFilter),__extends$2M=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$i=function(){return __assign$i=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$i.apply(this,arguments)},DateFilterModelFormatter=function(_super){function DateFilterModelFormatter(dateFilterParams,localeService,optionsFactory){var _this=_super.call(this,localeService,optionsFactory)||this;return _this.dateFilterParams=dateFilterParams,_this}return __extends$2M(DateFilterModelFormatter,_super),DateFilterModelFormatter.prototype.conditionToString=function(condition,options){var type=condition.type,numberOfInputs=(options||{}).numberOfInputs,isRange=type==SimpleFilter.IN_RANGE||2===numberOfInputs,dateFrom=parseDateTimeFromString(condition.dateFrom),dateTo=parseDateTimeFromString(condition.dateTo),format=this.dateFilterParams.inRangeFloatingFilterDateFormat;return isRange?(null!==dateFrom?dateToFormattedString(dateFrom,format):"null")+"-"+(null!==dateTo?dateToFormattedString(dateTo,format):"null"):null!=dateFrom?dateToFormattedString(dateFrom,format):""+type},DateFilterModelFormatter.prototype.updateParams=function(params){_super.prototype.updateParams.call(this,params),this.dateFilterParams=params.dateFilterParams},DateFilterModelFormatter}(SimpleFilterModelFormatter),DateFilter=function(_super){function DateFilter(){var _this=_super.call(this,"dateFilter")||this;return _this.eConditionPanelsFrom=[],_this.eConditionPanelsTo=[],_this.dateConditionFromComps=[],_this.dateConditionToComps=[],_this.minValidYear=1e3,_this.maxValidYear=Infinity,_this.minValidDate=null,_this.maxValidDate=null,_this}return __extends$2M(DateFilter,_super),DateFilter.prototype.afterGuiAttached=function(params){_super.prototype.afterGuiAttached.call(this,params),this.dateConditionFromComps[0].afterGuiAttached(params)},DateFilter.prototype.mapValuesFromModel=function(filterModel){var _a=filterModel||{},dateFrom=_a.dateFrom,dateTo=_a.dateTo,type=_a.type;return[dateFrom&&parseDateTimeFromString(dateFrom)||null,dateTo&&parseDateTimeFromString(dateTo)||null].slice(0,this.getNumberOfInputs(type))},DateFilter.prototype.comparator=function(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)},DateFilter.prototype.defaultComparator=function(filterDate,cellValue){return null==cellValue||cellValue<filterDate?-1:cellValue>filterDate?1:0},DateFilter.prototype.setParams=function(params){this.dateFilterParams=params,_super.prototype.setParams.call(this,params);var yearParser=function(param,fallback){if(null!=params[param]){if(!isNaN(params[param]))return null==params[param]?fallback:Number(params[param]);console.warn("AG Grid: DateFilter "+param+" is not a number")}return fallback};this.minValidYear=yearParser("minValidYear",1e3),this.maxValidYear=yearParser("maxValidYear",Infinity),this.minValidYear>this.maxValidYear&&console.warn("AG Grid: DateFilter minValidYear should be <= maxValidYear"),params.minValidDate?this.minValidDate=params.minValidDate instanceof Date?params.minValidDate:parseDateTimeFromString(params.minValidDate):this.minValidDate=null,params.maxValidDate?this.maxValidDate=params.maxValidDate instanceof Date?params.maxValidDate:parseDateTimeFromString(params.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&console.warn("AG Grid: DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new DateFilterModelFormatter(this.dateFilterParams,this.localeService,this.optionsFactory)},DateFilter.prototype.createDateCompWrapper=function(element){var _this=this,dateCompWrapper=new DateCompWrapper(this.getContext(),this.userComponentFactory,{onDateChanged:function(){return _this.onUiChanged()},filterParams:this.dateFilterParams},element);return this.addDestroyFunc((function(){return dateCompWrapper.destroy()})),dateCompWrapper},DateFilter.prototype.setElementValue=function(element,value){element.setDate(value)},DateFilter.prototype.setElementDisplayed=function(element,displayed){element.setDisplayed(displayed)},DateFilter.prototype.setElementDisabled=function(element,disabled){element.setDisabled(disabled)},DateFilter.prototype.getDefaultFilterOptions=function(){return DateFilter.DEFAULT_FILTER_OPTIONS},DateFilter.prototype.createValueElement=function(){var eCondition=document.createElement("div");return eCondition.classList.add("ag-filter-body"),this.createFromToElement(eCondition,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(eCondition,this.eConditionPanelsTo,this.dateConditionToComps,"to"),eCondition},DateFilter.prototype.createFromToElement=function(eCondition,eConditionPanels,dateConditionComps,fromTo){var eConditionPanel=document.createElement("div");eConditionPanel.classList.add("ag-filter-"+fromTo),eConditionPanel.classList.add("ag-filter-date-"+fromTo),eConditionPanels.push(eConditionPanel),eCondition.appendChild(eConditionPanel),dateConditionComps.push(this.createDateCompWrapper(eConditionPanel))},DateFilter.prototype.removeValueElements=function(startPosition,deleteCount){this.removeDateComps(this.dateConditionFromComps,startPosition,deleteCount),this.removeDateComps(this.dateConditionToComps,startPosition,deleteCount),this.removeItems(this.eConditionPanelsFrom,startPosition,deleteCount),this.removeItems(this.eConditionPanelsTo,startPosition,deleteCount)},DateFilter.prototype.removeDateComps=function(components,startPosition,deleteCount){this.removeItems(components,startPosition,deleteCount).forEach((function(comp){return comp.destroy()}))},DateFilter.prototype.isValidDateValue=function(value){if(null===value)return!1;if(this.minValidDate){if(value<this.minValidDate)return!1}else if(value.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(value>this.maxValidDate)return!1}else if(value.getUTCFullYear()>this.maxValidYear)return!1;return!0},DateFilter.prototype.isConditionUiComplete=function(position){var _this=this;if(!_super.prototype.isConditionUiComplete.call(this,position))return!1;var valid=!0;return this.forEachInput((function(element,index,elPosition,numberOfInputs){elPosition!==position||!valid||index>=numberOfInputs||(valid=valid&&_this.isValidDateValue(element.getDate()))})),valid},DateFilter.prototype.areSimpleModelsEqual=function(aSimple,bSimple){return aSimple.dateFrom===bSimple.dateFrom&&aSimple.dateTo===bSimple.dateTo&&aSimple.type===bSimple.type},DateFilter.prototype.getFilterType=function(){return"date"},DateFilter.prototype.createCondition=function(position){var type=this.getConditionType(position),model={},values=this.getValues(position);return values.length>0&&(model.dateFrom=serialiseDate(values[0])),values.length>1&&(model.dateTo=serialiseDate(values[1])),__assign$i({dateFrom:null,dateTo:null,filterType:this.getFilterType(),type},model)},DateFilter.prototype.resetPlaceholder=function(){var globalTranslate=this.localeService.getLocaleTextFunc(),placeholder=this.translate("dateFormatOoo"),ariaLabel=globalTranslate("ariaFilterValue","Filter Value");this.forEachInput((function(element){element.setInputPlaceholder(placeholder),element.setInputAriaLabel(ariaLabel)}))},DateFilter.prototype.getInputs=function(position){return position>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[position],this.dateConditionToComps[position]]},DateFilter.prototype.getValues=function(position){var result=[];return this.forEachPositionInput(position,(function(element,index,_elPosition,numberOfInputs){index<numberOfInputs&&result.push(element.getDate())})),result},DateFilter.prototype.getModelAsString=function(model){var _a;return null!==(_a=this.filterModelFormatter.getModelAsString(model))&&void 0!==_a?_a:""},DateFilter.DEFAULT_FILTER_OPTIONS=[ScalarFilter.EQUALS,ScalarFilter.GREATER_THAN,ScalarFilter.LESS_THAN,ScalarFilter.NOT_EQUAL,ScalarFilter.IN_RANGE,ScalarFilter.BLANK,ScalarFilter.NOT_BLANK],function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([Autowired("userComponentFactory")],DateFilter.prototype,"userComponentFactory",void 0),DateFilter}(ScalarFilter),__extends$2L=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),SimpleFloatingFilter=function(_super){function SimpleFloatingFilter(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2L(SimpleFloatingFilter,_super),SimpleFloatingFilter.prototype.getDefaultDebounceMs=function(){return 0},SimpleFloatingFilter.prototype.destroy=function(){_super.prototype.destroy.call(this)},SimpleFloatingFilter.prototype.isEventFromFloatingFilter=function(event){return event&&event.afterFloatingFilter},SimpleFloatingFilter.prototype.isEventFromDataChange=function(event){return null==event?void 0:event.afterDataChange},SimpleFloatingFilter.prototype.getLastType=function(){return this.lastType},SimpleFloatingFilter.prototype.isReadOnly=function(){return this.readOnly},SimpleFloatingFilter.prototype.setLastTypeFromModel=function(model){if(model){var condition;if(model.operator)condition=model.conditions[0];else condition=model;this.lastType=condition.type}else this.lastType=this.optionsFactory.getDefaultOption()},SimpleFloatingFilter.prototype.canWeEditAfterModelFromParentFilter=function(model){if(!model)return this.isTypeEditable(this.lastType);if(model.operator)return!1;var simpleModel=model;return this.isTypeEditable(simpleModel.type)},SimpleFloatingFilter.prototype.init=function(params){this.setSimpleParams(params)},SimpleFloatingFilter.prototype.setSimpleParams=function(params){this.optionsFactory=new OptionsFactory,this.optionsFactory.init(params.filterParams,this.getDefaultFilterOptions()),this.lastType=this.optionsFactory.getDefaultOption(),this.readOnly=!!params.filterParams.readOnly;var editable=this.isTypeEditable(this.lastType);this.setEditable(editable)},SimpleFloatingFilter.prototype.onParamsUpdated=function(params){this.setSimpleParams(params)},SimpleFloatingFilter.prototype.doesFilterHaveSingleInput=function(filterType){var numberOfInputs=(this.optionsFactory.getCustomOption(filterType)||{}).numberOfInputs;return null==numberOfInputs||1==numberOfInputs},SimpleFloatingFilter.prototype.isTypeEditable=function(type){var uneditableTypes=[SimpleFilter.IN_RANGE,SimpleFilter.EMPTY,SimpleFilter.BLANK,SimpleFilter.NOT_BLANK];return!!type&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(type)&&uneditableTypes.indexOf(type)<0},SimpleFloatingFilter}(Component),__extends$2K=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2m=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},DateFloatingFilter=function(_super){function DateFloatingFilter(){return _super.call(this,'\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eReadOnlyText"></ag-input-text-field>\n                <div ref="eDateWrapper" style="display: flex;"></div>\n            </div>')||this}return __extends$2K(DateFloatingFilter,_super),DateFloatingFilter.prototype.getDefaultFilterOptions=function(){return DateFilter.DEFAULT_FILTER_OPTIONS},DateFloatingFilter.prototype.init=function(params){_super.prototype.init.call(this,params),this.params=params,this.filterParams=params.filterParams,this.createDateComponent(),this.filterModelFormatter=new DateFilterModelFormatter(this.filterParams,this.localeService,this.optionsFactory);var translate=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(translate("ariaDateFilterInput","Date Filter Input"))},DateFloatingFilter.prototype.onParamsUpdated=function(params){_super.prototype.onParamsUpdated.call(this,params),this.params=params,this.filterParams=params.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams})},DateFloatingFilter.prototype.setEditable=function(editable){setDisplayed(this.eDateWrapper,editable),setDisplayed(this.eReadOnlyText.getGui(),!editable)},DateFloatingFilter.prototype.onParentModelChanged=function(model,event){if(!this.isEventFromFloatingFilter(event)&&!this.isEventFromDataChange(event)){_super.prototype.setLastTypeFromModel.call(this,model);var allowEditing=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(model);if(this.setEditable(allowEditing),allowEditing){if(model){var dateModel=model;this.dateComp.setDate(parseDateTimeFromString(dateModel.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(model)),this.dateComp.setDate(null)}},DateFloatingFilter.prototype.onDateChanged=function(){var _this=this,filterValueText=serialiseDate(this.dateComp.getDate());this.params.parentFilterInstance((function(filterInstance){if(filterInstance){var date=parseDateTimeFromString(filterValueText);filterInstance.onFloatingFilterChanged(_this.getLastType()||null,date)}}))},DateFloatingFilter.prototype.getDateComponentParams=function(){var debounceMs=ProvidedFilter.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:debounce(this.onDateChanged.bind(this),debounceMs),filterParams:this.params.column.getColDef().filterParams}},DateFloatingFilter.prototype.createDateComponent=function(){var _this=this;this.dateComp=new DateCompWrapper(this.getContext(),this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper),this.addDestroyFunc((function(){return _this.dateComp.destroy()}))},DateFloatingFilter.prototype.updateDateComponent=function(){var params=this.getDateComponentParams(),_a=this.gridOptionsService,api=_a.api,columnApi=_a.columnApi,context=_a.context;params.api=api,params.columnApi=columnApi,params.context=context,this.dateComp.updateParams(params)},DateFloatingFilter.prototype.getFilterModelFormatter=function(){return this.filterModelFormatter},__decorate$2m([Autowired("userComponentFactory")],DateFloatingFilter.prototype,"userComponentFactory",void 0),__decorate$2m([RefSelector("eReadOnlyText")],DateFloatingFilter.prototype,"eReadOnlyText",void 0),__decorate$2m([RefSelector("eDateWrapper")],DateFloatingFilter.prototype,"eDateWrapper",void 0),DateFloatingFilter}(SimpleFloatingFilter),__extends$2J=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),DefaultDateComponent=function(_super){function DefaultDateComponent(){return _super.call(this,'\n            <div class="ag-filter-filter">\n                <ag-input-text-field class="ag-date-filter" ref="eDateInput"></ag-input-text-field>\n            </div>')||this}return __extends$2J(DefaultDateComponent,_super),DefaultDateComponent.prototype.destroy=function(){_super.prototype.destroy.call(this)},DefaultDateComponent.prototype.init=function(params){var _this=this;this.params=params,this.setParams(params);var eDocument=this.gridOptionsService.getDocument(),inputElement=this.eDateInput.getInputElement();this.addManagedListener(inputElement,"mousedown",(function(){_this.eDateInput.isDisabled()||_this.usingSafariDatePicker||inputElement.focus()})),this.addManagedListener(inputElement,"input",(function(e){e.target===eDocument.activeElement&&(_this.eDateInput.isDisabled()||_this.params.onDateChanged())}))},DefaultDateComponent.prototype.setParams=function(params){var inputElement=this.eDateInput.getInputElement(),shouldUseBrowserDatePicker=this.shouldUseBrowserDatePicker(params);this.usingSafariDatePicker=shouldUseBrowserDatePicker&&isBrowserSafari(),inputElement.type=shouldUseBrowserDatePicker?"date":"text";var _a=params.filterParams||{},minValidYear=_a.minValidYear,maxValidYear=_a.maxValidYear,minValidDate=_a.minValidDate,maxValidDate=_a.maxValidDate;if(minValidDate&&minValidYear&&doOnce((function(){return console.warn("AG Grid: DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored.")}),"DateFilter.minValidDateAndMinValidYearWarning"),maxValidDate&&maxValidYear&&doOnce((function(){return console.warn("AG Grid: DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored.")}),"DateFilter.maxValidDateAndMaxValidYearWarning"),minValidDate&&maxValidDate){var _b=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}([minValidDate,maxValidDate].map((function(v){return v instanceof Date?v:parseDateTimeFromString(v)})),2),parsedMinValidDate=_b[0],parsedMaxValidDate=_b[1];parsedMinValidDate&&parsedMaxValidDate&&parsedMinValidDate.getTime()>parsedMaxValidDate.getTime()&&doOnce((function(){return console.warn("AG Grid: DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}),"DateFilter.minValidDateAndMaxValidDateWarning")}minValidDate?minValidDate instanceof Date?inputElement.min=dateToFormattedString(minValidDate):inputElement.min=minValidDate:minValidYear&&(inputElement.min=minValidYear+"-01-01"),maxValidDate?maxValidDate instanceof Date?inputElement.max=dateToFormattedString(maxValidDate):inputElement.max=maxValidDate:maxValidYear&&(inputElement.max=maxValidYear+"-12-31")},DefaultDateComponent.prototype.onParamsUpdated=function(params){this.params=params,this.setParams(params)},DefaultDateComponent.prototype.getDate=function(){return parseDateTimeFromString(this.eDateInput.getValue())},DefaultDateComponent.prototype.setDate=function(date){this.eDateInput.setValue(serialiseDate(date,!1))},DefaultDateComponent.prototype.setInputPlaceholder=function(placeholder){this.eDateInput.setInputPlaceholder(placeholder)},DefaultDateComponent.prototype.setDisabled=function(disabled){this.eDateInput.setDisabled(disabled)},DefaultDateComponent.prototype.afterGuiAttached=function(params){params&&params.suppressFocus||this.eDateInput.getInputElement().focus()},DefaultDateComponent.prototype.shouldUseBrowserDatePicker=function(params){return params.filterParams&&null!=params.filterParams.browserDatePicker?params.filterParams.browserDatePicker:isBrowserChrome()||isBrowserFirefox()||isBrowserSafari()&&getSafariVersion()>=14.1},function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([RefSelector("eDateInput")],DefaultDateComponent.prototype,"eDateInput",void 0),DefaultDateComponent}(Component),__extends$2I=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgInputTextField=function(_super){function AgInputTextField(config,className,inputType){return void 0===className&&(className="ag-text-field"),void 0===inputType&&(inputType="text"),_super.call(this,config,className,inputType)||this}return __extends$2I(AgInputTextField,_super),AgInputTextField.prototype.postConstruct=function(){_super.prototype.postConstruct.call(this),this.config.allowedCharPattern&&this.preventDisallowedCharacters()},AgInputTextField.prototype.setValue=function(value,silent){return this.eInput.value!==value&&(this.eInput.value=exists(value)?value:""),_super.prototype.setValue.call(this,value,silent)},AgInputTextField.prototype.setStartValue=function(value){this.setValue(value,!0)},AgInputTextField.prototype.preventDisallowedCharacters=function(){var pattern=new RegExp("["+this.config.allowedCharPattern+"]");this.addManagedListener(this.eInput,"keydown",(function(event){isEventFromPrintableCharacter(event)&&event.key&&!pattern.test(event.key)&&event.preventDefault()})),this.addManagedListener(this.eInput,"paste",(function(e){var _a,text=null===(_a=e.clipboardData)||void 0===_a?void 0:_a.getData("text");text&&text.split("").some((function(c){return!pattern.test(c)}))&&e.preventDefault()}))},AgInputTextField}(AgAbstractInputField),__extends$2H=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgInputNumberField=function(_super){function AgInputNumberField(config){return _super.call(this,config,"ag-number-field","number")||this}return __extends$2H(AgInputNumberField,_super),AgInputNumberField.prototype.postConstruct=function(){var _this=this;_super.prototype.postConstruct.call(this),this.addManagedListener(this.eInput,"blur",(function(){var floatedValue=parseFloat(_this.eInput.value),value=isNaN(floatedValue)?"":_this.normalizeValue(floatedValue.toString());_this.value!==value&&_this.setValue(value)})),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this)),this.eInput.step="any"},AgInputNumberField.prototype.onWheel=function(e){document.activeElement===this.eInput&&e.preventDefault()},AgInputNumberField.prototype.normalizeValue=function(value){if(""===value)return"";null!=this.precision&&(value=this.adjustPrecision(value));var val=parseFloat(value);return null!=this.min&&val<this.min?value=this.min.toString():null!=this.max&&val>this.max&&(value=this.max.toString()),value},AgInputNumberField.prototype.adjustPrecision=function(value,isScientificNotation){if(null==this.precision)return value;if(isScientificNotation){var floatString=parseFloat(value).toFixed(this.precision);return parseFloat(floatString).toString()}var parts=String(value).split(".");if(parts.length>1){if(parts[1].length<=this.precision)return value;if(this.precision>0)return parts[0]+"."+parts[1].slice(0,this.precision)}return parts[0]},AgInputNumberField.prototype.setMin=function(min){return this.min===min||(this.min=min,addOrRemoveAttribute(this.eInput,"min",min)),this},AgInputNumberField.prototype.setMax=function(max){return this.max===max||(this.max=max,addOrRemoveAttribute(this.eInput,"max",max)),this},AgInputNumberField.prototype.setPrecision=function(precision){return this.precision=precision,this},AgInputNumberField.prototype.setStep=function(step){return this.step===step||(this.step=step,addOrRemoveAttribute(this.eInput,"step",step)),this},AgInputNumberField.prototype.setValue=function(value,silent){var _this=this;return this.setValueOrInputValue((function(v){return _super.prototype.setValue.call(_this,v,silent)}),(function(){return _this}),value)},AgInputNumberField.prototype.setStartValue=function(value){var _this=this;return this.setValueOrInputValue((function(v){return _super.prototype.setValue.call(_this,v,!0)}),(function(v){_this.eInput.value=v}),value)},AgInputNumberField.prototype.setValueOrInputValue=function(setValueFunc,setInputValueOnlyFunc,value){if(exists(value)){var setInputValueOnly=this.isScientificNotation(value);if(setInputValueOnly&&this.eInput.validity.valid)return setValueFunc(value);if(!setInputValueOnly)setInputValueOnly=(value=this.adjustPrecision(value))!=this.normalizeValue(value);if(setInputValueOnly)return setInputValueOnlyFunc(value)}return setValueFunc(value)},AgInputNumberField.prototype.getValue=function(){if(this.eInput.validity.valid){var inputValue=this.eInput.value;return this.isScientificNotation(inputValue)?this.adjustPrecision(inputValue,!0):_super.prototype.getValue.call(this)}},AgInputNumberField.prototype.isScientificNotation=function(value){return"string"==typeof value&&value.includes("e")},AgInputNumberField}(AgInputTextField),__extends$2G=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),NumberFilterModelFormatter=function(_super){function NumberFilterModelFormatter(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2G(NumberFilterModelFormatter,_super),NumberFilterModelFormatter.prototype.conditionToString=function(condition,options){var numberOfInputs=(options||{}).numberOfInputs;return condition.type==SimpleFilter.IN_RANGE||2===numberOfInputs?this.formatValue(condition.filter)+"-"+this.formatValue(condition.filterTo):null!=condition.filter?this.formatValue(condition.filter):""+condition.type},NumberFilterModelFormatter}(SimpleFilterModelFormatter);function getAllowedCharPattern(filterParams){var allowedCharPattern=(null!=filterParams?filterParams:{}).allowedCharPattern;return null!=allowedCharPattern?allowedCharPattern:null}var DragSourceType,VerticalDirection,HorizontalDirection,NumberFilter=function(_super){function NumberFilter(){var _this=_super.call(this,"numberFilter")||this;return _this.eValuesFrom=[],_this.eValuesTo=[],_this}return __extends$2G(NumberFilter,_super),NumberFilter.prototype.mapValuesFromModel=function(filterModel){var _a=filterModel||{},filter=_a.filter,filterTo=_a.filterTo,type=_a.type;return[this.processValue(filter),this.processValue(filterTo)].slice(0,this.getNumberOfInputs(type))},NumberFilter.prototype.getDefaultDebounceMs=function(){return 500},NumberFilter.prototype.comparator=function(){return function(left,right){return left===right?0:left<right?1:-1}},NumberFilter.prototype.setParams=function(params){this.numberFilterParams=params,_super.prototype.setParams.call(this,params),this.filterModelFormatter=new NumberFilterModelFormatter(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)},NumberFilter.prototype.getDefaultFilterOptions=function(){return NumberFilter.DEFAULT_FILTER_OPTIONS},NumberFilter.prototype.setElementValue=function(element,value,fromFloatingFilter){var valueToSet=!fromFloatingFilter&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(null!=value?value:null):value;_super.prototype.setElementValue.call(this,element,valueToSet)},NumberFilter.prototype.createValueElement=function(){var allowedCharPattern=getAllowedCharPattern(this.numberFilterParams),eCondition=document.createElement("div");return eCondition.classList.add("ag-filter-body"),setAriaRole(eCondition,"presentation"),this.createFromToElement(eCondition,this.eValuesFrom,"from",allowedCharPattern),this.createFromToElement(eCondition,this.eValuesTo,"to",allowedCharPattern),eCondition},NumberFilter.prototype.createFromToElement=function(eCondition,eValues,fromTo,allowedCharPattern){var eValue=this.createManagedBean(allowedCharPattern?new AgInputTextField({allowedCharPattern}):new AgInputNumberField);eValue.addCssClass("ag-filter-"+fromTo),eValue.addCssClass("ag-filter-filter"),eValues.push(eValue),eCondition.appendChild(eValue.getGui())},NumberFilter.prototype.removeValueElements=function(startPosition,deleteCount){this.removeComponents(this.eValuesFrom,startPosition,deleteCount),this.removeComponents(this.eValuesTo,startPosition,deleteCount)},NumberFilter.prototype.getValues=function(position){var _this=this,result=[];return this.forEachPositionInput(position,(function(element,index,_elPosition,numberOfInputs){index<numberOfInputs&&result.push(_this.processValue(_this.stringToFloat(element.getValue())))})),result},NumberFilter.prototype.areSimpleModelsEqual=function(aSimple,bSimple){return aSimple.filter===bSimple.filter&&aSimple.filterTo===bSimple.filterTo&&aSimple.type===bSimple.type},NumberFilter.prototype.getFilterType=function(){return"number"},NumberFilter.prototype.processValue=function(value){return null==value||isNaN(value)?null:value},NumberFilter.prototype.stringToFloat=function(value){if("number"==typeof value)return value;var filterText=makeNull(value);return null!=filterText&&""===filterText.trim()&&(filterText=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(filterText):null==filterText||"-"===filterText.trim()?null:parseFloat(filterText)},NumberFilter.prototype.createCondition=function(position){var type=this.getConditionType(position),model={filterType:this.getFilterType(),type},values=this.getValues(position);return values.length>0&&(model.filter=values[0]),values.length>1&&(model.filterTo=values[1]),model},NumberFilter.prototype.getInputs=function(position){return position>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[position],this.eValuesTo[position]]},NumberFilter.prototype.getModelAsString=function(model){var _a;return null!==(_a=this.filterModelFormatter.getModelAsString(model))&&void 0!==_a?_a:""},NumberFilter.prototype.hasInvalidInputs=function(){var invalidInputs=!1;return this.forEachInput((function(element){element.getInputElement().validity.valid||(invalidInputs=!0)})),invalidInputs},NumberFilter.DEFAULT_FILTER_OPTIONS=[ScalarFilter.EQUALS,ScalarFilter.NOT_EQUAL,ScalarFilter.LESS_THAN,ScalarFilter.LESS_THAN_OR_EQUAL,ScalarFilter.GREATER_THAN,ScalarFilter.GREATER_THAN_OR_EQUAL,ScalarFilter.IN_RANGE,ScalarFilter.BLANK,ScalarFilter.NOT_BLANK],NumberFilter}(ScalarFilter),__extends$2F=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$h=function(){return __assign$h=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$h.apply(this,arguments)},TextFilterModelFormatter=function(_super){function TextFilterModelFormatter(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2F(TextFilterModelFormatter,_super),TextFilterModelFormatter.prototype.conditionToString=function(condition,options){var numberOfInputs=(options||{}).numberOfInputs;return condition.type==SimpleFilter.IN_RANGE||2===numberOfInputs?condition.filter+"-"+condition.filterTo:null!=condition.filter?""+condition.filter:""+condition.type},TextFilterModelFormatter}(SimpleFilterModelFormatter),TextFilter=function(_super){function TextFilter(){var _this=_super.call(this,"textFilter")||this;return _this.eValuesFrom=[],_this.eValuesTo=[],_this}return __extends$2F(TextFilter,_super),TextFilter.trimInput=function(value){var trimmedInput=value&&value.trim();return""===trimmedInput?value:trimmedInput},TextFilter.prototype.getDefaultDebounceMs=function(){return 500},TextFilter.prototype.setParams=function(params){this.textFilterParams=params,_super.prototype.setParams.call(this,params),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?TextFilter.DEFAULT_FORMATTER:TextFilter.DEFAULT_LOWERCASE_FORMATTER),this.filterModelFormatter=new TextFilterModelFormatter(this.localeService,this.optionsFactory)},TextFilter.prototype.getTextMatcher=function(){var legacyComparator=this.textFilterParams.textCustomComparator;return legacyComparator?(_.doOnce((function(){return console.warn("AG Grid - textCustomComparator is deprecated, use textMatcher instead.")}),"textCustomComparator.deprecated"),function(_a){var filterOption=_a.filterOption,value=_a.value,filterText=_a.filterText;return legacyComparator(filterOption,value,filterText)}):this.textFilterParams.textMatcher||TextFilter.DEFAULT_MATCHER},TextFilter.prototype.createCondition=function(position){var type=this.getConditionType(position),model={filterType:this.getFilterType(),type},values=this.getValuesWithSideEffects(position,!0);return values.length>0&&(model.filter=values[0]),values.length>1&&(model.filterTo=values[1]),model},TextFilter.prototype.getFilterType=function(){return"text"},TextFilter.prototype.areSimpleModelsEqual=function(aSimple,bSimple){return aSimple.filter===bSimple.filter&&aSimple.filterTo===bSimple.filterTo&&aSimple.type===bSimple.type},TextFilter.prototype.getInputs=function(position){return position>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[position],this.eValuesTo[position]]},TextFilter.prototype.getValues=function(position){return this.getValuesWithSideEffects(position,!1)},TextFilter.prototype.getValuesWithSideEffects=function(position,applySideEffects){var _this=this,result=[];return this.forEachPositionInput(position,(function(element,index,_elPosition,numberOfInputs){var _a;if(index<numberOfInputs){var value=makeNull(element.getValue());applySideEffects&&_this.textFilterParams.trimInput&&(value=null!==(_a=TextFilter.trimInput(value))&&void 0!==_a?_a:null,element.setValue(value,!0)),result.push(value)}})),result},TextFilter.prototype.getDefaultFilterOptions=function(){return TextFilter.DEFAULT_FILTER_OPTIONS},TextFilter.prototype.createValueElement=function(){var eCondition=document.createElement("div");return eCondition.classList.add("ag-filter-body"),setAriaRole(eCondition,"presentation"),this.createFromToElement(eCondition,this.eValuesFrom,"from"),this.createFromToElement(eCondition,this.eValuesTo,"to"),eCondition},TextFilter.prototype.createFromToElement=function(eCondition,eValues,fromTo){var eValue=this.createManagedBean(new AgInputTextField);eValue.addCssClass("ag-filter-"+fromTo),eValue.addCssClass("ag-filter-filter"),eValues.push(eValue),eCondition.appendChild(eValue.getGui())},TextFilter.prototype.removeValueElements=function(startPosition,deleteCount){this.removeComponents(this.eValuesFrom,startPosition,deleteCount),this.removeComponents(this.eValuesTo,startPosition,deleteCount)},TextFilter.prototype.mapValuesFromModel=function(filterModel){var _a=filterModel||{},filter=_a.filter,filterTo=_a.filterTo,type=_a.type;return[filter||null,filterTo||null].slice(0,this.getNumberOfInputs(type))},TextFilter.prototype.evaluateNullValue=function(filterType){var filterTypesAllowNulls=[SimpleFilter.NOT_EQUAL,SimpleFilter.NOT_CONTAINS,SimpleFilter.BLANK];return!!filterType&&filterTypesAllowNulls.indexOf(filterType)>=0},TextFilter.prototype.evaluateNonNullValue=function(values,cellValue,filterModel,params){var _this=this,formattedValues=values.map((function(v){return _this.formatter(v)}))||[],cellValueFormatted=this.formatter(cellValue),_a=this.textFilterParams,api=_a.api,colDef=_a.colDef,column=_a.column,columnApi=_a.columnApi,context=_a.context,textFormatter=_a.textFormatter;if(filterModel.type===SimpleFilter.BLANK)return this.isBlank(cellValue);if(filterModel.type===SimpleFilter.NOT_BLANK)return!this.isBlank(cellValue);var matcherParams={api,colDef,column,columnApi,context,node:params.node,data:params.data,filterOption:filterModel.type,value:cellValueFormatted,textFormatter};return formattedValues.some((function(v){return _this.matcher(__assign$h(__assign$h({},matcherParams),{filterText:v}))}))},TextFilter.prototype.getModelAsString=function(model){var _a;return null!==(_a=this.filterModelFormatter.getModelAsString(model))&&void 0!==_a?_a:""},TextFilter.DEFAULT_FILTER_OPTIONS=[SimpleFilter.CONTAINS,SimpleFilter.NOT_CONTAINS,SimpleFilter.EQUALS,SimpleFilter.NOT_EQUAL,SimpleFilter.STARTS_WITH,SimpleFilter.ENDS_WITH,SimpleFilter.BLANK,SimpleFilter.NOT_BLANK],TextFilter.DEFAULT_FORMATTER=function(from){return from},TextFilter.DEFAULT_LOWERCASE_FORMATTER=function(from){return null==from?null:from.toString().toLowerCase()},TextFilter.DEFAULT_MATCHER=function(_a){var filterOption=_a.filterOption,value=_a.value,filterText=_a.filterText;if(null==filterText)return!1;switch(filterOption){case TextFilter.CONTAINS:return value.indexOf(filterText)>=0;case TextFilter.NOT_CONTAINS:return value.indexOf(filterText)<0;case TextFilter.EQUALS:return value===filterText;case TextFilter.NOT_EQUAL:return value!=filterText;case TextFilter.STARTS_WITH:return 0===value.indexOf(filterText);case TextFilter.ENDS_WITH:var index=value.lastIndexOf(filterText);return index>=0&&index===value.length-filterText.length;default:return!1}},TextFilter}(SimpleFilter),__extends$2E=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2k=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},FloatingFilterTextInputService=function(_super){function FloatingFilterTextInputService(params){var _this=_super.call(this)||this;return _this.params=params,_this.valueChangedListener=function(){},_this}return __extends$2E(FloatingFilterTextInputService,_super),FloatingFilterTextInputService.prototype.setupGui=function(parentElement){var _a,_this=this;this.eFloatingFilterTextInput=this.createManagedBean(new AgInputTextField(null===(_a=this.params)||void 0===_a?void 0:_a.config));var eInput=this.eFloatingFilterTextInput.getGui();parentElement.appendChild(eInput),this.addManagedListener(eInput,"input",(function(e){return _this.valueChangedListener(e)})),this.addManagedListener(eInput,"keydown",(function(e){return _this.valueChangedListener(e)}))},FloatingFilterTextInputService.prototype.setEditable=function(editable){this.eFloatingFilterTextInput.setDisabled(!editable)},FloatingFilterTextInputService.prototype.setAutoComplete=function(autoComplete){this.eFloatingFilterTextInput.setAutoComplete(autoComplete)},FloatingFilterTextInputService.prototype.getValue=function(){return this.eFloatingFilterTextInput.getValue()},FloatingFilterTextInputService.prototype.setValue=function(value,silent){this.eFloatingFilterTextInput.setValue(value,silent)},FloatingFilterTextInputService.prototype.setValueChangedListener=function(listener){this.valueChangedListener=listener},FloatingFilterTextInputService.prototype.setParams=function(params){this.setAriaLabel(params.ariaLabel),void 0!==params.autoComplete&&this.setAutoComplete(params.autoComplete)},FloatingFilterTextInputService.prototype.setAriaLabel=function(ariaLabel){this.eFloatingFilterTextInput.setInputAriaLabel(ariaLabel)},FloatingFilterTextInputService}(BeanStub),TextInputFloatingFilter=function(_super){function TextInputFloatingFilter(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2E(TextInputFloatingFilter,_super),TextInputFloatingFilter.prototype.postConstruct=function(){this.setTemplate('\n            <div class="ag-floating-filter-input" role="presentation" ref="eFloatingFilterInputContainer"></div>\n        ')},TextInputFloatingFilter.prototype.getDefaultDebounceMs=function(){return 500},TextInputFloatingFilter.prototype.onParentModelChanged=function(model,event){this.isEventFromFloatingFilter(event)||this.isEventFromDataChange(event)||(this.setLastTypeFromModel(model),this.setEditable(this.canWeEditAfterModelFromParentFilter(model)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(model)))},TextInputFloatingFilter.prototype.init=function(params){this.setupFloatingFilterInputService(params),_super.prototype.init.call(this,params),this.setTextInputParams(params)},TextInputFloatingFilter.prototype.setupFloatingFilterInputService=function(params){this.floatingFilterInputService=this.createFloatingFilterInputService(params),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)},TextInputFloatingFilter.prototype.setTextInputParams=function(params){var _a;this.params=params;var autoComplete=null!==(_a=params.browserAutoComplete)&&void 0!==_a&&_a;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(params),autoComplete}),this.applyActive=ProvidedFilter.isUseApplyButton(this.params.filterParams),!this.isReadOnly()){var debounceMs=ProvidedFilter.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),toDebounce=debounce(this.syncUpWithParentFilter.bind(this),debounceMs);this.floatingFilterInputService.setValueChangedListener(toDebounce)}},TextInputFloatingFilter.prototype.onParamsUpdated=function(params){_super.prototype.onParamsUpdated.call(this,params),this.setTextInputParams(params)},TextInputFloatingFilter.prototype.recreateFloatingFilterInputService=function(params){var value=this.floatingFilterInputService.getValue();clearElement(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(params),this.floatingFilterInputService.setValue(value,!0)},TextInputFloatingFilter.prototype.getAriaLabel=function(params){return this.columnModel.getDisplayNameForColumn(params.column,"header",!0)+" "+this.localeService.getLocaleTextFunc()("ariaFilterInput","Filter Input")},TextInputFloatingFilter.prototype.syncUpWithParentFilter=function(e){var _this=this,isEnterKey=e.key===KeyCode.ENTER;if(!this.applyActive||isEnterKey){var value=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(value=TextFilter.trimInput(value),this.floatingFilterInputService.setValue(value,!0)),this.params.parentFilterInstance((function(filterInstance){filterInstance&&filterInstance.onFloatingFilterChanged(_this.getLastType()||null,value||null)}))}},TextInputFloatingFilter.prototype.setEditable=function(editable){this.floatingFilterInputService.setEditable(editable)},__decorate$2k([Autowired("columnModel")],TextInputFloatingFilter.prototype,"columnModel",void 0),__decorate$2k([RefSelector("eFloatingFilterInputContainer")],TextInputFloatingFilter.prototype,"eFloatingFilterInputContainer",void 0),__decorate$2k([PostConstruct],TextInputFloatingFilter.prototype,"postConstruct",null),TextInputFloatingFilter}(SimpleFloatingFilter),__extends$2D=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),FloatingFilterNumberInputService=function(_super){function FloatingFilterNumberInputService(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.valueChangedListener=function(){},_this.numberInputActive=!0,_this}return __extends$2D(FloatingFilterNumberInputService,_super),FloatingFilterNumberInputService.prototype.setupGui=function(parentElement){var _this=this;this.eFloatingFilterNumberInput=this.createManagedBean(new AgInputNumberField),this.eFloatingFilterTextInput=this.createManagedBean(new AgInputTextField),this.eFloatingFilterTextInput.setDisabled(!0);var eNumberInput=this.eFloatingFilterNumberInput.getGui(),eTextInput=this.eFloatingFilterTextInput.getGui();parentElement.appendChild(eNumberInput),parentElement.appendChild(eTextInput),this.setupListeners(eNumberInput,(function(e){return _this.valueChangedListener(e)})),this.setupListeners(eTextInput,(function(e){return _this.valueChangedListener(e)}))},FloatingFilterNumberInputService.prototype.setEditable=function(editable){this.numberInputActive=editable,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)},FloatingFilterNumberInputService.prototype.setAutoComplete=function(autoComplete){this.eFloatingFilterNumberInput.setAutoComplete(autoComplete),this.eFloatingFilterTextInput.setAutoComplete(autoComplete)},FloatingFilterNumberInputService.prototype.getValue=function(){return this.getActiveInputElement().getValue()},FloatingFilterNumberInputService.prototype.setValue=function(value,silent){this.getActiveInputElement().setValue(value,silent)},FloatingFilterNumberInputService.prototype.getActiveInputElement=function(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput},FloatingFilterNumberInputService.prototype.setValueChangedListener=function(listener){this.valueChangedListener=listener},FloatingFilterNumberInputService.prototype.setupListeners=function(element,listener){this.addManagedListener(element,"input",listener),this.addManagedListener(element,"keydown",listener)},FloatingFilterNumberInputService.prototype.setParams=function(params){this.setAriaLabel(params.ariaLabel),void 0!==params.autoComplete&&this.setAutoComplete(params.autoComplete)},FloatingFilterNumberInputService.prototype.setAriaLabel=function(ariaLabel){this.eFloatingFilterNumberInput.setInputAriaLabel(ariaLabel),this.eFloatingFilterTextInput.setInputAriaLabel(ariaLabel)},FloatingFilterNumberInputService}(BeanStub),NumberFloatingFilter=function(_super){function NumberFloatingFilter(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2D(NumberFloatingFilter,_super),NumberFloatingFilter.prototype.init=function(params){var _a;_super.prototype.init.call(this,params),this.filterModelFormatter=new NumberFilterModelFormatter(this.localeService,this.optionsFactory,null===(_a=params.filterParams)||void 0===_a?void 0:_a.numberFormatter)},NumberFloatingFilter.prototype.onParamsUpdated=function(params){getAllowedCharPattern(params.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(params),_super.prototype.onParamsUpdated.call(this,params),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})},NumberFloatingFilter.prototype.getDefaultFilterOptions=function(){return NumberFilter.DEFAULT_FILTER_OPTIONS},NumberFloatingFilter.prototype.getFilterModelFormatter=function(){return this.filterModelFormatter},NumberFloatingFilter.prototype.createFloatingFilterInputService=function(params){return this.allowedCharPattern=getAllowedCharPattern(params.filterParams),this.allowedCharPattern?this.createManagedBean(new FloatingFilterTextInputService({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new FloatingFilterNumberInputService)},NumberFloatingFilter}(TextInputFloatingFilter),__extends$2C=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),TextFloatingFilter=function(_super){function TextFloatingFilter(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2C(TextFloatingFilter,_super),TextFloatingFilter.prototype.init=function(params){_super.prototype.init.call(this,params),this.filterModelFormatter=new TextFilterModelFormatter(this.localeService,this.optionsFactory)},TextFloatingFilter.prototype.onParamsUpdated=function(params){_super.prototype.onParamsUpdated.call(this,params),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})},TextFloatingFilter.prototype.getDefaultFilterOptions=function(){return TextFilter.DEFAULT_FILTER_OPTIONS},TextFloatingFilter.prototype.getFilterModelFormatter=function(){return this.filterModelFormatter},TextFloatingFilter.prototype.createFloatingFilterInputService=function(){return this.createManagedBean(new FloatingFilterTextInputService)},TextFloatingFilter}(TextInputFloatingFilter),TouchListener=function(){function TouchListener(eElement,preventMouseClick){var _this=this;void 0===preventMouseClick&&(preventMouseClick=!1),this.destroyFuncs=[],this.touching=!1,this.eventService=new EventService,this.eElement=eElement,this.preventMouseClick=preventMouseClick;var startListener=this.onTouchStart.bind(this),moveListener=this.onTouchMove.bind(this),endListener=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",startListener,{passive:!0}),this.eElement.addEventListener("touchmove",moveListener,{passive:!0}),this.eElement.addEventListener("touchend",endListener,{passive:!1}),this.destroyFuncs.push((function(){_this.eElement.removeEventListener("touchstart",startListener,{passive:!0}),_this.eElement.removeEventListener("touchmove",moveListener,{passive:!0}),_this.eElement.removeEventListener("touchend",endListener,{passive:!1})}))}return TouchListener.prototype.getActiveTouch=function(touchList){for(var i=0;i<touchList.length;i++){if(touchList[i].identifier===this.touchStart.identifier)return touchList[i]}return null},TouchListener.prototype.addEventListener=function(eventType,listener){this.eventService.addEventListener(eventType,listener)},TouchListener.prototype.removeEventListener=function(eventType,listener){this.eventService.removeEventListener(eventType,listener)},TouchListener.prototype.onTouchStart=function(touchEvent){var _this=this;if(!this.touching){this.touchStart=touchEvent.touches[0],this.touching=!0,this.moved=!1;var touchStartCopy=this.touchStart;window.setTimeout((function(){var touchesMatch=_this.touchStart===touchStartCopy;if(_this.touching&&touchesMatch&&!_this.moved){_this.moved=!0;var event_1={type:TouchListener.EVENT_LONG_TAP,touchStart:_this.touchStart,touchEvent};_this.eventService.dispatchEvent(event_1)}}),500)}},TouchListener.prototype.onTouchMove=function(touchEvent){if(this.touching){var touch=this.getActiveTouch(touchEvent.touches);if(touch)!areEventsNear(touch,this.touchStart,4)&&(this.moved=!0)}},TouchListener.prototype.onTouchEnd=function(touchEvent){if(this.touching){if(!this.moved){var event_2={type:TouchListener.EVENT_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(event_2),this.checkForDoubleTap()}this.preventMouseClick&&touchEvent.cancelable&&touchEvent.preventDefault(),this.touching=!1}},TouchListener.prototype.checkForDoubleTap=function(){var now=(new Date).getTime();if(this.lastTapTime&&this.lastTapTime>0)if(now-this.lastTapTime>TouchListener.DOUBLE_TAP_MILLIS){var event_3={type:TouchListener.EVENT_DOUBLE_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(event_3),this.lastTapTime=null}else this.lastTapTime=now;else this.lastTapTime=now},TouchListener.prototype.destroy=function(){this.destroyFuncs.forEach((function(func){return func()}))},TouchListener.EVENT_TAP="tap",TouchListener.EVENT_DOUBLE_TAP="doubleTap",TouchListener.EVENT_LONG_TAP="longTap",TouchListener.DOUBLE_TAP_MILLIS=500,TouchListener}(),__extends$2B=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2j=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SortIndicatorComp=function(_super){function SortIndicatorComp(skipTemplate){var _this=_super.call(this)||this;return skipTemplate||_this.setTemplate(SortIndicatorComp.TEMPLATE),_this}return __extends$2B(SortIndicatorComp,_super),SortIndicatorComp.prototype.attachCustomElements=function(eSortOrder,eSortAsc,eSortDesc,eSortMixed,eSortNone){this.eSortOrder=eSortOrder,this.eSortAsc=eSortAsc,this.eSortDesc=eSortDesc,this.eSortMixed=eSortMixed,this.eSortNone=eSortNone},SortIndicatorComp.prototype.setupSort=function(column,suppressOrder){var _this=this;void 0===suppressOrder&&(suppressOrder=!1),this.column=column,this.suppressOrder=suppressOrder,this.setupMultiSortIndicator(),!!this.column.getColDef().sortable&&(this.addInIcon("sortAscending",this.eSortAsc,column),this.addInIcon("sortDescending",this.eSortDesc,column),this.addInIcon("sortUnSort",this.eSortNone,column),this.addManagedListener(this.eventService,Events.EVENT_SORT_CHANGED,(function(){return _this.onSortChanged()})),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,(function(){return _this.onSortChanged()})),this.onSortChanged())},SortIndicatorComp.prototype.addInIcon=function(iconName,eParent,column){if(null!=eParent){var eIcon=createIconNoSpan(iconName,this.gridOptionsService,column);eIcon&&eParent.appendChild(eIcon)}},SortIndicatorComp.prototype.onSortChanged=function(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()},SortIndicatorComp.prototype.updateIcons=function(){var sortDirection=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){var isAscending="asc"===sortDirection;setDisplayed(this.eSortAsc,isAscending,{skipAriaHidden:!0})}if(this.eSortDesc){var isDescending="desc"===sortDirection;setDisplayed(this.eSortDesc,isDescending,{skipAriaHidden:!0})}if(this.eSortNone){var alwaysHideNoSort=!this.column.getColDef().unSortIcon&&!this.gridOptionsService.is("unSortIcon"),isNone=null==sortDirection;setDisplayed(this.eSortNone,!alwaysHideNoSort&&isNone,{skipAriaHidden:!0})}},SortIndicatorComp.prototype.setupMultiSortIndicator=function(){var _this=this;this.addInIcon("sortUnSort",this.eSortMixed,this.column);var isColumnShowingRowGroup=this.column.getColDef().showRowGroup;this.gridOptionsService.isColumnsSortingCoupledToGroup()&&isColumnShowingRowGroup&&(this.addManagedListener(this.eventService,Events.EVENT_SORT_CHANGED,(function(){return _this.updateMultiSortIndicator()})),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,(function(){return _this.updateMultiSortIndicator()})),this.updateMultiSortIndicator())},SortIndicatorComp.prototype.updateMultiSortIndicator=function(){if(this.eSortMixed){var isMixedSort="mixed"===this.sortController.getDisplaySortForColumn(this.column);setDisplayed(this.eSortMixed,isMixedSort,{skipAriaHidden:!0})}},SortIndicatorComp.prototype.updateSortOrder=function(){var _a,_this=this;if(this.eSortOrder){var allColumnsWithSorting=this.sortController.getColumnsWithSortingOrdered(),indexThisCol=null!==(_a=this.sortController.getDisplaySortIndexForColumn(this.column))&&void 0!==_a?_a:-1,moreThanOneColSorting=allColumnsWithSorting.some((function(col){var _a;return null!==(_a=_this.sortController.getDisplaySortIndexForColumn(col))&&void 0!==_a&&_a})),showIndex=indexThisCol>=0&&moreThanOneColSorting;setDisplayed(this.eSortOrder,showIndex,{skipAriaHidden:!0}),indexThisCol>=0?this.eSortOrder.innerHTML=(indexThisCol+1).toString():clearElement(this.eSortOrder)}},SortIndicatorComp.TEMPLATE='<span class="ag-sort-indicator-container">\n            <span ref="eSortOrder" class="ag-sort-indicator-icon ag-sort-order ag-hidden" aria-hidden="true"></span>\n            <span ref="eSortAsc" class="ag-sort-indicator-icon ag-sort-ascending-icon ag-hidden" aria-hidden="true"></span>\n            <span ref="eSortDesc" class="ag-sort-indicator-icon ag-sort-descending-icon ag-hidden" aria-hidden="true"></span>\n            <span ref="eSortMixed" class="ag-sort-indicator-icon ag-sort-mixed-icon ag-hidden" aria-hidden="true"></span>\n            <span ref="eSortNone" class="ag-sort-indicator-icon ag-sort-none-icon ag-hidden" aria-hidden="true"></span>\n        </span>',__decorate$2j([RefSelector("eSortOrder")],SortIndicatorComp.prototype,"eSortOrder",void 0),__decorate$2j([RefSelector("eSortAsc")],SortIndicatorComp.prototype,"eSortAsc",void 0),__decorate$2j([RefSelector("eSortDesc")],SortIndicatorComp.prototype,"eSortDesc",void 0),__decorate$2j([RefSelector("eSortMixed")],SortIndicatorComp.prototype,"eSortMixed",void 0),__decorate$2j([RefSelector("eSortNone")],SortIndicatorComp.prototype,"eSortNone",void 0),__decorate$2j([Autowired("columnModel")],SortIndicatorComp.prototype,"columnModel",void 0),__decorate$2j([Autowired("sortController")],SortIndicatorComp.prototype,"sortController",void 0),SortIndicatorComp}(Component),__extends$2A=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2i=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HeaderComp=function(_super){function HeaderComp(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.lastMovingChanged=0,_this}return __extends$2A(HeaderComp,_super),HeaderComp.prototype.destroy=function(){_super.prototype.destroy.call(this)},HeaderComp.prototype.refresh=function(params){return this.params=params,this.workOutTemplate()==this.currentTemplate&&(this.workOutShowMenu()==this.currentShowMenu&&(this.workOutSort()==this.currentSort&&(this.setDisplayName(params),!0)))},HeaderComp.prototype.workOutTemplate=function(){var template=firstExistingValue(this.params.template,HeaderComp.TEMPLATE);return template=template&&template.trim?template.trim():template},HeaderComp.prototype.init=function(params){this.params=params,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate),this.setupTap(),this.setupIcons(params.column),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setDisplayName(params)},HeaderComp.prototype.setDisplayName=function(params){if(this.currentDisplayName!=params.displayName){this.currentDisplayName=params.displayName;var displayNameSanitised=escapeString(this.currentDisplayName);this.eText&&(this.eText.innerHTML=displayNameSanitised)}},HeaderComp.prototype.setupIcons=function(column){this.addInIcon("menu",this.eMenu,column),this.addInIcon("filter",this.eFilter,column)},HeaderComp.prototype.addInIcon=function(iconName,eParent,column){if(null!=eParent){var eIcon=createIconNoSpan(iconName,this.gridOptionsService,column);eIcon&&eParent.appendChild(eIcon)}},HeaderComp.prototype.setupTap=function(){var _this=this,gridOptionsService=this.gridOptionsService;if(!gridOptionsService.is("suppressTouch")){var touchListener=new TouchListener(this.getGui(),!0),suppressMenuHide=gridOptionsService.is("suppressMenuHide"),tapMenuButton=suppressMenuHide&&exists(this.eMenu),menuTouchListener=tapMenuButton?new TouchListener(this.eMenu,!0):touchListener;if(this.params.enableMenu){var eventType=tapMenuButton?"EVENT_TAP":"EVENT_LONG_TAP";this.addManagedListener(menuTouchListener,TouchListener[eventType],(function(event){gridOptionsService.api.showColumnMenuAfterMouseClick(_this.params.column,event.touchStart)}))}if(this.params.enableSorting){this.addManagedListener(touchListener,TouchListener.EVENT_TAP,(function(event){var target=event.touchStart.target;suppressMenuHide&&_this.eMenu.contains(target)||_this.sortController.progressSort(_this.params.column,!1,"uiColumnSorted")}))}this.addDestroyFunc((function(){return touchListener.destroy()})),tapMenuButton&&this.addDestroyFunc((function(){return menuTouchListener.destroy()}))}},HeaderComp.prototype.workOutShowMenu=function(){var menuHides=!this.gridOptionsService.is("suppressMenuHide"),onIpadAndMenuHides=isIOSUserAgent()&&menuHides;return this.params.enableMenu&&!onIpadAndMenuHides},HeaderComp.prototype.setMenu=function(){var _this=this;if(this.eMenu)if(this.currentShowMenu=this.workOutShowMenu(),this.currentShowMenu){var suppressMenuHide=this.gridOptionsService.is("suppressMenuHide");this.addManagedListener(this.eMenu,"click",(function(){return _this.showMenu(_this.eMenu)})),this.eMenu.classList.toggle("ag-header-menu-always-show",suppressMenuHide)}else removeFromParent(this.eMenu)},HeaderComp.prototype.showMenu=function(eventSource){eventSource||(eventSource=this.eMenu),this.menuFactory.showMenuAfterButtonClick(this.params.column,eventSource,"columnMenu")},HeaderComp.prototype.workOutSort=function(){return this.params.enableSorting},HeaderComp.prototype.setupSort=function(){var _this=this;if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.context.createBean(new SortIndicatorComp(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),this.currentSort){var sortUsingCtrl="ctrl"===this.gridOptionsService.get("multiSortKey");this.addManagedListener(this.params.column,Column.EVENT_MOVING_CHANGED,(function(){_this.lastMovingChanged=(new Date).getTime()})),this.eLabel&&this.addManagedListener(this.eLabel,"click",(function(event){var moving=_this.params.column.isMoving(),movedRecently=(new Date).getTime()-_this.lastMovingChanged<50;if(!(moving||movedRecently)){var multiSort=sortUsingCtrl?event.ctrlKey||event.metaKey:event.shiftKey;_this.params.progressSort(multiSort)}}));var onSortingChanged=function(){if(_this.addOrRemoveCssClass("ag-header-cell-sorted-asc",_this.params.column.isSortAscending()),_this.addOrRemoveCssClass("ag-header-cell-sorted-desc",_this.params.column.isSortDescending()),_this.addOrRemoveCssClass("ag-header-cell-sorted-none",_this.params.column.isSortNone()),_this.params.column.getColDef().showRowGroup){var sourceColumns=_this.columnModel.getSourceColumnsForGroupColumn(_this.params.column),isMultiSorting=!(null==sourceColumns?void 0:sourceColumns.every((function(sourceCol){return _this.params.column.getSort()==sourceCol.getSort()})));_this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",isMultiSorting)}};this.addManagedListener(this.eventService,Events.EVENT_SORT_CHANGED,onSortingChanged),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,onSortingChanged)}},HeaderComp.prototype.setupFilterIcon=function(){this.eFilter&&(this.addManagedListener(this.params.column,Column.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.onFilterChanged())},HeaderComp.prototype.onFilterChanged=function(){var filterPresent=this.params.column.isFilterActive();setDisplayed(this.eFilter,filterPresent,{skipAriaHidden:!0})},HeaderComp.TEMPLATE='<div class="ag-cell-label-container" role="presentation">\n            <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>\n            <div ref="eLabel" class="ag-header-cell-label" role="presentation">\n                <span ref="eText" class="ag-header-cell-text"></span>\n                <span ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>\n                <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>\n            </div>\n        </div>',__decorate$2i([Autowired("sortController")],HeaderComp.prototype,"sortController",void 0),__decorate$2i([Autowired("menuFactory")],HeaderComp.prototype,"menuFactory",void 0),__decorate$2i([Autowired("columnModel")],HeaderComp.prototype,"columnModel",void 0),__decorate$2i([RefSelector("eFilter")],HeaderComp.prototype,"eFilter",void 0),__decorate$2i([RefSelector("eSortIndicator")],HeaderComp.prototype,"eSortIndicator",void 0),__decorate$2i([RefSelector("eMenu")],HeaderComp.prototype,"eMenu",void 0),__decorate$2i([RefSelector("eLabel")],HeaderComp.prototype,"eLabel",void 0),__decorate$2i([RefSelector("eText")],HeaderComp.prototype,"eText",void 0),__decorate$2i([RefSelector("eSortOrder")],HeaderComp.prototype,"eSortOrder",void 0),__decorate$2i([RefSelector("eSortAsc")],HeaderComp.prototype,"eSortAsc",void 0),__decorate$2i([RefSelector("eSortDesc")],HeaderComp.prototype,"eSortDesc",void 0),__decorate$2i([RefSelector("eSortMixed")],HeaderComp.prototype,"eSortMixed",void 0),__decorate$2i([RefSelector("eSortNone")],HeaderComp.prototype,"eSortNone",void 0),HeaderComp}(Component),__extends$2z=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2h=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HeaderGroupComp=function(_super){function HeaderGroupComp(){return _super.call(this,HeaderGroupComp.TEMPLATE)||this}return __extends$2z(HeaderGroupComp,_super),HeaderGroupComp.prototype.destroy=function(){_super.prototype.destroy.call(this)},HeaderGroupComp.prototype.init=function(params){this.params=params,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()},HeaderGroupComp.prototype.checkWarnings=function(){if(this.params.template){doOnce((function(){return console.warn("AG Grid: A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")}),"HeaderGroupComp.templateNotSupported")}},HeaderGroupComp.prototype.setupExpandIcons=function(){var _this=this;this.addInIcon("columnGroupOpened","agOpened"),this.addInIcon("columnGroupClosed","agClosed");var expandAction=function(event){if(!isStopPropagationForAgGrid(event)){var newExpandedValue=!_this.params.columnGroup.isExpanded();_this.columnModel.setColumnGroupOpened(_this.params.columnGroup.getProvidedColumnGroup(),newExpandedValue,"uiColumnExpanded")}};this.addTouchAndClickListeners(this.eCloseIcon,expandAction),this.addTouchAndClickListeners(this.eOpenIcon,expandAction);var stopPropagationAction=function(event){stopPropagationForAgGrid(event)};this.addManagedListener(this.eCloseIcon,"dblclick",stopPropagationAction),this.addManagedListener(this.eOpenIcon,"dblclick",stopPropagationAction),this.addManagedListener(this.getGui(),"dblclick",expandAction),this.updateIconVisibility();var providedColumnGroup=this.params.columnGroup.getProvidedColumnGroup();this.addManagedListener(providedColumnGroup,ProvidedColumnGroup.EVENT_EXPANDED_CHANGED,this.updateIconVisibility.bind(this)),this.addManagedListener(providedColumnGroup,ProvidedColumnGroup.EVENT_EXPANDABLE_CHANGED,this.updateIconVisibility.bind(this))},HeaderGroupComp.prototype.addTouchAndClickListeners=function(eElement,action){var touchListener=new TouchListener(eElement,!0);this.addManagedListener(touchListener,TouchListener.EVENT_TAP,action),this.addDestroyFunc((function(){return touchListener.destroy()})),this.addManagedListener(eElement,"click",action)},HeaderGroupComp.prototype.updateIconVisibility=function(){if(this.params.columnGroup.isExpandable()){var expanded=this.params.columnGroup.isExpanded();setDisplayed(this.eOpenIcon,expanded),setDisplayed(this.eCloseIcon,!expanded)}else setDisplayed(this.eOpenIcon,!1),setDisplayed(this.eCloseIcon,!1)},HeaderGroupComp.prototype.addInIcon=function(iconName,refName){var eIcon=createIconNoSpan(iconName,this.gridOptionsService,null);eIcon&&this.getRefElement(refName).appendChild(eIcon)},HeaderGroupComp.prototype.addGroupExpandIcon=function(){if(!this.params.columnGroup.isExpandable())return setDisplayed(this.eOpenIcon,!1),void setDisplayed(this.eCloseIcon,!1)},HeaderGroupComp.prototype.setupLabel=function(){var _a,_b=this.params,displayName=_b.displayName,columnGroup=_b.columnGroup;if(exists(displayName)){var displayNameSanitised=escapeString(displayName);this.getRefElement("agLabel").innerHTML=displayNameSanitised}this.addOrRemoveCssClass("ag-sticky-label",!(null===(_a=columnGroup.getColGroupDef())||void 0===_a?void 0:_a.suppressStickyLabel))},HeaderGroupComp.TEMPLATE='<div class="ag-header-group-cell-label" ref="agContainer" role="presentation">\n            <span ref="agLabel" class="ag-header-group-text" role="presentation"></span>\n            <span ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>\n            <span ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>\n        </div>',__decorate$2h([Autowired("columnModel")],HeaderGroupComp.prototype,"columnModel",void 0),__decorate$2h([RefSelector("agOpened")],HeaderGroupComp.prototype,"eOpenIcon",void 0),__decorate$2h([RefSelector("agClosed")],HeaderGroupComp.prototype,"eCloseIcon",void 0),HeaderGroupComp}(Component),__extends$2y=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),PopupComponent=function(_super){function PopupComponent(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2y(PopupComponent,_super),PopupComponent.prototype.isPopup=function(){return!0},PopupComponent.prototype.setParentComponent=function(container){container.addCssClass("ag-has-popup"),_super.prototype.setParentComponent.call(this,container)},PopupComponent.prototype.destroy=function(){var parentComp=this.parentComponent;parentComp&&parentComp.isAlive()&&parentComp.getGui().classList.remove("ag-has-popup"),_super.prototype.destroy.call(this)},PopupComponent}(Component),__extends$2x=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),LargeTextCellEditor=function(_super){function LargeTextCellEditor(){return _super.call(this,LargeTextCellEditor.TEMPLATE)||this}return __extends$2x(LargeTextCellEditor,_super),LargeTextCellEditor.prototype.init=function(params){this.params=params,this.focusAfterAttached=params.cellStartedEdit,this.eTextArea.setMaxLength(params.maxLength||200).setCols(params.cols||60).setRows(params.rows||10),exists(params.value,!0)&&this.eTextArea.setValue(params.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()},LargeTextCellEditor.prototype.onKeyDown=function(event){var key=event.key;(key===KeyCode.LEFT||key===KeyCode.UP||key===KeyCode.RIGHT||key===KeyCode.DOWN||event.shiftKey&&key===KeyCode.ENTER)&&event.stopPropagation()},LargeTextCellEditor.prototype.afterGuiAttached=function(){var translate=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(translate("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()},LargeTextCellEditor.prototype.getValue=function(){var value=this.eTextArea.getValue();return exists(value)||exists(this.params.value)?this.params.parseValue(value):this.params.value},LargeTextCellEditor.TEMPLATE='<div class="ag-large-text">\n            <ag-input-text-area ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>\n        </div>',function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([RefSelector("eTextArea")],LargeTextCellEditor.prototype,"eTextArea",void 0),LargeTextCellEditor}(PopupComponent),__extends$2w=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2f=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SelectCellEditor=function(_super){function SelectCellEditor(){var _this=_super.call(this,'<div class="ag-cell-edit-wrapper">\n                <ag-select class="ag-cell-editor" ref="eSelect"></ag-select>\n            </div>')||this;return _this.startedByEnter=!1,_this}return __extends$2w(SelectCellEditor,_super),SelectCellEditor.prototype.init=function(params){this.focusAfterAttached=params.cellStartedEdit;var eSelect=this.eSelect,valueFormatterService=this.valueFormatterService,gridOptionsService=this.gridOptionsService,values=params.values,value=params.value,eventKey=params.eventKey;if(missing(values))console.warn("AG Grid: no values found for select cellEditor");else{this.startedByEnter=null!=eventKey&&eventKey===KeyCode.ENTER;var hasValue=!1;values.forEach((function(currentValue){var option={value:currentValue},valueFormatted=valueFormatterService.formatValue(params.column,null,currentValue),valueFormattedExits=null!=valueFormatted;option.text=valueFormattedExits?valueFormatted:currentValue,eSelect.addOption(option),hasValue=hasValue||value===currentValue})),hasValue?eSelect.setValue(params.value,!0):params.values.length&&eSelect.setValue(params.values[0],!0);var valueListGap=params.valueListGap,valueListMaxWidth=params.valueListMaxWidth,valueListMaxHeight=params.valueListMaxHeight;null!=valueListGap&&eSelect.setPickerGap(valueListGap),null!=valueListMaxHeight&&eSelect.setPickerMaxHeight(valueListMaxHeight),null!=valueListMaxWidth&&eSelect.setPickerMaxWidth(valueListMaxWidth),"fullRow"!==gridOptionsService.get("editType")&&this.addManagedListener(this.eSelect,AgSelect.EVENT_ITEM_SELECTED,(function(){return params.stopEditing()}))}},SelectCellEditor.prototype.afterGuiAttached=function(){var _this=this;this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout((function(){_this.isAlive()&&_this.eSelect.showPicker()}))},SelectCellEditor.prototype.focusIn=function(){this.eSelect.getFocusableElement().focus()},SelectCellEditor.prototype.getValue=function(){return this.eSelect.getValue()},SelectCellEditor.prototype.isPopup=function(){return!1},__decorate$2f([Autowired("valueFormatterService")],SelectCellEditor.prototype,"valueFormatterService",void 0),__decorate$2f([RefSelector("eSelect")],SelectCellEditor.prototype,"eSelect",void 0),SelectCellEditor}(PopupComponent),__extends$2v=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),SimpleCellEditor=function(_super){function SimpleCellEditor(cellEditorInput){var _this=_super.call(this,'\n            <div class="ag-cell-edit-wrapper">\n                '+cellEditorInput.getTemplate()+"\n            </div>")||this;return _this.cellEditorInput=cellEditorInput,_this}return __extends$2v(SimpleCellEditor,_super),SimpleCellEditor.prototype.init=function(params){this.params=params;var startValue,eInput=this.eInput;if(this.cellEditorInput.init(eInput,params),params.cellStartedEdit){this.focusAfterAttached=!0;var eventKey=params.eventKey;eventKey===KeyCode.BACKSPACE||params.eventKey===KeyCode.DELETE?startValue="":eventKey&&1===eventKey.length?startValue=eventKey:(startValue=this.cellEditorInput.getStartValue(),eventKey!==KeyCode.F2&&(this.highlightAllOnFocus=!0))}else this.focusAfterAttached=!1,startValue=this.cellEditorInput.getStartValue();null!=startValue&&eInput.setStartValue(startValue),this.addManagedListener(eInput.getGui(),"keydown",(function(event){var key=event.key;key!==KeyCode.PAGE_UP&&key!==KeyCode.PAGE_DOWN||event.preventDefault()}))},SimpleCellEditor.prototype.afterGuiAttached=function(){var _a,_b,translate=this.localeService.getLocaleTextFunc(),eInput=this.eInput;if(eInput.setInputAriaLabel(translate("ariaInputEditor","Input Editor")),this.focusAfterAttached){isBrowserSafari()||eInput.getFocusableElement().focus();var inputEl=eInput.getInputElement();this.highlightAllOnFocus?inputEl.select():null===(_b=(_a=this.cellEditorInput).setCaret)||void 0===_b||_b.call(_a)}},SimpleCellEditor.prototype.focusIn=function(){var eInput=this.eInput,focusEl=eInput.getFocusableElement(),inputEl=eInput.getInputElement();focusEl.focus(),inputEl.select()},SimpleCellEditor.prototype.getValue=function(){return this.cellEditorInput.getValue()},SimpleCellEditor.prototype.isPopup=function(){return!1},function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([RefSelector("eInput")],SimpleCellEditor.prototype,"eInput",void 0),SimpleCellEditor}(PopupComponent),__extends$2u=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),TextCellEditorInput=function(){function TextCellEditorInput(){}return TextCellEditorInput.prototype.getTemplate=function(){return'<ag-input-text-field class="ag-cell-editor" ref="eInput"></ag-input-text-field>'},TextCellEditorInput.prototype.init=function(eInput,params){this.eInput=eInput,this.params=params,null!=params.maxLength&&eInput.setMaxLength(params.maxLength)},TextCellEditorInput.prototype.getValue=function(){var value=this.eInput.getValue();return exists(value)||exists(this.params.value)?this.params.parseValue(value):this.params.value},TextCellEditorInput.prototype.getStartValue=function(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value},TextCellEditorInput.prototype.setCaret=function(){var value=this.eInput.getValue(),len=exists(value)&&value.length||0;len&&this.eInput.getInputElement().setSelectionRange(len,len)},TextCellEditorInput}(),TextCellEditor=function(_super){function TextCellEditor(){return _super.call(this,new TextCellEditorInput)||this}return __extends$2u(TextCellEditor,_super),TextCellEditor}(SimpleCellEditor),__extends$2t=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AnimateShowChangeCellRenderer=function(_super){function AnimateShowChangeCellRenderer(){var _this=_super.call(this,AnimateShowChangeCellRenderer.TEMPLATE)||this;return _this.refreshCount=0,_this}return __extends$2t(AnimateShowChangeCellRenderer,_super),AnimateShowChangeCellRenderer.prototype.init=function(params){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(params)},AnimateShowChangeCellRenderer.prototype.showDelta=function(params,delta){var absDelta=Math.abs(delta),valueFormatted=params.formatValue(absDelta),valueToUse=exists(valueFormatted)?valueFormatted:absDelta,deltaUp=delta>=0;this.eDelta.innerHTML=deltaUp?""+valueToUse:""+valueToUse,this.eDelta.classList.toggle("ag-value-change-delta-up",deltaUp),this.eDelta.classList.toggle("ag-value-change-delta-down",!deltaUp)},AnimateShowChangeCellRenderer.prototype.setTimerToRemoveDelta=function(){var _this=this;this.refreshCount++;var refreshCountCopy=this.refreshCount;window.setTimeout((function(){refreshCountCopy===_this.refreshCount&&_this.hideDeltaValue()}),2e3)},AnimateShowChangeCellRenderer.prototype.hideDeltaValue=function(){this.eValue.classList.remove("ag-value-change-value-highlight"),clearElement(this.eDelta)},AnimateShowChangeCellRenderer.prototype.refresh=function(params){var value=params.value;if(value===this.lastValue)return!1;if(exists(params.valueFormatted)?this.eValue.innerHTML=params.valueFormatted:exists(params.value)?this.eValue.innerHTML=value:clearElement(this.eValue),this.filterManager.isSuppressFlashingCellsBecauseFiltering())return!1;if("number"==typeof value&&"number"==typeof this.lastValue){var delta=value-this.lastValue;this.showDelta(params,delta)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),this.setTimerToRemoveDelta(),this.lastValue=value,!0},AnimateShowChangeCellRenderer.TEMPLATE='<span><span class="ag-value-change-delta"></span><span class="ag-value-change-value"></span></span>',function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([Autowired("filterManager")],AnimateShowChangeCellRenderer.prototype,"filterManager",void 0),AnimateShowChangeCellRenderer}(Component),__extends$2s=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AnimateSlideCellRenderer=function(_super){function AnimateSlideCellRenderer(){var _this=_super.call(this,AnimateSlideCellRenderer.TEMPLATE)||this;return _this.refreshCount=0,_this.eCurrent=_this.queryForHtmlElement(".ag-value-slide-current"),_this}return __extends$2s(AnimateSlideCellRenderer,_super),AnimateSlideCellRenderer.prototype.init=function(params){this.refresh(params)},AnimateSlideCellRenderer.prototype.addSlideAnimation=function(){var _this=this;this.refreshCount++;var refreshCountCopy=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious),this.ePrevious=loadTemplate('<span class="ag-value-slide-previous ag-value-slide-out"></span>'),this.ePrevious.innerHTML=this.eCurrent.innerHTML,this.getGui().insertBefore(this.ePrevious,this.eCurrent),window.setTimeout((function(){refreshCountCopy===_this.refreshCount&&_this.ePrevious.classList.add("ag-value-slide-out-end")}),50),window.setTimeout((function(){refreshCountCopy===_this.refreshCount&&(_this.getGui().removeChild(_this.ePrevious),_this.ePrevious=null)}),3e3)},AnimateSlideCellRenderer.prototype.refresh=function(params){var value=params.value;return missing(value)&&(value=""),value!==this.lastValue&&(!this.filterManager.isSuppressFlashingCellsBecauseFiltering()&&(this.addSlideAnimation(),this.lastValue=value,exists(params.valueFormatted)?this.eCurrent.innerHTML=params.valueFormatted:exists(params.value)?this.eCurrent.innerHTML=value:clearElement(this.eCurrent),!0))},AnimateSlideCellRenderer.TEMPLATE='<span>\n            <span class="ag-value-slide-current"></span>\n        </span>',function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([Autowired("filterManager")],AnimateSlideCellRenderer.prototype,"filterManager",void 0),AnimateSlideCellRenderer}(Component),__assign$g=function(){return __assign$g=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$g.apply(this,arguments)},RowNode=function(){function RowNode(beans){this.rowIndex=null,this.key=null,this.childrenMapped={},this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=RowNode.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=beans}return RowNode.prototype.setData=function(data){this.setDataCommon(data,!1)},RowNode.prototype.updateData=function(data){this.setDataCommon(data,!0)},RowNode.prototype.setDataCommon=function(data,update){var oldData=this.data;this.data=data,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();var event=this.createDataChangedEvent(data,oldData,update);this.dispatchLocalEvent(event)},RowNode.prototype.updateDataOnDetailNode=function(){this.detailNode&&(this.detailNode.data=this.data)},RowNode.prototype.createDataChangedEvent=function(newData,oldData,update){return{type:RowNode.EVENT_DATA_CHANGED,node:this,oldData,newData,update}},RowNode.prototype.createLocalRowEvent=function(type){return{type,node:this}},RowNode.prototype.getRowIndexString=function(){return"top"===this.rowPinned?"t-"+this.rowIndex:"bottom"===this.rowPinned?"b-"+this.rowIndex:this.rowIndex.toString()},RowNode.prototype.createDaemonNode=function(){var oldNode=new RowNode(this.beans);return oldNode.id=this.id,oldNode.data=this.data,oldNode.__daemon=!0,oldNode.selected=this.selected,oldNode.level=this.level,oldNode},RowNode.prototype.setDataAndId=function(data,id){var oldNode=exists(this.id)?this.createDaemonNode():null,oldData=this.data;this.data=data,this.updateDataOnDetailNode(),this.setId(id),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,oldNode);var event=this.createDataChangedEvent(data,oldData,!1);this.dispatchLocalEvent(event)},RowNode.prototype.checkRowSelectable=function(){var isRowSelectableFunc=this.beans.gridOptionsService.get("isRowSelectable");this.setRowSelectable(!isRowSelectableFunc||isRowSelectableFunc(this))},RowNode.prototype.setRowSelectable=function(newVal){if(this.selectable!==newVal&&(this.selectable=newVal,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_SELECTABLE_CHANGED)),this.beans.gridOptionsService.is("groupSelectsChildren"))){var selected=this.calculateSelectedFromChildren();this.setSelectedParams({newValue:null!=selected&&selected,source:"selectableChanged"})}},RowNode.prototype.setId=function(id){var getRowIdFunc=this.beans.gridOptionsService.getCallback("getRowId");if(getRowIdFunc)if(this.data){var parentKeys=this.getGroupKeys(!0);this.id=getRowIdFunc({data:this.data,parentKeys:parentKeys.length>0?parentKeys:void 0,level:this.level}),null!==this.id&&"string"==typeof this.id&&this.id.startsWith(RowNode.ID_PREFIX_ROW_GROUP)&&console.error("AG Grid: Row IDs cannot start with "+RowNode.ID_PREFIX_ROW_GROUP+", this is a reserved prefix for AG Grid's row grouping feature."),null!==this.id&&"string"!=typeof this.id&&(this.id=""+this.id)}else this.id=void 0;else this.id=id},RowNode.prototype.getGroupKeys=function(excludeSelf){void 0===excludeSelf&&(excludeSelf=!1);var keys=[],pointer=this;for(excludeSelf&&(pointer=pointer.parent);pointer&&pointer.level>=0;)keys.push(pointer.key),pointer=pointer.parent;return keys.reverse(),keys},RowNode.prototype.isPixelInRange=function(pixel){return!(!exists(this.rowTop)||!exists(this.rowHeight))&&(pixel>=this.rowTop&&pixel<this.rowTop+this.rowHeight)},RowNode.prototype.setFirstChild=function(firstChild){this.firstChild!==firstChild&&(this.firstChild=firstChild,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_FIRST_CHILD_CHANGED)))},RowNode.prototype.setLastChild=function(lastChild){this.lastChild!==lastChild&&(this.lastChild=lastChild,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_LAST_CHILD_CHANGED)))},RowNode.prototype.setChildIndex=function(childIndex){this.childIndex!==childIndex&&(this.childIndex=childIndex,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_CHILD_INDEX_CHANGED)))},RowNode.prototype.setRowTop=function(rowTop){this.oldRowTop=this.rowTop,this.rowTop!==rowTop&&(this.rowTop=rowTop,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_TOP_CHANGED)),this.setDisplayed(null!==rowTop))},RowNode.prototype.clearRowTopAndRowIndex=function(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)},RowNode.prototype.setDisplayed=function(displayed){this.displayed!==displayed&&(this.displayed=displayed,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_DISPLAYED_CHANGED)))},RowNode.prototype.setDragging=function(dragging){this.dragging!==dragging&&(this.dragging=dragging,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_DRAGGING_CHANGED)))},RowNode.prototype.setHighlighted=function(highlighted){highlighted!==this.highlighted&&(this.highlighted=highlighted,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_HIGHLIGHT_CHANGED)))},RowNode.prototype.setHovered=function(hovered){this.hovered!==hovered&&(this.hovered=hovered)},RowNode.prototype.isHovered=function(){return this.hovered},RowNode.prototype.setAllChildrenCount=function(allChildrenCount){this.allChildrenCount!==allChildrenCount&&(this.allChildrenCount=allChildrenCount,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_ALL_CHILDREN_COUNT_CHANGED)))},RowNode.prototype.setMaster=function(master){this.master!==master&&(this.master&&!master&&(this.expanded=!1),this.master=master,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_MASTER_CHANGED)))},RowNode.prototype.setGroup=function(group){this.group!==group&&(this.group&&!group&&(this.expanded=!1),this.group=group,this.updateHasChildren(),this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_GROUP_CHANGED)))},RowNode.prototype.setRowHeight=function(rowHeight,estimated){void 0===estimated&&(estimated=!1),this.rowHeight=rowHeight,this.rowHeightEstimated=estimated,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_HEIGHT_CHANGED))},RowNode.prototype.setRowAutoHeight=function(cellHeight,column){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[column.getId()]=cellHeight,null!=cellHeight&&(null==this.checkAutoHeightsDebounced&&(this.checkAutoHeightsDebounced=debounce(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())},RowNode.prototype.checkAutoHeights=function(){var _this=this,notAllPresent=!1,nonePresent=!0,newRowHeight=0,autoHeights=this.__autoHeights;if(null!=autoHeights&&(this.beans.columnModel.getAllDisplayedAutoHeightCols().forEach((function(col){var cellHeight=autoHeights[col.getId()];if(null==cellHeight){if(!_this.beans.columnModel.isColSpanActive())return void(notAllPresent=!0);var activeColsForRow=[];switch(col.getPinned()){case"left":activeColsForRow=_this.beans.columnModel.getDisplayedLeftColumnsForRow(_this);break;case"right":activeColsForRow=_this.beans.columnModel.getDisplayedRightColumnsForRow(_this);break;case null:activeColsForRow=_this.beans.columnModel.getViewportCenterColumnsForRow(_this)}if(activeColsForRow.includes(col))return void(notAllPresent=!0);cellHeight=-1}else nonePresent=!1;cellHeight>newRowHeight&&(newRowHeight=cellHeight)})),!notAllPresent&&((nonePresent||newRowHeight<10)&&(newRowHeight=this.beans.gridOptionsService.getRowHeightForNode(this).height),newRowHeight!=this.rowHeight))){this.setRowHeight(newRowHeight);var rowModel=this.beans.rowModel;rowModel.onRowHeightChangedDebounced&&rowModel.onRowHeightChangedDebounced()}},RowNode.prototype.setRowIndex=function(rowIndex){this.rowIndex!==rowIndex&&(this.rowIndex=rowIndex,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_ROW_INDEX_CHANGED)))},RowNode.prototype.setUiLevel=function(uiLevel){this.uiLevel!==uiLevel&&(this.uiLevel=uiLevel,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_UI_LEVEL_CHANGED)))},RowNode.prototype.setExpanded=function(expanded,e){if(this.expanded!==expanded){this.expanded=expanded,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_EXPANDED_CHANGED));var event=Object.assign({},this.createGlobalRowEvent(Events.EVENT_ROW_GROUP_OPENED),{expanded,event:e||null});this.beans.rowNodeEventThrottle.dispatchExpanded(event),this.sibling&&this.beans.rowRenderer.refreshCells({rowNodes:[this]})}},RowNode.prototype.createGlobalRowEvent=function(type){return{type,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned,context:this.beans.gridOptionsService.context,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi}},RowNode.prototype.dispatchLocalEvent=function(event){this.eventService&&this.eventService.dispatchEvent(event)},RowNode.prototype.setDataValue=function(colKey,newValue,eventSource){var _a,_this=this,column="string"!=typeof colKey?colKey:null!==(_a=_this.beans.columnModel.getGridColumn(colKey))&&void 0!==_a?_a:_this.beans.columnModel.getPrimaryColumn(colKey),oldValue=this.getValueFromValueService(column);if(this.beans.gridOptionsService.is("readOnlyEdit"))return this.dispatchEventForSaveValueReadOnly(column,oldValue,newValue,eventSource),!1;var valueChanged=this.beans.valueService.setValue(this,column,newValue,eventSource);return this.dispatchCellChangedEvent(column,newValue,oldValue),this.checkRowSelectable(),valueChanged},RowNode.prototype.getValueFromValueService=function(column){var lockedClosedGroup=this.leafGroup&&this.beans.columnModel.isPivotMode(),isOpenGroup=this.group&&this.expanded&&!this.footer&&!lockedClosedGroup,groupFootersEnabled=this.beans.gridOptionsService.getGroupIncludeFooter()({node:this}),groupAlwaysShowAggData=this.beans.gridOptionsService.is("groupSuppressBlankHeader"),ignoreAggData=isOpenGroup&&groupFootersEnabled&&!groupAlwaysShowAggData;return this.beans.valueService.getValue(column,this,!1,ignoreAggData)},RowNode.prototype.dispatchEventForSaveValueReadOnly=function(column,oldValue,newValue,eventSource){var event={type:Events.EVENT_CELL_EDIT_REQUEST,event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column,colDef:column.getColDef(),context:this.beans.gridOptionsService.context,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,data:this.data,node:this,oldValue,newValue,value:newValue,source:eventSource};this.beans.eventService.dispatchEvent(event)},RowNode.prototype.setGroupValue=function(colKey,newValue){var column=this.beans.columnModel.getGridColumn(colKey);missing(this.groupData)&&(this.groupData={});var columnId=column.getColId(),oldValue=this.groupData[columnId];oldValue!==newValue&&(this.groupData[columnId]=newValue,this.dispatchCellChangedEvent(column,newValue,oldValue))},RowNode.prototype.setAggData=function(newAggData){var _this=this,colIds=getAllKeysInObjects([this.aggData,newAggData]),oldAggData=this.aggData;this.aggData=newAggData,this.eventService&&colIds.forEach((function(colId){var value=_this.aggData?_this.aggData[colId]:void 0,oldValue=oldAggData?oldAggData[colId]:void 0;if(value!==oldValue){var column=_this.beans.columnModel.lookupGridColumn(colId);column&&_this.dispatchCellChangedEvent(column,value,oldValue)}}))},RowNode.prototype.updateHasChildren=function(){var newValue=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(this.beans.gridOptionsService.isRowModelType("serverSide")){var isTreeData=this.beans.gridOptionsService.is("treeData"),isGroupFunc=this.beans.gridOptionsService.get("isServerSideGroup");newValue=!this.stub&&!this.footer&&(isTreeData?!!isGroupFunc&&isGroupFunc(this.data):!!this.group)}newValue!==this.__hasChildren&&(this.__hasChildren=!!newValue,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_HAS_CHILDREN_CHANGED)))},RowNode.prototype.hasChildren=function(){return null==this.__hasChildren&&this.updateHasChildren(),this.__hasChildren},RowNode.prototype.isEmptyRowGroupNode=function(){return this.group&&missingOrEmpty(this.childrenAfterGroup)},RowNode.prototype.dispatchCellChangedEvent=function(column,newValue,oldValue){var cellChangedEvent={type:RowNode.EVENT_CELL_CHANGED,node:this,column,newValue,oldValue};this.dispatchLocalEvent(cellChangedEvent)},RowNode.prototype.resetQuickFilterAggregateText=function(){this.quickFilterAggregateText=null},RowNode.prototype.isExpandable=function(){return!!(this.hasChildren()&&!this.footer||this.master)},RowNode.prototype.isSelected=function(){return this.footer?this.sibling.isSelected():this.selected},RowNode.prototype.depthFirstSearch=function(callback){this.childrenAfterGroup&&this.childrenAfterGroup.forEach((function(child){return child.depthFirstSearch(callback)})),callback(this)},RowNode.prototype.calculateSelectedFromChildren=function(){var _a,atLeastOneSelected=!1,atLeastOneDeSelected=!1,atLeastOneMixed=!1;if(!(null===(_a=this.childrenAfterGroup)||void 0===_a?void 0:_a.length))return this.selectable?this.selected:null;for(var i=0;i<this.childrenAfterGroup.length;i++){var child=this.childrenAfterGroup[i],childState=child.isSelected();if(!child.selectable){var selectable=child.calculateSelectedFromChildren();if(null===selectable)continue;childState=selectable}switch(childState){case!0:atLeastOneSelected=!0;break;case!1:atLeastOneDeSelected=!0;break;default:atLeastOneMixed=!0}}return atLeastOneMixed||atLeastOneSelected&&atLeastOneDeSelected?void 0:!!atLeastOneSelected||!atLeastOneDeSelected&&(this.selectable?this.selected:null)},RowNode.prototype.setSelectedInitialValue=function(selected){this.selected=selected},RowNode.prototype.selectThisNode=function(newValue,e,source){void 0===source&&(source="api");var selectionNotAllowed=!this.selectable&&newValue,selectionNotChanged=this.selected===newValue;if(selectionNotAllowed||selectionNotChanged)return!1;if(this.selected=newValue,this.eventService){this.dispatchLocalEvent(this.createLocalRowEvent(RowNode.EVENT_ROW_SELECTED));var sibling=this.sibling;sibling&&sibling.footer&&sibling.dispatchLocalEvent(sibling.createLocalRowEvent(RowNode.EVENT_ROW_SELECTED))}var event=__assign$g(__assign$g({},this.createGlobalRowEvent(Events.EVENT_ROW_SELECTED)),{event:e||null,source});return this.beans.eventService.dispatchEvent(event),!0},RowNode.prototype.setSelected=function(newValue,clearSelection,source){void 0===clearSelection&&(clearSelection=!1),void 0===source&&(source="api"),"boolean"!=typeof source?this.setSelectedParams({newValue,clearSelection,rangeSelect:!1,source}):console.warn("AG Grid: since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.")},RowNode.prototype.setSelectedParams=function(params){return this.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),0):void 0===this.id?(console.warn("AG Grid: cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected(__assign$g(__assign$g({},params),{nodes:[this.footer?this.sibling:this]}))},RowNode.prototype.isRowPinned=function(){return"top"===this.rowPinned||"bottom"===this.rowPinned},RowNode.prototype.isParentOfNode=function(potentialParent){for(var parentNode=this.parent;parentNode;){if(parentNode===potentialParent)return!0;parentNode=parentNode.parent}return!1},RowNode.prototype.addEventListener=function(eventType,listener){this.eventService||(this.eventService=new EventService),this.eventService.addEventListener(eventType,listener)},RowNode.prototype.removeEventListener=function(eventType,listener){this.eventService&&(this.eventService.removeEventListener(eventType,listener),this.eventService.noRegisteredListenersExist()&&(this.eventService=null))},RowNode.prototype.onMouseEnter=function(){this.dispatchLocalEvent(this.createLocalRowEvent(RowNode.EVENT_MOUSE_ENTER))},RowNode.prototype.onMouseLeave=function(){this.dispatchLocalEvent(this.createLocalRowEvent(RowNode.EVENT_MOUSE_LEAVE))},RowNode.prototype.getFirstChildOfFirstChild=function(rowGroupColumn){for(var currentRowNode=this,isCandidate=!0,foundFirstChildPath=!1,nodeToSwapIn=null;isCandidate&&!foundFirstChildPath;){var parentRowNode=currentRowNode.parent;exists(parentRowNode)&&currentRowNode.firstChild?parentRowNode.rowGroupColumn===rowGroupColumn&&(foundFirstChildPath=!0,nodeToSwapIn=parentRowNode):isCandidate=!1,currentRowNode=parentRowNode}return foundFirstChildPath?nodeToSwapIn:null},RowNode.prototype.isFullWidthCell=function(){if(this.detail)return!0;var isFullWidthCellFunc=this.beans.gridOptionsService.getCallback("isFullWidthRow");return!!isFullWidthCellFunc&&isFullWidthCellFunc({rowNode:this})},RowNode.prototype.getRoute=function(){if(null!=this.key){for(var res=[],pointer=this;null!=pointer.key;)res.push(pointer.key),pointer=pointer.parent;return res.reverse()}},RowNode.prototype.createFooter=function(){var _this=this;if(!this.sibling){var ignoredProperties=new Set(["eventService","__objectId","sticky"]),footerNode=new RowNode(this.beans);Object.keys(this).forEach((function(key){ignoredProperties.has(key)||(footerNode[key]=_this[key])})),footerNode.footer=!0,footerNode.setRowTop(null),footerNode.setRowIndex(null),footerNode.oldRowTop=null,footerNode.id="rowGroupFooter_"+this.id,footerNode.sibling=this,this.sibling=footerNode}},RowNode.prototype.destroyFooter=function(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)},RowNode.ID_PREFIX_ROW_GROUP="row-group-",RowNode.ID_PREFIX_TOP_PINNED="t-",RowNode.ID_PREFIX_BOTTOM_PINNED="b-",RowNode.OBJECT_ID_SEQUENCE=0,RowNode.EVENT_ROW_SELECTED="rowSelected",RowNode.EVENT_DATA_CHANGED="dataChanged",RowNode.EVENT_CELL_CHANGED="cellChanged",RowNode.EVENT_ALL_CHILDREN_COUNT_CHANGED="allChildrenCountChanged",RowNode.EVENT_MASTER_CHANGED="masterChanged",RowNode.EVENT_GROUP_CHANGED="groupChanged",RowNode.EVENT_MOUSE_ENTER="mouseEnter",RowNode.EVENT_MOUSE_LEAVE="mouseLeave",RowNode.EVENT_HEIGHT_CHANGED="heightChanged",RowNode.EVENT_TOP_CHANGED="topChanged",RowNode.EVENT_DISPLAYED_CHANGED="displayedChanged",RowNode.EVENT_FIRST_CHILD_CHANGED="firstChildChanged",RowNode.EVENT_LAST_CHILD_CHANGED="lastChildChanged",RowNode.EVENT_CHILD_INDEX_CHANGED="childIndexChanged",RowNode.EVENT_ROW_INDEX_CHANGED="rowIndexChanged",RowNode.EVENT_EXPANDED_CHANGED="expandedChanged",RowNode.EVENT_HAS_CHILDREN_CHANGED="hasChildrenChanged",RowNode.EVENT_SELECTABLE_CHANGED="selectableChanged",RowNode.EVENT_UI_LEVEL_CHANGED="uiLevelChanged",RowNode.EVENT_HIGHLIGHT_CHANGED="rowHighlightChanged",RowNode.EVENT_DRAGGING_CHANGED="draggingChanged",RowNode}(),__extends$2r=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$f=function(){return __assign$f=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$f.apply(this,arguments)},__decorate$2b=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},CheckboxSelectionComponent=function(_super){function CheckboxSelectionComponent(){return _super.call(this,'\n            <div class="ag-selection-checkbox" role="presentation">\n                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>\n            </div>')||this}return __extends$2r(CheckboxSelectionComponent,_super),CheckboxSelectionComponent.prototype.postConstruct=function(){this.eCheckbox.setPassive(!0),setAriaLive(this.eCheckbox.getInputElement(),"polite")},CheckboxSelectionComponent.prototype.getCheckboxId=function(){return this.eCheckbox.getInputElement().id},CheckboxSelectionComponent.prototype.onDataChanged=function(){this.onSelectionChanged()},CheckboxSelectionComponent.prototype.onSelectableChanged=function(){this.showOrHideSelect()},CheckboxSelectionComponent.prototype.onSelectionChanged=function(){var translate=this.localeService.getLocaleTextFunc(),state=this.rowNode.isSelected(),stateName=getAriaCheckboxStateName(translate,state),ariaLabel=translate("ariaRowToggleSelection","Press Space to toggle row selection");this.eCheckbox.setValue(state,!0),this.eCheckbox.setInputAriaLabel(ariaLabel+" ("+stateName+")")},CheckboxSelectionComponent.prototype.onClicked=function(newValue,groupSelectsFiltered,event){return this.rowNode.setSelectedParams({newValue,rangeSelect:event.shiftKey,groupSelectsFiltered,event,source:"checkboxSelected"})},CheckboxSelectionComponent.prototype.init=function(params){var _this=this;if(this.rowNode=params.rowNode,this.column=params.column,this.overrides=params.overrides,this.onSelectionChanged(),this.addManagedListener(this.eCheckbox.getInputElement(),"dblclick",(function(event){stopPropagationForAgGrid(event)})),this.addManagedListener(this.eCheckbox.getInputElement(),"click",(function(event){stopPropagationForAgGrid(event);var groupSelectsFiltered=_this.gridOptionsService.is("groupSelectsFiltered"),isSelected=_this.eCheckbox.getValue();_this.shouldHandleIndeterminateState(isSelected,groupSelectsFiltered)?0===_this.onClicked(!0,groupSelectsFiltered,event||{})&&_this.onClicked(!1,groupSelectsFiltered,event):isSelected?_this.onClicked(!1,groupSelectsFiltered,event):_this.onClicked(!0,groupSelectsFiltered,event||{})})),this.addManagedListener(this.rowNode,RowNode.EVENT_ROW_SELECTED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_DATA_CHANGED,this.onDataChanged.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_SELECTABLE_CHANGED,this.onSelectableChanged.bind(this)),this.gridOptionsService.get("isRowSelectable")||"function"==typeof this.getIsVisible()){var showOrHideSelectListener=this.showOrHideSelect.bind(this);this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,showOrHideSelectListener),this.addManagedListener(this.rowNode,RowNode.EVENT_DATA_CHANGED,showOrHideSelectListener),this.addManagedListener(this.rowNode,RowNode.EVENT_CELL_CHANGED,showOrHideSelectListener),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")},CheckboxSelectionComponent.prototype.shouldHandleIndeterminateState=function(isSelected,groupSelectsFiltered){return groupSelectsFiltered&&(void 0===this.eCheckbox.getPreviousValue()||void 0===isSelected)&&this.gridOptionsService.isRowModelType("clientSide")},CheckboxSelectionComponent.prototype.showOrHideSelect=function(){var _a,_b,_c,_d,selectable=this.rowNode.selectable,isVisible=this.getIsVisible();if(selectable)if("function"==typeof isVisible){var extraParams=null===(_a=this.overrides)||void 0===_a?void 0:_a.callbackParams,params=null===(_b=this.column)||void 0===_b?void 0:_b.createColumnFunctionCallbackParams(this.rowNode);selectable=!!params&&isVisible(__assign$f(__assign$f({},extraParams),params))}else selectable=null!=isVisible&&isVisible;if(null===(_c=this.column)||void 0===_c?void 0:_c.getColDef().showDisabledCheckboxes)return this.eCheckbox.setDisabled(!selectable),this.setVisible(!0),void this.setDisplayed(!0);(null===(_d=this.overrides)||void 0===_d?void 0:_d.removeHidden)?this.setDisplayed(selectable):this.setVisible(selectable)},CheckboxSelectionComponent.prototype.getIsVisible=function(){var _a,_b;return this.overrides?this.overrides.isVisible:null===(_b=null===(_a=this.column)||void 0===_a?void 0:_a.getColDef())||void 0===_b?void 0:_b.checkboxSelection},__decorate$2b([RefSelector("eCheckbox")],CheckboxSelectionComponent.prototype,"eCheckbox",void 0),__decorate$2b([PostConstruct],CheckboxSelectionComponent.prototype,"postConstruct",null),CheckboxSelectionComponent}(Component),__extends$2q=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2a=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__values$4=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")};!function(DragSourceType){DragSourceType[DragSourceType.ToolPanel=0]="ToolPanel",DragSourceType[DragSourceType.HeaderCell=1]="HeaderCell",DragSourceType[DragSourceType.RowDrag=2]="RowDrag",DragSourceType[DragSourceType.ChartPanel=3]="ChartPanel",DragSourceType[DragSourceType.AdvancedFilterBuilder=4]="AdvancedFilterBuilder"}(DragSourceType||(DragSourceType={})),function(VerticalDirection){VerticalDirection[VerticalDirection.Up=0]="Up",VerticalDirection[VerticalDirection.Down=1]="Down"}(VerticalDirection||(VerticalDirection={})),function(HorizontalDirection){HorizontalDirection[HorizontalDirection.Left=0]="Left",HorizontalDirection[HorizontalDirection.Right=1]="Right"}(HorizontalDirection||(HorizontalDirection={}));var ExcelFactoryMode,DragAndDropService=function(_super){function DragAndDropService(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.dragSourceAndParamsList=[],_this.dropTargets=[],_this}var DragAndDropService_1;return __extends$2q(DragAndDropService,_super),DragAndDropService_1=DragAndDropService,DragAndDropService.prototype.init=function(){this.ePinnedIcon=createIcon("columnMovePin",this.gridOptionsService,null),this.eHideIcon=createIcon("columnMoveHide",this.gridOptionsService,null),this.eMoveIcon=createIcon("columnMoveMove",this.gridOptionsService,null),this.eLeftIcon=createIcon("columnMoveLeft",this.gridOptionsService,null),this.eRightIcon=createIcon("columnMoveRight",this.gridOptionsService,null),this.eGroupIcon=createIcon("columnMoveGroup",this.gridOptionsService,null),this.eAggregateIcon=createIcon("columnMoveValue",this.gridOptionsService,null),this.ePivotIcon=createIcon("columnMovePivot",this.gridOptionsService,null),this.eDropNotAllowedIcon=createIcon("dropNotAllowed",this.gridOptionsService,null)},DragAndDropService.prototype.addDragSource=function(dragSource,allowTouch){void 0===allowTouch&&(allowTouch=!1);var params={eElement:dragSource.eElement,dragStartPixels:dragSource.dragStartPixels,onDragStart:this.onDragStart.bind(this,dragSource),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),includeTouch:allowTouch};this.dragSourceAndParamsList.push({params,dragSource}),this.dragService.addDragSource(params)},DragAndDropService.prototype.removeDragSource=function(dragSource){var sourceAndParams=this.dragSourceAndParamsList.find((function(item){return item.dragSource===dragSource}));sourceAndParams&&(this.dragService.removeDragSource(sourceAndParams.params),removeFromArray(this.dragSourceAndParamsList,sourceAndParams))},DragAndDropService.prototype.clearDragSourceParamsList=function(){var _this=this;this.dragSourceAndParamsList.forEach((function(sourceAndParams){return _this.dragService.removeDragSource(sourceAndParams.params)})),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0},DragAndDropService.prototype.nudge=function(){this.dragging&&this.onDragging(this.eventLastTime,!0)},DragAndDropService.prototype.onDragStart=function(dragSource,mouseEvent){this.dragging=!0,this.dragSource=dragSource,this.eventLastTime=mouseEvent,this.dragItem=this.dragSource.getDragItem(),this.lastDropTarget=this.dragSource.dragSourceDropTarget,this.dragSource.onDragStarted&&this.dragSource.onDragStarted(),this.createGhost()},DragAndDropService.prototype.onDragStop=function(mouseEvent){if(this.eventLastTime=null,this.dragging=!1,this.dragSource.onDragStopped&&this.dragSource.onDragStopped(),this.lastDropTarget&&this.lastDropTarget.onDragStop){var draggingEvent=this.createDropTargetEvent(this.lastDropTarget,mouseEvent,null,null,!1);this.lastDropTarget.onDragStop(draggingEvent)}this.lastDropTarget=null,this.dragItem=null,this.removeGhost()},DragAndDropService.prototype.onDragging=function(mouseEvent,fromNudge){var _a,_b,_c,_d,_this=this,hDirection=this.getHorizontalDirection(mouseEvent),vDirection=this.getVerticalDirection(mouseEvent);this.eventLastTime=mouseEvent,this.positionGhost(mouseEvent);var validDropTargets=this.dropTargets.filter((function(target){return _this.isMouseOnDropTarget(mouseEvent,target)})),dropTarget=this.findCurrentDropTarget(mouseEvent,validDropTargets);if(dropTarget!==this.lastDropTarget)this.leaveLastTargetIfExists(mouseEvent,hDirection,vDirection,fromNudge),null!==this.lastDropTarget&&null===dropTarget&&(null===(_b=(_a=this.dragSource).onGridExit)||void 0===_b||_b.call(_a,this.dragItem)),null===this.lastDropTarget&&null!==dropTarget&&(null===(_d=(_c=this.dragSource).onGridEnter)||void 0===_d||_d.call(_c,this.dragItem)),this.enterDragTargetIfExists(dropTarget,mouseEvent,hDirection,vDirection,fromNudge),this.lastDropTarget=dropTarget;else if(dropTarget&&dropTarget.onDragging){var draggingEvent=this.createDropTargetEvent(dropTarget,mouseEvent,hDirection,vDirection,fromNudge);dropTarget.onDragging(draggingEvent)}},DragAndDropService.prototype.getAllContainersFromDropTarget=function(dropTarget){var secondaryContainers=dropTarget.getSecondaryContainers?dropTarget.getSecondaryContainers():null,containers=[[dropTarget.getContainer()]];return secondaryContainers?containers.concat(secondaryContainers):containers},DragAndDropService.prototype.allContainersIntersect=function(mouseEvent,containers){var e_1,_a;try{for(var containers_1=__values$4(containers),containers_1_1=containers_1.next();!containers_1_1.done;containers_1_1=containers_1.next()){var rect=containers_1_1.value.getBoundingClientRect();if(0===rect.width||0===rect.height)return!1;var horizontalFit=mouseEvent.clientX>=rect.left&&mouseEvent.clientX<rect.right,verticalFit=mouseEvent.clientY>=rect.top&&mouseEvent.clientY<rect.bottom;if(!horizontalFit||!verticalFit)return!1}}catch(e_1_1){e_1={error:e_1_1}}finally{try{containers_1_1&&!containers_1_1.done&&(_a=containers_1.return)&&_a.call(containers_1)}finally{if(e_1)throw e_1.error}}return!0},DragAndDropService.prototype.isMouseOnDropTarget=function(mouseEvent,dropTarget){var e_2,_a,allContainersFromDropTarget=this.getAllContainersFromDropTarget(dropTarget),mouseOverTarget=!1;try{for(var allContainersFromDropTarget_1=__values$4(allContainersFromDropTarget),allContainersFromDropTarget_1_1=allContainersFromDropTarget_1.next();!allContainersFromDropTarget_1_1.done;allContainersFromDropTarget_1_1=allContainersFromDropTarget_1.next()){var currentContainers=allContainersFromDropTarget_1_1.value;if(this.allContainersIntersect(mouseEvent,currentContainers)){mouseOverTarget=!0;break}}}catch(e_2_1){e_2={error:e_2_1}}finally{try{allContainersFromDropTarget_1_1&&!allContainersFromDropTarget_1_1.done&&(_a=allContainersFromDropTarget_1.return)&&_a.call(allContainersFromDropTarget_1)}finally{if(e_2)throw e_2.error}}return!(dropTarget.targetContainsSource&&!dropTarget.getContainer().contains(this.dragSource.eElement))&&(mouseOverTarget&&dropTarget.isInterestedIn(this.dragSource.type,this.dragSource.eElement))},DragAndDropService.prototype.findCurrentDropTarget=function(mouseEvent,validDropTargets){var e_3,_a,e_4,_b,len=validDropTargets.length;if(0===len)return null;if(1===len)return validDropTargets[0];var elementStack=this.gridOptionsService.getRootNode().elementsFromPoint(mouseEvent.clientX,mouseEvent.clientY);try{for(var elementStack_1=__values$4(elementStack),elementStack_1_1=elementStack_1.next();!elementStack_1_1.done;elementStack_1_1=elementStack_1.next()){var el=elementStack_1_1.value;try{for(var validDropTargets_1=(e_4=void 0,__values$4(validDropTargets)),validDropTargets_1_1=validDropTargets_1.next();!validDropTargets_1_1.done;validDropTargets_1_1=validDropTargets_1.next()){var dropTarget=validDropTargets_1_1.value;if(-1!==flatten(this.getAllContainersFromDropTarget(dropTarget)).indexOf(el))return dropTarget}}catch(e_4_1){e_4={error:e_4_1}}finally{try{validDropTargets_1_1&&!validDropTargets_1_1.done&&(_b=validDropTargets_1.return)&&_b.call(validDropTargets_1)}finally{if(e_4)throw e_4.error}}}}catch(e_3_1){e_3={error:e_3_1}}finally{try{elementStack_1_1&&!elementStack_1_1.done&&(_a=elementStack_1.return)&&_a.call(elementStack_1)}finally{if(e_3)throw e_3.error}}return null},DragAndDropService.prototype.enterDragTargetIfExists=function(dropTarget,mouseEvent,hDirection,vDirection,fromNudge){if(dropTarget){if(dropTarget.onDragEnter){var dragEnterEvent=this.createDropTargetEvent(dropTarget,mouseEvent,hDirection,vDirection,fromNudge);dropTarget.onDragEnter(dragEnterEvent)}this.setGhostIcon(dropTarget.getIconName?dropTarget.getIconName():null)}},DragAndDropService.prototype.leaveLastTargetIfExists=function(mouseEvent,hDirection,vDirection,fromNudge){if(this.lastDropTarget){if(this.lastDropTarget.onDragLeave){var dragLeaveEvent=this.createDropTargetEvent(this.lastDropTarget,mouseEvent,hDirection,vDirection,fromNudge);this.lastDropTarget.onDragLeave(dragLeaveEvent)}this.setGhostIcon(null)}},DragAndDropService.prototype.addDropTarget=function(dropTarget){this.dropTargets.push(dropTarget)},DragAndDropService.prototype.removeDropTarget=function(dropTarget){this.dropTargets=this.dropTargets.filter((function(target){return target.getContainer()!==dropTarget.getContainer()}))},DragAndDropService.prototype.hasExternalDropZones=function(){return this.dropTargets.some((function(zones){return zones.external}))},DragAndDropService.prototype.findExternalZone=function(params){return this.dropTargets.filter((function(target){return target.external})).find((function(zone){return zone.getContainer()===params.getContainer()}))||null},DragAndDropService.prototype.getHorizontalDirection=function(event){var clientX=this.eventLastTime&&this.eventLastTime.clientX,eClientX=event.clientX;return clientX===eClientX?null:clientX>eClientX?HorizontalDirection.Left:HorizontalDirection.Right},DragAndDropService.prototype.getVerticalDirection=function(event){var clientY=this.eventLastTime&&this.eventLastTime.clientY,eClientY=event.clientY;return clientY===eClientY?null:clientY>eClientY?VerticalDirection.Up:VerticalDirection.Down},DragAndDropService.prototype.createDropTargetEvent=function(dropTarget,event,hDirection,vDirection,fromNudge){var dropZoneTarget=dropTarget.getContainer(),rect=dropZoneTarget.getBoundingClientRect(),api=this.gridApi,columnApi=this.columnApi,dragItem=this.dragItem,dragSource=this.dragSource;return{event,x:event.clientX-rect.left,y:event.clientY-rect.top,vDirection,hDirection,dragSource,fromNudge,dragItem,api,columnApi,dropZoneTarget}},DragAndDropService.prototype.positionGhost=function(event){var ghost=this.eGhost;if(ghost){var ghostHeight=ghost.getBoundingClientRect().height,browserWidth=getBodyWidth()-2,browserHeight=getBodyHeight()-2,offsetParentSize=getElementRectWithOffset(ghost.offsetParent),clientY=event.clientY,clientX=event.clientX,top=clientY-offsetParentSize.top-ghostHeight/2,left=clientX-offsetParentSize.left-10,eDocument=this.gridOptionsService.getDocument(),win=eDocument.defaultView||window,windowScrollY=win.pageYOffset||eDocument.documentElement.scrollTop,windowScrollX=win.pageXOffset||eDocument.documentElement.scrollLeft;browserWidth>0&&left+ghost.clientWidth>browserWidth+windowScrollX&&(left=browserWidth+windowScrollX-ghost.clientWidth),left<0&&(left=0),browserHeight>0&&top+ghost.clientHeight>browserHeight+windowScrollY&&(top=browserHeight+windowScrollY-ghost.clientHeight),top<0&&(top=0),ghost.style.left=left+"px",ghost.style.top=top+"px"}},DragAndDropService.prototype.removeGhost=function(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null},DragAndDropService.prototype.createGhost=function(){this.eGhost=loadTemplate(DragAndDropService_1.GHOST_TEMPLATE),this.mouseEventService.stampTopLevelGridCompWithGridInstance(this.eGhost);var theme=this.environment.getTheme().theme;theme&&this.eGhost.classList.add(theme),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null);var eText=this.eGhost.querySelector(".ag-dnd-ghost-label"),dragItemName=this.dragSource.dragItemName;isFunction(dragItemName)&&(dragItemName=dragItemName()),eText.innerHTML=escapeString(dragItemName)||"",this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";var eDocument=this.gridOptionsService.getDocument(),targetEl=null;try{targetEl=eDocument.fullscreenElement}catch(e){}finally{if(!targetEl){var rootNode=this.gridOptionsService.getRootNode(),body=rootNode.querySelector("body");targetEl=body||(rootNode instanceof ShadowRoot?rootNode:null==rootNode?void 0:rootNode.documentElement)}}this.eGhostParent=targetEl,this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):console.warn("AG Grid: could not find document body, it is needed for dragging columns")},DragAndDropService.prototype.setGhostIcon=function(iconName,shake){void 0===shake&&(shake=!1),clearElement(this.eGhostIcon);var eIcon=null;switch(iconName||(iconName=this.dragSource.getDefaultIconName?this.dragSource.getDefaultIconName():DragAndDropService_1.ICON_NOT_ALLOWED),iconName){case DragAndDropService_1.ICON_PINNED:eIcon=this.ePinnedIcon;break;case DragAndDropService_1.ICON_MOVE:eIcon=this.eMoveIcon;break;case DragAndDropService_1.ICON_LEFT:eIcon=this.eLeftIcon;break;case DragAndDropService_1.ICON_RIGHT:eIcon=this.eRightIcon;break;case DragAndDropService_1.ICON_GROUP:eIcon=this.eGroupIcon;break;case DragAndDropService_1.ICON_AGGREGATE:eIcon=this.eAggregateIcon;break;case DragAndDropService_1.ICON_PIVOT:eIcon=this.ePivotIcon;break;case DragAndDropService_1.ICON_NOT_ALLOWED:eIcon=this.eDropNotAllowedIcon;break;case DragAndDropService_1.ICON_HIDE:eIcon=this.eHideIcon}this.eGhostIcon.classList.toggle("ag-shake-left-to-right",shake),eIcon===this.eHideIcon&&this.gridOptionsService.is("suppressDragLeaveHidesColumns")||eIcon&&this.eGhostIcon.appendChild(eIcon)},DragAndDropService.ICON_PINNED="pinned",DragAndDropService.ICON_MOVE="move",DragAndDropService.ICON_LEFT="left",DragAndDropService.ICON_RIGHT="right",DragAndDropService.ICON_GROUP="group",DragAndDropService.ICON_AGGREGATE="aggregate",DragAndDropService.ICON_PIVOT="pivot",DragAndDropService.ICON_NOT_ALLOWED="notAllowed",DragAndDropService.ICON_HIDE="hide",DragAndDropService.GHOST_TEMPLATE='<div class="ag-dnd-ghost ag-unselectable">\n            <span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>\n            <div class="ag-dnd-ghost-label"></div>\n        </div>',__decorate$2a([Autowired("dragService")],DragAndDropService.prototype,"dragService",void 0),__decorate$2a([Autowired("mouseEventService")],DragAndDropService.prototype,"mouseEventService",void 0),__decorate$2a([Autowired("columnApi")],DragAndDropService.prototype,"columnApi",void 0),__decorate$2a([Autowired("gridApi")],DragAndDropService.prototype,"gridApi",void 0),__decorate$2a([PostConstruct],DragAndDropService.prototype,"init",null),__decorate$2a([PreDestroy],DragAndDropService.prototype,"clearDragSourceParamsList",null),DragAndDropService=DragAndDropService_1=__decorate$2a([Bean("dragAndDropService")],DragAndDropService)}(BeanStub),__extends$2p=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$29=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},RowDragComp=function(_super){function RowDragComp(cellValueFn,rowNode,column,customGui,dragStartPixels,suppressVisibilityChange){var _this=_super.call(this)||this;return _this.cellValueFn=cellValueFn,_this.rowNode=rowNode,_this.column=column,_this.customGui=customGui,_this.dragStartPixels=dragStartPixels,_this.suppressVisibilityChange=suppressVisibilityChange,_this.dragSource=null,_this}return __extends$2p(RowDragComp,_super),RowDragComp.prototype.isCustomGui=function(){return null!=this.customGui},RowDragComp.prototype.postConstruct=function(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(createIconNoSpan("rowDrag",this.gridOptionsService,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){var strategy=this.gridOptionsService.is("rowDragManaged")?new ManagedVisibilityStrategy(this,this.beans,this.rowNode,this.column):new NonManagedVisibilityStrategy(this,this.beans,this.rowNode,this.column);this.createManagedBean(strategy,this.beans.context)}},RowDragComp.prototype.setDragElement=function(dragElement,dragStartPixels){this.setTemplateFromElement(dragElement),this.addDragSource(dragStartPixels)},RowDragComp.prototype.getSelectedNodes=function(){if(!this.gridOptionsService.is("rowDragMultiRow"))return[this.rowNode];var selection=this.beans.selectionService.getSelectedNodes();return-1!==selection.indexOf(this.rowNode)?selection:[this.rowNode]},RowDragComp.prototype.checkCompatibility=function(){var managed=this.gridOptionsService.is("rowDragManaged");this.gridOptionsService.is("treeData")&&managed&&doOnce((function(){return console.warn("AG Grid: If using row drag with tree data, you cannot have rowDragManaged=true")}),"RowDragComp.managedAndTreeData")},RowDragComp.prototype.getDragItem=function(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}},RowDragComp.prototype.getRowDragText=function(column){if(column){var colDef=column.getColDef();if(colDef.rowDragText)return colDef.rowDragText}return this.gridOptionsService.get("rowDragText")},RowDragComp.prototype.addDragSource=function(dragStartPixels){var _this=this;void 0===dragStartPixels&&(dragStartPixels=4),this.dragSource&&this.removeDragSource();var rowDragText=this.getRowDragText(this.column),translate=this.localeService.getLocaleTextFunc();this.dragSource={type:DragSourceType.RowDrag,eElement:this.getGui(),dragItemName:function(){var _a,dragItem=_this.getDragItem(),dragItemCount=(null===(_a=dragItem.rowNodes)||void 0===_a?void 0:_a.length)||1;return rowDragText?rowDragText(dragItem,dragItemCount):1===dragItemCount?_this.cellValueFn():dragItemCount+" "+translate("rowDragRows","rows")},getDragItem:function(){return _this.getDragItem()},dragStartPixels,dragSourceDomDataKey:this.gridOptionsService.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)},RowDragComp.prototype.removeDragSource=function(){this.dragSource&&this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null},__decorate$29([Autowired("beans")],RowDragComp.prototype,"beans",void 0),__decorate$29([PostConstruct],RowDragComp.prototype,"postConstruct",null),__decorate$29([PreDestroy],RowDragComp.prototype,"removeDragSource",null),RowDragComp}(Component),VisibilityStrategy=function(_super){function VisibilityStrategy(parent,rowNode,column){var _this=_super.call(this)||this;return _this.parent=parent,_this.rowNode=rowNode,_this.column=column,_this}return __extends$2p(VisibilityStrategy,_super),VisibilityStrategy.prototype.setDisplayedOrVisible=function(neverDisplayed){var displayedOptions={skipAriaHidden:!0};if(neverDisplayed)this.parent.setDisplayed(!1,displayedOptions);else{var shown=!0,isShownSometimes=!1;this.column&&(shown=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),isShownSometimes=isFunction(this.column.getColDef().rowDrag)),isShownSometimes?(this.parent.setDisplayed(!0,displayedOptions),this.parent.setVisible(shown,displayedOptions)):(this.parent.setDisplayed(shown,displayedOptions),this.parent.setVisible(!0,displayedOptions))}},VisibilityStrategy}(BeanStub),NonManagedVisibilityStrategy=function(_super){function NonManagedVisibilityStrategy(parent,beans,rowNode,column){var _this=_super.call(this,parent,rowNode,column)||this;return _this.beans=beans,_this}return __extends$2p(NonManagedVisibilityStrategy,_super),NonManagedVisibilityStrategy.prototype.postConstruct=function(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.workOutVisibility()},NonManagedVisibilityStrategy.prototype.onSuppressRowDrag=function(){this.workOutVisibility()},NonManagedVisibilityStrategy.prototype.workOutVisibility=function(){var neverDisplayed=this.gridOptionsService.is("suppressRowDrag");this.setDisplayedOrVisible(neverDisplayed)},__decorate$29([PostConstruct],NonManagedVisibilityStrategy.prototype,"postConstruct",null),NonManagedVisibilityStrategy}(VisibilityStrategy),ManagedVisibilityStrategy=function(_super){function ManagedVisibilityStrategy(parent,beans,rowNode,column){var _this=_super.call(this,parent,rowNode,column)||this;return _this.beans=beans,_this}return __extends$2p(ManagedVisibilityStrategy,_super),ManagedVisibilityStrategy.prototype.postConstruct=function(){this.addManagedListener(this.beans.eventService,Events.EVENT_SORT_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,Events.EVENT_FILTER_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()},ManagedVisibilityStrategy.prototype.onSuppressRowDrag=function(){this.workOutVisibility()},ManagedVisibilityStrategy.prototype.workOutVisibility=function(){var rowDragFeature=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),shouldPreventRowMove=rowDragFeature&&rowDragFeature.shouldPreventRowMove(),suppressRowDrag=this.gridOptionsService.is("suppressRowDrag"),hasExternalDropZones=this.beans.dragAndDropService.hasExternalDropZones(),neverDisplayed=shouldPreventRowMove&&!hasExternalDropZones||suppressRowDrag;this.setDisplayedOrVisible(neverDisplayed)},__decorate$29([PostConstruct],ManagedVisibilityStrategy.prototype,"postConstruct",null),ManagedVisibilityStrategy}(VisibilityStrategy),__extends$2o=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$e=function(){return __assign$e=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$e.apply(this,arguments)},__decorate$28=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},GroupCellRendererCtrl=function(_super){function GroupCellRendererCtrl(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2o(GroupCellRendererCtrl,_super),GroupCellRendererCtrl.prototype.init=function(comp,eGui,eCheckbox,eExpanded,eContracted,compClass,params){this.params=params,this.eGui=eGui,this.eCheckbox=eCheckbox,this.eExpanded=eExpanded,this.eContracted=eContracted,this.comp=comp,this.compClass=compClass;var node=params.node,value=params.value,colDef=params.colDef;if(!this.isTopLevelFooter()){if(this.isEmbeddedRowMismatch())return;var isSingleGroupColumn=!0===(null==colDef?void 0:colDef.showRowGroup),isNullValueAndNotMaster=null==value&&!node.master;if(!isSingleGroupColumn&&isNullValueAndNotMaster)return;if(node.footer&&this.gridOptionsService.is("groupHideOpenParents"))if((colDef&&colDef.showRowGroup)!==(node.rowGroupColumn&&node.rowGroupColumn.getColId()))return}this.setupShowingValueForOpenedParent(),this.findDisplayedGroupNode(),this.addFullWidthRowDraggerIfNeeded(),this.addExpandAndContract(),this.addCheckboxIfNeeded(),this.addValueElement(),this.setupIndent(),this.refreshAriaExpanded()},GroupCellRendererCtrl.prototype.destroy=function(){_super.prototype.destroy.call(this),this.expandListener=null},GroupCellRendererCtrl.prototype.refreshAriaExpanded=function(){var _a=this.params,node=_a.node,eParentOfValue=_a.eParentOfValue;if(this.expandListener&&(this.expandListener=this.expandListener()),this.isExpandable()){var listener=function(){setAriaExpanded(eParentOfValue,!!node.expanded)};this.expandListener=this.addManagedListener(node,RowNode.EVENT_EXPANDED_CHANGED,listener)||null,listener()}else removeAriaExpanded(eParentOfValue)},GroupCellRendererCtrl.prototype.isTopLevelFooter=function(){if(!this.gridOptionsService.is("groupIncludeTotalFooter"))return!1;if(null!=this.params.value||-1!=this.params.node.level)return!1;var colDef=this.params.colDef;if(null==colDef)return!0;if(!0===colDef.showRowGroup)return!0;var rowGroupCols=this.columnModel.getRowGroupColumns();return!rowGroupCols||0===rowGroupCols.length||rowGroupCols[0].getId()===colDef.showRowGroup},GroupCellRendererCtrl.prototype.isEmbeddedRowMismatch=function(){if(!this.params.fullWidth||!this.gridOptionsService.is("embedFullWidthRows"))return!1;var pinnedLeftCell="left"===this.params.pinned,pinnedRightCell="right"===this.params.pinned,bodyCell=!pinnedLeftCell&&!pinnedRightCell;return this.gridOptionsService.is("enableRtl")?this.columnModel.isPinningLeft()?!pinnedRightCell:!bodyCell:this.columnModel.isPinningLeft()?!pinnedLeftCell:!bodyCell},GroupCellRendererCtrl.prototype.findDisplayedGroupNode=function(){var column=this.params.column,rowNode=this.params.node;if(this.showingValueForOpenedParent)for(var pointer=rowNode.parent;null!=pointer;){if(pointer.rowGroupColumn&&column.isRowGroupDisplayed(pointer.rowGroupColumn.getId())){this.displayedGroupNode=pointer;break}pointer=pointer.parent}missing(this.displayedGroupNode)&&(this.displayedGroupNode=rowNode)},GroupCellRendererCtrl.prototype.setupShowingValueForOpenedParent=function(){var rowNode=this.params.node,column=this.params.column;if(this.gridOptionsService.is("groupHideOpenParents"))if(rowNode.groupData){if(null!=rowNode.rowGroupColumn){var keyOfGroupingColumn=rowNode.rowGroupColumn.getId();if(column.isRowGroupDisplayed(keyOfGroupingColumn))return void(this.showingValueForOpenedParent=!1)}var valPresent=null!=rowNode.groupData[column.getId()];this.showingValueForOpenedParent=valPresent}else this.showingValueForOpenedParent=!1;else this.showingValueForOpenedParent=!1},GroupCellRendererCtrl.prototype.addValueElement=function(){this.displayedGroupNode.footer?this.addFooterValue():(this.addGroupValue(),this.addChildCount())},GroupCellRendererCtrl.prototype.addGroupValue=function(){var paramsAdjusted=this.adjustParamsWithDetailsFromRelatedColumn(),innerCompDetails=this.getInnerCompDetails(paramsAdjusted),valueFormatted=paramsAdjusted.valueFormatted,value=paramsAdjusted.value,valueWhenNoRenderer=valueFormatted;null==valueWhenNoRenderer&&(valueWhenNoRenderer=""===value&&this.params.node.group?this.localeService.getLocaleTextFunc()("blanks","(Blanks)"):null!=value?value:null);this.comp.setInnerRenderer(innerCompDetails,valueWhenNoRenderer)},GroupCellRendererCtrl.prototype.adjustParamsWithDetailsFromRelatedColumn=function(){var relatedColumn=this.displayedGroupNode.rowGroupColumn,column=this.params.column;if(!relatedColumn)return this.params;if(null!=column&&!column.isRowGroupDisplayed(relatedColumn.getId()))return this.params;var params=this.params,_a=this.params,value=_a.value,node=_a.node,valueFormatted=this.valueFormatterService.formatValue(relatedColumn,node,value);return __assign$e(__assign$e({},params),{valueFormatted})},GroupCellRendererCtrl.prototype.addFooterValue=function(){var footerValueGetter=this.params.footerValueGetter,footerValue="";if(footerValueGetter){var paramsClone=cloneObject(this.params);paramsClone.value=this.params.value,"function"==typeof footerValueGetter?footerValue=footerValueGetter(paramsClone):"string"==typeof footerValueGetter?footerValue=this.expressionService.evaluate(footerValueGetter,paramsClone):console.warn("AG Grid: footerValueGetter should be either a function or a string (expression)")}else footerValue="Total "+(null!=this.params.value?this.params.value:"");var innerCompDetails=this.getInnerCompDetails(this.params);this.comp.setInnerRenderer(innerCompDetails,footerValue)},GroupCellRendererCtrl.prototype.getInnerCompDetails=function(params){var _this=this;if(params.fullWidth)return this.userComponentFactory.getFullWidthGroupRowInnerCellRenderer(this.gridOptionsService.get("groupRowRendererParams"),params);var innerCompDetails=this.userComponentFactory.getInnerRendererDetails(params,params),isGroupRowRenderer=function(details){return details&&details.componentClass==_this.compClass};if(innerCompDetails&&!isGroupRowRenderer(innerCompDetails))return innerCompDetails;var relatedColumn=this.displayedGroupNode.rowGroupColumn,relatedColDef=relatedColumn?relatedColumn.getColDef():void 0;if(relatedColDef){var relatedCompDetails=this.userComponentFactory.getCellRendererDetails(relatedColDef,params);if(relatedCompDetails&&!isGroupRowRenderer(relatedCompDetails))return relatedCompDetails;if(isGroupRowRenderer(relatedCompDetails)&&relatedColDef.cellRendererParams&&relatedColDef.cellRendererParams.innerRenderer)return this.userComponentFactory.getInnerRendererDetails(relatedColDef.cellRendererParams,params)}},GroupCellRendererCtrl.prototype.addChildCount=function(){this.params.suppressCount||(this.addManagedListener(this.displayedGroupNode,RowNode.EVENT_ALL_CHILDREN_COUNT_CHANGED,this.updateChildCount.bind(this)),this.updateChildCount())},GroupCellRendererCtrl.prototype.updateChildCount=function(){var allChildrenCount=this.displayedGroupNode.allChildrenCount,countString=this.isShowRowGroupForThisRow()&&null!=allChildrenCount&&allChildrenCount>=0?"("+allChildrenCount+")":"";this.comp.setChildCount(countString)},GroupCellRendererCtrl.prototype.isShowRowGroupForThisRow=function(){if(this.gridOptionsService.is("treeData"))return!0;var rowGroupColumn=this.displayedGroupNode.rowGroupColumn;if(!rowGroupColumn)return!1;var column=this.params.column;return null==column||column.isRowGroupDisplayed(rowGroupColumn.getId())},GroupCellRendererCtrl.prototype.addExpandAndContract=function(){var _a,params=this.params,eExpandedIcon=createIconNoSpan("groupExpanded",this.gridOptionsService,null),eContractedIcon=createIconNoSpan("groupContracted",this.gridOptionsService,null);eExpandedIcon&&this.eExpanded.appendChild(eExpandedIcon),eContractedIcon&&this.eContracted.appendChild(eContractedIcon);var eGroupCell=params.eGridCell;(null===(_a=this.params.column)||void 0===_a?void 0:_a.isCellEditable(params.node))&&this.gridOptionsService.is("enableGroupEdit")||!this.isExpandable()||params.suppressDoubleClickExpand||this.addManagedListener(eGroupCell,"dblclick",this.onCellDblClicked.bind(this)),this.addManagedListener(this.eExpanded,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eContracted,"click",this.onExpandClicked.bind(this)),this.addManagedListener(eGroupCell,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(params.node,RowNode.EVENT_EXPANDED_CHANGED,this.showExpandAndContractIcons.bind(this)),this.showExpandAndContractIcons();var expandableChangedListener=this.onRowNodeIsExpandableChanged.bind(this);this.addManagedListener(this.displayedGroupNode,RowNode.EVENT_ALL_CHILDREN_COUNT_CHANGED,expandableChangedListener),this.addManagedListener(this.displayedGroupNode,RowNode.EVENT_MASTER_CHANGED,expandableChangedListener),this.addManagedListener(this.displayedGroupNode,RowNode.EVENT_GROUP_CHANGED,expandableChangedListener),this.addManagedListener(this.displayedGroupNode,RowNode.EVENT_HAS_CHILDREN_CHANGED,expandableChangedListener)},GroupCellRendererCtrl.prototype.onExpandClicked=function(mouseEvent){isStopPropagationForAgGrid(mouseEvent)||(stopPropagationForAgGrid(mouseEvent),this.onExpandOrContract(mouseEvent))},GroupCellRendererCtrl.prototype.onExpandOrContract=function(e){var rowNode=this.displayedGroupNode,nextExpandState=!rowNode.expanded;!nextExpandState&&rowNode.sticky&&this.scrollToStickyNode(rowNode),rowNode.setExpanded(nextExpandState,e)},GroupCellRendererCtrl.prototype.scrollToStickyNode=function(rowNode){this.ctrlsService.getGridBodyCtrl().getScrollFeature().setVerticalScrollPosition(rowNode.rowTop-rowNode.stickyRowTop)},GroupCellRendererCtrl.prototype.isExpandable=function(){if(this.showingValueForOpenedParent)return!0;var rowNode=this.displayedGroupNode,reducedLeafNode=this.columnModel.isPivotMode()&&rowNode.leafGroup;if(!(rowNode.isExpandable()&&!rowNode.footer&&!reducedLeafNode))return!1;var column=this.params.column;return null==column||"string"!=typeof column.getColDef().showRowGroup||this.isShowRowGroupForThisRow()},GroupCellRendererCtrl.prototype.showExpandAndContractIcons=function(){var params=this.params,displayedGroup=this.displayedGroupNode,columnModel=this.columnModel,node=params.node,isExpandable=this.isExpandable();if(isExpandable){var expanded=!!this.showingValueForOpenedParent||node.expanded;this.comp.setExpandedDisplayed(expanded),this.comp.setContractedDisplayed(!expanded)}else this.comp.setExpandedDisplayed(!1),this.comp.setContractedDisplayed(!1);var pivotMode=columnModel.isPivotMode(),pivotModeAndLeafGroup=pivotMode&&displayedGroup.leafGroup,addExpandableCss=isExpandable&&!pivotModeAndLeafGroup,isTotalFooterNode=node.footer&&-1===node.level;this.comp.addOrRemoveCssClass("ag-cell-expandable",addExpandableCss),this.comp.addOrRemoveCssClass("ag-row-group",addExpandableCss),pivotMode?this.comp.addOrRemoveCssClass("ag-pivot-leaf-group",pivotModeAndLeafGroup):isTotalFooterNode||this.comp.addOrRemoveCssClass("ag-row-group-leaf-indent",!addExpandableCss)},GroupCellRendererCtrl.prototype.onRowNodeIsExpandableChanged=function(){this.showExpandAndContractIcons(),this.setIndent(),this.refreshAriaExpanded()},GroupCellRendererCtrl.prototype.setupIndent=function(){var node=this.params.node;this.params.suppressPadding||(this.addManagedListener(node,RowNode.EVENT_UI_LEVEL_CHANGED,this.setIndent.bind(this)),this.setIndent())},GroupCellRendererCtrl.prototype.setIndent=function(){if(!this.gridOptionsService.is("groupHideOpenParents")){var params=this.params,rowNode=params.node,fullWithRow=!!params.colDef,treeData=this.gridOptionsService.is("treeData"),paddingCount=!fullWithRow||treeData||!0===params.colDef.showRowGroup?rowNode.uiLevel:0;this.indentClass&&this.comp.addOrRemoveCssClass(this.indentClass,!1),this.indentClass="ag-row-group-indent-"+paddingCount,this.comp.addOrRemoveCssClass(this.indentClass,!0)}},GroupCellRendererCtrl.prototype.addFullWidthRowDraggerIfNeeded=function(){var _this=this;if(this.params.fullWidth&&this.params.rowDrag){var rowDragComp=new RowDragComp((function(){return _this.params.value}),this.params.node);this.createManagedBean(rowDragComp,this.context),this.eGui.insertAdjacentElement("afterbegin",rowDragComp.getGui())}},GroupCellRendererCtrl.prototype.isUserWantsSelected=function(){var paramsCheckbox=this.params.checkbox;return"function"==typeof paramsCheckbox||!0===paramsCheckbox},GroupCellRendererCtrl.prototype.addCheckboxIfNeeded=function(){var _this=this,rowNode=this.displayedGroupNode,checkboxNeeded=this.isUserWantsSelected()&&!rowNode.footer&&!rowNode.rowPinned&&!rowNode.detail;if(checkboxNeeded){var cbSelectionComponent_1=new CheckboxSelectionComponent;this.getContext().createBean(cbSelectionComponent_1),cbSelectionComponent_1.init({rowNode:this.params.node,column:this.params.column,overrides:{isVisible:this.params.checkbox,callbackParams:this.params,removeHidden:!0}}),this.eCheckbox.appendChild(cbSelectionComponent_1.getGui()),this.addDestroyFunc((function(){return _this.getContext().destroyBean(cbSelectionComponent_1)}))}this.comp.setCheckboxVisible(checkboxNeeded)},GroupCellRendererCtrl.prototype.onKeyDown=function(event){event.key!==KeyCode.ENTER||this.params.suppressEnterExpand||(this.params.column&&this.params.column.isCellEditable(this.params.node)||this.onExpandOrContract(event))},GroupCellRendererCtrl.prototype.onCellDblClicked=function(mouseEvent){isStopPropagationForAgGrid(mouseEvent)||(isElementInEventPath(this.eExpanded,mouseEvent)||isElementInEventPath(this.eContracted,mouseEvent)||this.onExpandOrContract(mouseEvent))},__decorate$28([Autowired("expressionService")],GroupCellRendererCtrl.prototype,"expressionService",void 0),__decorate$28([Autowired("valueFormatterService")],GroupCellRendererCtrl.prototype,"valueFormatterService",void 0),__decorate$28([Autowired("columnModel")],GroupCellRendererCtrl.prototype,"columnModel",void 0),__decorate$28([Autowired("userComponentFactory")],GroupCellRendererCtrl.prototype,"userComponentFactory",void 0),__decorate$28([Autowired("ctrlsService")],GroupCellRendererCtrl.prototype,"ctrlsService",void 0),GroupCellRendererCtrl}(BeanStub),__extends$2n=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$27=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},GroupCellRenderer=function(_super){function GroupCellRenderer(){return _super.call(this,GroupCellRenderer.TEMPLATE)||this}return __extends$2n(GroupCellRenderer,_super),GroupCellRenderer.prototype.init=function(params){var _this=this,compProxy={setInnerRenderer:function(compDetails,valueToDisplay){return _this.setRenderDetails(compDetails,valueToDisplay)},setChildCount:function(count){return _this.eChildCount.innerHTML=count},addOrRemoveCssClass:function(cssClass,value){return _this.addOrRemoveCssClass(cssClass,value)},setContractedDisplayed:function(expanded){return setDisplayed(_this.eContracted,expanded)},setExpandedDisplayed:function(expanded){return setDisplayed(_this.eExpanded,expanded)},setCheckboxVisible:function(visible){return _this.eCheckbox.classList.toggle("ag-invisible",!visible)}},ctrl=this.createManagedBean(new GroupCellRendererCtrl),fullWidth=!params.colDef,eGui=this.getGui();ctrl.init(compProxy,eGui,this.eCheckbox,this.eExpanded,this.eContracted,this.constructor,params),fullWidth&&setAriaRole(eGui,"gridcell")},GroupCellRenderer.prototype.setRenderDetails=function(compDetails,valueToDisplay){var _this=this;if(compDetails){var componentPromise=compDetails.newAgStackInstance();if(!componentPromise)return;componentPromise.then((function(comp){if(comp){var destroyComp=function(){return _this.context.destroyBean(comp)};_this.isAlive()?(_this.eValue.appendChild(comp.getGui()),_this.addDestroyFunc(destroyComp)):destroyComp()}}))}else this.eValue.innerText=valueToDisplay},GroupCellRenderer.prototype.destroy=function(){this.getContext().destroyBean(this.innerCellRenderer),_super.prototype.destroy.call(this)},GroupCellRenderer.prototype.refresh=function(){return!1},GroupCellRenderer.TEMPLATE='<span class="ag-cell-wrapper">\n            <span class="ag-group-expanded" ref="eExpanded"></span>\n            <span class="ag-group-contracted" ref="eContracted"></span>\n            <span class="ag-group-checkbox ag-invisible" ref="eCheckbox"></span>\n            <span class="ag-group-value" ref="eValue"></span>\n            <span class="ag-group-child-count" ref="eChildCount"></span>\n        </span>',__decorate$27([RefSelector("eExpanded")],GroupCellRenderer.prototype,"eExpanded",void 0),__decorate$27([RefSelector("eContracted")],GroupCellRenderer.prototype,"eContracted",void 0),__decorate$27([RefSelector("eCheckbox")],GroupCellRenderer.prototype,"eCheckbox",void 0),__decorate$27([RefSelector("eValue")],GroupCellRenderer.prototype,"eValue",void 0),__decorate$27([RefSelector("eChildCount")],GroupCellRenderer.prototype,"eChildCount",void 0),GroupCellRenderer}(Component),__extends$2m=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$26=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},LoadingCellRenderer=function(_super){function LoadingCellRenderer(){return _super.call(this,LoadingCellRenderer.TEMPLATE)||this}return __extends$2m(LoadingCellRenderer,_super),LoadingCellRenderer.prototype.init=function(params){params.node.failedLoad?this.setupFailed():this.setupLoading()},LoadingCellRenderer.prototype.setupFailed=function(){var localeTextFunc=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=localeTextFunc("loadingError","ERR")},LoadingCellRenderer.prototype.setupLoading=function(){var eLoadingIcon=createIconNoSpan("groupLoading",this.gridOptionsService,null);eLoadingIcon&&this.eLoadingIcon.appendChild(eLoadingIcon);var localeTextFunc=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=localeTextFunc("loadingOoo","Loading")},LoadingCellRenderer.prototype.refresh=function(params){return!1},LoadingCellRenderer.prototype.destroy=function(){_super.prototype.destroy.call(this)},LoadingCellRenderer.TEMPLATE='<div class="ag-loading">\n            <span class="ag-loading-icon" ref="eLoadingIcon"></span>\n            <span class="ag-loading-text" ref="eLoadingText"></span>\n        </div>',__decorate$26([RefSelector("eLoadingIcon")],LoadingCellRenderer.prototype,"eLoadingIcon",void 0),__decorate$26([RefSelector("eLoadingText")],LoadingCellRenderer.prototype,"eLoadingText",void 0),LoadingCellRenderer}(Component),__extends$2l=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),LoadingOverlayComponent$1=function(_super){function LoadingOverlayComponent(){return _super.call(this)||this}return __extends$2l(LoadingOverlayComponent,_super),LoadingOverlayComponent.prototype.destroy=function(){_super.prototype.destroy.call(this)},LoadingOverlayComponent.prototype.init=function(params){var _a,template=null!==(_a=this.gridOptionsService.get("overlayLoadingTemplate"))&&void 0!==_a?_a:LoadingOverlayComponent.DEFAULT_LOADING_OVERLAY_TEMPLATE,localeTextFunc=this.localeService.getLocaleTextFunc(),localisedTemplate=template.replace("[LOADING...]",localeTextFunc("loadingOoo","Loading..."));this.setTemplate(localisedTemplate)},LoadingOverlayComponent.DEFAULT_LOADING_OVERLAY_TEMPLATE='<span class="ag-overlay-loading-center">[LOADING...]</span>',LoadingOverlayComponent}(Component),__extends$2k=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),NoRowsOverlayComponent$1=function(_super){function NoRowsOverlayComponent(){return _super.call(this)||this}return __extends$2k(NoRowsOverlayComponent,_super),NoRowsOverlayComponent.prototype.destroy=function(){_super.prototype.destroy.call(this)},NoRowsOverlayComponent.prototype.init=function(params){var _a,template=null!==(_a=this.gridOptionsService.get("overlayNoRowsTemplate"))&&void 0!==_a?_a:NoRowsOverlayComponent.DEFAULT_NO_ROWS_TEMPLATE,localeTextFunc=this.localeService.getLocaleTextFunc(),localisedTemplate=template.replace("[NO_ROWS_TO_SHOW]",localeTextFunc("noRowsToShow","No Rows To Show"));this.setTemplate(localisedTemplate)},NoRowsOverlayComponent.DEFAULT_NO_ROWS_TEMPLATE='<span class="ag-overlay-no-rows-center">[NO_ROWS_TO_SHOW]</span>',NoRowsOverlayComponent}(Component),__extends$2j=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),TooltipComponent$1=function(_super){function TooltipComponent(){return _super.call(this,'<div class="ag-tooltip"></div>')||this}return __extends$2j(TooltipComponent,_super),TooltipComponent.prototype.init=function(params){var value=params.value;this.getGui().innerHTML=escapeString(value)},TooltipComponent}(PopupComponent),__extends$2i=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),NumberCellEditorInput=function(){function NumberCellEditorInput(){}return NumberCellEditorInput.prototype.getTemplate=function(){return'<ag-input-number-field class="ag-cell-editor" ref="eInput"></ag-input-number-field>'},NumberCellEditorInput.prototype.init=function(eInput,params){this.eInput=eInput,this.params=params,null!=params.max&&eInput.setMax(params.max),null!=params.min&&eInput.setMin(params.min),null!=params.precision&&eInput.setPrecision(params.precision),null!=params.step&&eInput.setStep(params.step),params.showStepperButtons&&eInput.getInputElement().classList.add("ag-number-field-input-stepper")},NumberCellEditorInput.prototype.getValue=function(){var value=this.eInput.getValue();if(!exists(value)&&!exists(this.params.value))return this.params.value;var parsedValue=this.params.parseValue(value);if(null==parsedValue)return parsedValue;if("string"==typeof parsedValue){if(""===parsedValue)return null;parsedValue=Number(parsedValue)}return isNaN(parsedValue)?null:parsedValue},NumberCellEditorInput.prototype.getStartValue=function(){return this.params.value},NumberCellEditorInput}(),NumberCellEditor=function(_super){function NumberCellEditor(){return _super.call(this,new NumberCellEditorInput)||this}return __extends$2i(NumberCellEditor,_super),NumberCellEditor}(SimpleCellEditor),__extends$2h=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),DateCellEditorInput=function(){function DateCellEditorInput(){}return DateCellEditorInput.prototype.getTemplate=function(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'},DateCellEditorInput.prototype.init=function(eInput,params){this.eInput=eInput,this.params=params,null!=params.min&&eInput.setMin(params.min),null!=params.max&&eInput.setMax(params.max),null!=params.step&&eInput.setStep(params.step)},DateCellEditorInput.prototype.getValue=function(){var value=this.eInput.getDate();return exists(value)||exists(this.params.value)?null!=value?value:null:this.params.value},DateCellEditorInput.prototype.getStartValue=function(){var value=this.params.value;if(value instanceof Date)return serialiseDate(value,!1)},DateCellEditorInput}(),DateCellEditor=function(_super){function DateCellEditor(){return _super.call(this,new DateCellEditorInput)||this}return __extends$2h(DateCellEditor,_super),DateCellEditor}(SimpleCellEditor),__extends$2g=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),DateStringCellEditorInput=function(){function DateStringCellEditorInput(getDataTypeService){this.getDataTypeService=getDataTypeService}return DateStringCellEditorInput.prototype.getTemplate=function(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'},DateStringCellEditorInput.prototype.init=function(eInput,params){this.eInput=eInput,this.params=params,null!=params.min&&eInput.setMin(params.min),null!=params.max&&eInput.setMax(params.max),null!=params.step&&eInput.setStep(params.step)},DateStringCellEditorInput.prototype.getValue=function(){var value=this.formatDate(this.eInput.getDate());return exists(value)||exists(this.params.value)?this.params.parseValue(null!=value?value:""):this.params.value},DateStringCellEditorInput.prototype.getStartValue=function(){var _a,_b;return serialiseDate(null!==(_b=this.parseDate(null!==(_a=this.params.value)&&void 0!==_a?_a:void 0))&&void 0!==_b?_b:null,!1)},DateStringCellEditorInput.prototype.parseDate=function(value){return this.getDataTypeService().getDateParserFunction()(value)},DateStringCellEditorInput.prototype.formatDate=function(value){return this.getDataTypeService().getDateFormatterFunction()(value)},DateStringCellEditorInput}(),DateStringCellEditor=function(_super){function DateStringCellEditor(){var _this=_super.call(this,new DateStringCellEditorInput((function(){return _this.dataTypeService})))||this;return _this}return __extends$2g(DateStringCellEditor,_super),function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([Autowired("dataTypeService")],DateStringCellEditor.prototype,"dataTypeService",void 0),DateStringCellEditor}(SimpleCellEditor),__extends$2f=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),CheckboxCellRenderer=function(_super){function CheckboxCellRenderer(){return _super.call(this,CheckboxCellRenderer.TEMPLATE)||this}return __extends$2f(CheckboxCellRenderer,_super),CheckboxCellRenderer.prototype.init=function(params){var _this=this;this.params=params,this.updateCheckbox(params),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.addManagedListener(this.eCheckbox.getInputElement(),"click",(function(event){if(stopPropagationForAgGrid(event),!_this.eCheckbox.isDisabled()){var isSelected=_this.eCheckbox.getValue();_this.onCheckboxChanged(isSelected)}})),this.addManagedListener(this.eCheckbox.getInputElement(),"dblclick",(function(event){stopPropagationForAgGrid(event)}));var eDocument=this.gridOptionsService.getDocument();this.addManagedListener(this.params.eGridCell,"keydown",(function(event){if(event.key===KeyCode.SPACE&&!_this.eCheckbox.isDisabled()){_this.params.eGridCell===eDocument.activeElement&&_this.eCheckbox.toggle();var isSelected=_this.eCheckbox.getValue();_this.onCheckboxChanged(isSelected),event.preventDefault()}}))},CheckboxCellRenderer.prototype.refresh=function(params){return this.params=params,this.updateCheckbox(params),!0},CheckboxCellRenderer.prototype.updateCheckbox=function(params){var _a,_b,_c,isSelected,displayed=!0;if(params.node.group&&params.column){var colId=params.column.getColId();colId.startsWith("ag-Grid-AutoColumn")?isSelected=null==params.value||""===params.value?void 0:"true"===params.value:params.node.aggData&&void 0!==params.node.aggData[colId]?isSelected=null!==(_a=params.value)&&void 0!==_a?_a:void 0:displayed=!1}else isSelected=null!==(_b=params.value)&&void 0!==_b?_b:void 0;if(displayed){this.eCheckbox.setValue(isSelected);var disabled=null!=params.disabled?params.disabled:!(null===(_c=params.column)||void 0===_c?void 0:_c.isCellEditable(params.node));this.eCheckbox.setDisabled(disabled);var translate=this.localeService.getLocaleTextFunc(),stateName=getAriaCheckboxStateName(translate,isSelected),ariaLabel=disabled?stateName:translate("ariaToggleCellValue","Press SPACE to toggle cell value")+" ("+stateName+")";this.eCheckbox.setInputAriaLabel(ariaLabel)}else this.eCheckbox.setDisplayed(!1)},CheckboxCellRenderer.prototype.onCheckboxChanged=function(isSelected){var _a=this.params,column=_a.column,node=_a.node,rowIndex=_a.rowIndex,value=_a.value,eventStarted={type:Events.EVENT_CELL_EDITING_STARTED,column,colDef:null==column?void 0:column.getColDef(),data:node.data,node,rowIndex,rowPinned:node.rowPinned,value};this.eventService.dispatchEvent(eventStarted);var valueChanged=this.params.node.setDataValue(this.params.column,isSelected,"edit"),eventStopped={type:Events.EVENT_CELL_EDITING_STOPPED,column,colDef:null==column?void 0:column.getColDef(),data:node.data,node,rowIndex,rowPinned:node.rowPinned,value,oldValue:value,newValue:isSelected,valueChanged};this.eventService.dispatchEvent(eventStopped)},CheckboxCellRenderer.TEMPLATE='\n        <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">\n            <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>\n        </div>',function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([RefSelector("eCheckbox")],CheckboxCellRenderer.prototype,"eCheckbox",void 0),CheckboxCellRenderer}(Component),__extends$2e=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),CheckboxCellEditor=function(_super){function CheckboxCellEditor(){return _super.call(this,'\n            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">\n                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>\n            </div>')||this}return __extends$2e(CheckboxCellEditor,_super),CheckboxCellEditor.prototype.init=function(params){var _a,_this=this;this.params=params;var isSelected=null!==(_a=params.value)&&void 0!==_a?_a:void 0;this.eCheckbox.setValue(isSelected),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(isSelected),this.addManagedListener(this.eCheckbox,Events.EVENT_FIELD_VALUE_CHANGED,(function(event){return _this.setAriaLabel(event.selected)}))},CheckboxCellEditor.prototype.getValue=function(){return this.eCheckbox.getValue()},CheckboxCellEditor.prototype.focusIn=function(){this.eCheckbox.getFocusableElement().focus()},CheckboxCellEditor.prototype.afterGuiAttached=function(){this.params.cellStartedEdit&&this.focusIn()},CheckboxCellEditor.prototype.isPopup=function(){return!1},CheckboxCellEditor.prototype.setAriaLabel=function(isSelected){var translate=this.localeService.getLocaleTextFunc(),stateName=getAriaCheckboxStateName(translate,isSelected),ariaLabel=translate("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(ariaLabel+" ("+stateName+")")},function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([RefSelector("eCheckbox")],CheckboxCellEditor.prototype,"eCheckbox",void 0),CheckboxCellEditor}(PopupComponent),__extends$2d=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$22=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$n=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spreadArray$j=function(to,from){for(var i=0,il=from.length,j=to.length;i<il;i++,j++)to[j]=from[i];return to},UserComponentRegistry=function(_super){function UserComponentRegistry(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.agGridDefaults={agDateInput:DefaultDateComponent,agColumnHeader:HeaderComp,agColumnGroupHeader:HeaderGroupComp,agSortIndicator:SortIndicatorComp,agTextColumnFloatingFilter:TextFloatingFilter,agNumberColumnFloatingFilter:NumberFloatingFilter,agDateColumnFloatingFilter:DateFloatingFilter,agReadOnlyFloatingFilter:ReadOnlyFloatingFilter,agAnimateShowChangeCellRenderer:AnimateShowChangeCellRenderer,agAnimateSlideCellRenderer:AnimateSlideCellRenderer,agGroupCellRenderer:GroupCellRenderer,agGroupRowRenderer:GroupCellRenderer,agLoadingCellRenderer:LoadingCellRenderer,agCheckboxCellRenderer:CheckboxCellRenderer,agCellEditor:TextCellEditor,agTextCellEditor:TextCellEditor,agNumberCellEditor:NumberCellEditor,agDateCellEditor:DateCellEditor,agDateStringCellEditor:DateStringCellEditor,agSelectCellEditor:SelectCellEditor,agLargeTextCellEditor:LargeTextCellEditor,agCheckboxCellEditor:CheckboxCellEditor,agTextColumnFilter:TextFilter,agNumberColumnFilter:NumberFilter,agDateColumnFilter:DateFilter,agLoadingOverlay:LoadingOverlayComponent$1,agNoRowsOverlay:NoRowsOverlayComponent$1,agTooltipComponent:TooltipComponent$1},_this.enterpriseAgDefaultCompsModule={agSetColumnFilter:ModuleNames.SetFilterModule,agSetColumnFloatingFilter:ModuleNames.SetFilterModule,agMultiColumnFilter:ModuleNames.MultiFilterModule,agMultiColumnFloatingFilter:ModuleNames.MultiFilterModule,agGroupColumnFilter:ModuleNames.RowGroupingModule,agGroupColumnFloatingFilter:ModuleNames.RowGroupingModule,agRichSelect:ModuleNames.RichSelectModule,agRichSelectCellEditor:ModuleNames.RichSelectModule,agDetailCellRenderer:ModuleNames.MasterDetailModule,agSparklineCellRenderer:ModuleNames.SparklinesModule},_this.jsComps={},_this}return __extends$2d(UserComponentRegistry,_super),UserComponentRegistry.prototype.init=function(){var _this=this;null!=this.gridOptions.components&&iterateObject(this.gridOptions.components,(function(key,component){return _this.registerJsComponent(key,component)}))},UserComponentRegistry.prototype.registerDefaultComponent=function(name,component){this.agGridDefaults[name]?console.error("Trying to overwrite a default component. You should call registerComponent"):this.agGridDefaults[name]=component},UserComponentRegistry.prototype.registerJsComponent=function(name,component){this.jsComps[name]=component},UserComponentRegistry.prototype.retrieve=function(propertyName,name){var _this=this,createResult=function(component,componentFromFramework){return{componentFromFramework,component}},registeredViaFrameworkComp=this.getFrameworkOverrides().frameworkComponent(name,this.gridOptions.components);if(null!=registeredViaFrameworkComp)return createResult(registeredViaFrameworkComp,!0);var jsComponent=this.jsComps[name];if(jsComponent)return createResult(jsComponent,this.getFrameworkOverrides().isFrameworkComponent(jsComponent));var defaultComponent=this.agGridDefaults[name];if(defaultComponent)return createResult(defaultComponent,!1);var moduleForComponent=this.enterpriseAgDefaultCompsModule[name];return moduleForComponent?ModuleRegistry.__assertRegistered(moduleForComponent,"AG Grid '"+propertyName+"' component: "+name,this.context.getGridId()):doOnce((function(){_this.warnAboutMissingComponent(propertyName,name)}),"MissingComp"+name),null},UserComponentRegistry.prototype.warnAboutMissingComponent=function(propertyName,componentName){var suggestions=fuzzySuggestions(componentName,__spreadArray$j(__spreadArray$j([],__read$n(Object.keys(this.agGridDefaults).filter((function(k){return!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(k)})))),__read$n(Object.keys(this.jsComps))),!0,.8).values;console.warn("AG Grid: Could not find '"+componentName+"' component. It was configured as \""+propertyName+": '"+componentName+"'\" but it wasn't found in the list of registered components."),suggestions.length>0&&console.warn("         Did you mean: ["+suggestions.slice(0,3)+"]?"),console.warn("If using a custom component check it has been registered as described in: https://ag-grid.com/javascript-data-grid/components/")},__decorate$22([Autowired("gridOptions")],UserComponentRegistry.prototype,"gridOptions",void 0),__decorate$22([PostConstruct],UserComponentRegistry.prototype,"init",null),UserComponentRegistry=__decorate$22([Bean("userComponentRegistry")],UserComponentRegistry)}(BeanStub),DateComponent={propertyName:"dateComponent",cellRenderer:!1},HeaderComponent={propertyName:"headerComponent",cellRenderer:!1},HeaderGroupComponent={propertyName:"headerGroupComponent",cellRenderer:!1},CellRendererComponent={propertyName:"cellRenderer",cellRenderer:!0},CellEditorComponent={propertyName:"cellEditor",cellRenderer:!1},InnerRendererComponent={propertyName:"innerRenderer",cellRenderer:!0},LoadingOverlayComponent={propertyName:"loadingOverlayComponent",cellRenderer:!1},NoRowsOverlayComponent={propertyName:"noRowsOverlayComponent",cellRenderer:!1},TooltipComponent={propertyName:"tooltipComponent",cellRenderer:!1},FilterComponent={propertyName:"filter",cellRenderer:!1},FloatingFilterComponent={propertyName:"floatingFilterComponent",cellRenderer:!1},ToolPanelComponent={propertyName:"toolPanel",cellRenderer:!1},StatusPanelComponent={propertyName:"statusPanel",cellRenderer:!1},FullWidth={propertyName:"fullWidthCellRenderer",cellRenderer:!0},FullWidthLoading={propertyName:"loadingCellRenderer",cellRenderer:!0},FullWidthGroup={propertyName:"groupRowRenderer",cellRenderer:!0},FullWidthDetail={propertyName:"detailCellRenderer",cellRenderer:!0},FloatingFilterMapper=function(){function FloatingFilterMapper(){}return FloatingFilterMapper.getFloatingFilterType=function(filterType){return this.filterToFloatingFilterMapping[filterType]},FloatingFilterMapper.filterToFloatingFilterMapping={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"},FloatingFilterMapper}(),__extends$2c=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$21=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},UserComponentFactory=function(_super){function UserComponentFactory(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$2c(UserComponentFactory,_super),UserComponentFactory.prototype.getHeaderCompDetails=function(colDef,params){return this.getCompDetails(colDef,HeaderComponent,"agColumnHeader",params)},UserComponentFactory.prototype.getHeaderGroupCompDetails=function(params){var colGroupDef=params.columnGroup.getColGroupDef();return this.getCompDetails(colGroupDef,HeaderGroupComponent,"agColumnGroupHeader",params)},UserComponentFactory.prototype.getFullWidthCellRendererDetails=function(params){return this.getCompDetails(this.gridOptions,FullWidth,null,params,!0)},UserComponentFactory.prototype.getFullWidthLoadingCellRendererDetails=function(params){return this.getCompDetails(this.gridOptions,FullWidthLoading,"agLoadingCellRenderer",params,!0)},UserComponentFactory.prototype.getFullWidthGroupCellRendererDetails=function(params){return this.getCompDetails(this.gridOptions,FullWidthGroup,"agGroupRowRenderer",params,!0)},UserComponentFactory.prototype.getFullWidthDetailCellRendererDetails=function(params){return this.getCompDetails(this.gridOptions,FullWidthDetail,"agDetailCellRenderer",params,!0)},UserComponentFactory.prototype.getInnerRendererDetails=function(def,params){return this.getCompDetails(def,InnerRendererComponent,null,params)},UserComponentFactory.prototype.getFullWidthGroupRowInnerCellRenderer=function(def,params){return this.getCompDetails(def,InnerRendererComponent,null,params)},UserComponentFactory.prototype.getCellRendererDetails=function(def,params){return this.getCompDetails(def,CellRendererComponent,null,params)},UserComponentFactory.prototype.getCellEditorDetails=function(def,params){return this.getCompDetails(def,CellEditorComponent,"agCellEditor",params,!0)},UserComponentFactory.prototype.getFilterDetails=function(def,params,defaultFilter){return this.getCompDetails(def,FilterComponent,defaultFilter,params,!0)},UserComponentFactory.prototype.getDateCompDetails=function(params){return this.getCompDetails(this.gridOptions,DateComponent,"agDateInput",params,!0)},UserComponentFactory.prototype.getLoadingOverlayCompDetails=function(params){return this.getCompDetails(this.gridOptions,LoadingOverlayComponent,"agLoadingOverlay",params,!0)},UserComponentFactory.prototype.getNoRowsOverlayCompDetails=function(params){return this.getCompDetails(this.gridOptions,NoRowsOverlayComponent,"agNoRowsOverlay",params,!0)},UserComponentFactory.prototype.getTooltipCompDetails=function(params){return this.getCompDetails(params.colDef,TooltipComponent,"agTooltipComponent",params,!0)},UserComponentFactory.prototype.getSetFilterCellRendererDetails=function(def,params){return this.getCompDetails(def,CellRendererComponent,null,params)},UserComponentFactory.prototype.getFloatingFilterCompDetails=function(def,params,defaultFloatingFilter){return this.getCompDetails(def,FloatingFilterComponent,defaultFloatingFilter,params)},UserComponentFactory.prototype.getToolPanelCompDetails=function(toolPanelDef,params){return this.getCompDetails(toolPanelDef,ToolPanelComponent,null,params,!0)},UserComponentFactory.prototype.getStatusPanelCompDetails=function(def,params){return this.getCompDetails(def,StatusPanelComponent,null,params,!0)},UserComponentFactory.prototype.getCompDetails=function(defObject,type,defaultName,params,mandatory){var _this=this;void 0===mandatory&&(mandatory=!1);var propertyName=type.propertyName,cellRenderer=type.cellRenderer,_a=this.getCompKeys(defObject,type,params),compName=_a.compName,jsComp=_a.jsComp,fwComp=_a.fwComp,paramsFromSelector=_a.paramsFromSelector,popupFromSelector=_a.popupFromSelector,popupPositionFromSelector=_a.popupPositionFromSelector,lookupFromRegistry=function(key){var item=_this.userComponentRegistry.retrieve(propertyName,key);item&&(jsComp=item.componentFromFramework?void 0:item.component,fwComp=item.componentFromFramework?item.component:void 0)};if(null!=compName&&lookupFromRegistry(compName),null==jsComp&&null==fwComp&&null!=defaultName&&lookupFromRegistry(defaultName),jsComp&&cellRenderer&&!this.agComponentUtils.doesImplementIComponent(jsComp)&&(jsComp=this.agComponentUtils.adaptFunction(propertyName,jsComp)),jsComp||fwComp){var paramsMerged=this.mergeParamsWithApplicationProvidedParams(defObject,type,params,paramsFromSelector),componentFromFramework=null==jsComp,componentClass=jsComp||fwComp;return{componentFromFramework,componentClass,params:paramsMerged,type,popupFromSelector,popupPositionFromSelector,newAgStackInstance:function(){return _this.newAgStackInstance(componentClass,componentFromFramework,paramsMerged,type)}}}mandatory&&console.error("AG Grid: Could not find component "+compName+", did you forget to configure this component?")},UserComponentFactory.prototype.getCompKeys=function(defObject,type,params){var compName,jsComp,fwComp,paramsFromSelector,popupFromSelector,popupPositionFromSelector,_this=this,propertyName=type.propertyName;if(defObject){var defObjectAny=defObject,selectorFunc=defObjectAny[propertyName+"Selector"],selectorRes=selectorFunc?selectorFunc(params):null,assignComp=function(providedJsComp){if("string"==typeof providedJsComp)compName=providedJsComp;else if(null!=providedJsComp&&!0!==providedJsComp){_this.getFrameworkOverrides().isFrameworkComponent(providedJsComp)?fwComp=providedJsComp:jsComp=providedJsComp}};selectorRes?(assignComp(selectorRes.component),paramsFromSelector=selectorRes.params,popupFromSelector=selectorRes.popup,popupPositionFromSelector=selectorRes.popupPosition):assignComp(defObjectAny[propertyName])}return{compName,jsComp,fwComp,paramsFromSelector,popupFromSelector,popupPositionFromSelector}},UserComponentFactory.prototype.newAgStackInstance=function(ComponentClass,componentFromFramework,params,type){var instance,propertyName=type.propertyName;if(!componentFromFramework)instance=new ComponentClass;else{var thisComponentConfig=this.componentMetadataProvider.retrieve(propertyName);instance=this.frameworkComponentWrapper.wrap(ComponentClass,thisComponentConfig.mandatoryMethodList,thisComponentConfig.optionalMethodList,type)}var deferredInit=this.initComponent(instance,params);return null==deferredInit?AgPromise.resolve(instance):deferredInit.then((function(){return instance}))},UserComponentFactory.prototype.mergeParamsWithApplicationProvidedParams=function(defObject,type,paramsFromGrid,paramsFromSelector){void 0===paramsFromSelector&&(paramsFromSelector=null);var params={context:this.gridOptionsService.context,columnApi:this.gridOptionsService.columnApi,api:this.gridOptionsService.api};mergeDeep(params,paramsFromGrid);var userParams=defObject&&defObject[type.propertyName+"Params"];"function"==typeof userParams?mergeDeep(params,userParams(paramsFromGrid)):"object"==typeof userParams&&mergeDeep(params,userParams);return mergeDeep(params,paramsFromSelector),params},UserComponentFactory.prototype.initComponent=function(component,params){if(this.context.createBean(component),null!=component.init)return component.init(params)},UserComponentFactory.prototype.getDefaultFloatingFilterType=function(def,getFromDefault){if(null==def)return null;var defaultFloatingFilterType=null,_a=this.getCompKeys(def,FilterComponent),compName=_a.compName,jsComp=_a.jsComp,fwComp=_a.fwComp;compName?defaultFloatingFilterType=FloatingFilterMapper.getFloatingFilterType(compName):null==jsComp&&null==fwComp&&!0===def.filter&&(defaultFloatingFilterType=getFromDefault());return defaultFloatingFilterType},__decorate$21([Autowired("gridOptions")],UserComponentFactory.prototype,"gridOptions",void 0),__decorate$21([Autowired("agComponentUtils")],UserComponentFactory.prototype,"agComponentUtils",void 0),__decorate$21([Autowired("componentMetadataProvider")],UserComponentFactory.prototype,"componentMetadataProvider",void 0),__decorate$21([Autowired("userComponentRegistry")],UserComponentFactory.prototype,"userComponentRegistry",void 0),__decorate$21([Optional("frameworkComponentWrapper")],UserComponentFactory.prototype,"frameworkComponentWrapper",void 0),UserComponentFactory=__decorate$21([Bean("userComponentFactory")],UserComponentFactory)}(BeanStub);!function(ExcelFactoryMode){ExcelFactoryMode[ExcelFactoryMode.SINGLE_SHEET=0]="SINGLE_SHEET",ExcelFactoryMode[ExcelFactoryMode.MULTI_SHEET=1]="MULTI_SHEET"}(ExcelFactoryMode||(ExcelFactoryMode={}));var RowHighlightPosition,ClientSideRowModelSteps,__extends$2b=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$20=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},DragService=function(_super){function DragService(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.dragEndFunctions=[],_this.dragSources=[],_this}return __extends$2b(DragService,_super),DragService.prototype.removeAllListeners=function(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0},DragService.prototype.removeListener=function(dragSourceAndListener){var element=dragSourceAndListener.dragSource.eElement,mouseDownListener=dragSourceAndListener.mouseDownListener;if(element.removeEventListener("mousedown",mouseDownListener),dragSourceAndListener.touchEnabled){var touchStartListener=dragSourceAndListener.touchStartListener;element.removeEventListener("touchstart",touchStartListener,{passive:!0})}},DragService.prototype.removeDragSource=function(params){var dragSourceAndListener=this.dragSources.find((function(item){return item.dragSource===params}));dragSourceAndListener&&(this.removeListener(dragSourceAndListener),removeFromArray(this.dragSources,dragSourceAndListener))},DragService.prototype.isDragging=function(){return this.dragging},DragService.prototype.addDragSource=function(params){var _this=this,mouseListener=this.onMouseDown.bind(this,params),eElement=params.eElement,includeTouch=params.includeTouch,stopPropagationForTouch=params.stopPropagationForTouch;eElement.addEventListener("mousedown",mouseListener);var touchListener=null,suppressTouch=this.gridOptionsService.is("suppressTouch");includeTouch&&!suppressTouch&&(touchListener=function(touchEvent){isFocusableFormField(touchEvent.target)||(touchEvent.cancelable&&(touchEvent.preventDefault(),stopPropagationForTouch&&touchEvent.stopPropagation()),_this.onTouchStart(params,touchEvent))},eElement.addEventListener("touchstart",touchListener,{passive:!1})),this.dragSources.push({dragSource:params,mouseDownListener:mouseListener,touchStartListener:touchListener,touchEnabled:!!includeTouch})},DragService.prototype.getStartTarget=function(){return this.startTarget},DragService.prototype.onTouchStart=function(params,touchEvent){var _this=this;this.currentDragParams=params,this.dragging=!1;var touch=touchEvent.touches[0];this.touchLastTime=touch,this.touchStart=touch;var touchEndEvent=function(e){return _this.onTouchUp(e,params.eElement)},target=touchEvent.target,events=[{target:this.gridOptionsService.getRootNode(),type:"touchmove",listener:function(e){e.cancelable&&e.preventDefault()},options:{passive:!1}},{target,type:"touchmove",listener:function(e){return _this.onTouchMove(e,params.eElement)},options:{passive:!0}},{target,type:"touchend",listener:touchEndEvent,options:{passive:!0}},{target,type:"touchcancel",listener:touchEndEvent,options:{passive:!0}}];this.addTemporaryEvents(events),0===params.dragStartPixels&&this.onCommonMove(touch,this.touchStart,params.eElement)},DragService.prototype.onMouseDown=function(params,mouseEvent){var _this=this,e=mouseEvent;if(!(params.skipMouseEvent&&params.skipMouseEvent(mouseEvent)||e._alreadyProcessedByDragService||(e._alreadyProcessedByDragService=!0,0!==mouseEvent.button))){this.shouldPreventMouseEvent(mouseEvent)&&mouseEvent.preventDefault(),this.currentDragParams=params,this.dragging=!1,this.mouseStartEvent=mouseEvent,this.startTarget=mouseEvent.target;var target=this.gridOptionsService.getRootNode(),events=[{target,type:"mousemove",listener:function(event){return _this.onMouseMove(event,params.eElement)}},{target,type:"mouseup",listener:function(event){return _this.onMouseUp(event,params.eElement)}},{target,type:"contextmenu",listener:function(event){return event.preventDefault()}}];this.addTemporaryEvents(events),0===params.dragStartPixels&&this.onMouseMove(mouseEvent,params.eElement)}},DragService.prototype.addTemporaryEvents=function(events){events.forEach((function(currentEvent){var target=currentEvent.target,type=currentEvent.type,listener=currentEvent.listener,options=currentEvent.options;target.addEventListener(type,listener,options)})),this.dragEndFunctions.push((function(){events.forEach((function(currentEvent){var target=currentEvent.target,type=currentEvent.type,listener=currentEvent.listener,options=currentEvent.options;target.removeEventListener(type,listener,options)}))}))},DragService.prototype.isEventNearStartEvent=function(currentEvent,startEvent){var dragStartPixels=this.currentDragParams.dragStartPixels;return areEventsNear(currentEvent,startEvent,exists(dragStartPixels)?dragStartPixels:4)},DragService.prototype.getFirstActiveTouch=function(touchList){for(var i=0;i<touchList.length;i++)if(touchList[i].identifier===this.touchStart.identifier)return touchList[i];return null},DragService.prototype.onCommonMove=function(currentEvent,startEvent,el){if(!this.dragging){if(!this.dragging&&this.isEventNearStartEvent(currentEvent,startEvent))return;this.dragging=!0;var event_1={type:Events.EVENT_DRAG_STARTED,target:el};this.eventService.dispatchEvent(event_1),this.currentDragParams.onDragStart(startEvent),this.currentDragParams.onDragging(startEvent)}this.currentDragParams.onDragging(currentEvent)},DragService.prototype.onTouchMove=function(touchEvent,el){var touch=this.getFirstActiveTouch(touchEvent.touches);touch&&this.onCommonMove(touch,this.touchStart,el)},DragService.prototype.onMouseMove=function(mouseEvent,el){this.shouldPreventMouseEvent(mouseEvent)&&mouseEvent.preventDefault(),this.onCommonMove(mouseEvent,this.mouseStartEvent,el)},DragService.prototype.shouldPreventMouseEvent=function(mouseEvent){var isEnableCellTextSelect=this.gridOptionsService.is("enableCellTextSelection"),isSafari=isBrowserSafari(),isMouseMove="mousemove"===mouseEvent.type;return(isEnableCellTextSelect&&isMouseMove||isSafari)&&mouseEvent.cancelable&&this.mouseEventService.isEventFromThisGrid(mouseEvent)&&!this.isOverFormFieldElement(mouseEvent)},DragService.prototype.isOverFormFieldElement=function(mouseEvent){var el=mouseEvent.target,tagName=null==el?void 0:el.tagName.toLocaleLowerCase();return!!(null==tagName?void 0:tagName.match("^a$|textarea|input|select|button"))},DragService.prototype.onTouchUp=function(touchEvent,el){var touch=this.getFirstActiveTouch(touchEvent.changedTouches);touch||(touch=this.touchLastTime),this.onUpCommon(touch,el)},DragService.prototype.onMouseUp=function(mouseEvent,el){this.onUpCommon(mouseEvent,el)},DragService.prototype.onUpCommon=function(eventOrTouch,el){if(this.dragging){this.dragging=!1,this.currentDragParams.onDragStop(eventOrTouch);var event_2={type:Events.EVENT_DRAG_STOPPED,target:el};this.eventService.dispatchEvent(event_2)}this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach((function(func){return func()})),this.dragEndFunctions.length=0},__decorate$20([Autowired("mouseEventService")],DragService.prototype,"mouseEventService",void 0),__decorate$20([PreDestroy],DragService.prototype,"removeAllListeners",null),DragService=__decorate$20([Bean("dragService")],DragService)}(BeanStub),AutoScrollService=function(){function AutoScrollService(params){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=params.scrollContainer,this.scrollHorizontally=-1!==params.scrollAxis.indexOf("x"),this.scrollVertically=-1!==params.scrollAxis.indexOf("y"),this.scrollByTick=null!=params.scrollByTick?params.scrollByTick:20,params.onScrollCallback&&(this.onScrollCallback=params.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=params.getVerticalPosition,this.setVerticalPosition=params.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=params.getHorizontalPosition,this.setHorizontalPosition=params.setHorizontalPosition),this.shouldSkipVerticalScroll=params.shouldSkipVerticalScroll||function(){return!1},this.shouldSkipHorizontalScroll=params.shouldSkipHorizontalScroll||function(){return!1}}return AutoScrollService.prototype.check=function(mouseEvent,forceSkipVerticalScroll){void 0===forceSkipVerticalScroll&&(forceSkipVerticalScroll=!1);var skipVerticalScroll=forceSkipVerticalScroll||this.shouldSkipVerticalScroll();if(!skipVerticalScroll||!this.shouldSkipHorizontalScroll()){var rect=this.scrollContainer.getBoundingClientRect(),scrollTick=this.scrollByTick;this.tickLeft=mouseEvent.clientX<rect.left+scrollTick,this.tickRight=mouseEvent.clientX>rect.right-scrollTick,this.tickUp=mouseEvent.clientY<rect.top+scrollTick&&!skipVerticalScroll,this.tickDown=mouseEvent.clientY>rect.bottom-scrollTick&&!skipVerticalScroll,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}},AutoScrollService.prototype.ensureTickingStarted=function(){null===this.tickingInterval&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)},AutoScrollService.prototype.doTick=function(){var tickAmount;if(this.tickCount++,tickAmount=this.tickCount>20?200:this.tickCount>10?80:40,this.scrollVertically){var vScrollPosition=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(vScrollPosition-tickAmount),this.tickDown&&this.setVerticalPosition(vScrollPosition+tickAmount)}if(this.scrollHorizontally){var hScrollPosition=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(hScrollPosition-tickAmount),this.tickRight&&this.setHorizontalPosition(hScrollPosition+tickAmount)}this.onScrollCallback&&this.onScrollCallback()},AutoScrollService.prototype.ensureCleared=function(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)},AutoScrollService}(),__extends$2a=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1$=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},LIST_ITEM_HOVERED="ag-list-item-hovered";!function(_super){function VirtualListDragFeature(comp,virtualList,params){var _this=_super.call(this)||this;return _this.comp=comp,_this.virtualList=virtualList,_this.params=params,_this.currentDragValue=null,_this.lastHoveredListItem=null,_this}__extends$2a(VirtualListDragFeature,_super),VirtualListDragFeature.prototype.postConstruct=function(){this.addManagedListener(this.params.eventSource,this.params.listItemDragStartEvent,this.listItemDragStart.bind(this)),this.addManagedListener(this.params.eventSource,this.params.listItemDragEndEvent,this.listItemDragEnd.bind(this)),this.createDropTarget(),this.createAutoScrollService()},VirtualListDragFeature.prototype.listItemDragStart=function(event){this.currentDragValue=this.params.getCurrentDragValue(event),this.moveBlocked=this.params.isMoveBlocked(this.currentDragValue)},VirtualListDragFeature.prototype.listItemDragEnd=function(){var _this=this;window.setTimeout((function(){_this.currentDragValue=null,_this.moveBlocked=!1}),10)},VirtualListDragFeature.prototype.createDropTarget=function(){var _this=this,dropTarget={isInterestedIn:function(type){return type===_this.params.dragSourceType},getIconName:function(){return DragAndDropService[_this.moveBlocked?"ICON_NOT_ALLOWED":"ICON_MOVE"]},getContainer:function(){return _this.comp.getGui()},onDragging:function(e){return _this.onDragging(e)},onDragStop:function(){return _this.onDragStop()},onDragLeave:function(){return _this.onDragLeave()}};this.dragAndDropService.addDropTarget(dropTarget)},VirtualListDragFeature.prototype.createAutoScrollService=function(){var virtualListGui=this.virtualList.getGui();this.autoScrollService=new AutoScrollService({scrollContainer:virtualListGui,scrollAxis:"y",getVerticalPosition:function(){return virtualListGui.scrollTop},setVerticalPosition:function(position){return virtualListGui.scrollTop=position}})},VirtualListDragFeature.prototype.onDragging=function(e){if(this.currentDragValue&&!this.moveBlocked){var hoveredListItem=this.getListDragItem(e),comp=this.virtualList.getComponentAt(hoveredListItem.rowIndex);if(comp){var el=comp.getGui().parentElement;this.lastHoveredListItem&&this.lastHoveredListItem.rowIndex===hoveredListItem.rowIndex&&this.lastHoveredListItem.position===hoveredListItem.position||(this.autoScrollService.check(e.event),this.clearHoveredItems(),this.lastHoveredListItem=hoveredListItem,radioCssClass(el,LIST_ITEM_HOVERED),radioCssClass(el,"ag-item-highlight-"+hoveredListItem.position))}}},VirtualListDragFeature.prototype.getListDragItem=function(e){var virtualListGui=this.virtualList.getGui(),paddingTop=parseFloat(window.getComputedStyle(virtualListGui).paddingTop),rowHeight=this.virtualList.getRowHeight(),scrollTop=this.virtualList.getScrollTop(),rowIndex=Math.max(0,(e.y-paddingTop+scrollTop)/rowHeight),maxLen=this.params.getNumRows(this.comp)-1,normalizedRowIndex=0|Math.min(maxLen,rowIndex);return{rowIndex:normalizedRowIndex,position:Math.round(rowIndex)>rowIndex||rowIndex>maxLen?"bottom":"top",component:this.virtualList.getComponentAt(normalizedRowIndex)}},VirtualListDragFeature.prototype.onDragStop=function(){this.moveBlocked||(this.params.moveItem(this.currentDragValue,this.lastHoveredListItem),this.clearHoveredItems(),this.autoScrollService.ensureCleared())},VirtualListDragFeature.prototype.onDragLeave=function(){this.clearHoveredItems(),this.autoScrollService.ensureCleared()},VirtualListDragFeature.prototype.clearHoveredItems=function(){this.virtualList.getGui().querySelectorAll("."+LIST_ITEM_HOVERED).forEach((function(el){[LIST_ITEM_HOVERED,"ag-item-highlight-top","ag-item-highlight-bottom"].forEach((function(cls){el.classList.remove(cls)}))})),this.lastHoveredListItem=null},__decorate$1$([Autowired("dragAndDropService")],VirtualListDragFeature.prototype,"dragAndDropService",void 0),__decorate$1$([PostConstruct],VirtualListDragFeature.prototype,"postConstruct",null)}(BeanStub),function(RowHighlightPosition){RowHighlightPosition[RowHighlightPosition.Above=0]="Above",RowHighlightPosition[RowHighlightPosition.Below=1]="Below"}(RowHighlightPosition||(RowHighlightPosition={})),function(ClientSideRowModelSteps){ClientSideRowModelSteps.EVERYTHING="group",ClientSideRowModelSteps.FILTER="filter",ClientSideRowModelSteps.SORT="sort",ClientSideRowModelSteps.MAP="map",ClientSideRowModelSteps.AGGREGATE="aggregate",ClientSideRowModelSteps.FILTER_AGGREGATES="filter_aggregates",ClientSideRowModelSteps.PIVOT="pivot",ClientSideRowModelSteps.NOTHING="nothing"}(ClientSideRowModelSteps||(ClientSideRowModelSteps={}));var __decorate$1_=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};function unwrapUserComp(comp){var compAsAny=comp;return null!=compAsAny&&null!=compAsAny.getFrameworkComponentInstance?compAsAny.getFrameworkComponentInstance():comp}var LayoutCssClasses,GridApi=function(){function GridApi(){this.detailGridInfoMap={},this.destroyCalled=!1}return GridApi.prototype.registerOverlayWrapperComp=function(overlayWrapperComp){this.overlayWrapperComp=overlayWrapperComp},GridApi.prototype.registerSideBarComp=function(sideBarComp){this.sideBarComp=sideBarComp},GridApi.prototype.init=function(){var _this=this;switch(this.rowModel.getType()){case"clientSide":this.clientSideRowModel=this.rowModel;break;case"infinite":this.infiniteRowModel=this.rowModel;break;case"serverSide":this.serverSideRowModel=this.rowModel}this.ctrlsService.whenReady((function(){_this.gridBodyCtrl=_this.ctrlsService.getGridBodyCtrl()}))},GridApi.prototype.__getAlignedGridService=function(){return this.alignedGridsService},GridApi.prototype.__getContext=function(){return this.context},GridApi.prototype.getSetterMethod=function(key){return"set"+key.charAt(0).toUpperCase()+key.substring(1)},GridApi.prototype.__setPropertyOnly=function(propertyName,value){return this.gos.__setPropertyOnly(propertyName,value)},GridApi.prototype.__updateProperty=function(propertyName,value,force,changeSet){void 0===changeSet&&(changeSet=void 0),this.gos.set(propertyName,value,force,{},changeSet);var setterName=this.getSetterMethod(propertyName);this[setterName]&&this[setterName](value)},GridApi.prototype.getGridId=function(){return this.context.getGridId()},GridApi.prototype.addDetailGridInfo=function(id,gridInfo){this.detailGridInfoMap[id]=gridInfo},GridApi.prototype.removeDetailGridInfo=function(id){this.detailGridInfoMap[id]=void 0},GridApi.prototype.getDetailGridInfo=function(id){return this.detailGridInfoMap[id]},GridApi.prototype.forEachDetailGridInfo=function(callback){var index=0;iterateObject(this.detailGridInfoMap,(function(id,gridInfo){exists(gridInfo)&&(callback(gridInfo,index),index++)}))},GridApi.prototype.getDataAsCsv=function(params){if(ModuleRegistry.__assertRegistered(ModuleNames.CsvExportModule,"api.getDataAsCsv",this.context.getGridId()))return this.csvCreator.getDataAsCsv(params)},GridApi.prototype.exportDataAsCsv=function(params){ModuleRegistry.__assertRegistered(ModuleNames.CsvExportModule,"api.exportDataAsCSv",this.context.getGridId())&&this.csvCreator.exportDataAsCsv(params)},GridApi.prototype.getExcelExportMode=function(params){var baseParams=this.gos.get("defaultExcelExportParams");return Object.assign({exportMode:"xlsx"},baseParams,params).exportMode},GridApi.prototype.assertNotExcelMultiSheet=function(method,params){if(!ModuleRegistry.__assertRegistered(ModuleNames.ExcelExportModule,"api."+method,this.context.getGridId()))return!1;var exportMode=this.getExcelExportMode(params);return this.excelCreator.getFactoryMode(exportMode)!==ExcelFactoryMode.MULTI_SHEET||(console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'"),!1)},GridApi.prototype.getDataAsExcel=function(params){if(this.assertNotExcelMultiSheet("getDataAsExcel",params))return this.excelCreator.getDataAsExcel(params)},GridApi.prototype.exportDataAsExcel=function(params){this.assertNotExcelMultiSheet("exportDataAsExcel",params)&&this.excelCreator.exportDataAsExcel(params)},GridApi.prototype.getSheetDataForExcel=function(params){if(ModuleRegistry.__assertRegistered(ModuleNames.ExcelExportModule,"api.getSheetDataForExcel",this.context.getGridId())){var exportMode=this.getExcelExportMode(params);return this.excelCreator.setFactoryMode(ExcelFactoryMode.MULTI_SHEET,exportMode),this.excelCreator.getSheetDataForExcel(params)}},GridApi.prototype.getMultipleSheetsAsExcel=function(params){if(ModuleRegistry.__assertRegistered(ModuleNames.ExcelExportModule,"api.getMultipleSheetsAsExcel",this.context.getGridId()))return this.excelCreator.getMultipleSheetsAsExcel(params)},GridApi.prototype.exportMultipleSheetsAsExcel=function(params){if(ModuleRegistry.__assertRegistered(ModuleNames.ExcelExportModule,"api.exportMultipleSheetsAsExcel",this.context.getGridId()))return this.excelCreator.exportMultipleSheetsAsExcel(params)},GridApi.prototype.setTreeData=function(newTreeData){this.gos.set("treeData",newTreeData)},GridApi.prototype.setGridAriaProperty=function(property,value){if(property){var eGrid=this.ctrlsService.getGridBodyCtrl().getGui(),ariaProperty="aria-"+property;null===value?eGrid.removeAttribute(ariaProperty):eGrid.setAttribute(ariaProperty,value)}},GridApi.prototype.logMissingRowModel=function(apiMethod){for(var requiredRowModels=[],_i=1;_i<arguments.length;_i++)requiredRowModels[_i-1]=arguments[_i];console.error("AG Grid: api."+apiMethod+" can only be called when gridOptions.rowModelType is "+requiredRowModels.join(" or "))},GridApi.prototype.setServerSideDatasource=function(datasource){this.serverSideRowModel?this.serverSideRowModel.setDatasource(datasource):this.logMissingRowModel("setServerSideDatasource","serverSide")},GridApi.prototype.setCacheBlockSize=function(blockSize){this.serverSideRowModel?(this.gos.set("cacheBlockSize",blockSize),this.serverSideRowModel.resetRootStore()):this.logMissingRowModel("setCacheBlockSize","serverSide")},GridApi.prototype.setDatasource=function(datasource){this.gos.isRowModelType("infinite")?this.rowModel.setDatasource(datasource):this.logMissingRowModel("setDatasource","infinite")},GridApi.prototype.setViewportDatasource=function(viewportDatasource){this.gos.isRowModelType("viewport")?this.rowModel.setViewportDatasource(viewportDatasource):this.logMissingRowModel("setViewportDatasource","viewport")},GridApi.prototype.setRowData=function(rowData){null==this.immutableService?this.logMissingRowModel("setRowData","clientSide"):this.immutableService.isActive()?this.immutableService.setRowData(rowData):(this.selectionService.reset(),this.clientSideRowModel.setRowData(rowData))},GridApi.prototype.setPinnedTopRowData=function(rows){this.pinnedRowModel.setPinnedTopRowData(rows)},GridApi.prototype.setPinnedBottomRowData=function(rows){this.pinnedRowModel.setPinnedBottomRowData(rows)},GridApi.prototype.getPinnedTopRowCount=function(){return this.pinnedRowModel.getPinnedTopRowCount()},GridApi.prototype.getPinnedBottomRowCount=function(){return this.pinnedRowModel.getPinnedBottomRowCount()},GridApi.prototype.getPinnedTopRow=function(index){return this.pinnedRowModel.getPinnedTopRow(index)},GridApi.prototype.getPinnedBottomRow=function(index){return this.pinnedRowModel.getPinnedBottomRow(index)},GridApi.prototype.setColumnDefs=function(colDefs,source){void 0===source&&(source="api"),this.columnModel.setColumnDefs(colDefs,source),this.gos.set("columnDefs",colDefs,!0,{source})},GridApi.prototype.setAutoGroupColumnDef=function(colDef,source){void 0===source&&(source="api"),this.gos.set("autoGroupColumnDef",colDef,!0,{source})},GridApi.prototype.setDefaultColDef=function(colDef,source){void 0===source&&(source="api"),this.gos.set("defaultColDef",colDef,!0,{source})},GridApi.prototype.setColumnTypes=function(columnTypes,source){void 0===source&&(source="api"),this.gos.set("columnTypes",columnTypes,!0,{source})},GridApi.prototype.expireValueCache=function(){this.valueCache.expire()},GridApi.prototype.getVerticalPixelRange=function(){return this.gridBodyCtrl.getScrollFeature().getVScrollPosition()},GridApi.prototype.getHorizontalPixelRange=function(){return this.gridBodyCtrl.getScrollFeature().getHScrollPosition()},GridApi.prototype.setAlwaysShowHorizontalScroll=function(show){this.gos.set("alwaysShowHorizontalScroll",show)},GridApi.prototype.setAlwaysShowVerticalScroll=function(show){this.gos.set("alwaysShowVerticalScroll",show)},GridApi.prototype.refreshCells=function(params){void 0===params&&(params={}),this.rowRenderer.refreshCells(params)},GridApi.prototype.flashCells=function(params){void 0===params&&(params={}),this.rowRenderer.flashCells(params)},GridApi.prototype.redrawRows=function(params){void 0===params&&(params={});var rowNodes=params?params.rowNodes:void 0;this.rowRenderer.redrawRows(rowNodes)},GridApi.prototype.setFunctionsReadOnly=function(readOnly){this.gos.set("functionsReadOnly",readOnly)},GridApi.prototype.refreshHeader=function(){this.ctrlsService.getHeaderRowContainerCtrls().forEach((function(c){return c.refresh()}))},GridApi.prototype.isAnyFilterPresent=function(){return this.filterManager.isAnyFilterPresent()},GridApi.prototype.isColumnFilterPresent=function(){return this.filterManager.isColumnFilterPresent()||this.filterManager.isAggregateFilterPresent()},GridApi.prototype.isQuickFilterPresent=function(){return this.filterManager.isQuickFilterPresent()},GridApi.prototype.getModel=function(){return this.rowModel},GridApi.prototype.setRowNodeExpanded=function(rowNode,expanded,expandParents){rowNode&&(expandParents&&rowNode.parent&&-1!==rowNode.parent.level&&this.setRowNodeExpanded(rowNode.parent,expanded,expandParents),rowNode.setExpanded(expanded))},GridApi.prototype.onGroupExpandedOrCollapsed=function(){missing(this.clientSideRowModel)?this.logMissingRowModel("onGroupExpandedOrCollapsed","clientSide"):this.clientSideRowModel.refreshModel({step:ClientSideRowModelSteps.MAP})},GridApi.prototype.refreshClientSideRowModel=function(step){missing(this.clientSideRowModel)?this.logMissingRowModel("refreshClientSideRowModel","clientSide"):this.clientSideRowModel.refreshModel(step)},GridApi.prototype.isAnimationFrameQueueEmpty=function(){return this.animationFrameService.isQueueEmpty()},GridApi.prototype.flushAllAnimationFrames=function(){this.animationFrameService.flushAllFrames()},GridApi.prototype.getRowNode=function(id){return this.rowModel.getRowNode(id)},GridApi.prototype.getSizesForCurrentTheme=function(){return{rowHeight:this.gos.getRowHeightAsNumber(),headerHeight:this.columnModel.getHeaderHeight()}},GridApi.prototype.expandAll=function(){this.clientSideRowModel?this.clientSideRowModel.expandOrCollapseAll(!0):this.serverSideRowModel?this.serverSideRowModel.expandAll(!0):this.logMissingRowModel("expandAll","clientSide","serverSide")},GridApi.prototype.collapseAll=function(){this.clientSideRowModel?this.clientSideRowModel.expandOrCollapseAll(!1):this.serverSideRowModel?this.serverSideRowModel.expandAll(!1):this.logMissingRowModel("expandAll","clientSide","serverSide")},GridApi.prototype.addRenderedRowListener=function(eventName,rowIndex,callback){this.rowRenderer.addRenderedRowListener(eventName,rowIndex,callback)},GridApi.prototype.getQuickFilter=function(){return this.gos.get("quickFilterText")},GridApi.prototype.setQuickFilter=function(newFilter){this.gos.set("quickFilterText",newFilter)},GridApi.prototype.setExcludeHiddenColumnsFromQuickFilter=function(value){logDeprecation("30","setExcludeHiddenColumnsFromQuickFilter",void 0,"Hidden columns are now excluded from the Quick Filter by default. This can be toggled using `setIncludeHiddenColumnsInQuickFilter`"),this.setIncludeHiddenColumnsInQuickFilter(!value)},GridApi.prototype.setIncludeHiddenColumnsInQuickFilter=function(value){this.gos.set("includeHiddenColumnsInQuickFilter",value)},GridApi.prototype.setQuickFilterParser=function(quickFilterParser){this.gos.set("quickFilterParser",quickFilterParser)},GridApi.prototype.setQuickFilterMatcher=function(quickFilterMatcher){this.gos.set("quickFilterMatcher",quickFilterMatcher)},GridApi.prototype.getAdvancedFilterModel=function(){return ModuleRegistry.__assertRegistered(ModuleNames.AdvancedFilterModule,"api.getAdvancedFilterModel",this.context.getGridId())?this.filterManager.getAdvancedFilterModel():null},GridApi.prototype.setAdvancedFilterModel=function(advancedFilterModel){this.gos.set("advancedFilterModel",advancedFilterModel)},GridApi.prototype.setEnableAdvancedFilter=function(enabled){this.gos.set("enableAdvancedFilter",enabled)},GridApi.prototype.setIncludeHiddenColumnsInAdvancedFilter=function(value){this.gos.set("includeHiddenColumnsInAdvancedFilter",value)},GridApi.prototype.setAdvancedFilterParent=function(advancedFilterParent){this.gos.set("advancedFilterParent",advancedFilterParent)},GridApi.prototype.setAdvancedFilterBuilderParams=function(params){this.gos.set("advancedFilterBuilderParams",params)},GridApi.prototype.showAdvancedFilterBuilder=function(){ModuleRegistry.__assertRegistered(ModuleNames.AdvancedFilterModule,"api.setAdvancedFilterModel",this.context.getGridId())&&this.filterManager.showAdvancedFilterBuilder("api")},GridApi.prototype.setNodesSelected=function(params){if(params.nodes.every((function(node){return node.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),!1):void 0!==node.id||(console.warn("AG Grid: cannot select node until id for node is known"),!1)}))){var nodes=params.nodes,source=params.source,newValue=params.newValue,nodesAsRowNode=nodes;this.selectionService.setNodesSelected({nodes:nodesAsRowNode,source:null!=source?source:"api",newValue})}},GridApi.prototype.selectAll=function(source){void 0===source&&(source="apiSelectAll"),this.selectionService.selectAllRowNodes({source})},GridApi.prototype.deselectAll=function(source){void 0===source&&(source="apiSelectAll"),this.selectionService.deselectAllRowNodes({source})},GridApi.prototype.selectAllFiltered=function(source){void 0===source&&(source="apiSelectAllFiltered"),this.selectionService.selectAllRowNodes({source,justFiltered:!0})},GridApi.prototype.deselectAllFiltered=function(source){void 0===source&&(source="apiSelectAllFiltered"),this.selectionService.deselectAllRowNodes({source,justFiltered:!0})},GridApi.prototype.getServerSideSelectionState=function(){return missing(this.serverSideRowModel)?(this.logMissingRowModel("getServerSideSelectionState","serverSide"),null):this.selectionService.getServerSideSelectionState()},GridApi.prototype.setServerSideSelectionState=function(state){missing(this.serverSideRowModel)?this.logMissingRowModel("setServerSideSelectionState","serverSide"):this.selectionService.setServerSideSelectionState(state)},GridApi.prototype.selectAllOnCurrentPage=function(source){void 0===source&&(source="apiSelectAllCurrentPage"),this.selectionService.selectAllRowNodes({source,justCurrentPage:!0})},GridApi.prototype.deselectAllOnCurrentPage=function(source){void 0===source&&(source="apiSelectAllCurrentPage"),this.selectionService.deselectAllRowNodes({source,justCurrentPage:!0})},GridApi.prototype.sizeColumnsToFit=function(params){this.gridBodyCtrl.sizeColumnsToFit(params)},GridApi.prototype.showLoadingOverlay=function(){this.overlayWrapperComp.showLoadingOverlay()},GridApi.prototype.showNoRowsOverlay=function(){this.overlayWrapperComp.showNoRowsOverlay()},GridApi.prototype.hideOverlay=function(){this.overlayWrapperComp.hideOverlay()},GridApi.prototype.getSelectedNodes=function(){return this.selectionService.getSelectedNodes()},GridApi.prototype.getSelectedRows=function(){return this.selectionService.getSelectedRows()},GridApi.prototype.getBestCostNodeSelection=function(){if(!missing(this.clientSideRowModel))return this.selectionService.getBestCostNodeSelection();this.logMissingRowModel("getBestCostNodeSelection","clientSide")},GridApi.prototype.getRenderedNodes=function(){return this.rowRenderer.getRenderedNodes()},GridApi.prototype.ensureColumnVisible=function(key,position){void 0===position&&(position="auto"),this.gridBodyCtrl.getScrollFeature().ensureColumnVisible(key,position)},GridApi.prototype.ensureIndexVisible=function(index,position){this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(index,position)},GridApi.prototype.ensureNodeVisible=function(nodeSelector,position){void 0===position&&(position=null),this.gridBodyCtrl.getScrollFeature().ensureNodeVisible(nodeSelector,position)},GridApi.prototype.forEachLeafNode=function(callback){missing(this.clientSideRowModel)?this.logMissingRowModel("forEachLeafNode","clientSide"):this.clientSideRowModel.forEachLeafNode(callback)},GridApi.prototype.forEachNode=function(callback,includeFooterNodes){this.rowModel.forEachNode(callback,includeFooterNodes)},GridApi.prototype.forEachNodeAfterFilter=function(callback){missing(this.clientSideRowModel)?this.logMissingRowModel("forEachNodeAfterFilter","clientSide"):this.clientSideRowModel.forEachNodeAfterFilter(callback)},GridApi.prototype.forEachNodeAfterFilterAndSort=function(callback){missing(this.clientSideRowModel)?this.logMissingRowModel("forEachNodeAfterFilterAndSort","clientSide"):this.clientSideRowModel.forEachNodeAfterFilterAndSort(callback)},GridApi.prototype.getFilterInstance=function(key,callback){return this.filterManager.getFilterInstance(key,callback)},GridApi.prototype.destroyFilter=function(key){var column=this.columnModel.getPrimaryColumn(key);if(column)return this.filterManager.destroyFilter(column,"api")},GridApi.prototype.getStatusPanel=function(key){if(ModuleRegistry.__assertRegistered(ModuleNames.StatusBarModule,"api.getStatusPanel",this.context.getGridId()))return unwrapUserComp(this.statusBarService.getStatusPanel(key))},GridApi.prototype.getColumnDef=function(key){var column=this.columnModel.getPrimaryColumn(key);return column?column.getColDef():null},GridApi.prototype.getColumnDefs=function(){return this.columnModel.getColumnDefs()},GridApi.prototype.onFilterChanged=function(source){void 0===source&&(source="api"),this.filterManager.onFilterChanged({source})},GridApi.prototype.onSortChanged=function(){this.sortController.onSortChanged("api")},GridApi.prototype.setFilterModel=function(model){this.filterManager.setFilterModel(model)},GridApi.prototype.getFilterModel=function(){return this.filterManager.getFilterModel()},GridApi.prototype.getFocusedCell=function(){return this.focusService.getFocusedCell()},GridApi.prototype.clearFocusedCell=function(){return this.focusService.clearFocusedCell()},GridApi.prototype.setFocusedCell=function(rowIndex,colKey,rowPinned){this.focusService.setFocusedCell({rowIndex,column:colKey,rowPinned,forceBrowserFocus:!0})},GridApi.prototype.setSuppressRowDrag=function(value){this.gos.set("suppressRowDrag",value)},GridApi.prototype.setSuppressMoveWhenRowDragging=function(value){this.gos.set("suppressMoveWhenRowDragging",value)},GridApi.prototype.setSuppressRowClickSelection=function(value){this.gos.set("suppressRowClickSelection",value)},GridApi.prototype.addRowDropZone=function(params){this.gridBodyCtrl.getRowDragFeature().addRowDropZone(params)},GridApi.prototype.removeRowDropZone=function(params){var activeDropTarget=this.dragAndDropService.findExternalZone(params);activeDropTarget&&this.dragAndDropService.removeDropTarget(activeDropTarget)},GridApi.prototype.getRowDropZoneParams=function(events){return this.gridBodyCtrl.getRowDragFeature().getRowDropZone(events)},GridApi.prototype.setHeaderHeight=function(headerHeight){this.gos.set("headerHeight",headerHeight)},GridApi.prototype.setDomLayout=function(domLayout){this.gos.set("domLayout",domLayout)},GridApi.prototype.setEnableCellTextSelection=function(selectable){this.gridBodyCtrl.setCellTextSelection(selectable)},GridApi.prototype.setFillHandleDirection=function(direction){this.gos.set("fillHandleDirection",direction)},GridApi.prototype.setGroupHeaderHeight=function(headerHeight){this.gos.set("groupHeaderHeight",headerHeight)},GridApi.prototype.setFloatingFiltersHeight=function(headerHeight){this.gos.set("floatingFiltersHeight",headerHeight)},GridApi.prototype.setPivotHeaderHeight=function(headerHeight){this.gos.set("pivotHeaderHeight",headerHeight)},GridApi.prototype.setPivotGroupHeaderHeight=function(headerHeight){this.gos.set("pivotGroupHeaderHeight",headerHeight)},GridApi.prototype.setPivotMode=function(pivotMode){this.columnModel.setPivotMode(pivotMode)},GridApi.prototype.setAnimateRows=function(animateRows){this.gos.set("animateRows",animateRows)},GridApi.prototype.setIsExternalFilterPresent=function(isExternalFilterPresentFunc){this.gos.set("isExternalFilterPresent",isExternalFilterPresentFunc)},GridApi.prototype.setDoesExternalFilterPass=function(doesExternalFilterPassFunc){this.gos.set("doesExternalFilterPass",doesExternalFilterPassFunc)},GridApi.prototype.setNavigateToNextCell=function(navigateToNextCellFunc){this.gos.set("navigateToNextCell",navigateToNextCellFunc)},GridApi.prototype.setTabToNextCell=function(tabToNextCellFunc){this.gos.set("tabToNextCell",tabToNextCellFunc)},GridApi.prototype.setTabToNextHeader=function(tabToNextHeaderFunc){this.gos.set("tabToNextHeader",tabToNextHeaderFunc)},GridApi.prototype.setNavigateToNextHeader=function(navigateToNextHeaderFunc){this.gos.set("navigateToNextHeader",navigateToNextHeaderFunc)},GridApi.prototype.setRowGroupPanelShow=function(rowGroupPanelShow){this.gos.set("rowGroupPanelShow",rowGroupPanelShow)},GridApi.prototype.setGetGroupRowAgg=function(getGroupRowAggFunc){this.gos.set("getGroupRowAgg",getGroupRowAggFunc)},GridApi.prototype.setGetBusinessKeyForNode=function(getBusinessKeyForNodeFunc){this.gos.set("getBusinessKeyForNode",getBusinessKeyForNodeFunc)},GridApi.prototype.setGetChildCount=function(getChildCountFunc){this.gos.set("getChildCount",getChildCountFunc)},GridApi.prototype.setProcessRowPostCreate=function(processRowPostCreateFunc){this.gos.set("processRowPostCreate",processRowPostCreateFunc)},GridApi.prototype.setGetRowId=function(getRowIdFunc){this.gos.set("getRowId",getRowIdFunc)},GridApi.prototype.setGetRowClass=function(rowClassFunc){this.gos.set("getRowClass",rowClassFunc)},GridApi.prototype.setIsFullWidthRow=function(isFullWidthRowFunc){this.gos.set("isFullWidthRow",isFullWidthRowFunc)},GridApi.prototype.setIsRowSelectable=function(isRowSelectableFunc){this.gos.set("isRowSelectable",isRowSelectableFunc)},GridApi.prototype.setIsRowMaster=function(isRowMasterFunc){this.gos.set("isRowMaster",isRowMasterFunc)},GridApi.prototype.setPostSortRows=function(postSortRowsFunc){this.gos.set("postSortRows",postSortRowsFunc)},GridApi.prototype.setGetDocument=function(getDocumentFunc){this.gos.set("getDocument",getDocumentFunc)},GridApi.prototype.setGetContextMenuItems=function(getContextMenuItemsFunc){this.gos.set("getContextMenuItems",getContextMenuItemsFunc)},GridApi.prototype.setGetMainMenuItems=function(getMainMenuItemsFunc){this.gos.set("getMainMenuItems",getMainMenuItemsFunc)},GridApi.prototype.setProcessCellForClipboard=function(processCellForClipboardFunc){this.gos.set("processCellForClipboard",processCellForClipboardFunc)},GridApi.prototype.setSendToClipboard=function(sendToClipboardFunc){this.gos.set("sendToClipboard",sendToClipboardFunc)},GridApi.prototype.setProcessCellFromClipboard=function(processCellFromClipboardFunc){this.gos.set("processCellFromClipboard",processCellFromClipboardFunc)},GridApi.prototype.setProcessSecondaryColDef=function(processSecondaryColDefFunc){logDeprecation("28.0","setProcessSecondaryColDef","setProcessPivotResultColDef"),this.setProcessPivotResultColDef(processSecondaryColDefFunc)},GridApi.prototype.setProcessSecondaryColGroupDef=function(processSecondaryColGroupDefFunc){logDeprecation("28.0","setProcessSecondaryColGroupDef","setProcessPivotResultColGroupDef"),this.setProcessPivotResultColGroupDef(processSecondaryColGroupDefFunc)},GridApi.prototype.setProcessPivotResultColDef=function(processPivotResultColDefFunc){this.gos.set("processPivotResultColDef",processPivotResultColDefFunc)},GridApi.prototype.setProcessPivotResultColGroupDef=function(processPivotResultColGroupDefFunc){this.gos.set("processPivotResultColGroupDef",processPivotResultColGroupDefFunc)},GridApi.prototype.setPostProcessPopup=function(postProcessPopupFunc){this.gos.set("postProcessPopup",postProcessPopupFunc)},GridApi.prototype.setInitialGroupOrderComparator=function(initialGroupOrderComparatorFunc){this.gos.set("initialGroupOrderComparator",initialGroupOrderComparatorFunc)},GridApi.prototype.setGetChartToolbarItems=function(getChartToolbarItemsFunc){this.gos.set("getChartToolbarItems",getChartToolbarItemsFunc)},GridApi.prototype.setPaginationNumberFormatter=function(paginationNumberFormatterFunc){this.gos.set("paginationNumberFormatter",paginationNumberFormatterFunc)},GridApi.prototype.setGetServerSideStoreParams=function(getServerSideStoreParamsFunc){logDeprecation("28.0","setGetServerSideStoreParams","setGetServerSideGroupLevelParams"),this.setGetServerSideGroupLevelParams(getServerSideStoreParamsFunc)},GridApi.prototype.setGetServerSideGroupLevelParams=function(getServerSideGroupLevelParamsFunc){this.gos.set("getServerSideGroupLevelParams",getServerSideGroupLevelParamsFunc)},GridApi.prototype.setIsServerSideGroupOpenByDefault=function(isServerSideGroupOpenByDefaultFunc){this.gos.set("isServerSideGroupOpenByDefault",isServerSideGroupOpenByDefaultFunc)},GridApi.prototype.setIsApplyServerSideTransaction=function(isApplyServerSideTransactionFunc){this.gos.set("isApplyServerSideTransaction",isApplyServerSideTransactionFunc)},GridApi.prototype.setIsServerSideGroup=function(isServerSideGroupFunc){this.gos.set("isServerSideGroup",isServerSideGroupFunc)},GridApi.prototype.setGetServerSideGroupKey=function(getServerSideGroupKeyFunc){this.gos.set("getServerSideGroupKey",getServerSideGroupKeyFunc)},GridApi.prototype.setGetRowStyle=function(rowStyleFunc){this.gos.set("getRowStyle",rowStyleFunc)},GridApi.prototype.setGetRowHeight=function(rowHeightFunc){this.gos.set("getRowHeight",rowHeightFunc)},GridApi.prototype.assertSideBarLoaded=function(apiMethod){return ModuleRegistry.__assertRegistered(ModuleNames.SideBarModule,"api."+apiMethod,this.context.getGridId())},GridApi.prototype.isSideBarVisible=function(){return this.assertSideBarLoaded("isSideBarVisible")&&this.sideBarComp.isDisplayed()},GridApi.prototype.setSideBarVisible=function(show){this.assertSideBarLoaded("setSideBarVisible")&&this.sideBarComp.setDisplayed(show)},GridApi.prototype.setSideBarPosition=function(position){this.assertSideBarLoaded("setSideBarPosition")&&this.sideBarComp.setSideBarPosition(position)},GridApi.prototype.openToolPanel=function(key){this.assertSideBarLoaded("openToolPanel")&&this.sideBarComp.openToolPanel(key,"api")},GridApi.prototype.closeToolPanel=function(){this.assertSideBarLoaded("closeToolPanel")&&this.sideBarComp.close("api")},GridApi.prototype.getOpenedToolPanel=function(){return this.assertSideBarLoaded("getOpenedToolPanel")?this.sideBarComp.openedItem():null},GridApi.prototype.refreshToolPanel=function(){this.assertSideBarLoaded("refreshToolPanel")&&this.sideBarComp.refresh()},GridApi.prototype.isToolPanelShowing=function(){return this.assertSideBarLoaded("isToolPanelShowing")&&this.sideBarComp.isToolPanelShowing()},GridApi.prototype.getToolPanelInstance=function(id){if(this.assertSideBarLoaded("getToolPanelInstance"))return unwrapUserComp(this.sideBarComp.getToolPanelInstance(id))},GridApi.prototype.getSideBar=function(){if(this.assertSideBarLoaded("getSideBar"))return this.sideBarComp.getDef()},GridApi.prototype.setSideBar=function(def){this.gos.set("sideBar",def)},GridApi.prototype.setSuppressClipboardPaste=function(value){this.gos.set("suppressClipboardPaste",value)},GridApi.prototype.resetRowHeights=function(){if(exists(this.clientSideRowModel)){if(this.columnModel.isAutoRowHeightActive())return void console.warn("AG Grid: calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");this.clientSideRowModel.resetRowHeights()}},GridApi.prototype.setGroupRemoveSingleChildren=function(value){this.gos.set("groupRemoveSingleChildren",value)},GridApi.prototype.setGroupRemoveLowestSingleChildren=function(value){this.gos.set("groupRemoveLowestSingleChildren",value)},GridApi.prototype.setGroupDisplayType=function(value){this.gos.set("groupDisplayType",value)},GridApi.prototype.setGroupIncludeFooter=function(value){this.gos.set("groupIncludeFooter",value)},GridApi.prototype.setGroupIncludeTotalFooter=function(value){this.gos.set("groupIncludeTotalFooter",value)},GridApi.prototype.setRowClass=function(className){this.gos.set("rowClass",className)},GridApi.prototype.setDeltaSort=function(enable){this.gos.set("deltaSort",enable)},GridApi.prototype.setRowCount=function(rowCount,maxRowFound){if(this.serverSideRowModel)return this.columnModel.isRowGroupEmpty()?void this.serverSideRowModel.setRowCount(rowCount,maxRowFound):void console.error("AG Grid: setRowCount cannot be used while using row grouping.");this.infiniteRowModel?this.infiniteRowModel.setRowCount(rowCount,maxRowFound):this.logMissingRowModel("setRowCount","infinite","serverSide")},GridApi.prototype.onRowHeightChanged=function(){this.clientSideRowModel?this.clientSideRowModel.onRowHeightChanged():this.serverSideRowModel&&this.serverSideRowModel.onRowHeightChanged()},GridApi.prototype.getValue=function(colKey,rowNode){var column=this.columnModel.getPrimaryColumn(colKey);return missing(column)&&(column=this.columnModel.getGridColumn(colKey)),missing(column)?null:this.valueService.getValue(column,rowNode)},GridApi.prototype.addEventListener=function(eventType,listener){var async=this.gos.useAsyncEvents();this.eventService.addEventListener(eventType,listener,async)},GridApi.prototype.addGlobalListener=function(listener){var async=this.gos.useAsyncEvents();this.eventService.addGlobalListener(listener,async)},GridApi.prototype.removeEventListener=function(eventType,listener){var async=this.gos.useAsyncEvents();this.eventService.removeEventListener(eventType,listener,async)},GridApi.prototype.removeGlobalListener=function(listener){var async=this.gos.useAsyncEvents();this.eventService.removeGlobalListener(listener,async)},GridApi.prototype.dispatchEvent=function(event){this.eventService.dispatchEvent(event)},GridApi.prototype.destroy=function(){if(!this.destroyCalled){this.destroyCalled=!0,this.dispatchEvent({type:Events.EVENT_GRID_PRE_DESTROYED});var gridCtrl=this.ctrlsService.getGridCtrl();gridCtrl&&gridCtrl.destroyGridUi(),this.context.destroy()}},GridApi.prototype.cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid=function(){setTimeout(removeAllReferences.bind(window,this,"Grid API"),100)},GridApi.prototype.warnIfDestroyed=function(methodName){return this.destroyCalled&&console.warn("AG Grid: Grid API method "+methodName+" was called on a grid that was destroyed."),this.destroyCalled},GridApi.prototype.resetQuickFilter=function(){this.warnIfDestroyed("resetQuickFilter")||this.filterManager.resetQuickFilterCache()},GridApi.prototype.getCellRanges=function(){return this.rangeService?this.rangeService.getCellRanges():(ModuleRegistry.__assertRegistered(ModuleNames.RangeSelectionModule,"api.getCellRanges",this.context.getGridId()),null)},GridApi.prototype.addCellRange=function(params){this.rangeService?this.rangeService.addCellRange(params):ModuleRegistry.__assertRegistered(ModuleNames.RangeSelectionModule,"api.addCellRange",this.context.getGridId())},GridApi.prototype.clearRangeSelection=function(){this.rangeService&&this.rangeService.removeAllCellRanges(),ModuleRegistry.__assertRegistered(ModuleNames.RangeSelectionModule,"gridApi.clearRangeSelection",this.context.getGridId())},GridApi.prototype.undoCellEditing=function(){this.undoRedoService.undo("api")},GridApi.prototype.redoCellEditing=function(){this.undoRedoService.redo("api")},GridApi.prototype.getCurrentUndoSize=function(){return this.undoRedoService.getCurrentUndoStackSize()},GridApi.prototype.getCurrentRedoSize=function(){return this.undoRedoService.getCurrentRedoStackSize()},GridApi.prototype.getChartModels=function(){if(ModuleRegistry.__assertRegistered(ModuleNames.GridChartsModule,"api.getChartModels",this.context.getGridId()))return this.chartService.getChartModels()},GridApi.prototype.getChartRef=function(chartId){if(ModuleRegistry.__assertRegistered(ModuleNames.GridChartsModule,"api.getChartRef",this.context.getGridId()))return this.chartService.getChartRef(chartId)},GridApi.prototype.getChartImageDataURL=function(params){if(ModuleRegistry.__assertRegistered(ModuleNames.GridChartsModule,"api.getChartImageDataURL",this.context.getGridId()))return this.chartService.getChartImageDataURL(params)},GridApi.prototype.downloadChart=function(params){if(ModuleRegistry.__assertRegistered(ModuleNames.GridChartsModule,"api.downloadChart",this.context.getGridId()))return this.chartService.downloadChart(params)},GridApi.prototype.openChartToolPanel=function(params){if(ModuleRegistry.__assertRegistered(ModuleNames.GridChartsModule,"api.openChartToolPanel",this.context.getGridId()))return this.chartService.openChartToolPanel(params)},GridApi.prototype.closeChartToolPanel=function(params){if(ModuleRegistry.__assertRegistered(ModuleNames.GridChartsModule,"api.closeChartToolPanel",this.context.getGridId()))return this.chartService.closeChartToolPanel(params.chartId)},GridApi.prototype.createRangeChart=function(params){if(ModuleRegistry.__assertRegistered(ModuleNames.GridChartsModule,"api.createRangeChart",this.context.getGridId()))return this.chartService.createRangeChart(params)},GridApi.prototype.createPivotChart=function(params){if(ModuleRegistry.__assertRegistered(ModuleNames.GridChartsModule,"api.createPivotChart",this.context.getGridId()))return this.chartService.createPivotChart(params)},GridApi.prototype.createCrossFilterChart=function(params){if(ModuleRegistry.__assertRegistered(ModuleNames.GridChartsModule,"api.createCrossFilterChart",this.context.getGridId()))return this.chartService.createCrossFilterChart(params)},GridApi.prototype.updateChart=function(params){ModuleRegistry.__assertRegistered(ModuleNames.GridChartsModule,"api.updateChart",this.context.getGridId())&&this.chartService.updateChart(params)},GridApi.prototype.restoreChart=function(chartModel,chartContainer){if(ModuleRegistry.__assertRegistered(ModuleNames.GridChartsModule,"api.restoreChart",this.context.getGridId()))return this.chartService.restoreChart(chartModel,chartContainer)},GridApi.prototype.copyToClipboard=function(params){ModuleRegistry.__assertRegistered(ModuleNames.ClipboardModule,"api.copyToClipboard",this.context.getGridId())&&this.clipboardService.copyToClipboard(params)},GridApi.prototype.cutToClipboard=function(params){ModuleRegistry.__assertRegistered(ModuleNames.ClipboardModule,"api.cutToClipboard",this.context.getGridId())&&this.clipboardService.cutToClipboard(params,"api")},GridApi.prototype.copySelectedRowsToClipboard=function(params){ModuleRegistry.__assertRegistered(ModuleNames.ClipboardModule,"api.copySelectedRowsToClipboard",this.context.getGridId())&&this.clipboardService.copySelectedRowsToClipboard(params)},GridApi.prototype.copySelectedRangeToClipboard=function(params){ModuleRegistry.__assertRegistered(ModuleNames.ClipboardModule,"api.copySelectedRangeToClipboard",this.context.getGridId())&&this.clipboardService.copySelectedRangeToClipboard(params)},GridApi.prototype.copySelectedRangeDown=function(){ModuleRegistry.__assertRegistered(ModuleNames.ClipboardModule,"api.copySelectedRangeDown",this.context.getGridId())&&this.clipboardService.copyRangeDown()},GridApi.prototype.pasteFromClipboard=function(){ModuleRegistry.__assertRegistered(ModuleNames.ClipboardModule,"api.pasteFromClipboard",this.context.getGridId())&&this.clipboardService.pasteFromClipboard()},GridApi.prototype.showColumnMenuAfterButtonClick=function(colKey,buttonElement){var column=this.columnModel.getGridColumn(colKey);this.menuFactory.showMenuAfterButtonClick(column,buttonElement,"columnMenu")},GridApi.prototype.showColumnMenuAfterMouseClick=function(colKey,mouseEvent){var column=this.columnModel.getGridColumn(colKey);column||(column=this.columnModel.getPrimaryColumn(colKey)),column?this.menuFactory.showMenuAfterMouseEvent(column,mouseEvent):console.error("AG Grid: column '"+colKey+"' not found")},GridApi.prototype.hidePopupMenu=function(){this.contextMenuFactory&&this.contextMenuFactory.hideActiveMenu(),this.menuFactory.hideActiveMenu()},GridApi.prototype.setPopupParent=function(ePopupParent){this.gos.set("popupParent",ePopupParent)},GridApi.prototype.tabToNextCell=function(event){return this.navigationService.tabToNextCell(!1,event)},GridApi.prototype.tabToPreviousCell=function(event){return this.navigationService.tabToNextCell(!0,event)},GridApi.prototype.getCellRendererInstances=function(params){return void 0===params&&(params={}),this.rowRenderer.getCellRendererInstances(params).map(unwrapUserComp)},GridApi.prototype.getCellEditorInstances=function(params){return void 0===params&&(params={}),this.rowRenderer.getCellEditorInstances(params).map(unwrapUserComp)},GridApi.prototype.getEditingCells=function(){return this.rowRenderer.getEditingCells()},GridApi.prototype.stopEditing=function(cancel){void 0===cancel&&(cancel=!1),this.rowRenderer.stopEditing(cancel)},GridApi.prototype.startEditingCell=function(params){var column=this.columnModel.getGridColumn(params.colKey);if(column){var cellPosition={rowIndex:params.rowIndex,rowPinned:params.rowPinned||null,column};null==params.rowPinned&&this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(params.rowIndex);var cell=this.navigationService.getCellByPosition(cellPosition);cell&&(this.focusService.isCellFocused(cellPosition)||this.focusService.setFocusedCell(cellPosition),cell.startRowOrCellEdit(params.key))}else console.warn("AG Grid: no column found for "+params.colKey)},GridApi.prototype.addAggFunc=function(key,aggFunc){this.aggFuncService&&this.aggFuncService.addAggFunc(key,aggFunc)},GridApi.prototype.addAggFuncs=function(aggFuncs){this.aggFuncService&&this.aggFuncService.addAggFuncs(aggFuncs)},GridApi.prototype.clearAggFuncs=function(){this.aggFuncService&&this.aggFuncService.clear()},GridApi.prototype.applyServerSideTransaction=function(transaction){if(this.serverSideTransactionManager)return this.serverSideTransactionManager.applyTransaction(transaction);this.logMissingRowModel("applyServerSideTransaction","serverSide")},GridApi.prototype.applyServerSideTransactionAsync=function(transaction,callback){if(this.serverSideTransactionManager)return this.serverSideTransactionManager.applyTransactionAsync(transaction,callback);this.logMissingRowModel("applyServerSideTransactionAsync","serverSide")},GridApi.prototype.applyServerSideRowData=function(params){var _a,_b,startRow=null!==(_a=params.startRow)&&void 0!==_a?_a:0,route=null!==(_b=params.route)&&void 0!==_b?_b:[];startRow<0?console.warn("AG Grid: invalid value "+params.startRow+" for startRow, the value should be >= 0"):this.serverSideRowModel?this.serverSideRowModel.applyRowData(params.successParams,startRow,route):this.logMissingRowModel("setServerSideDatasource","serverSide")},GridApi.prototype.retryServerSideLoads=function(){this.serverSideRowModel?this.serverSideRowModel.retryLoads():this.logMissingRowModel("retryServerSideLoads","serverSide")},GridApi.prototype.flushServerSideAsyncTransactions=function(){if(this.serverSideTransactionManager)return this.serverSideTransactionManager.flushAsyncTransactions();this.logMissingRowModel("flushServerSideAsyncTransactions","serverSide")},GridApi.prototype.applyTransaction=function(rowDataTransaction){if(this.clientSideRowModel)return this.clientSideRowModel.updateRowData(rowDataTransaction);this.logMissingRowModel("applyTransaction","clientSide")},GridApi.prototype.applyTransactionAsync=function(rowDataTransaction,callback){this.clientSideRowModel?this.clientSideRowModel.batchUpdateRowData(rowDataTransaction,callback):this.logMissingRowModel("applyTransactionAsync","clientSide")},GridApi.prototype.flushAsyncTransactions=function(){this.clientSideRowModel?this.clientSideRowModel.flushAsyncTransactions():this.logMissingRowModel("flushAsyncTransactions","clientSide")},GridApi.prototype.setSuppressModelUpdateAfterUpdateTransaction=function(value){this.gos.set("suppressModelUpdateAfterUpdateTransaction",value)},GridApi.prototype.refreshInfiniteCache=function(){this.infiniteRowModel?this.infiniteRowModel.refreshCache():this.logMissingRowModel("refreshInfiniteCache","infinite")},GridApi.prototype.purgeInfiniteCache=function(){this.infiniteRowModel?this.infiniteRowModel.purgeCache():this.logMissingRowModel("purgeInfiniteCache","infinite")},GridApi.prototype.refreshServerSide=function(params){this.serverSideRowModel?this.serverSideRowModel.refreshStore(params):this.logMissingRowModel("refreshServerSide","serverSide")},GridApi.prototype.refreshServerSideStore=function(params){return logDeprecation("28.0","refreshServerSideStore","refreshServerSide"),this.refreshServerSide(params)},GridApi.prototype.getServerSideStoreState=function(){return logDeprecation("28.0","getServerSideStoreState","getServerSideGroupLevelState"),this.getServerSideGroupLevelState()},GridApi.prototype.getServerSideGroupLevelState=function(){return this.serverSideRowModel?this.serverSideRowModel.getStoreState():(this.logMissingRowModel("getServerSideGroupLevelState","serverSide"),[])},GridApi.prototype.getInfiniteRowCount=function(){if(this.infiniteRowModel)return this.infiniteRowModel.getRowCount();this.logMissingRowModel("getInfiniteRowCount","infinite")},GridApi.prototype.isLastRowIndexKnown=function(){if(this.infiniteRowModel)return this.infiniteRowModel.isLastRowIndexKnown();this.logMissingRowModel("isLastRowIndexKnown","infinite")},GridApi.prototype.getCacheBlockState=function(){return this.rowNodeBlockLoader.getBlockState()},GridApi.prototype.getFirstDisplayedRow=function(){return this.rowRenderer.getFirstVirtualRenderedRow()},GridApi.prototype.getLastDisplayedRow=function(){return this.rowRenderer.getLastVirtualRenderedRow()},GridApi.prototype.getDisplayedRowAtIndex=function(index){return this.rowModel.getRow(index)},GridApi.prototype.getDisplayedRowCount=function(){return this.rowModel.getRowCount()},GridApi.prototype.setDataTypeDefinitions=function(dataTypeDefinitions){this.gos.set("dataTypeDefinitions",dataTypeDefinitions)},GridApi.prototype.setPagination=function(value){this.gos.set("pagination",value)},GridApi.prototype.paginationIsLastPageFound=function(){return this.paginationProxy.isLastPageFound()},GridApi.prototype.paginationGetPageSize=function(){return this.paginationProxy.getPageSize()},GridApi.prototype.paginationSetPageSize=function(size){this.gos.set("paginationPageSize",size)},GridApi.prototype.paginationGetCurrentPage=function(){return this.paginationProxy.getCurrentPage()},GridApi.prototype.paginationGetTotalPages=function(){return this.paginationProxy.getTotalPages()},GridApi.prototype.paginationGetRowCount=function(){return this.paginationProxy.getMasterRowCount()},GridApi.prototype.paginationGoToNextPage=function(){this.paginationProxy.goToNextPage()},GridApi.prototype.paginationGoToPreviousPage=function(){this.paginationProxy.goToPreviousPage()},GridApi.prototype.paginationGoToFirstPage=function(){this.paginationProxy.goToFirstPage()},GridApi.prototype.paginationGoToLastPage=function(){this.paginationProxy.goToLastPage()},GridApi.prototype.paginationGoToPage=function(page){this.paginationProxy.goToPage(page)},__decorate$1_([Optional("immutableService")],GridApi.prototype,"immutableService",void 0),__decorate$1_([Optional("csvCreator")],GridApi.prototype,"csvCreator",void 0),__decorate$1_([Optional("excelCreator")],GridApi.prototype,"excelCreator",void 0),__decorate$1_([Autowired("rowRenderer")],GridApi.prototype,"rowRenderer",void 0),__decorate$1_([Autowired("navigationService")],GridApi.prototype,"navigationService",void 0),__decorate$1_([Autowired("filterManager")],GridApi.prototype,"filterManager",void 0),__decorate$1_([Autowired("columnModel")],GridApi.prototype,"columnModel",void 0),__decorate$1_([Autowired("selectionService")],GridApi.prototype,"selectionService",void 0),__decorate$1_([Autowired("gridOptionsService")],GridApi.prototype,"gos",void 0),__decorate$1_([Autowired("valueService")],GridApi.prototype,"valueService",void 0),__decorate$1_([Autowired("alignedGridsService")],GridApi.prototype,"alignedGridsService",void 0),__decorate$1_([Autowired("eventService")],GridApi.prototype,"eventService",void 0),__decorate$1_([Autowired("pinnedRowModel")],GridApi.prototype,"pinnedRowModel",void 0),__decorate$1_([Autowired("context")],GridApi.prototype,"context",void 0),__decorate$1_([Autowired("rowModel")],GridApi.prototype,"rowModel",void 0),__decorate$1_([Autowired("sortController")],GridApi.prototype,"sortController",void 0),__decorate$1_([Autowired("paginationProxy")],GridApi.prototype,"paginationProxy",void 0),__decorate$1_([Autowired("focusService")],GridApi.prototype,"focusService",void 0),__decorate$1_([Autowired("dragAndDropService")],GridApi.prototype,"dragAndDropService",void 0),__decorate$1_([Optional("rangeService")],GridApi.prototype,"rangeService",void 0),__decorate$1_([Optional("clipboardService")],GridApi.prototype,"clipboardService",void 0),__decorate$1_([Optional("aggFuncService")],GridApi.prototype,"aggFuncService",void 0),__decorate$1_([Autowired("menuFactory")],GridApi.prototype,"menuFactory",void 0),__decorate$1_([Optional("contextMenuFactory")],GridApi.prototype,"contextMenuFactory",void 0),__decorate$1_([Autowired("valueCache")],GridApi.prototype,"valueCache",void 0),__decorate$1_([Autowired("animationFrameService")],GridApi.prototype,"animationFrameService",void 0),__decorate$1_([Optional("statusBarService")],GridApi.prototype,"statusBarService",void 0),__decorate$1_([Optional("chartService")],GridApi.prototype,"chartService",void 0),__decorate$1_([Optional("undoRedoService")],GridApi.prototype,"undoRedoService",void 0),__decorate$1_([Optional("rowNodeBlockLoader")],GridApi.prototype,"rowNodeBlockLoader",void 0),__decorate$1_([Optional("ssrmTransactionManager")],GridApi.prototype,"serverSideTransactionManager",void 0),__decorate$1_([Autowired("ctrlsService")],GridApi.prototype,"ctrlsService",void 0),__decorate$1_([PostConstruct],GridApi.prototype,"init",null),__decorate$1_([PreDestroy],GridApi.prototype,"cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid",null),GridApi=__decorate$1_([Bean("gridApi")],GridApi)}(),__extends$29=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1Z=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},QuickFilterService=function(_super){function QuickFilterService(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.quickFilter=null,_this.quickFilterParts=null,_this}var QuickFilterService_1;return __extends$29(QuickFilterService,_super),QuickFilterService_1=QuickFilterService,QuickFilterService.prototype.postConstruct=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,(function(){return _this.resetQuickFilterCache()})),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,(function(){return _this.resetQuickFilterCache()})),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,(function(){return _this.resetQuickFilterCache()})),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VISIBLE,(function(){_this.gridOptionsService.is("includeHiddenColumnsInQuickFilter")||_this.resetQuickFilterCache()})),this.addManagedPropertyListener("quickFilterText",(function(e){return _this.setQuickFilter(e.currentValue)})),this.addManagedPropertyListener("includeHiddenColumnsInQuickFilter",(function(){return _this.onIncludeHiddenColumnsInQuickFilterChanged()})),this.quickFilter=this.parseQuickFilter(this.gridOptionsService.get("quickFilterText")),this.parser=this.gridOptionsService.get("quickFilterParser"),this.matcher=this.gridOptionsService.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],(function(){return _this.setQuickFilterParserAndMatcher()}))},QuickFilterService.prototype.isQuickFilterPresent=function(){return null!==this.quickFilter},QuickFilterService.prototype.doesRowPassQuickFilter=function(node){var _this=this,usingCache=this.gridOptionsService.is("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(usingCache,node):this.quickFilterParts.every((function(part){return usingCache?_this.doesRowPassQuickFilterCache(node,part):_this.doesRowPassQuickFilterNoCache(node,part)}))},QuickFilterService.prototype.resetQuickFilterCache=function(){this.rowModel.forEachNode((function(node){return node.quickFilterAggregateText=null}))},QuickFilterService.prototype.setQuickFilterParts=function(){var quickFilter=this.quickFilter,parser=this.parser;this.quickFilterParts=quickFilter?parser?parser(quickFilter):quickFilter.split(" "):null},QuickFilterService.prototype.parseQuickFilter=function(newFilter){return exists(newFilter)?this.gridOptionsService.isRowModelType("clientSide")?newFilter.toUpperCase():(console.warn("AG Grid - Quick filtering only works with the Client-Side Row Model"),null):null},QuickFilterService.prototype.setQuickFilter=function(newFilter){if(null==newFilter||"string"==typeof newFilter){var parsedFilter=this.parseQuickFilter(newFilter);this.quickFilter!==parsedFilter&&(this.quickFilter=parsedFilter,this.setQuickFilterParts(),this.dispatchEvent({type:QuickFilterService_1.EVENT_QUICK_FILTER_CHANGED}))}else console.warn("AG Grid - setQuickFilter() only supports string inputs, received: "+typeof newFilter)},QuickFilterService.prototype.setQuickFilterParserAndMatcher=function(){var parser=this.gridOptionsService.get("quickFilterParser"),matcher=this.gridOptionsService.get("quickFilterMatcher"),hasChanged=parser!==this.parser||matcher!==this.matcher;this.parser=parser,this.matcher=matcher,hasChanged&&(this.setQuickFilterParts(),this.dispatchEvent({type:QuickFilterService_1.EVENT_QUICK_FILTER_CHANGED}))},QuickFilterService.prototype.onIncludeHiddenColumnsInQuickFilterChanged=function(){this.columnModel.refreshQuickFilterColumns(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchEvent({type:QuickFilterService_1.EVENT_QUICK_FILTER_CHANGED})},QuickFilterService.prototype.doesRowPassQuickFilterNoCache=function(node,filterPart){var _this=this;return this.columnModel.getAllColumnsForQuickFilter().some((function(column){var part=_this.getQuickFilterTextForColumn(column,node);return exists(part)&&part.indexOf(filterPart)>=0}))},QuickFilterService.prototype.doesRowPassQuickFilterCache=function(node,filterPart){return this.checkGenerateQuickFilterAggregateText(node),node.quickFilterAggregateText.indexOf(filterPart)>=0},QuickFilterService.prototype.doesRowPassQuickFilterMatcher=function(usingCache,node){var quickFilterAggregateText;usingCache?(this.checkGenerateQuickFilterAggregateText(node),quickFilterAggregateText=node.quickFilterAggregateText):quickFilterAggregateText=this.getQuickFilterAggregateText(node);var quickFilterParts=this.quickFilterParts;return(0,this.matcher)(quickFilterParts,quickFilterAggregateText)},QuickFilterService.prototype.checkGenerateQuickFilterAggregateText=function(node){node.quickFilterAggregateText||(node.quickFilterAggregateText=this.getQuickFilterAggregateText(node))},QuickFilterService.prototype.getQuickFilterTextForColumn=function(column,node){var value=this.valueService.getValue(column,node,!0),colDef=column.getColDef();if(colDef.getQuickFilterText){var params={value,node,data:node.data,column,colDef,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};value=colDef.getQuickFilterText(params)}return exists(value)?value.toString().toUpperCase():null},QuickFilterService.prototype.getQuickFilterAggregateText=function(node){var _this=this,stringParts=[];return this.columnModel.getAllColumnsForQuickFilter().forEach((function(column){var part=_this.getQuickFilterTextForColumn(column,node);exists(part)&&stringParts.push(part)})),stringParts.join(QuickFilterService_1.QUICK_FILTER_SEPARATOR)},QuickFilterService.EVENT_QUICK_FILTER_CHANGED="quickFilterChanged",QuickFilterService.QUICK_FILTER_SEPARATOR="\n",__decorate$1Z([Autowired("valueService")],QuickFilterService.prototype,"valueService",void 0),__decorate$1Z([Autowired("columnModel")],QuickFilterService.prototype,"columnModel",void 0),__decorate$1Z([Autowired("rowModel")],QuickFilterService.prototype,"rowModel",void 0),__decorate$1Z([PostConstruct],QuickFilterService.prototype,"postConstruct",null),QuickFilterService=QuickFilterService_1=__decorate$1Z([Bean("quickFilterService")],QuickFilterService)}(BeanStub),__extends$28=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$d=function(){return __assign$d=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$d.apply(this,arguments)},__decorate$1Y=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},FilterManager=function(_super){function FilterManager(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.allColumnFilters=new Map,_this.allColumnListeners=new Map,_this.activeAggregateFilters=[],_this.activeColumnFilters=[],_this.processingFilterChange=!1,_this.filterModelUpdateQueue=[],_this}return __extends$28(FilterManager,_super),FilterManager.prototype.init=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_GRID_COLUMNS_CHANGED,(function(){return _this.onColumnsChanged()})),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VALUE_CHANGED,(function(){return _this.refreshFiltersForAggregations()})),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_CHANGED,(function(){return _this.refreshFiltersForAggregations()})),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,(function(){return _this.refreshFiltersForAggregations()})),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,(function(){return _this.updateAdvancedFilterColumns()})),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VISIBLE,(function(){return _this.updateAdvancedFilterColumns()})),this.allowShowChangeAfterFilter=this.gridOptionsService.is("allowShowChangeAfterFilter"),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",(function(){return _this.updateAggFiltering()})),this.addManagedPropertyListener("advancedFilterModel",(function(event){return _this.setAdvancedFilterModel(event.currentValue)})),this.addManagedListener(this.eventService,Events.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,(function(_a){var enabled=_a.enabled;return _this.onAdvancedFilterEnabledChanged(enabled)})),this.addManagedListener(this.eventService,Events.EVENT_DATA_TYPES_INFERRED,(function(){return _this.processFilterModelUpdateQueue()})),this.addManagedListener(this.quickFilterService,QuickFilterService.EVENT_QUICK_FILTER_CHANGED,(function(){return _this.onFilterChanged({source:"quickFilter"})}))},FilterManager.prototype.isExternalFilterPresentCallback=function(){var isFilterPresent=this.gridOptionsService.getCallback("isExternalFilterPresent");return"function"==typeof isFilterPresent&&isFilterPresent({})},FilterManager.prototype.doesExternalFilterPass=function(node){var doesFilterPass=this.gridOptionsService.get("doesExternalFilterPass");return"function"==typeof doesFilterPass&&doesFilterPass(node)},FilterManager.prototype.setFilterModel=function(model){var _this=this;if(this.isAdvancedFilterEnabled())this.warnAdvancedFilters();else if(this.dataTypeService.isPendingInference())this.filterModelUpdateQueue.push(model);else{var allPromises=[],previousModel=this.getFilterModel();if(model){var modelKeys_1=convertToSet(Object.keys(model));this.allColumnFilters.forEach((function(filterWrapper,colId){var newModel=model[colId];allPromises.push(_this.setModelOnFilterWrapper(filterWrapper.filterPromise,newModel)),modelKeys_1.delete(colId)})),modelKeys_1.forEach((function(colId){var column=_this.columnModel.getPrimaryColumn(colId)||_this.columnModel.getGridColumn(colId);if(column)if(column.isFilterAllowed()){var filterWrapper=_this.getOrCreateFilterWrapper(column,"NO_UI");filterWrapper?allPromises.push(_this.setModelOnFilterWrapper(filterWrapper.filterPromise,model[colId])):console.warn("AG-Grid: setFilterModel() - unable to fully apply model, unable to create filter for colId: "+colId)}else console.warn("AG Grid: setFilterModel() - unable to fully apply model, filtering disabled for colId: "+colId);else console.warn("AG Grid: setFilterModel() - no column found for colId: "+colId)}))}else this.allColumnFilters.forEach((function(filterWrapper){allPromises.push(_this.setModelOnFilterWrapper(filterWrapper.filterPromise,null))}));AgPromise.all(allPromises).then((function(){var currentModel=_this.getFilterModel(),columns=[];_this.allColumnFilters.forEach((function(filterWrapper,colId){var before=previousModel?previousModel[colId]:null,after=currentModel?currentModel[colId]:null;_.jsonEquals(before,after)||columns.push(filterWrapper.column)})),columns.length>0&&_this.onFilterChanged({columns,source:"api"})}))}},FilterManager.prototype.setModelOnFilterWrapper=function(filterPromise,newModel){return new AgPromise((function(resolve){filterPromise.then((function(filter){"function"!=typeof filter.setModel&&(console.warn("AG Grid: filter missing setModel method, which is needed for setFilterModel"),resolve()),(filter.setModel(newModel)||AgPromise.resolve()).then((function(){return resolve()}))}))}))},FilterManager.prototype.getFilterModel=function(){var result={};return this.allColumnFilters.forEach((function(filterWrapper,key){var filter=filterWrapper.filterPromise.resolveNow(null,(function(promiseFilter){return promiseFilter}));if(null==filter)return null;if("function"==typeof filter.getModel){var model=filter.getModel();exists(model)&&(result[key]=model)}else console.warn("AG Grid: filter API missing getModel method, which is needed for getFilterModel")})),result},FilterManager.prototype.isColumnFilterPresent=function(){return this.activeColumnFilters.length>0},FilterManager.prototype.isAggregateFilterPresent=function(){return!!this.activeAggregateFilters.length},FilterManager.prototype.isExternalFilterPresent=function(){return this.externalFilterPresent},FilterManager.prototype.isChildFilterPresent=function(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()},FilterManager.prototype.isAdvancedFilterPresent=function(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()},FilterManager.prototype.onAdvancedFilterEnabledChanged=function(enabled){var _a,_this=this;enabled?this.allColumnFilters.size&&(this.allColumnFilters.forEach((function(filterWrapper){return _this.disposeFilterWrapper(filterWrapper,"advancedFilterEnabled")})),this.onFilterChanged({source:"advancedFilter"})):(null===(_a=this.advancedFilterService)||void 0===_a?void 0:_a.isFilterPresent())&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))},FilterManager.prototype.isAdvancedFilterEnabled=function(){var _a;return null===(_a=this.advancedFilterService)||void 0===_a?void 0:_a.isEnabled()},FilterManager.prototype.isAdvancedFilterHeaderActive=function(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()},FilterManager.prototype.doAggregateFiltersPass=function(node,filterToSkip){return this.doColumnFiltersPass(node,filterToSkip,!0)},FilterManager.prototype.updateActiveFilters=function(){var _this=this;this.activeColumnFilters.length=0,this.activeAggregateFilters.length=0;var isFilterActive=function(filter){return!!filter&&(filter.isFilterActive?filter.isFilterActive():(console.warn("AG Grid: Filter is missing isFilterActive() method"),!1))},groupFilterEnabled=!!this.gridOptionsService.getGroupAggFiltering();this.allColumnFilters.forEach((function(filterWrapper){if(filterWrapper.filterPromise.resolveNow(!1,isFilterActive)){var filterComp=filterWrapper.filterPromise.resolveNow(null,(function(filter){return filter}));!function(column){if(!column.isPrimary())return!0;var isShowingPrimaryColumns=!_this.columnModel.isPivotActive();return!(!column.isValueActive()||!isShowingPrimaryColumns)&&(!!_this.columnModel.isPivotMode()||groupFilterEnabled)}(filterWrapper.column)?_this.activeColumnFilters.push(filterComp):_this.activeAggregateFilters.push(filterComp)}}))},FilterManager.prototype.updateFilterFlagInColumns=function(source,additionalEventAttributes){this.allColumnFilters.forEach((function(filterWrapper){var isFilterActive=filterWrapper.filterPromise.resolveNow(!1,(function(filter){return filter.isFilterActive()}));filterWrapper.column.setFilterActive(isFilterActive,source,additionalEventAttributes)}))},FilterManager.prototype.isAnyFilterPresent=function(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()},FilterManager.prototype.doColumnFiltersPass=function(node,filterToSkip,targetAggregates){for(var data=node.data,aggData=node.aggData,targetedFilters=targetAggregates?this.activeAggregateFilters:this.activeColumnFilters,targetedData=targetAggregates?aggData:data,i=0;i<targetedFilters.length;i++){var filter=targetedFilters[i];if(null!=filter&&filter!==filterToSkip){if("function"!=typeof filter.doesFilterPass)throw new Error("Filter is missing method doesFilterPass");if(!filter.doesFilterPass({node,data:targetedData}))return!1}}return!0},FilterManager.prototype.resetQuickFilterCache=function(){this.quickFilterService.resetQuickFilterCache()},FilterManager.prototype.refreshFiltersForAggregations=function(){this.gridOptionsService.getGroupAggFiltering()&&this.onFilterChanged()},FilterManager.prototype.callOnFilterChangedOutsideRenderCycle=function(params){var _this=this,action=function(){return _this.onFilterChanged(params)};this.rowRenderer.isRefreshInProgress()?setTimeout(action,0):action()},FilterManager.prototype.onFilterChanged=function(params){void 0===params&&(params={});var source=params.source,filterInstance=params.filterInstance,additionalEventAttributes=params.additionalEventAttributes,columns=params.columns;this.updateDependantFilters(),this.updateActiveFilters(),this.updateFilterFlagInColumns("filterChanged",additionalEventAttributes),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.allColumnFilters.forEach((function(filterWrapper){filterWrapper.filterPromise&&filterWrapper.filterPromise.then((function(filter){filter&&filter!==filterInstance&&filter.onAnyFilterChanged&&filter.onAnyFilterChanged()}))}));var filterChangedEvent={source,type:Events.EVENT_FILTER_CHANGED,columns:columns||[]};additionalEventAttributes&&mergeDeep(filterChangedEvent,additionalEventAttributes),this.processingFilterChange=!0,this.eventService.dispatchEvent(filterChangedEvent),this.processingFilterChange=!1},FilterManager.prototype.isSuppressFlashingCellsBecauseFiltering=function(){return!this.allowShowChangeAfterFilter&&this.processingFilterChange},FilterManager.prototype.isQuickFilterPresent=function(){return this.quickFilterService.isQuickFilterPresent()},FilterManager.prototype.updateAggFiltering=function(){this.aggFiltering=!!this.gridOptionsService.getGroupAggFiltering()},FilterManager.prototype.isAggregateQuickFilterPresent=function(){return this.isQuickFilterPresent()&&(this.aggFiltering||this.columnModel.isPivotMode())},FilterManager.prototype.isNonAggregateQuickFilterPresent=function(){return this.isQuickFilterPresent()&&!(this.aggFiltering||this.columnModel.isPivotMode())},FilterManager.prototype.doesRowPassOtherFilters=function(filterToSkip,node){return this.doesRowPassFilter({rowNode:node,filterInstanceToSkip:filterToSkip})},FilterManager.prototype.doesRowPassAggregateFilters=function(params){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(params.rowNode))&&!(this.isAggregateFilterPresent()&&!this.doAggregateFiltersPass(params.rowNode,params.filterInstanceToSkip))},FilterManager.prototype.doesRowPassFilter=function(params){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(params.rowNode))&&(!(this.isExternalFilterPresent()&&!this.doesExternalFilterPass(params.rowNode))&&(!(this.isColumnFilterPresent()&&!this.doColumnFiltersPass(params.rowNode,params.filterInstanceToSkip))&&!(this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(params.rowNode))))},FilterManager.prototype.onNewRowsLoaded=function(source){this.allColumnFilters.forEach((function(filterWrapper){filterWrapper.filterPromise.then((function(filter){filter.onNewRowsLoaded&&filter.onNewRowsLoaded()}))})),this.updateFilterFlagInColumns(source,{afterDataChange:!0}),this.updateActiveFilters()},FilterManager.prototype.createValueGetter=function(column){var _this=this;return function(_a){var node=_a.node;return _this.valueService.getValue(column,node,!0)}},FilterManager.prototype.getFilterComponent=function(column,source,createIfDoesNotExist){var _a;if(void 0===createIfDoesNotExist&&(createIfDoesNotExist=!0),createIfDoesNotExist)return(null===(_a=this.getOrCreateFilterWrapper(column,source))||void 0===_a?void 0:_a.filterPromise)||null;var filterWrapper=this.cachedFilter(column);return filterWrapper?filterWrapper.filterPromise:null},FilterManager.prototype.isFilterActive=function(column){var filterWrapper=this.cachedFilter(column);return!!filterWrapper&&filterWrapper.filterPromise.resolveNow(!1,(function(filter){return filter.isFilterActive()}))},FilterManager.prototype.getOrCreateFilterWrapper=function(column,source){var _this=this;if(!column.isFilterAllowed())return null;var filterWrapper=this.cachedFilter(column);if(filterWrapper)"NO_UI"!==source&&this.putIntoGui(filterWrapper,source);else{filterWrapper=this.createFilterWrapper(column,source);var colId_1=column.getColId();this.allColumnFilters.set(colId_1,filterWrapper),this.allColumnListeners.set(colId_1,this.addManagedListener(column,Column.EVENT_COL_DEF_CHANGED,(function(){return _this.checkDestroyFilter(colId_1)})))}return filterWrapper},FilterManager.prototype.cachedFilter=function(column){return this.allColumnFilters.get(column.getColId())},FilterManager.prototype.getDefaultFilter=function(column){var defaultFilter;if(ModuleRegistry.__isRegistered(ModuleNames.SetFilterModule,this.context.getGridId()))defaultFilter="agSetColumnFilter";else{var cellDataType=column.getColDef().cellDataType;defaultFilter="number"===cellDataType?"agNumberColumnFilter":"date"===cellDataType||"dateString"===cellDataType?"agDateColumnFilter":"agTextColumnFilter"}return defaultFilter},FilterManager.prototype.getDefaultFloatingFilter=function(column){var defaultFloatingFilterType;if(ModuleRegistry.__isRegistered(ModuleNames.SetFilterModule,this.context.getGridId()))defaultFloatingFilterType="agSetColumnFloatingFilter";else{var cellDataType=column.getColDef().cellDataType;defaultFloatingFilterType="number"===cellDataType?"agNumberColumnFloatingFilter":"date"===cellDataType||"dateString"===cellDataType?"agDateColumnFloatingFilter":"agTextColumnFloatingFilter"}return defaultFloatingFilterType},FilterManager.prototype.createFilterInstance=function(column){var filterInstance,_this=this,defaultFilter=this.getDefaultFilter(column),colDef=column.getColDef(),params=__assign$d(__assign$d({},this.createFilterParams(column,colDef)),{filterModifiedCallback:function(){var event={type:Events.EVENT_FILTER_MODIFIED,column,filterInstance};_this.eventService.dispatchEvent(event)},filterChangedCallback:function(additionalEventAttributes){var _a,source=null!==(_a=null==additionalEventAttributes?void 0:additionalEventAttributes.source)&&void 0!==_a?_a:"api",params={filterInstance,additionalEventAttributes,columns:[column],source};_this.callOnFilterChangedOutsideRenderCycle(params)},doesRowPassOtherFilter:function(node){return _this.doesRowPassOtherFilters(filterInstance,node)}}),compDetails=this.userComponentFactory.getFilterDetails(colDef,params,defaultFilter);return compDetails?{filterPromise:function(){var filterPromise=compDetails.newAgStackInstance();return filterPromise&&filterPromise.then((function(r){return filterInstance=r})),filterPromise},compDetails}:{filterPromise:null,compDetails:null}},FilterManager.prototype.createFilterParams=function(column,colDef){return{column,colDef:cloneObject(colDef),rowModel:this.rowModel,filterChangedCallback:function(){},filterModifiedCallback:function(){},valueGetter:this.createValueGetter(column),doesRowPassOtherFilter:function(){return!0},api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}},FilterManager.prototype.createFilterWrapper=function(column,source){var _a,filterWrapper={column,filterPromise:null,compiledElement:null,guiPromise:AgPromise.resolve(null),compDetails:null},_b=this.createFilterInstance(column),filterPromise=_b.filterPromise,compDetails=_b.compDetails;return filterWrapper.filterPromise=null!==(_a=null==filterPromise?void 0:filterPromise())&&void 0!==_a?_a:null,filterWrapper.compDetails=compDetails,filterPromise&&this.putIntoGui(filterWrapper,source),filterWrapper},FilterManager.prototype.putIntoGui=function(filterWrapper,source){var _this=this,eFilterGui=document.createElement("div");eFilterGui.className="ag-filter",filterWrapper.guiPromise=new AgPromise((function(resolve){filterWrapper.filterPromise.then((function(filter){var guiFromFilter=filter.getGui();exists(guiFromFilter)||console.warn("AG Grid: getGui method from filter returned "+guiFromFilter+", it should be a DOM element or an HTML template string."),"string"==typeof guiFromFilter&&(guiFromFilter=loadTemplate(guiFromFilter)),eFilterGui.appendChild(guiFromFilter),resolve(eFilterGui);var event={type:Events.EVENT_FILTER_OPENED,column:filterWrapper.column,source,eGui:eFilterGui};_this.eventService.dispatchEvent(event)}))}))},FilterManager.prototype.onColumnsChanged=function(){var _this=this,columns=[];this.allColumnFilters.forEach((function(wrapper,colId){(wrapper.column.isPrimary()?_this.columnModel.getPrimaryColumn(colId):_this.columnModel.getGridColumn(colId))||(columns.push(wrapper.column),_this.disposeFilterWrapper(wrapper,"columnChanged"),_this.disposeColumnListener(colId))})),columns.length>0?this.onFilterChanged({columns,source:"api"}):this.updateDependantFilters()},FilterManager.prototype.updateDependantFilters=function(){var _this=this,groupColumns=this.columnModel.getGroupAutoColumns();null==groupColumns||groupColumns.forEach((function(groupColumn){"agGroupColumnFilter"===groupColumn.getColDef().filter&&_this.getOrCreateFilterWrapper(groupColumn,"NO_UI")}))},FilterManager.prototype.isFilterAllowed=function(column){var _a,_b;if(this.isAdvancedFilterEnabled())return!1;if(!column.isFilterAllowed())return!1;var filterWrapper=this.allColumnFilters.get(column.getColId());return null===(_b=null===(_a=null==filterWrapper?void 0:filterWrapper.filterPromise)||void 0===_a?void 0:_a.resolveNow(!0,(function(filter){var _a,_b;return"function"!=typeof(null===(_a=filter)||void 0===_a?void 0:_a.isFilterAllowed)||(null===(_b=filter)||void 0===_b?void 0:_b.isFilterAllowed())})))||void 0===_b||_b},FilterManager.prototype.getFloatingFilterCompDetails=function(column,showParentFilter){var _this=this,colDef=column.getColDef(),filterParams=this.createFilterParams(column,colDef),finalFilterParams=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(colDef,FilterComponent,filterParams),defaultFloatingFilterType=this.userComponentFactory.getDefaultFloatingFilterType(colDef,(function(){return _this.getDefaultFloatingFilter(column)}));null==defaultFloatingFilterType&&(defaultFloatingFilterType="agReadOnlyFloatingFilter");var params={column,filterParams:finalFilterParams,currentParentModel:function(){return _this.getCurrentFloatingFilterParentModel(column)},parentFilterInstance:function(callback){var filterComponent=_this.getFilterComponent(column,"NO_UI");null!=filterComponent&&filterComponent.then((function(instance){callback(unwrapUserComp(instance))}))},showParentFilter,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(colDef,params,defaultFloatingFilterType)},FilterManager.prototype.getCurrentFloatingFilterParentModel=function(column){var filterComponent=this.getFilterComponent(column,"NO_UI",!1);return filterComponent?filterComponent.resolveNow(null,(function(filter){return filter&&filter.getModel()})):null},FilterManager.prototype.destroyFilter=function(column,source){void 0===source&&(source="api");var colId=column.getColId(),filterWrapper=this.allColumnFilters.get(colId);this.disposeColumnListener(colId),filterWrapper&&(this.disposeFilterWrapper(filterWrapper,source),this.onFilterChanged({columns:[column],source:"api"}))},FilterManager.prototype.disposeColumnListener=function(colId){var columnListener=this.allColumnListeners.get(colId);columnListener&&(this.allColumnListeners.delete(colId),columnListener())},FilterManager.prototype.disposeFilterWrapper=function(filterWrapper,source){var _this=this;filterWrapper.filterPromise.then((function(filter){(filter.setModel(null)||AgPromise.resolve()).then((function(){_this.getContext().destroyBean(filter),filterWrapper.column.setFilterActive(!1,"filterDestroyed"),_this.allColumnFilters.delete(filterWrapper.column.getColId());var event={type:Events.EVENT_FILTER_DESTROYED,source,column:filterWrapper.column};_this.eventService.dispatchEvent(event)}))}))},FilterManager.prototype.checkDestroyFilter=function(colId){var filterWrapper=this.allColumnFilters.get(colId);if(filterWrapper){var column=filterWrapper.column,compDetails=(column.isFilterAllowed()?this.createFilterInstance(column):{compDetails:null}).compDetails;this.areFilterCompsDifferent(filterWrapper.compDetails,compDetails)&&this.destroyFilter(column,"columnChanged")}},FilterManager.prototype.areFilterCompsDifferent=function(oldCompDetails,newCompDetails){if(!newCompDetails||!oldCompDetails)return!0;var oldComponentClass=oldCompDetails.componentClass,newComponentClass=newCompDetails.componentClass;return!(oldComponentClass===newComponentClass||(null==oldComponentClass?void 0:oldComponentClass.render)&&(null==newComponentClass?void 0:newComponentClass.render)&&oldComponentClass.render===newComponentClass.render)},FilterManager.prototype.getAdvancedFilterModel=function(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null},FilterManager.prototype.setAdvancedFilterModel=function(expression){this.isAdvancedFilterEnabled()&&(this.advancedFilterService.setModel(null!=expression?expression:null),this.onFilterChanged({source:"advancedFilter"}))},FilterManager.prototype.showAdvancedFilterBuilder=function(source){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder(source,!0)},FilterManager.prototype.updateAdvancedFilterColumns=function(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})},FilterManager.prototype.hasFloatingFilters=function(){if(this.isAdvancedFilterEnabled())return!1;var gridColumns=this.columnModel.getAllGridColumns();return!!gridColumns&&gridColumns.some((function(col){return col.getColDef().floatingFilter}))},FilterManager.prototype.getFilterInstance=function(key,callback){if(!this.isAdvancedFilterEnabled()){var res=this.getFilterInstanceImpl(key,(function(instance){if(callback){var unwrapped=unwrapUserComp(instance);callback(unwrapped)}}));return unwrapUserComp(res)}this.warnAdvancedFilters()},FilterManager.prototype.getFilterInstanceImpl=function(key,callback){var column=this.columnModel.getPrimaryColumn(key);if(column){var filterPromise=this.getFilterComponent(column,"NO_UI"),currentValue=filterPromise&&filterPromise.resolveNow(null,(function(filterComp){return filterComp}));return currentValue?setTimeout(callback,0,currentValue):filterPromise&&filterPromise.then((function(comp){callback(comp)})),currentValue}},FilterManager.prototype.warnAdvancedFilters=function(){doOnce((function(){console.warn("AG Grid: Column Filter API methods have been disabled as Advanced Filters are enabled.")}),"advancedFiltersCompatibility")},FilterManager.prototype.setupAdvancedFilterHeaderComp=function(eCompToInsertBefore){var _a;null===(_a=this.advancedFilterService)||void 0===_a||_a.getCtrl().setupHeaderComp(eCompToInsertBefore)},FilterManager.prototype.getHeaderRowCount=function(){return this.isAdvancedFilterHeaderActive()?1:0},FilterManager.prototype.getHeaderHeight=function(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0},FilterManager.prototype.processFilterModelUpdateQueue=function(){var _this=this;this.filterModelUpdateQueue.forEach((function(model){return _this.setFilterModel(model)})),this.filterModelUpdateQueue=[]},FilterManager.prototype.destroy=function(){var _this=this;_super.prototype.destroy.call(this),this.allColumnFilters.forEach((function(filterWrapper){return _this.disposeFilterWrapper(filterWrapper,"gridDestroyed")})),this.allColumnListeners.clear()},__decorate$1Y([Autowired("valueService")],FilterManager.prototype,"valueService",void 0),__decorate$1Y([Autowired("columnModel")],FilterManager.prototype,"columnModel",void 0),__decorate$1Y([Autowired("rowModel")],FilterManager.prototype,"rowModel",void 0),__decorate$1Y([Autowired("userComponentFactory")],FilterManager.prototype,"userComponentFactory",void 0),__decorate$1Y([Autowired("rowRenderer")],FilterManager.prototype,"rowRenderer",void 0),__decorate$1Y([Autowired("dataTypeService")],FilterManager.prototype,"dataTypeService",void 0),__decorate$1Y([Autowired("quickFilterService")],FilterManager.prototype,"quickFilterService",void 0),__decorate$1Y([Optional("advancedFilterService")],FilterManager.prototype,"advancedFilterService",void 0),__decorate$1Y([PostConstruct],FilterManager.prototype,"init",null),FilterManager=__decorate$1Y([Bean("filterManager")],FilterManager)}(BeanStub),__extends$27=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AbstractHeaderCellComp=function(_super){function AbstractHeaderCellComp(template,ctrl){var _this=_super.call(this,template)||this;return _this.ctrl=ctrl,_this}return __extends$27(AbstractHeaderCellComp,_super),AbstractHeaderCellComp.prototype.getCtrl=function(){return this.ctrl},AbstractHeaderCellComp}(Component),__extends$26=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1X=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HeaderFilterCellComp=function(_super){function HeaderFilterCellComp(ctrl){return _super.call(this,HeaderFilterCellComp.TEMPLATE,ctrl)||this}return __extends$26(HeaderFilterCellComp,_super),HeaderFilterCellComp.prototype.postConstruct=function(){var _this=this,eGui=this.getGui(),compProxy={addOrRemoveCssClass:function(cssClassName,on){return _this.addOrRemoveCssClass(cssClassName,on)},addOrRemoveBodyCssClass:function(cssClassName,on){return _this.eFloatingFilterBody.classList.toggle(cssClassName,on)},setButtonWrapperDisplayed:function(displayed){return setDisplayed(_this.eButtonWrapper,displayed)},setCompDetails:function(compDetails){return _this.setCompDetails(compDetails)},getFloatingFilterComp:function(){return _this.compPromise},setWidth:function(width){return eGui.style.width=width},setMenuIcon:function(eIcon){return _this.eButtonShowMainFilter.appendChild(eIcon)}};this.ctrl.setComp(compProxy,eGui,this.eButtonShowMainFilter,this.eFloatingFilterBody)},HeaderFilterCellComp.prototype.setCompDetails=function(compDetails){var _this=this;if(!compDetails)return this.destroyFloatingFilterComp(),void(this.compPromise=null);this.compPromise=compDetails.newAgStackInstance(),this.compPromise.then((function(comp){return _this.afterCompCreated(comp)}))},HeaderFilterCellComp.prototype.destroyFloatingFilterComp=function(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))},HeaderFilterCellComp.prototype.afterCompCreated=function(comp){comp&&(this.isAlive()?(this.destroyFloatingFilterComp(),this.floatingFilterComp=comp,this.eFloatingFilterBody.appendChild(comp.getGui()),comp.afterGuiAttached&&comp.afterGuiAttached()):this.destroyBean(comp))},HeaderFilterCellComp.TEMPLATE='<div class="ag-header-cell ag-floating-filter" role="gridcell" tabindex="-1">\n            <div ref="eFloatingFilterBody" role="presentation"></div>\n            <div class="ag-floating-filter-button ag-hidden" ref="eButtonWrapper" role="presentation">\n                <button type="button" class="ag-button ag-floating-filter-button-button" ref="eButtonShowMainFilter" tabindex="-1"></button>\n            </div>\n        </div>',__decorate$1X([RefSelector("eFloatingFilterBody")],HeaderFilterCellComp.prototype,"eFloatingFilterBody",void 0),__decorate$1X([RefSelector("eButtonWrapper")],HeaderFilterCellComp.prototype,"eButtonWrapper",void 0),__decorate$1X([RefSelector("eButtonShowMainFilter")],HeaderFilterCellComp.prototype,"eButtonShowMainFilter",void 0),__decorate$1X([PostConstruct],HeaderFilterCellComp.prototype,"postConstruct",null),__decorate$1X([PreDestroy],HeaderFilterCellComp.prototype,"destroyFloatingFilterComp",null),HeaderFilterCellComp}(AbstractHeaderCellComp),__extends$25=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();!function(LayoutCssClasses){LayoutCssClasses.AUTO_HEIGHT="ag-layout-auto-height",LayoutCssClasses.NORMAL="ag-layout-normal",LayoutCssClasses.PRINT="ag-layout-print"}(LayoutCssClasses||(LayoutCssClasses={}));var ScrollDirection,ScrollSource,LayoutFeature=function(_super){function LayoutFeature(view){var _this=_super.call(this)||this;return _this.view=view,_this}return __extends$25(LayoutFeature,_super),LayoutFeature.prototype.postConstruct=function(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()},LayoutFeature.prototype.updateLayoutClasses=function(){var domLayout=this.getDomLayout(),params={autoHeight:"autoHeight"===domLayout,normal:"normal"===domLayout,print:"print"===domLayout},cssClass=params.autoHeight?LayoutCssClasses.AUTO_HEIGHT:params.print?LayoutCssClasses.PRINT:LayoutCssClasses.NORMAL;this.view.updateLayoutClasses(cssClass,params)},LayoutFeature.prototype.getDomLayout=function(){var _a,domLayout=null!==(_a=this.gridOptionsService.get("domLayout"))&&void 0!==_a?_a:"normal";return-1===["normal","print","autoHeight"].indexOf(domLayout)?(doOnce((function(){return console.warn("AG Grid: "+domLayout+" is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.")}),"warn about dom layout values"),"normal"):domLayout},function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([PostConstruct],LayoutFeature.prototype,"postConstruct",null),LayoutFeature}(BeanStub),__extends$24=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$c=function(){return __assign$c=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$c.apply(this,arguments)},__decorate$1V=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};!function(ScrollDirection){ScrollDirection[ScrollDirection.Vertical=0]="Vertical",ScrollDirection[ScrollDirection.Horizontal=1]="Horizontal"}(ScrollDirection||(ScrollDirection={})),function(ScrollSource){ScrollSource[ScrollSource.Container=0]="Container",ScrollSource[ScrollSource.FakeContainer=1]="FakeContainer"}(ScrollSource||(ScrollSource={}));var RowAnimationCssClasses,GridBodyScrollFeature=function(_super){function GridBodyScrollFeature(eBodyViewport){var _this=_super.call(this)||this;return _this.lastScrollSource=[null,null],_this.scrollLeft=-1,_this.nextScrollTop=-1,_this.scrollTop=-1,_this.eBodyViewport=eBodyViewport,_this.resetLastHScrollDebounced=debounce((function(){return _this.lastScrollSource[ScrollDirection.Horizontal]=null}),500),_this.resetLastVScrollDebounced=debounce((function(){return _this.lastScrollSource[ScrollDirection.Vertical]=null}),500),_this}return __extends$24(GridBodyScrollFeature,_super),GridBodyScrollFeature.prototype.postConstruct=function(){var _this=this;this.enableRtl=this.gridOptionsService.is("enableRtl"),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this)),this.ctrlsService.whenReady((function(p){_this.centerRowContainerCtrl=p.centerRowContainerCtrl,_this.onDisplayedColumnsWidthChanged(),_this.addScrollListener()}))},GridBodyScrollFeature.prototype.addScrollListener=function(){var fakeHScroll=this.ctrlsService.getFakeHScrollComp(),fakeVScroll=this.ctrlsService.getFakeVScrollComp();this.addManagedListener(this.centerRowContainerCtrl.getViewportElement(),"scroll",this.onHScroll.bind(this)),fakeHScroll.onScrollCallback(this.onFakeHScroll.bind(this));var isDebounce=this.gridOptionsService.is("debounceVerticalScrollbar"),onVScroll=isDebounce?debounce(this.onVScroll.bind(this),100):this.onVScroll.bind(this),onFakeVScroll=isDebounce?debounce(this.onFakeVScroll.bind(this),100):this.onFakeVScroll.bind(this);this.addManagedListener(this.eBodyViewport,"scroll",onVScroll),fakeVScroll.onScrollCallback(onFakeVScroll)},GridBodyScrollFeature.prototype.onDisplayedColumnsWidthChanged=function(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()},GridBodyScrollFeature.prototype.horizontallyScrollHeaderCenterAndFloatingCenter=function(scrollLeft){if(!(null==this.centerRowContainerCtrl)){void 0===scrollLeft&&(scrollLeft=this.centerRowContainerCtrl.getCenterViewportScrollLeft());var offset=this.enableRtl?scrollLeft:-scrollLeft,topCenterContainer=this.ctrlsService.getTopCenterRowContainerCtrl(),stickyTopCenterContainer=this.ctrlsService.getStickyTopCenterRowContainerCtrl(),bottomCenterContainer=this.ctrlsService.getBottomCenterRowContainerCtrl(),fakeHScroll=this.ctrlsService.getFakeHScrollComp();this.ctrlsService.getHeaderRowContainerCtrl().setHorizontalScroll(-offset),bottomCenterContainer.setContainerTranslateX(offset),topCenterContainer.setContainerTranslateX(offset),stickyTopCenterContainer.setContainerTranslateX(offset);var centerViewport=this.centerRowContainerCtrl.getViewportElement(),isCenterViewportLastHorizontal=this.lastScrollSource[ScrollDirection.Horizontal]===ScrollSource.Container;scrollLeft=Math.abs(scrollLeft),isCenterViewportLastHorizontal?fakeHScroll.setScrollPosition(scrollLeft):setScrollLeft(centerViewport,scrollLeft,this.enableRtl)}},GridBodyScrollFeature.prototype.isControllingScroll=function(source,direction){return null==this.lastScrollSource[direction]?(this.lastScrollSource[direction]=source,!0):this.lastScrollSource[direction]===source},GridBodyScrollFeature.prototype.onFakeHScroll=function(){this.isControllingScroll(ScrollSource.FakeContainer,ScrollDirection.Horizontal)&&this.onHScrollCommon(ScrollSource.FakeContainer)},GridBodyScrollFeature.prototype.onHScroll=function(){this.isControllingScroll(ScrollSource.Container,ScrollDirection.Horizontal)&&this.onHScrollCommon(ScrollSource.Container)},GridBodyScrollFeature.prototype.onHScrollCommon=function(source){var newScrollLeft,centerContainerViewport=this.centerRowContainerCtrl.getViewportElement(),scrollLeft=centerContainerViewport.scrollLeft;this.shouldBlockScrollUpdate(ScrollDirection.Horizontal,scrollLeft,!0)||(newScrollLeft=source===ScrollSource.Container?getScrollLeft(centerContainerViewport,this.enableRtl):this.ctrlsService.getFakeHScrollComp().getScrollPosition(),this.doHorizontalScroll(Math.round(newScrollLeft)),this.resetLastHScrollDebounced())},GridBodyScrollFeature.prototype.onFakeVScroll=function(){this.isControllingScroll(ScrollSource.FakeContainer,ScrollDirection.Vertical)&&this.onVScrollCommon(ScrollSource.FakeContainer)},GridBodyScrollFeature.prototype.onVScroll=function(){this.isControllingScroll(ScrollSource.Container,ScrollDirection.Vertical)&&this.onVScrollCommon(ScrollSource.Container)},GridBodyScrollFeature.prototype.onVScrollCommon=function(source){var scrollTop;scrollTop=source===ScrollSource.Container?this.eBodyViewport.scrollTop:this.ctrlsService.getFakeVScrollComp().getScrollPosition(),this.shouldBlockScrollUpdate(ScrollDirection.Vertical,scrollTop,!0)||(this.animationFrameService.setScrollTop(scrollTop),this.nextScrollTop=scrollTop,source===ScrollSource.Container?this.ctrlsService.getFakeVScrollComp().setScrollPosition(scrollTop):this.eBodyViewport.scrollTop=scrollTop,this.gridOptionsService.is("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())},GridBodyScrollFeature.prototype.doHorizontalScroll=function(scrollLeft){var fakeScrollLeft=this.ctrlsService.getFakeHScrollComp().getScrollPosition();this.scrollLeft===scrollLeft&&scrollLeft===fakeScrollLeft||(this.scrollLeft=scrollLeft,this.fireScrollEvent(ScrollDirection.Horizontal),this.horizontallyScrollHeaderCenterAndFloatingCenter(scrollLeft),this.centerRowContainerCtrl.onHorizontalViewportChanged(!0))},GridBodyScrollFeature.prototype.fireScrollEvent=function(direction){var _this=this,bodyScrollEvent={type:Events.EVENT_BODY_SCROLL,direction:direction===ScrollDirection.Horizontal?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(bodyScrollEvent),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout((function(){var bodyScrollEndEvent=__assign$c(__assign$c({},bodyScrollEvent),{type:Events.EVENT_BODY_SCROLL_END});_this.eventService.dispatchEvent(bodyScrollEndEvent)}),100)},GridBodyScrollFeature.prototype.shouldBlockScrollUpdate=function(direction,scrollTo,touchOnly){return void 0===touchOnly&&(touchOnly=!1),!(touchOnly&&!isIOSUserAgent())&&(direction===ScrollDirection.Vertical?this.shouldBlockVerticalScroll(scrollTo):this.shouldBlockHorizontalScroll(scrollTo))},GridBodyScrollFeature.prototype.shouldBlockVerticalScroll=function(scrollTo){var clientHeight=getInnerHeight(this.eBodyViewport),scrollHeight=this.eBodyViewport.scrollHeight;return scrollTo<0||scrollTo+clientHeight>scrollHeight},GridBodyScrollFeature.prototype.shouldBlockHorizontalScroll=function(scrollTo){var clientWidth=this.centerRowContainerCtrl.getCenterWidth(),scrollWidth=this.centerRowContainerCtrl.getViewportElement().scrollWidth;if(this.enableRtl&&isRtlNegativeScroll()){if(scrollTo>0)return!0}else if(scrollTo<0)return!0;return Math.abs(scrollTo)+clientWidth>scrollWidth},GridBodyScrollFeature.prototype.redrawRowsAfterScroll=function(){this.fireScrollEvent(ScrollDirection.Vertical)},GridBodyScrollFeature.prototype.checkScrollLeft=function(){this.scrollLeft!==this.centerRowContainerCtrl.getCenterViewportScrollLeft()&&this.onHScrollCommon(ScrollSource.Container)},GridBodyScrollFeature.prototype.scrollGridIfNeeded=function(){var frameNeeded=this.scrollTop!=this.nextScrollTop;return frameNeeded&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),frameNeeded},GridBodyScrollFeature.prototype.setHorizontalScrollPosition=function(hScrollPosition,fromAlignedGridsService){void 0===fromAlignedGridsService&&(fromAlignedGridsService=!1);var maxScrollLeft=this.centerRowContainerCtrl.getViewportElement().scrollWidth-this.centerRowContainerCtrl.getCenterWidth();!fromAlignedGridsService&&this.shouldBlockScrollUpdate(ScrollDirection.Horizontal,hScrollPosition)&&(hScrollPosition=this.enableRtl&&isRtlNegativeScroll()?hScrollPosition>0?0:maxScrollLeft:Math.min(Math.max(hScrollPosition,0),maxScrollLeft)),setScrollLeft(this.centerRowContainerCtrl.getViewportElement(),Math.abs(hScrollPosition),this.enableRtl),this.doHorizontalScroll(hScrollPosition)},GridBodyScrollFeature.prototype.setVerticalScrollPosition=function(vScrollPosition){this.eBodyViewport.scrollTop=vScrollPosition},GridBodyScrollFeature.prototype.getVScrollPosition=function(){return{top:this.eBodyViewport.scrollTop,bottom:this.eBodyViewport.scrollTop+this.eBodyViewport.offsetHeight}},GridBodyScrollFeature.prototype.getHScrollPosition=function(){return this.centerRowContainerCtrl.getHScrollPosition()},GridBodyScrollFeature.prototype.isHorizontalScrollShowing=function(){return this.centerRowContainerCtrl.isHorizontalScrollShowing()},GridBodyScrollFeature.prototype.scrollHorizontally=function(pixels){var oldScrollPosition=this.centerRowContainerCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(oldScrollPosition+pixels),this.centerRowContainerCtrl.getViewportElement().scrollLeft-oldScrollPosition},GridBodyScrollFeature.prototype.scrollToTop=function(){this.eBodyViewport.scrollTop=0},GridBodyScrollFeature.prototype.ensureNodeVisible=function(comparator,position){void 0===position&&(position=null);for(var rowCount=this.rowModel.getRowCount(),indexToSelect=-1,i=0;i<rowCount;i++){var node=this.rowModel.getRow(i);if("function"==typeof comparator){if(node&&comparator(node)){indexToSelect=i;break}}else if(comparator===node||comparator===node.data){indexToSelect=i;break}}indexToSelect>=0&&this.ensureIndexVisible(indexToSelect,position)},GridBodyScrollFeature.prototype.ensureIndexVisible=function(index,position){if(!this.gridOptionsService.isDomLayout("print")){var rowCount=this.paginationProxy.getRowCount();if("number"!=typeof index||index<0||index>=rowCount)console.warn("AG Grid: Invalid row index for ensureIndexVisible: "+index);else{this.gridOptionsService.is("pagination")&&!this.gridOptionsService.is("suppressPaginationPanel")||this.paginationProxy.goToPageWithIndex(index);var rowGotShiftedDuringOperation,stickyTopHeight=this.ctrlsService.getGridBodyCtrl().getStickyTopHeight(),rowNode=this.paginationProxy.getRow(index);do{var startingRowTop=rowNode.rowTop,startingRowHeight=rowNode.rowHeight,paginationOffset=this.paginationProxy.getPixelOffset(),rowTopPixel=rowNode.rowTop-paginationOffset,rowBottomPixel=rowTopPixel+rowNode.rowHeight,scrollPosition=this.getVScrollPosition(),heightOffset=this.heightScaler.getDivStretchOffset(),vScrollTop=scrollPosition.top+heightOffset,vScrollBottom=scrollPosition.bottom+heightOffset,viewportHeight=vScrollBottom-vScrollTop,pxTop=this.heightScaler.getScrollPositionForPixel(rowTopPixel),pxBottom=this.heightScaler.getScrollPositionForPixel(rowBottomPixel-viewportHeight),pxMiddle=Math.min((pxTop+pxBottom)/2,rowTopPixel),newScrollPosition=null;"top"===position?newScrollPosition=pxTop:"bottom"===position?newScrollPosition=pxBottom:"middle"===position?newScrollPosition=pxMiddle:vScrollTop+stickyTopHeight>rowTopPixel?newScrollPosition=pxTop-stickyTopHeight:vScrollBottom<rowBottomPixel&&(newScrollPosition=pxBottom),null!==newScrollPosition&&(this.setVerticalScrollPosition(newScrollPosition),this.rowRenderer.redraw({afterScroll:!0})),rowGotShiftedDuringOperation=startingRowTop!==rowNode.rowTop||startingRowHeight!==rowNode.rowHeight}while(rowGotShiftedDuringOperation);this.animationFrameService.flushAllFrames()}}},GridBodyScrollFeature.prototype.ensureColumnVisible=function(key,position){void 0===position&&(position="auto");var column=this.columnModel.getGridColumn(key);if(column&&!column.isPinned()&&this.columnModel.isColumnDisplayed(column)){var newHorizontalScroll=this.getPositionedHorizontalScroll(column,position);null!==newHorizontalScroll&&this.centerRowContainerCtrl.setCenterViewportScrollLeft(newHorizontalScroll),this.centerRowContainerCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()}},GridBodyScrollFeature.prototype.getPositionedHorizontalScroll=function(column,position){var _a=this.isColumnOutsideViewport(column),columnBeforeStart=_a.columnBeforeStart,columnAfterEnd=_a.columnAfterEnd,viewportTooSmallForColumn=this.centerRowContainerCtrl.getCenterWidth()<column.getActualWidth(),viewportWidth=this.centerRowContainerCtrl.getCenterWidth(),isRtl=this.enableRtl,alignColToStart=(isRtl?columnBeforeStart:columnAfterEnd)||viewportTooSmallForColumn,alignColToEnd=isRtl?columnAfterEnd:columnBeforeStart;"auto"!==position&&(alignColToStart="start"===position,alignColToEnd="end"===position);var isMiddle="middle"===position;if(alignColToStart||alignColToEnd||isMiddle){var _b=this.getColumnBounds(column),colLeft=_b.colLeft,colMiddle=_b.colMiddle,colRight=_b.colRight;return isMiddle?colMiddle-viewportWidth/2:alignColToStart?isRtl?colRight:colLeft:isRtl?colLeft-viewportWidth:colRight-viewportWidth}return null},GridBodyScrollFeature.prototype.isColumnOutsideViewport=function(column){var _a=this.getViewportBounds(),viewportStart=_a.start,viewportEnd=_a.end,_b=this.getColumnBounds(column),colLeft=_b.colLeft,colRight=_b.colRight,isRtl=this.enableRtl;return{columnBeforeStart:isRtl?viewportStart>colRight:viewportEnd<colRight,columnAfterEnd:isRtl?viewportEnd<colLeft:viewportStart>colLeft}},GridBodyScrollFeature.prototype.getColumnBounds=function(column){var isRtl=this.enableRtl,bodyWidth=this.columnModel.getBodyContainerWidth(),colWidth=column.getActualWidth(),colLeft=column.getLeft(),multiplier=isRtl?-1:1,colLeftPixel=isRtl?bodyWidth-colLeft:colLeft;return{colLeft:colLeftPixel,colMiddle:colLeftPixel+colWidth/2*multiplier,colRight:colLeftPixel+colWidth*multiplier}},GridBodyScrollFeature.prototype.getViewportBounds=function(){var viewportWidth=this.centerRowContainerCtrl.getCenterWidth(),scrollPosition=this.centerRowContainerCtrl.getCenterViewportScrollLeft();return{start:scrollPosition,end:viewportWidth+scrollPosition,width:viewportWidth}},__decorate$1V([Autowired("ctrlsService")],GridBodyScrollFeature.prototype,"ctrlsService",void 0),__decorate$1V([Autowired("animationFrameService")],GridBodyScrollFeature.prototype,"animationFrameService",void 0),__decorate$1V([Autowired("paginationProxy")],GridBodyScrollFeature.prototype,"paginationProxy",void 0),__decorate$1V([Autowired("rowModel")],GridBodyScrollFeature.prototype,"rowModel",void 0),__decorate$1V([Autowired("rowContainerHeightService")],GridBodyScrollFeature.prototype,"heightScaler",void 0),__decorate$1V([Autowired("rowRenderer")],GridBodyScrollFeature.prototype,"rowRenderer",void 0),__decorate$1V([Autowired("columnModel")],GridBodyScrollFeature.prototype,"columnModel",void 0),__decorate$1V([PostConstruct],GridBodyScrollFeature.prototype,"postConstruct",null),GridBodyScrollFeature}(BeanStub),__extends$23=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$b=function(){return __assign$b=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$b.apply(this,arguments)},__decorate$1U=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},RowDragFeature=function(_super){function RowDragFeature(eContainer){var _this=_super.call(this)||this;return _this.isMultiRowDrag=!1,_this.isGridSorted=!1,_this.isGridFiltered=!1,_this.isRowGroupActive=!1,_this.eContainer=eContainer,_this}return __extends$23(RowDragFeature,_super),RowDragFeature.prototype.postConstruct=function(){var _this=this;this.gridOptionsService.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel);var refreshStatus=function(){_this.onSortChanged(),_this.onFilterChanged(),_this.onRowGroupChanged()};this.addManagedListener(this.eventService,Events.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_MODEL_UPDATED,(function(){refreshStatus()})),refreshStatus(),this.ctrlsService.whenReady((function(){var gridBodyCon=_this.ctrlsService.getGridBodyCtrl();_this.autoScrollService=new AutoScrollService({scrollContainer:gridBodyCon.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:function(){return gridBodyCon.getScrollFeature().getVScrollPosition().top},setVerticalPosition:function(position){return gridBodyCon.getScrollFeature().setVerticalScrollPosition(position)},onScrollCallback:function(){_this.onDragging(_this.lastDraggingEvent)}})}))},RowDragFeature.prototype.onSortChanged=function(){this.isGridSorted=this.sortController.isSortActive()},RowDragFeature.prototype.onFilterChanged=function(){this.isGridFiltered=this.filterManager.isAnyFilterPresent()},RowDragFeature.prototype.onRowGroupChanged=function(){var rowGroups=this.columnModel.getRowGroupColumns();this.isRowGroupActive=!missingOrEmpty(rowGroups)},RowDragFeature.prototype.getContainer=function(){return this.eContainer},RowDragFeature.prototype.isInterestedIn=function(type){return type===DragSourceType.RowDrag},RowDragFeature.prototype.getIconName=function(){return this.gridOptionsService.is("rowDragManaged")&&this.shouldPreventRowMove()?DragAndDropService.ICON_NOT_ALLOWED:DragAndDropService.ICON_MOVE},RowDragFeature.prototype.shouldPreventRowMove=function(){return this.isGridSorted||this.isGridFiltered||this.isRowGroupActive},RowDragFeature.prototype.getRowNodes=function(draggingEvent){var _this=this;if(!this.isFromThisGrid(draggingEvent))return draggingEvent.dragItem.rowNodes||[];var isRowDragMultiRow=this.gridOptionsService.is("rowDragMultiRow"),selectedNodes=function(to,from){for(var i=0,il=from.length,j=to.length;i<il;i++,j++)to[j]=from[i];return to}([],function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}(this.selectionService.getSelectedNodes())).sort((function(a,b){return null==a.rowIndex||null==b.rowIndex?0:_this.getRowIndexNumber(a)-_this.getRowIndexNumber(b)})),currentNode=draggingEvent.dragItem.rowNode;return isRowDragMultiRow&&-1!==selectedNodes.indexOf(currentNode)?(this.isMultiRowDrag=!0,selectedNodes):(this.isMultiRowDrag=!1,[currentNode])},RowDragFeature.prototype.onDragEnter=function(draggingEvent){draggingEvent.dragItem.rowNodes=this.getRowNodes(draggingEvent),this.dispatchGridEvent(Events.EVENT_ROW_DRAG_ENTER,draggingEvent),this.getRowNodes(draggingEvent).forEach((function(rowNode){rowNode.setDragging(!0)})),this.onEnterOrDragging(draggingEvent)},RowDragFeature.prototype.onDragging=function(draggingEvent){this.onEnterOrDragging(draggingEvent)},RowDragFeature.prototype.isFromThisGrid=function(draggingEvent){return draggingEvent.dragSource.dragSourceDomDataKey===this.gridOptionsService.getDomDataKey()},RowDragFeature.prototype.isDropZoneWithinThisGrid=function(draggingEvent){var gridGui=this.ctrlsService.getGridBodyCtrl().getGui(),dropZoneTarget=draggingEvent.dropZoneTarget;return!gridGui.contains(dropZoneTarget)},RowDragFeature.prototype.onEnterOrDragging=function(draggingEvent){this.dispatchGridEvent(Events.EVENT_ROW_DRAG_MOVE,draggingEvent),this.lastDraggingEvent=draggingEvent;var pixel=this.mouseEventService.getNormalisedPosition(draggingEvent).y;this.gridOptionsService.is("rowDragManaged")&&this.doManagedDrag(draggingEvent,pixel),this.autoScrollService.check(draggingEvent.event)},RowDragFeature.prototype.doManagedDrag=function(draggingEvent,pixel){var isFromThisGrid=this.isFromThisGrid(draggingEvent),managedDrag=this.gridOptionsService.is("rowDragManaged"),rowNodes=draggingEvent.dragItem.rowNodes;managedDrag&&this.shouldPreventRowMove()||(this.gridOptionsService.is("suppressMoveWhenRowDragging")||!isFromThisGrid?this.isDropZoneWithinThisGrid(draggingEvent)||this.clientSideRowModel.highlightRowAtPixel(rowNodes[0],pixel):this.moveRows(rowNodes,pixel))},RowDragFeature.prototype.getRowIndexNumber=function(rowNode){return parseInt(last(rowNode.getRowIndexString().split("-")),10)},RowDragFeature.prototype.moveRowAndClearHighlight=function(draggingEvent){var _this=this,lastHighlightedRowNode=this.clientSideRowModel.getLastHighlightedRowNode(),isBelow=lastHighlightedRowNode&&lastHighlightedRowNode.highlighted===RowHighlightPosition.Below,pixel=this.mouseEventService.getNormalisedPosition(draggingEvent).y,rowNodes=draggingEvent.dragItem.rowNodes,increment=isBelow?1:0;if(this.isFromThisGrid(draggingEvent))rowNodes.forEach((function(rowNode){rowNode.rowTop<pixel&&(increment-=1)})),this.moveRows(rowNodes,pixel,increment);else{var getRowIdFunc_1=this.gridOptionsService.getCallback("getRowId"),addIndex=this.clientSideRowModel.getRowIndexAtPixel(pixel)+1;this.clientSideRowModel.getHighlightPosition(pixel)===RowHighlightPosition.Above&&addIndex--,this.clientSideRowModel.updateRowData({add:rowNodes.map((function(node){return node.data})).filter((function(data){return!_this.clientSideRowModel.getRowNode(getRowIdFunc_1?getRowIdFunc_1({data,level:0}):data.id)})),addIndex})}this.clearRowHighlight()},RowDragFeature.prototype.clearRowHighlight=function(){this.clientSideRowModel.highlightRowAtPixel(null)},RowDragFeature.prototype.moveRows=function(rowNodes,pixel,increment){void 0===increment&&(increment=0),this.clientSideRowModel.ensureRowsAtPixel(rowNodes,pixel,increment)&&(this.focusService.clearFocusedCell(),this.rangeService&&this.rangeService.removeAllCellRanges())},RowDragFeature.prototype.addRowDropZone=function(params){var _this=this;if(params.getContainer())if(this.dragAndDropService.findExternalZone(params))console.warn("AG Grid: addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");else{var processedParams={getContainer:params.getContainer};params.fromGrid?(params.fromGrid=void 0,processedParams=params):(params.onDragEnter&&(processedParams.onDragEnter=function(e){params.onDragEnter(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_ENTER,e))}),params.onDragLeave&&(processedParams.onDragLeave=function(e){params.onDragLeave(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_LEAVE,e))}),params.onDragging&&(processedParams.onDragging=function(e){params.onDragging(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_MOVE,e))}),params.onDragStop&&(processedParams.onDragStop=function(e){params.onDragStop(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_END,e))})),this.dragAndDropService.addDropTarget(__assign$b({isInterestedIn:function(type){return type===DragSourceType.RowDrag},getIconName:function(){return DragAndDropService.ICON_MOVE},external:!0},processedParams))}else doOnce((function(){return console.warn("AG Grid: addRowDropZone - A container target needs to be provided")}),"add-drop-zone-empty-target")},RowDragFeature.prototype.getRowDropZone=function(events){var _this=this,getContainer=this.getContainer.bind(this),onDragEnter=this.onDragEnter.bind(this),onDragLeave=this.onDragLeave.bind(this),onDragging=this.onDragging.bind(this),onDragStop=this.onDragStop.bind(this);return events?{getContainer,onDragEnter:events.onDragEnter?function(e){onDragEnter(e),events.onDragEnter(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_ENTER,e))}:onDragEnter,onDragLeave:events.onDragLeave?function(e){onDragLeave(e),events.onDragLeave(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_LEAVE,e))}:onDragLeave,onDragging:events.onDragging?function(e){onDragging(e),events.onDragging(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_MOVE,e))}:onDragging,onDragStop:events.onDragStop?function(e){onDragStop(e),events.onDragStop(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_END,e))}:onDragStop,fromGrid:!0}:{getContainer,onDragEnter,onDragLeave,onDragging,onDragStop,fromGrid:!0}},RowDragFeature.prototype.draggingToRowDragEvent=function(type,draggingEvent){var overNode,vDirectionString,yNormalised=this.mouseEventService.getNormalisedPosition(draggingEvent).y,overIndex=-1;switch(yNormalised>this.paginationProxy.getCurrentPageHeight()||(overIndex=this.rowModel.getRowIndexAtPixel(yNormalised),overNode=this.rowModel.getRow(overIndex)),draggingEvent.vDirection){case VerticalDirection.Down:vDirectionString="down";break;case VerticalDirection.Up:vDirectionString="up";break;default:vDirectionString=null}return{type,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,event:draggingEvent.event,node:draggingEvent.dragItem.rowNode,nodes:draggingEvent.dragItem.rowNodes,overIndex,overNode,y:yNormalised,vDirection:vDirectionString}},RowDragFeature.prototype.dispatchGridEvent=function(type,draggingEvent){var event=this.draggingToRowDragEvent(type,draggingEvent);this.eventService.dispatchEvent(event)},RowDragFeature.prototype.onDragLeave=function(draggingEvent){this.dispatchGridEvent(Events.EVENT_ROW_DRAG_LEAVE,draggingEvent),this.stopDragging(draggingEvent),this.gridOptionsService.is("rowDragManaged")&&this.clearRowHighlight(),this.isFromThisGrid(draggingEvent)&&(this.isMultiRowDrag=!1)},RowDragFeature.prototype.onDragStop=function(draggingEvent){this.dispatchGridEvent(Events.EVENT_ROW_DRAG_END,draggingEvent),this.stopDragging(draggingEvent),!this.gridOptionsService.is("rowDragManaged")||!this.gridOptionsService.is("suppressMoveWhenRowDragging")&&this.isFromThisGrid(draggingEvent)||this.isDropZoneWithinThisGrid(draggingEvent)||this.moveRowAndClearHighlight(draggingEvent)},RowDragFeature.prototype.stopDragging=function(draggingEvent){this.autoScrollService.ensureCleared(),this.getRowNodes(draggingEvent).forEach((function(rowNode){rowNode.setDragging(!1)}))},__decorate$1U([Autowired("dragAndDropService")],RowDragFeature.prototype,"dragAndDropService",void 0),__decorate$1U([Autowired("rowModel")],RowDragFeature.prototype,"rowModel",void 0),__decorate$1U([Autowired("paginationProxy")],RowDragFeature.prototype,"paginationProxy",void 0),__decorate$1U([Autowired("columnModel")],RowDragFeature.prototype,"columnModel",void 0),__decorate$1U([Autowired("focusService")],RowDragFeature.prototype,"focusService",void 0),__decorate$1U([Autowired("sortController")],RowDragFeature.prototype,"sortController",void 0),__decorate$1U([Autowired("filterManager")],RowDragFeature.prototype,"filterManager",void 0),__decorate$1U([Autowired("selectionService")],RowDragFeature.prototype,"selectionService",void 0),__decorate$1U([Autowired("mouseEventService")],RowDragFeature.prototype,"mouseEventService",void 0),__decorate$1U([Autowired("ctrlsService")],RowDragFeature.prototype,"ctrlsService",void 0),__decorate$1U([Optional("rangeService")],RowDragFeature.prototype,"rangeService",void 0),__decorate$1U([PostConstruct],RowDragFeature.prototype,"postConstruct",null),RowDragFeature}(BeanStub),__extends$22=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1T=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};!function(RowAnimationCssClasses){RowAnimationCssClasses.ANIMATION_ON="ag-row-animation",RowAnimationCssClasses.ANIMATION_OFF="ag-row-no-animation"}(RowAnimationCssClasses||(RowAnimationCssClasses={}));var SelectionHandleType,CellRangeType,GridBodyCtrl=function(_super){function GridBodyCtrl(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.stickyTopHeight=0,_this}return __extends$22(GridBodyCtrl,_super),GridBodyCtrl.prototype.getScrollFeature=function(){return this.bodyScrollFeature},GridBodyCtrl.prototype.getBodyViewportElement=function(){return this.eBodyViewport},GridBodyCtrl.prototype.setComp=function(comp,eGridBody,eBodyViewport,eTop,eBottom,eStickyTop){this.comp=comp,this.eGridBody=eGridBody,this.eBodyViewport=eBodyViewport,this.eTop=eTop,this.eBottom=eBottom,this.eStickyTop=eStickyTop,this.setCellTextSelection(this.gridOptionsService.is("enableCellTextSelection")),this.createManagedBean(new LayoutFeature(this.comp)),this.bodyScrollFeature=this.createManagedBean(new GridBodyScrollFeature(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([eTop,eBodyViewport,eBottom,eStickyTop]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.filterManager.setupAdvancedFilterHeaderComp(eTop),this.ctrlsService.registerGridBodyCtrl(this)},GridBodyCtrl.prototype.getComp=function(){return this.comp},GridBodyCtrl.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,Events.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))},GridBodyCtrl.prototype.addFocusListeners=function(elements){var _this=this;elements.forEach((function(element){_this.addManagedListener(element,"focusin",(function(e){var isFocusedElementNested=isElementChildOfClass(e.target,"ag-root",element);element.classList.toggle("ag-has-focus",!isFocusedElementNested)})),_this.addManagedListener(element,"focusout",(function(e){var target=e.target,relatedTarget=e.relatedTarget,gridContainRelatedTarget=element.contains(relatedTarget),isNestedRelatedTarget=isElementChildOfClass(relatedTarget,"ag-root",element);isElementChildOfClass(target,"ag-root",element)||gridContainRelatedTarget&&!isNestedRelatedTarget||element.classList.remove("ag-has-focus")}))}))},GridBodyCtrl.prototype.setColumnMovingCss=function(moving){this.comp.setColumnMovingCss("ag-column-moving",moving)},GridBodyCtrl.prototype.setCellTextSelection=function(selectable){void 0===selectable&&(selectable=!1),this.comp.setCellSelectableCss("ag-selectable",selectable)},GridBodyCtrl.prototype.onScrollVisibilityChanged=function(){var _this=this,visible=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(visible),this.setStickyTopWidth(visible);var width="calc(100% + "+((visible&&this.gridOptionsService.getScrollbarWidth()||0)+(isInvisibleScrollbar()?16:0))+"px)";this.animationFrameService.requestAnimationFrame((function(){return _this.comp.setBodyViewportWidth(width)}))},GridBodyCtrl.prototype.onGridColumnsChanged=function(){var columns=this.columnModel.getAllGridColumns();this.comp.setColumnCount(columns?columns.length:0)},GridBodyCtrl.prototype.disableBrowserDragging=function(){this.addManagedListener(this.eGridBody,"dragstart",(function(event){if(event.target instanceof HTMLImageElement)return event.preventDefault(),!1}))},GridBodyCtrl.prototype.addStopEditingWhenGridLosesFocus=function(){var _this=this;if(this.gridOptionsService.is("stopEditingWhenCellsLoseFocus")){var focusOutListener=function(event){var elementWithFocus=event.relatedTarget;if(null!==getTabIndex(elementWithFocus)){var clickInsideGrid=viewports.some((function(viewport){return viewport.contains(elementWithFocus)}))&&_this.mouseEventService.isElementInThisGrid(elementWithFocus);if(!clickInsideGrid){var popupService=_this.popupService;clickInsideGrid=popupService.getActivePopups().some((function(popup){return popup.contains(elementWithFocus)}))||popupService.isElementWithinCustomPopup(elementWithFocus)}clickInsideGrid||_this.rowRenderer.stopEditing()}else _this.rowRenderer.stopEditing()},viewports=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop];viewports.forEach((function(viewport){return _this.addManagedListener(viewport,"focusout",focusOutListener)}))}},GridBodyCtrl.prototype.updateRowCount=function(){var headerCount=this.headerNavigationService.getHeaderRowCount()+this.filterManager.getHeaderRowCount(),rowCount=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,total=-1===rowCount?-1:headerCount+rowCount;this.comp.setRowCount(total)},GridBodyCtrl.prototype.registerBodyViewportResizeListener=function(listener){this.comp.registerBodyViewportResizeListener(listener)},GridBodyCtrl.prototype.setVerticalScrollPaddingVisible=function(visible){var overflowY=visible?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(overflowY)},GridBodyCtrl.prototype.isVerticalScrollShowing=function(){var show=this.gridOptionsService.is("alwaysShowVerticalScroll"),cssClass=show?"ag-force-vertical-scroll":null,allowVerticalScroll=this.gridOptionsService.isDomLayout("normal");return this.comp.setAlwaysVerticalScrollClass(cssClass,show),show||allowVerticalScroll&&isVerticalScrollShowing(this.eBodyViewport)},GridBodyCtrl.prototype.setupRowAnimationCssClass=function(){var _this=this,listener=function(){var animateRows=_this.gridOptionsService.isAnimateRows()&&!_this.rowContainerHeightService.isStretching(),animateRowsCssClass=animateRows?RowAnimationCssClasses.ANIMATION_ON:RowAnimationCssClasses.ANIMATION_OFF;_this.comp.setRowAnimationCssOnBodyViewport(animateRowsCssClass,animateRows)};listener(),this.addManagedListener(this.eventService,Events.EVENT_HEIGHT_SCALE_CHANGED,listener),this.addManagedPropertyListener("animateRows",listener)},GridBodyCtrl.prototype.getGridBodyElement=function(){return this.eGridBody},GridBodyCtrl.prototype.addBodyViewportListener=function(){var listener=this.onBodyViewportContextMenu.bind(this);this.addManagedListener(this.eBodyViewport,"contextmenu",listener),this.mockContextMenuForIPad(listener),this.addManagedListener(this.eBodyViewport,"wheel",this.onBodyViewportWheel.bind(this)),this.addManagedListener(this.eStickyTop,"wheel",this.onStickyTopWheel.bind(this)),this.addFullWidthContainerWheelListener()},GridBodyCtrl.prototype.addFullWidthContainerWheelListener=function(){var _this=this,fullWidthContainer=this.eBodyViewport.querySelector(".ag-full-width-container"),eCenterColsViewport=this.eBodyViewport.querySelector(".ag-center-cols-viewport");fullWidthContainer&&eCenterColsViewport&&this.addManagedListener(fullWidthContainer,"wheel",(function(e){return _this.onFullWidthContainerWheel(e,eCenterColsViewport)}))},GridBodyCtrl.prototype.onFullWidthContainerWheel=function(e,eCenterColsViewport){!e.deltaX||Math.abs(e.deltaY)>Math.abs(e.deltaX)||!this.mouseEventService.isEventFromThisGrid(e)||(e.preventDefault(),eCenterColsViewport.scrollBy({left:e.deltaX}))},GridBodyCtrl.prototype.onBodyViewportContextMenu=function(mouseEvent,touch,touchEvent){if(mouseEvent||touchEvent){if(this.gridOptionsService.is("preventDefaultOnContextMenu"))(mouseEvent||touchEvent).preventDefault();var target=(mouseEvent||touch).target;if(target===this.eBodyViewport||target===this.ctrlsService.getCenterRowContainerCtrl().getViewportElement()){if(!this.contextMenuFactory)return;mouseEvent?this.contextMenuFactory.onContextMenu(mouseEvent,null,null,null,null,this.eGridBody):touchEvent&&this.contextMenuFactory.onContextMenu(null,touchEvent,null,null,null,this.eGridBody)}}},GridBodyCtrl.prototype.mockContextMenuForIPad=function(listener){if(isIOSUserAgent()){var touchListener=new TouchListener(this.eBodyViewport);this.addManagedListener(touchListener,TouchListener.EVENT_LONG_TAP,(function(event){listener(void 0,event.touchStart,event.touchEvent)})),this.addDestroyFunc((function(){return touchListener.destroy()}))}},GridBodyCtrl.prototype.onBodyViewportWheel=function(e){this.gridOptionsService.is("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&e.preventDefault()},GridBodyCtrl.prototype.onStickyTopWheel=function(e){e.preventDefault(),e.offsetY&&this.scrollVertically(e.deltaY)},GridBodyCtrl.prototype.getGui=function(){return this.eGridBody},GridBodyCtrl.prototype.scrollVertically=function(pixels){var oldScrollPosition=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(oldScrollPosition+pixels),this.eBodyViewport.scrollTop-oldScrollPosition},GridBodyCtrl.prototype.addRowDragListener=function(){this.rowDragFeature=this.createManagedBean(new RowDragFeature(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature)},GridBodyCtrl.prototype.getRowDragFeature=function(){return this.rowDragFeature},GridBodyCtrl.prototype.onPinnedRowDataChanged=function(){this.setFloatingHeights()},GridBodyCtrl.prototype.setFloatingHeights=function(){var pinnedRowModel=this.pinnedRowModel,floatingTopHeight=pinnedRowModel.getPinnedTopTotalHeight();floatingTopHeight&&(floatingTopHeight+=1);var floatingBottomHeight=pinnedRowModel.getPinnedBottomTotalHeight();floatingBottomHeight&&(floatingBottomHeight+=1),this.comp.setTopHeight(floatingTopHeight),this.comp.setBottomHeight(floatingBottomHeight),this.comp.setTopDisplay(floatingTopHeight?"inherit":"none"),this.comp.setBottomDisplay(floatingBottomHeight?"inherit":"none"),this.setStickyTopOffsetTop()},GridBodyCtrl.prototype.setStickyTopHeight=function(height){void 0===height&&(height=0),this.comp.setStickyTopHeight(height+"px"),this.stickyTopHeight=height},GridBodyCtrl.prototype.getStickyTopHeight=function(){return this.stickyTopHeight},GridBodyCtrl.prototype.setStickyTopWidth=function(vScrollVisible){if(vScrollVisible){var scrollbarWidth=this.gridOptionsService.getScrollbarWidth();this.comp.setStickyTopWidth("calc(100% - "+scrollbarWidth+"px)")}else this.comp.setStickyTopWidth("100%")},GridBodyCtrl.prototype.onHeaderHeightChanged=function(){this.setStickyTopOffsetTop()},GridBodyCtrl.prototype.setStickyTopOffsetTop=function(){var headerHeight=this.ctrlsService.getGridHeaderCtrl().getHeaderHeight()+this.filterManager.getHeaderHeight(),pinnedTopHeight=this.pinnedRowModel.getPinnedTopTotalHeight(),height=0;headerHeight>0&&(height+=headerHeight+1),pinnedTopHeight>0&&(height+=pinnedTopHeight+1),this.comp.setStickyTopTop(height+"px")},GridBodyCtrl.prototype.sizeColumnsToFit=function(params,nextTimeout){var _this=this,scrollWidthToRemove=this.isVerticalScrollShowing()?this.gridOptionsService.getScrollbarWidth():0,availableWidth=getInnerWidth(this.eGridBody)-scrollWidthToRemove;availableWidth>0?this.columnModel.sizeColumnsToFit(availableWidth,"sizeColumnsToFit",!1,params):void 0===nextTimeout?window.setTimeout((function(){_this.sizeColumnsToFit(params,100)}),0):100===nextTimeout?window.setTimeout((function(){_this.sizeColumnsToFit(params,500)}),100):500===nextTimeout?window.setTimeout((function(){_this.sizeColumnsToFit(params,-1)}),500):console.warn("AG Grid: tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")},GridBodyCtrl.prototype.addScrollEventListener=function(listener){this.eBodyViewport.addEventListener("scroll",listener,{passive:!0})},GridBodyCtrl.prototype.removeScrollEventListener=function(listener){this.eBodyViewport.removeEventListener("scroll",listener)},__decorate$1T([Autowired("animationFrameService")],GridBodyCtrl.prototype,"animationFrameService",void 0),__decorate$1T([Autowired("rowContainerHeightService")],GridBodyCtrl.prototype,"rowContainerHeightService",void 0),__decorate$1T([Autowired("ctrlsService")],GridBodyCtrl.prototype,"ctrlsService",void 0),__decorate$1T([Autowired("columnModel")],GridBodyCtrl.prototype,"columnModel",void 0),__decorate$1T([Autowired("scrollVisibleService")],GridBodyCtrl.prototype,"scrollVisibleService",void 0),__decorate$1T([Optional("contextMenuFactory")],GridBodyCtrl.prototype,"contextMenuFactory",void 0),__decorate$1T([Autowired("headerNavigationService")],GridBodyCtrl.prototype,"headerNavigationService",void 0),__decorate$1T([Autowired("dragAndDropService")],GridBodyCtrl.prototype,"dragAndDropService",void 0),__decorate$1T([Autowired("pinnedRowModel")],GridBodyCtrl.prototype,"pinnedRowModel",void 0),__decorate$1T([Autowired("rowRenderer")],GridBodyCtrl.prototype,"rowRenderer",void 0),__decorate$1T([Autowired("popupService")],GridBodyCtrl.prototype,"popupService",void 0),__decorate$1T([Autowired("mouseEventService")],GridBodyCtrl.prototype,"mouseEventService",void 0),__decorate$1T([Autowired("rowModel")],GridBodyCtrl.prototype,"rowModel",void 0),__decorate$1T([Autowired("filterManager")],GridBodyCtrl.prototype,"filterManager",void 0),GridBodyCtrl}(BeanStub);!function(SelectionHandleType){SelectionHandleType[SelectionHandleType.FILL=0]="FILL",SelectionHandleType[SelectionHandleType.RANGE=1]="RANGE"}(SelectionHandleType||(SelectionHandleType={})),function(CellRangeType){CellRangeType[CellRangeType.VALUE=0]="VALUE",CellRangeType[CellRangeType.DIMENSION=1]="DIMENSION"}(CellRangeType||(CellRangeType={}));var RowType$1,CellRangeFeature=function(){function CellRangeFeature(beans,ctrl){this.beans=beans,this.cellCtrl=ctrl}return CellRangeFeature.prototype.setComp=function(cellComp,eGui){this.cellComp=cellComp,this.eGui=eGui,this.onRangeSelectionChanged()},CellRangeFeature.prototype.onRangeSelectionChanged=function(){this.cellComp&&(this.rangeCount=this.beans.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass("ag-cell-range-selected",0!==this.rangeCount),this.cellComp.addOrRemoveCssClass("ag-cell-range-selected-1",1===this.rangeCount),this.cellComp.addOrRemoveCssClass("ag-cell-range-selected-2",2===this.rangeCount),this.cellComp.addOrRemoveCssClass("ag-cell-range-selected-3",3===this.rangeCount),this.cellComp.addOrRemoveCssClass("ag-cell-range-selected-4",this.rangeCount>=4),this.cellComp.addOrRemoveCssClass("ag-cell-range-chart",this.hasChartRange),setAriaSelected(this.eGui,this.rangeCount>0||void 0),this.cellComp.addOrRemoveCssClass("ag-cell-range-single-cell",this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())},CellRangeFeature.prototype.updateRangeBorders=function(){var rangeBorders=this.getRangeBorders(),isSingleCell=this.isSingleCell(),isTop=!isSingleCell&&rangeBorders.top,isRight=!isSingleCell&&rangeBorders.right,isBottom=!isSingleCell&&rangeBorders.bottom,isLeft=!isSingleCell&&rangeBorders.left;this.cellComp.addOrRemoveCssClass("ag-cell-range-top",isTop),this.cellComp.addOrRemoveCssClass("ag-cell-range-right",isRight),this.cellComp.addOrRemoveCssClass("ag-cell-range-bottom",isBottom),this.cellComp.addOrRemoveCssClass("ag-cell-range-left",isLeft)},CellRangeFeature.prototype.isSingleCell=function(){var rangeService=this.beans.rangeService;return 1===this.rangeCount&&rangeService&&!rangeService.isMoreThanOneCell()},CellRangeFeature.prototype.getHasChartRange=function(){var rangeService=this.beans.rangeService;if(!this.rangeCount||!rangeService)return!1;var cellRanges=rangeService.getCellRanges();return cellRanges.length>0&&cellRanges.every((function(range){return includes([CellRangeType.DIMENSION,CellRangeType.VALUE],range.type)}))},CellRangeFeature.prototype.updateRangeBordersIfRangeCount=function(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())},CellRangeFeature.prototype.getRangeBorders=function(){var leftCol,rightCol,_this=this,isRtl=this.beans.gridOptionsService.is("enableRtl"),top=!1,right=!1,bottom=!1,left=!1,thisCol=this.cellCtrl.getCellPosition().column,_a=this.beans,rangeService=_a.rangeService,columnModel=_a.columnModel;isRtl?(leftCol=columnModel.getDisplayedColAfter(thisCol),rightCol=columnModel.getDisplayedColBefore(thisCol)):(leftCol=columnModel.getDisplayedColBefore(thisCol),rightCol=columnModel.getDisplayedColAfter(thisCol));var ranges=rangeService.getCellRanges().filter((function(range){return rangeService.isCellInSpecificRange(_this.cellCtrl.getCellPosition(),range)}));leftCol||(left=!0),rightCol||(right=!0);for(var i=0;i<ranges.length&&!(top&&right&&bottom&&left);i++){var range=ranges[i],startRow=rangeService.getRangeStartRow(range),endRow=rangeService.getRangeEndRow(range);!top&&this.beans.rowPositionUtils.sameRow(startRow,this.cellCtrl.getCellPosition())&&(top=!0),!bottom&&this.beans.rowPositionUtils.sameRow(endRow,this.cellCtrl.getCellPosition())&&(bottom=!0),!left&&leftCol&&range.columns.indexOf(leftCol)<0&&(left=!0),!right&&rightCol&&range.columns.indexOf(rightCol)<0&&(right=!0)}return{top,right,bottom,left}},CellRangeFeature.prototype.refreshHandle=function(){if(this.beans.rangeService){var shouldHaveSelectionHandle=this.shouldHaveSelectionHandle();this.selectionHandle&&!shouldHaveSelectionHandle&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),shouldHaveSelectionHandle&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass("ag-cell-range-handle",!!this.selectionHandle)}},CellRangeFeature.prototype.shouldHaveSelectionHandle=function(){var _a=this.beans,gridOptionsService=_a.gridOptionsService,rangeService=_a.rangeService,cellRanges=rangeService.getCellRanges(),rangesLen=cellRanges.length;if(this.rangeCount<1||rangesLen<1)return!1;var cellRange=last(cellRanges),cellPosition=this.cellCtrl.getCellPosition(),isFillHandleAvailable=gridOptionsService.is("enableFillHandle")&&!this.cellCtrl.isSuppressFillHandle(),isRangeHandleAvailable=gridOptionsService.is("enableRangeHandle"),handleIsAvailable=1===rangesLen&&!this.cellCtrl.isEditing()&&(isFillHandleAvailable||isRangeHandleAvailable);if(this.hasChartRange){var isCategoryCell=cellRanges[0].type===CellRangeType.DIMENSION&&rangeService.isCellInSpecificRange(cellPosition,cellRanges[0]);this.cellComp.addOrRemoveCssClass("ag-cell-range-chart-category",isCategoryCell),handleIsAvailable=cellRange.type===CellRangeType.VALUE}return handleIsAvailable&&null!=cellRange.endRow&&rangeService.isContiguousRange(cellRange)&&rangeService.isBottomRightCell(cellRange,cellPosition)},CellRangeFeature.prototype.addSelectionHandle=function(){var _a=this.beans,gridOptionsService=_a.gridOptionsService,cellRangeType=last(_a.rangeService.getCellRanges()).type,type=gridOptionsService.is("enableFillHandle")&&missing(cellRangeType)?SelectionHandleType.FILL:SelectionHandleType.RANGE;this.selectionHandle&&this.selectionHandle.getType()!==type&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.beans.selectionHandleFactory.createSelectionHandle(type)),this.selectionHandle.refresh(this.cellCtrl)},CellRangeFeature.prototype.destroy=function(){this.beans.context.destroyBean(this.selectionHandle)},CellRangeFeature}(),__extends$21=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),CellPositionFeature=function(_super){function CellPositionFeature(ctrl,beans){var _this=_super.call(this)||this;return _this.cellCtrl=ctrl,_this.beans=beans,_this.column=ctrl.getColumn(),_this.rowNode=ctrl.getRowNode(),_this.setupColSpan(),_this.setupRowSpan(),_this}return __extends$21(CellPositionFeature,_super),CellPositionFeature.prototype.setupRowSpan=function(){this.rowSpan=this.column.getRowSpan(this.rowNode)},CellPositionFeature.prototype.setComp=function(eGui){this.eGui=eGui,this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()},CellPositionFeature.prototype.onDisplayColumnsChanged=function(){var colsSpanning=this.getColSpanningList();areEqual(this.colsSpanning,colsSpanning)||(this.colsSpanning=colsSpanning,this.onWidthChanged(),this.onLeftChanged())},CellPositionFeature.prototype.setupColSpan=function(){null!=this.column.getColDef().colSpan&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListener(this.beans.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayColumnsChanged.bind(this)),this.addManagedListener(this.beans.eventService,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onWidthChanged.bind(this)))},CellPositionFeature.prototype.onWidthChanged=function(){if(this.eGui){var width=this.getCellWidth();this.eGui.style.width=width+"px"}},CellPositionFeature.prototype.getCellWidth=function(){return this.colsSpanning?this.colsSpanning.reduce((function(width,col){return width+col.getActualWidth()}),0):this.column.getActualWidth()},CellPositionFeature.prototype.getColSpanningList=function(){var colSpan=this.column.getColSpan(this.rowNode),colsSpanning=[];if(1===colSpan)colsSpanning.push(this.column);else for(var pointer=this.column,pinned=this.column.getPinned(),i=0;pointer&&i<colSpan&&(colsSpanning.push(pointer),(pointer=this.beans.columnModel.getDisplayedColAfter(pointer))&&!missing(pointer))&&pinned===pointer.getPinned();i++);return colsSpanning},CellPositionFeature.prototype.onLeftChanged=function(){if(this.eGui){var left=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=left+"px"}},CellPositionFeature.prototype.getCellLeft=function(){return(this.beans.gridOptionsService.is("enableRtl")&&this.colsSpanning?last(this.colsSpanning):this.column).getLeft()},CellPositionFeature.prototype.modifyLeftForPrintLayout=function(leftPosition){if(!this.cellCtrl.isPrintLayout()||"left"===this.column.getPinned())return leftPosition;var leftWidth=this.beans.columnModel.getDisplayedColumnsLeftWidth();return"right"===this.column.getPinned()?leftWidth+this.beans.columnModel.getBodyContainerWidth()+(leftPosition||0):leftWidth+(leftPosition||0)},CellPositionFeature.prototype.applyRowSpan=function(){if(1!==this.rowSpan){var totalRowHeight=this.beans.gridOptionsService.getRowHeightAsNumber()*this.rowSpan;this.eGui.style.height=totalRowHeight+"px",this.eGui.style.zIndex="1"}},CellPositionFeature.prototype.destroy=function(){_super.prototype.destroy.call(this)},CellPositionFeature}(BeanStub),__extends$20=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),CellCustomStyleFeature=function(_super){function CellCustomStyleFeature(ctrl,beans){var _this=_super.call(this)||this;return _this.staticClasses=[],_this.cellCtrl=ctrl,_this.beans=beans,_this.column=ctrl.getColumn(),_this.rowNode=ctrl.getRowNode(),_this}return __extends$20(CellCustomStyleFeature,_super),CellCustomStyleFeature.prototype.setComp=function(comp){this.cellComp=comp,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()},CellCustomStyleFeature.prototype.applyCellClassRules=function(){var _this=this,colDef=this.column.getColDef(),cellClassParams={value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef,column:this.column,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context};this.beans.stylingService.processClassRules(colDef.cellClassRules,cellClassParams,(function(className){return _this.cellComp.addOrRemoveCssClass(className,!0)}),(function(className){return _this.cellComp.addOrRemoveCssClass(className,!1)}))},CellCustomStyleFeature.prototype.applyUserStyles=function(){var colDef=this.column.getColDef();if(colDef.cellStyle){var styles;if("function"==typeof colDef.cellStyle){var cellStyleParams={column:this.column,value:this.cellCtrl.getValue(),colDef,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context};styles=(0,colDef.cellStyle)(cellStyleParams)}else styles=colDef.cellStyle;styles&&this.cellComp.setUserStyles(styles)}},CellCustomStyleFeature.prototype.applyClassesFromColDef=function(){var _this=this,colDef=this.column.getColDef(),cellClassParams={value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context};this.staticClasses.length&&this.staticClasses.forEach((function(className){return _this.cellComp.addOrRemoveCssClass(className,!1)})),this.staticClasses=this.beans.stylingService.getStaticCellClasses(colDef,cellClassParams),this.staticClasses.length&&this.staticClasses.forEach((function(className){return _this.cellComp.addOrRemoveCssClass(className,!0)}))},CellCustomStyleFeature.prototype.destroy=function(){_super.prototype.destroy.call(this)},CellCustomStyleFeature}(BeanStub),__extends$1$=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),TooltipFeature=function(_super){function TooltipFeature(ctrl,beans){var _this=_super.call(this)||this;return _this.ctrl=ctrl,_this.beans=beans,_this}return __extends$1$(TooltipFeature,_super),TooltipFeature.prototype.setComp=function(eGui){this.eGui=eGui,this.setupTooltip()},TooltipFeature.prototype.setBrowserTooltip=function(tooltip){null!=tooltip&&""!=tooltip?this.eGui.setAttribute("title",tooltip):this.eGui.removeAttribute("title")},TooltipFeature.prototype.setupTooltip=function(){this.browserTooltips=this.beans.gridOptionsService.is("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?this.setBrowserTooltip(this.tooltip):this.createTooltipFeatureIfNeeded()},TooltipFeature.prototype.updateTooltipText=function(){this.tooltip=this.ctrl.getTooltipValue()},TooltipFeature.prototype.createTooltipFeatureIfNeeded=function(){var _a,_b,_c,_d,_this=this;if(null==this.genericTooltipFeature){var parent={getTooltipParams:function(){return _this.getTooltipParams()},getGui:function(){return _this.ctrl.getGui()}};this.genericTooltipFeature=this.createManagedBean(new CustomTooltipFeature(parent,null===(_b=(_a=this.ctrl).getTooltipShowDelayOverride)||void 0===_b?void 0:_b.call(_a),null===(_d=(_c=this.ctrl).getTooltipHideDelayOverride)||void 0===_d?void 0:_d.call(_c)),this.beans.context)}},TooltipFeature.prototype.refreshToolTip=function(){this.updateTooltipText(),this.browserTooltips&&this.setBrowserTooltip(this.tooltip)},TooltipFeature.prototype.getTooltipParams=function(){var _this=this,ctrl=this.ctrl,column=ctrl.getColumn?ctrl.getColumn():void 0,colDef=ctrl.getColDef?ctrl.getColDef():void 0,rowNode=ctrl.getRowNode?ctrl.getRowNode():void 0;return{location:ctrl.getLocation(),colDef,column,rowIndex:ctrl.getRowIndex?ctrl.getRowIndex():void 0,node:rowNode,data:rowNode?rowNode.data:void 0,value:this.getTooltipText(),valueFormatted:ctrl.getValueFormatted?ctrl.getValueFormatted():void 0,hideTooltipCallback:function(){return _this.genericTooltipFeature.hideTooltip(!0)}}},TooltipFeature.prototype.getTooltipText=function(){return this.tooltip},TooltipFeature.prototype.destroy=function(){_super.prototype.destroy.call(this)},TooltipFeature}(BeanStub),__decorate$1S=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},Beans=function(){function Beans(){}return Beans.prototype.postConstruct=function(){this.doingMasterDetail=this.gridOptionsService.is("masterDetail"),this.gridOptionsService.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.gridOptionsService.isRowModelType("serverSide")&&(this.serverSideRowModel=this.rowModel)},__decorate$1S([Autowired("resizeObserverService")],Beans.prototype,"resizeObserverService",void 0),__decorate$1S([Autowired("paginationProxy")],Beans.prototype,"paginationProxy",void 0),__decorate$1S([Autowired("context")],Beans.prototype,"context",void 0),__decorate$1S([Autowired("columnApi")],Beans.prototype,"columnApi",void 0),__decorate$1S([Autowired("gridApi")],Beans.prototype,"gridApi",void 0),__decorate$1S([Autowired("gridOptionsService")],Beans.prototype,"gridOptionsService",void 0),__decorate$1S([Autowired("expressionService")],Beans.prototype,"expressionService",void 0),__decorate$1S([Autowired("environment")],Beans.prototype,"environment",void 0),__decorate$1S([Autowired("rowRenderer")],Beans.prototype,"rowRenderer",void 0),__decorate$1S([Autowired("templateService")],Beans.prototype,"templateService",void 0),__decorate$1S([Autowired("valueService")],Beans.prototype,"valueService",void 0),__decorate$1S([Autowired("eventService")],Beans.prototype,"eventService",void 0),__decorate$1S([Autowired("columnModel")],Beans.prototype,"columnModel",void 0),__decorate$1S([Autowired("headerNavigationService")],Beans.prototype,"headerNavigationService",void 0),__decorate$1S([Autowired("navigationService")],Beans.prototype,"navigationService",void 0),__decorate$1S([Autowired("columnAnimationService")],Beans.prototype,"columnAnimationService",void 0),__decorate$1S([Optional("rangeService")],Beans.prototype,"rangeService",void 0),__decorate$1S([Autowired("focusService")],Beans.prototype,"focusService",void 0),__decorate$1S([Optional("contextMenuFactory")],Beans.prototype,"contextMenuFactory",void 0),__decorate$1S([Autowired("popupService")],Beans.prototype,"popupService",void 0),__decorate$1S([Autowired("valueFormatterService")],Beans.prototype,"valueFormatterService",void 0),__decorate$1S([Autowired("stylingService")],Beans.prototype,"stylingService",void 0),__decorate$1S([Autowired("columnHoverService")],Beans.prototype,"columnHoverService",void 0),__decorate$1S([Autowired("userComponentFactory")],Beans.prototype,"userComponentFactory",void 0),__decorate$1S([Autowired("userComponentRegistry")],Beans.prototype,"userComponentRegistry",void 0),__decorate$1S([Autowired("animationFrameService")],Beans.prototype,"animationFrameService",void 0),__decorate$1S([Autowired("dragService")],Beans.prototype,"dragService",void 0),__decorate$1S([Autowired("dragAndDropService")],Beans.prototype,"dragAndDropService",void 0),__decorate$1S([Autowired("sortController")],Beans.prototype,"sortController",void 0),__decorate$1S([Autowired("filterManager")],Beans.prototype,"filterManager",void 0),__decorate$1S([Autowired("rowContainerHeightService")],Beans.prototype,"rowContainerHeightService",void 0),__decorate$1S([Autowired("frameworkOverrides")],Beans.prototype,"frameworkOverrides",void 0),__decorate$1S([Autowired("cellPositionUtils")],Beans.prototype,"cellPositionUtils",void 0),__decorate$1S([Autowired("rowPositionUtils")],Beans.prototype,"rowPositionUtils",void 0),__decorate$1S([Autowired("selectionService")],Beans.prototype,"selectionService",void 0),__decorate$1S([Optional("selectionHandleFactory")],Beans.prototype,"selectionHandleFactory",void 0),__decorate$1S([Autowired("rowCssClassCalculator")],Beans.prototype,"rowCssClassCalculator",void 0),__decorate$1S([Autowired("rowModel")],Beans.prototype,"rowModel",void 0),__decorate$1S([Autowired("ctrlsService")],Beans.prototype,"ctrlsService",void 0),__decorate$1S([Autowired("ctrlsFactory")],Beans.prototype,"ctrlsFactory",void 0),__decorate$1S([Autowired("agStackComponentsRegistry")],Beans.prototype,"agStackComponentsRegistry",void 0),__decorate$1S([Autowired("valueCache")],Beans.prototype,"valueCache",void 0),__decorate$1S([Autowired("rowNodeEventThrottle")],Beans.prototype,"rowNodeEventThrottle",void 0),__decorate$1S([Autowired("localeService")],Beans.prototype,"localeService",void 0),__decorate$1S([Autowired("valueParserService")],Beans.prototype,"valueParserService",void 0),__decorate$1S([PostConstruct],Beans.prototype,"postConstruct",null),Beans=__decorate$1S([Bean("beans")],Beans)}(),__extends$1_=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),CellMouseListenerFeature=function(_super){function CellMouseListenerFeature(ctrl,beans,column){var _this=_super.call(this)||this;return _this.cellCtrl=ctrl,_this.beans=beans,_this.column=column,_this}return __extends$1_(CellMouseListenerFeature,_super),CellMouseListenerFeature.prototype.onMouseEvent=function(eventName,mouseEvent){if(!isStopPropagationForAgGrid(mouseEvent))switch(eventName){case"click":this.onCellClicked(mouseEvent);break;case"mousedown":case"touchstart":this.onMouseDown(mouseEvent);break;case"dblclick":this.onCellDoubleClicked(mouseEvent);break;case"mouseout":this.onMouseOut(mouseEvent);break;case"mouseover":this.onMouseOver(mouseEvent)}},CellMouseListenerFeature.prototype.onCellClicked=function(mouseEvent){if(this.isDoubleClickOnIPad())return this.onCellDoubleClicked(mouseEvent),void mouseEvent.preventDefault();var _a=this.beans,eventService=_a.eventService,rangeService=_a.rangeService,gridOptionsService=_a.gridOptionsService,isMultiKey=mouseEvent.ctrlKey||mouseEvent.metaKey;rangeService&&isMultiKey&&rangeService.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&rangeService.intersectLastRange(!0);var cellClickedEvent=this.cellCtrl.createEvent(mouseEvent,Events.EVENT_CELL_CLICKED);eventService.dispatchEvent(cellClickedEvent);var colDef=this.column.getColDef();colDef.onCellClicked&&window.setTimeout((function(){return colDef.onCellClicked(cellClickedEvent)}),0),!((gridOptionsService.is("singleClickEdit")||colDef.singleClickEdit)&&!gridOptionsService.is("suppressClickEdit"))||mouseEvent.shiftKey&&0!=(null==rangeService?void 0:rangeService.getCellRanges().length)||this.cellCtrl.startRowOrCellEdit()},CellMouseListenerFeature.prototype.isDoubleClickOnIPad=function(){if(!isIOSUserAgent()||isEventSupported("dblclick"))return!1;var nowMillis=(new Date).getTime(),res=nowMillis-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=nowMillis,res},CellMouseListenerFeature.prototype.onCellDoubleClicked=function(mouseEvent){var colDef=this.column.getColDef(),cellDoubleClickedEvent=this.cellCtrl.createEvent(mouseEvent,Events.EVENT_CELL_DOUBLE_CLICKED);this.beans.eventService.dispatchEvent(cellDoubleClickedEvent),"function"==typeof colDef.onCellDoubleClicked&&window.setTimeout((function(){return colDef.onCellDoubleClicked(cellDoubleClickedEvent)}),0),!this.beans.gridOptionsService.is("singleClickEdit")&&!this.beans.gridOptionsService.is("suppressClickEdit")&&this.cellCtrl.startRowOrCellEdit(null,mouseEvent)},CellMouseListenerFeature.prototype.onMouseDown=function(mouseEvent){var ctrlKey=mouseEvent.ctrlKey,metaKey=mouseEvent.metaKey,shiftKey=mouseEvent.shiftKey,target=mouseEvent.target,cellCtrl=this.cellCtrl,beans=this.beans,eventService=beans.eventService,rangeService=beans.rangeService,focusService=beans.focusService;if(!this.isRightClickInExistingRange(mouseEvent)){var ranges=rangeService&&0!=rangeService.getCellRanges().length;if(!shiftKey||!ranges){var forceBrowserFocus=isBrowserSafari()&&!cellCtrl.isEditing()&&!isFocusableFormField(target);cellCtrl.focusCell(forceBrowserFocus)}if(shiftKey&&ranges&&!focusService.isCellFocused(cellCtrl.getCellPosition())){mouseEvent.preventDefault();var focusedCellPosition=focusService.getFocusedCell();if(focusedCellPosition){var column=focusedCellPosition.column,rowIndex=focusedCellPosition.rowIndex,rowPinned=focusedCellPosition.rowPinned,focusedRowCtrl=beans.rowRenderer.getRowByPosition({rowIndex,rowPinned}),focusedCellCtrl=null==focusedRowCtrl?void 0:focusedRowCtrl.getCellCtrl(column);(null==focusedCellCtrl?void 0:focusedCellCtrl.isEditing())&&focusedCellCtrl.stopEditing(),focusService.setFocusedCell({column,rowIndex,rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(target)){if(rangeService){var thisCell=this.cellCtrl.getCellPosition();if(shiftKey)rangeService.extendLatestRangeToCell(thisCell);else{var isMultiKey=ctrlKey||metaKey;rangeService.setRangeToCell(thisCell,isMultiKey)}}eventService.dispatchEvent(this.cellCtrl.createEvent(mouseEvent,Events.EVENT_CELL_MOUSE_DOWN))}}},CellMouseListenerFeature.prototype.isRightClickInExistingRange=function(mouseEvent){var rangeService=this.beans.rangeService;if(rangeService){var cellInRange=rangeService.isCellInAnyRange(this.cellCtrl.getCellPosition()),isRightClick=2===mouseEvent.button||mouseEvent.ctrlKey&&this.beans.gridOptionsService.is("allowContextMenuWithControlKey");if(cellInRange&&isRightClick)return!0}return!1},CellMouseListenerFeature.prototype.containsWidget=function(target){return isElementChildOfClass(target,"ag-selection-checkbox",3)},CellMouseListenerFeature.prototype.onMouseOut=function(mouseEvent){if(!this.mouseStayingInsideCell(mouseEvent)){var cellMouseOutEvent=this.cellCtrl.createEvent(mouseEvent,Events.EVENT_CELL_MOUSE_OUT);this.beans.eventService.dispatchEvent(cellMouseOutEvent),this.beans.columnHoverService.clearMouseOver()}},CellMouseListenerFeature.prototype.onMouseOver=function(mouseEvent){if(!this.mouseStayingInsideCell(mouseEvent)){var cellMouseOverEvent=this.cellCtrl.createEvent(mouseEvent,Events.EVENT_CELL_MOUSE_OVER);this.beans.eventService.dispatchEvent(cellMouseOverEvent),this.beans.columnHoverService.setMouseOver([this.column])}},CellMouseListenerFeature.prototype.mouseStayingInsideCell=function(e){if(!e.target||!e.relatedTarget)return!1;var eGui=this.cellCtrl.getGui(),cellContainsTarget=eGui.contains(e.target),cellContainsRelatedTarget=eGui.contains(e.relatedTarget);return cellContainsTarget&&cellContainsRelatedTarget},CellMouseListenerFeature.prototype.destroy=function(){},CellMouseListenerFeature}(Beans),__extends$1Z=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),CellKeyboardListenerFeature=function(_super){function CellKeyboardListenerFeature(ctrl,beans,column,rowNode,rowCtrl){var _this=_super.call(this)||this;return _this.cellCtrl=ctrl,_this.beans=beans,_this.rowNode=rowNode,_this.rowCtrl=rowCtrl,_this}return __extends$1Z(CellKeyboardListenerFeature,_super),CellKeyboardListenerFeature.prototype.setComp=function(eGui){this.eGui=eGui},CellKeyboardListenerFeature.prototype.onKeyDown=function(event){var key=event.key;switch(key){case KeyCode.ENTER:this.onEnterKeyDown(event);break;case KeyCode.F2:this.onF2KeyDown(event);break;case KeyCode.ESCAPE:this.onEscapeKeyDown(event);break;case KeyCode.TAB:this.onTabKeyDown(event);break;case KeyCode.BACKSPACE:case KeyCode.DELETE:this.onBackspaceOrDeleteKeyDown(key,event);break;case KeyCode.DOWN:case KeyCode.UP:case KeyCode.RIGHT:case KeyCode.LEFT:this.onNavigationKeyDown(event,key)}},CellKeyboardListenerFeature.prototype.onNavigationKeyDown=function(event,key){this.cellCtrl.isEditing()||(event.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(event):this.beans.navigationService.navigateToNextCell(event,key,this.cellCtrl.getCellPosition(),!0),event.preventDefault())},CellKeyboardListenerFeature.prototype.onShiftRangeSelect=function(event){if(this.beans.rangeService){var endCell=this.beans.rangeService.extendLatestRangeInDirection(event);endCell&&this.beans.navigationService.ensureCellVisible(endCell)}},CellKeyboardListenerFeature.prototype.onTabKeyDown=function(event){this.beans.navigationService.onTabKeyDown(this.cellCtrl,event)},CellKeyboardListenerFeature.prototype.onBackspaceOrDeleteKeyDown=function(key,event){var cellCtrl=this.cellCtrl,beans=this.beans,rowNode=this.rowNode,gridOptionsService=beans.gridOptionsService,rangeService=beans.rangeService,eventService=beans.eventService;cellCtrl.isEditing()||(eventService.dispatchEvent({type:Events.EVENT_KEY_SHORTCUT_CHANGED_CELL_START}),isDeleteKey(key,gridOptionsService.is("enableCellEditingOnBackspace"))?rangeService&&gridOptionsService.is("enableRangeSelection")?rangeService.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"}):cellCtrl.isCellEditable()&&rowNode.setDataValue(cellCtrl.getColumn(),null,"cellClear"):cellCtrl.startRowOrCellEdit(key,event),eventService.dispatchEvent({type:Events.EVENT_KEY_SHORTCUT_CHANGED_CELL_END}))},CellKeyboardListenerFeature.prototype.onEnterKeyDown=function(e){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,e.shiftKey);else if(this.beans.gridOptionsService.is("enterNavigatesVertically")){var key=e.shiftKey?KeyCode.UP:KeyCode.DOWN;this.beans.navigationService.navigateToNextCell(null,key,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(KeyCode.ENTER,e),this.cellCtrl.isEditing()&&e.preventDefault()},CellKeyboardListenerFeature.prototype.onF2KeyDown=function(event){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(KeyCode.F2,event)},CellKeyboardListenerFeature.prototype.onEscapeKeyDown=function(event){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))},CellKeyboardListenerFeature.prototype.processCharacter=function(event){if(!(event.target!==this.eGui)&&!this.cellCtrl.isEditing()){var key=event.key;" "===key?this.onSpaceKeyDown(event):(this.cellCtrl.startRowOrCellEdit(key,event),event.preventDefault())}},CellKeyboardListenerFeature.prototype.onSpaceKeyDown=function(event){var gridOptionsService=this.beans.gridOptionsService;if(!this.cellCtrl.isEditing()&&gridOptionsService.isRowSelection()){var currentSelection=this.rowNode.isSelected(),newSelection=!currentSelection;if(newSelection||!gridOptionsService.is("suppressRowDeselection")){var groupSelectsFiltered=this.beans.gridOptionsService.is("groupSelectsFiltered"),updatedCount=this.rowNode.setSelectedParams({newValue:newSelection,rangeSelect:event.shiftKey,groupSelectsFiltered,event,source:"spaceKey"});void 0===currentSelection&&0===updatedCount&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:event.shiftKey,groupSelectsFiltered,event,source:"spaceKey"})}}event.preventDefault()},CellKeyboardListenerFeature.prototype.destroy=function(){_super.prototype.destroy.call(this)},CellKeyboardListenerFeature}(BeanStub),__extends$1Y=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),DndSourceComp=function(_super){function DndSourceComp(rowNode,column,eCell){var _this=_super.call(this,'<div class="ag-drag-handle ag-row-drag" draggable="true"></div>')||this;return _this.rowNode=rowNode,_this.column=column,_this.eCell=eCell,_this}return __extends$1Y(DndSourceComp,_super),DndSourceComp.prototype.postConstruct=function(){this.getGui().appendChild(createIconNoSpan("rowDrag",this.gridOptionsService,null)),this.addGuiEventListener("mousedown",(function(e){e.stopPropagation()})),this.addDragSource(),this.checkVisibility()},DndSourceComp.prototype.addDragSource=function(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))},DndSourceComp.prototype.onDragStart=function(dragEvent){var _this=this,providedOnRowDrag=this.column.getColDef().dndSourceOnRowDrag;dragEvent.dataTransfer.setDragImage(this.eCell,0,0);providedOnRowDrag?providedOnRowDrag({rowNode:this.rowNode,dragEvent,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}):function(){try{var jsonData=JSON.stringify(_this.rowNode.data);dragEvent.dataTransfer.setData("application/json",jsonData),dragEvent.dataTransfer.setData("text/plain",jsonData)}catch(e){}}()},DndSourceComp.prototype.checkVisibility=function(){var visible=this.column.isDndSource(this.rowNode);this.setDisplayed(visible)},function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([PostConstruct],DndSourceComp.prototype,"postConstruct",null),DndSourceComp}(Component),__extends$1X=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$a=function(){return __assign$a=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$a.apply(this,arguments)},instanceIdSequence$3=0,CellCtrl=function(_super){function CellCtrl(column,rowNode,beans,rowCtrl){var _this=_super.call(this)||this;_this.cellRangeFeature=null,_this.cellPositionFeature=null,_this.cellCustomStyleFeature=null,_this.tooltipFeature=null,_this.cellMouseListenerFeature=null,_this.cellKeyboardListenerFeature=null,_this.suppressRefreshCell=!1,_this.onCellCompAttachedFuncs=[],_this.column=column,_this.rowNode=rowNode,_this.beans=beans,_this.rowCtrl=rowCtrl,_this.instanceId=column.getId()+"-"+instanceIdSequence$3++;var colDef=_this.column.getColDef();return _this.colIdSanitised=escapeString(_this.column.getId()),_this.beans.gridOptionsService.is("suppressCellFocus")||(_this.tabIndex=-1),_this.isCellRenderer=null!=colDef.cellRenderer||null!=colDef.cellRendererSelector,_this.createCellPosition(),_this.addFeatures(),_this.updateAndFormatValue(!0),_this}return __extends$1X(CellCtrl,_super),CellCtrl.prototype.shouldRestoreFocus=function(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)},CellCtrl.prototype.addFeatures=function(){var _this=this;this.cellPositionFeature=new CellPositionFeature(this,this.beans),this.addDestroyFunc((function(){var _a;null===(_a=_this.cellPositionFeature)||void 0===_a||_a.destroy(),_this.cellPositionFeature=null})),this.cellCustomStyleFeature=new CellCustomStyleFeature(this,this.beans),this.addDestroyFunc((function(){var _a;null===(_a=_this.cellCustomStyleFeature)||void 0===_a||_a.destroy(),_this.cellCustomStyleFeature=null})),this.cellMouseListenerFeature=new CellMouseListenerFeature(this,this.beans,this.column),this.addDestroyFunc((function(){var _a;null===(_a=_this.cellMouseListenerFeature)||void 0===_a||_a.destroy(),_this.cellMouseListenerFeature=null})),this.cellKeyboardListenerFeature=new CellKeyboardListenerFeature(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.addDestroyFunc((function(){var _a;null===(_a=_this.cellKeyboardListenerFeature)||void 0===_a||_a.destroy(),_this.cellKeyboardListenerFeature=null})),this.beans.rangeService&&this.beans.gridOptionsService.is("enableRangeSelection")&&(this.cellRangeFeature=new CellRangeFeature(this.beans,this),this.addDestroyFunc((function(){var _a;null===(_a=_this.cellRangeFeature)||void 0===_a||_a.destroy(),_this.cellRangeFeature=null}))),this.column.isTooltipEnabled()&&this.addTooltipFeature()},CellCtrl.prototype.addTooltipFeature=function(){var _this=this,tooltipCtrl={getColumn:function(){return _this.column},getColDef:function(){return _this.column.getColDef()},getRowIndex:function(){return _this.cellPosition.rowIndex},getRowNode:function(){return _this.rowNode},getGui:function(){return _this.getGui()},getLocation:function(){return"cell"},getTooltipValue:function(){var colDef=_this.column.getColDef(),data=_this.rowNode.data;if(colDef.tooltipField&&exists(data))return getValueUsingField(data,colDef.tooltipField,_this.column.isTooltipFieldContainsDots());var valueGetter=colDef.tooltipValueGetter;return valueGetter?valueGetter({location:"cell",api:_this.beans.gridOptionsService.api,columnApi:_this.beans.gridOptionsService.columnApi,context:_this.beans.gridOptionsService.context,colDef:_this.column.getColDef(),column:_this.column,rowIndex:_this.cellPosition.rowIndex,node:_this.rowNode,data:_this.rowNode.data,value:_this.value,valueFormatted:_this.valueFormatted}):null},getValueFormatted:function(){return _this.valueFormatted}};this.tooltipFeature=new TooltipFeature(tooltipCtrl,this.beans),this.addDestroyFunc((function(){var _a;null===(_a=_this.tooltipFeature)||void 0===_a||_a.destroy(),_this.tooltipFeature=null}))},CellCtrl.prototype.setComp=function(comp,eGui,eCellWrapper,printLayout,startEditing){var _a,_b,_c,_d;this.cellComp=comp,this.eGui=eGui,this.printLayout=printLayout,this.addDomData(),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),eCellWrapper&&this.setupAutoHeight(eCellWrapper),this.setAriaColIndex(),null===(_a=this.cellPositionFeature)||void 0===_a||_a.setComp(eGui),null===(_b=this.cellCustomStyleFeature)||void 0===_b||_b.setComp(comp),null===(_c=this.tooltipFeature)||void 0===_c||_c.setComp(eGui),null===(_d=this.cellKeyboardListenerFeature)||void 0===_d||_d.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(comp,eGui),startEditing&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach((function(func){return func()})),this.onCellCompAttachedFuncs=[])},CellCtrl.prototype.setupAutoHeight=function(eCellWrapper){var _this=this;if(this.column.isAutoHeight()){var eParentCell=eCellWrapper.parentElement,minRowHeight=this.beans.gridOptionsService.getRowHeightForNode(this.rowNode).height,measureHeight=function(timesCalled){if(!_this.editing&&_this.isAlive()){var _a=getElementSize(eParentCell),extraHeight=_a.paddingTop+_a.paddingBottom+_a.borderBottomWidth+_a.borderTopWidth,autoHeight=eCellWrapper.offsetHeight+extraHeight;if(timesCalled<5){var doc=_this.beans.gridOptionsService.getDocument();if(!doc||!doc.contains(eCellWrapper)||0==autoHeight)return void _this.beans.frameworkOverrides.setTimeout((function(){return measureHeight(timesCalled+1)}),0)}var newHeight=Math.max(autoHeight,minRowHeight);_this.rowNode.setRowAutoHeight(newHeight,_this.column)}},listener=function(){return measureHeight(0)};listener();var destroyResizeObserver=this.beans.resizeObserverService.observeResize(eCellWrapper,listener);this.addDestroyFunc((function(){destroyResizeObserver(),_this.rowNode.setRowAutoHeight(void 0,_this.column)}))}},CellCtrl.prototype.getInstanceId=function(){return this.instanceId},CellCtrl.prototype.getIncludeSelection=function(){return this.includeSelection},CellCtrl.prototype.getIncludeRowDrag=function(){return this.includeRowDrag},CellCtrl.prototype.getIncludeDndSource=function(){return this.includeDndSource},CellCtrl.prototype.getColumnIdSanitised=function(){return this.colIdSanitised},CellCtrl.prototype.getTabIndex=function(){return this.tabIndex},CellCtrl.prototype.getIsCellRenderer=function(){return this.isCellRenderer},CellCtrl.prototype.getValueToDisplay=function(){return null!=this.valueFormatted?this.valueFormatted:this.value},CellCtrl.prototype.showValue=function(forceNewCellRendererInstance){void 0===forceNewCellRendererInstance&&(forceNewCellRendererInstance=!1);var compDetails,valueToDisplay=this.getValueToDisplay();if(this.isCellRenderer){var params=this.createCellRendererParams();compDetails=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),params)}this.cellComp.setRenderDetails(compDetails,valueToDisplay,forceNewCellRendererInstance),this.refreshHandle()},CellCtrl.prototype.setupControlComps=function(){var colDef=this.column.getColDef();this.includeSelection=this.isIncludeControl(colDef.checkboxSelection),this.includeRowDrag=this.isIncludeControl(colDef.rowDrag),this.includeDndSource=this.isIncludeControl(colDef.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)},CellCtrl.prototype.isForceWrapper=function(){return this.beans.gridOptionsService.is("enableCellTextSelection")||this.column.isAutoHeight()},CellCtrl.prototype.isIncludeControl=function(value){return!(null!=this.rowNode.rowPinned)&&("function"==typeof value||!0===value)},CellCtrl.prototype.refreshShouldDestroy=function(){var colDef=this.column.getColDef(),selectionChanged=this.includeSelection!=this.isIncludeControl(colDef.checkboxSelection),rowDragChanged=this.includeRowDrag!=this.isIncludeControl(colDef.rowDrag),dndSourceChanged=this.includeDndSource!=this.isIncludeControl(colDef.dndSource);return selectionChanged||rowDragChanged||dndSourceChanged},CellCtrl.prototype.startEditing=function(key,cellStartedEdit,event){var _this=this;if(void 0===key&&(key=null),void 0===cellStartedEdit&&(cellStartedEdit=!1),void 0===event&&(event=null),this.isCellEditable()&&!this.editing)if(this.cellComp){var editorParams=this.createCellEditorParams(key,cellStartedEdit),colDef=this.column.getColDef(),compDetails=this.beans.userComponentFactory.getCellEditorDetails(colDef,editorParams),popup=null!=(null==compDetails?void 0:compDetails.popupFromSelector)?compDetails.popupFromSelector:!!colDef.cellEditorPopup,position=null!=(null==compDetails?void 0:compDetails.popupPositionFromSelector)?compDetails.popupPositionFromSelector:colDef.cellEditorPopupPosition;this.setEditing(!0),this.cellComp.setEditDetails(compDetails,popup,position);var e=this.createEvent(event,Events.EVENT_CELL_EDITING_STARTED);this.beans.eventService.dispatchEvent(e)}else this.onCellCompAttachedFuncs.push((function(){_this.startEditing(key,cellStartedEdit,event)}))},CellCtrl.prototype.setEditing=function(editing){this.editing!==editing&&(this.editing=editing,this.refreshHandle())},CellCtrl.prototype.stopRowOrCellEdit=function(cancel){void 0===cancel&&(cancel=!1),"fullRow"===this.beans.gridOptionsService.get("editType")?this.rowCtrl.stopRowEditing(cancel):this.stopEditing(cancel)},CellCtrl.prototype.onPopupEditorClosed=function(){this.isEditing()&&this.stopEditingAndFocus()},CellCtrl.prototype.takeValueFromCellEditor=function(cancel){var noValueResult={newValueExists:!1};if(cancel)return noValueResult;var cellEditor=this.cellComp.getCellEditor();return cellEditor?cellEditor.isCancelAfterEnd&&cellEditor.isCancelAfterEnd()?noValueResult:{newValue:cellEditor.getValue(),newValueExists:!0}:noValueResult},CellCtrl.prototype.saveNewValue=function(oldValue,newValue){if(newValue===oldValue)return!1;this.suppressRefreshCell=!0;var valueChanged=this.rowNode.setDataValue(this.column,newValue,"edit");return this.suppressRefreshCell=!1,valueChanged},CellCtrl.prototype.stopEditing=function(cancel){if(void 0===cancel&&(cancel=!1),!this.editing)return!1;var _a=this.takeValueFromCellEditor(cancel),newValue=_a.newValue,newValueExists=_a.newValueExists,oldValue=this.rowNode.getValueFromValueService(this.column),valueChanged=!1;return newValueExists&&(valueChanged=this.saveNewValue(oldValue,newValue)),this.setEditing(!1),this.cellComp.setEditDetails(),this.updateAndFormatValue(),this.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.dispatchEditingStoppedEvent(oldValue,newValue,!cancel&&!!valueChanged),valueChanged},CellCtrl.prototype.dispatchEditingStoppedEvent=function(oldValue,newValue,valueChanged){var editingStoppedEvent=__assign$a(__assign$a({},this.createEvent(null,Events.EVENT_CELL_EDITING_STOPPED)),{oldValue,newValue,valueChanged});this.beans.eventService.dispatchEvent(editingStoppedEvent)},CellCtrl.prototype.createCellEditorParams=function(key,cellStartedEdit){return{value:this.rowNode.getValueFromValueService(this.column),eventKey:key,column:this.column,colDef:this.column.getColDef(),rowIndex:this.getCellPosition().rowIndex,node:this.rowNode,data:this.rowNode.data,api:this.beans.gridOptionsService.api,cellStartedEdit,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context,onKeyDown:this.onKeyDown.bind(this),stopEditing:this.stopEditingAndFocus.bind(this),eGridCell:this.getGui(),parseValue:this.parseValue.bind(this),formatValue:this.formatValue.bind(this)}},CellCtrl.prototype.createCellRendererParams=function(){var _this=this;return{value:this.value,valueFormatted:this.valueFormatted,getValue:function(){return _this.rowNode.getValueFromValueService(_this.column)},setValue:function(value){return _this.beans.valueService.setValue(_this.rowNode,_this.column,value)},formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,rowIndex:this.getCellPosition().rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:function(rowDraggerElement,dragStartPixels,value,suppressVisibilityChange){return _this.registerRowDragger(rowDraggerElement,dragStartPixels,suppressVisibilityChange)}}},CellCtrl.prototype.parseValue=function(newValue){return this.beans.valueParserService.parseValue(this.column,this.rowNode,newValue,this.getValue())},CellCtrl.prototype.setFocusOutOnEditor=function(){if(this.editing){var cellEditor=this.cellComp.getCellEditor();cellEditor&&cellEditor.focusOut&&cellEditor.focusOut()}},CellCtrl.prototype.setFocusInOnEditor=function(){if(this.editing){var cellEditor=this.cellComp.getCellEditor();cellEditor&&cellEditor.focusIn?cellEditor.focusIn():this.focusCell(!0)}},CellCtrl.prototype.onCellChanged=function(event){this.cellComp&&(event.column===this.column&&this.refreshCell({}))},CellCtrl.prototype.refreshCell=function(params){var _a,_b,_c;if(!this.suppressRefreshCell&&!this.editing&&this.cellComp){var colDef=this.column.getColDef(),newData=null!=params&&!!params.newData,suppressFlash=null!=params&&!!params.suppressFlash||!!colDef.suppressCellFlash,noValueProvided=null==colDef.field&&null==colDef.valueGetter&&null==colDef.showRowGroup,forceRefresh=params&&params.forceRefresh||noValueProvided||newData,valuesDifferent=this.updateAndFormatValue();if(forceRefresh||valuesDifferent){this.showValue(newData);var processingFilterChange=this.beans.filterManager.isSuppressFlashingCellsBecauseFiltering();!suppressFlash&&!processingFilterChange&&(this.beans.gridOptionsService.is("enableCellChangeFlash")||colDef.enableCellChangeFlash)&&this.flashCell(),null===(_a=this.cellCustomStyleFeature)||void 0===_a||_a.applyUserStyles(),null===(_b=this.cellCustomStyleFeature)||void 0===_b||_b.applyClassesFromColDef()}this.refreshToolTip(),null===(_c=this.cellCustomStyleFeature)||void 0===_c||_c.applyCellClassRules()}},CellCtrl.prototype.stopEditingAndFocus=function(suppressNavigateAfterEdit,shiftKey){void 0===suppressNavigateAfterEdit&&(suppressNavigateAfterEdit=!1),void 0===shiftKey&&(shiftKey=!1),this.stopRowOrCellEdit(),this.focusCell(!0),suppressNavigateAfterEdit||this.navigateAfterEdit(shiftKey)},CellCtrl.prototype.navigateAfterEdit=function(shiftKey){if(this.beans.gridOptionsService.is("enterNavigatesVerticallyAfterEdit")){var key=shiftKey?KeyCode.UP:KeyCode.DOWN;this.beans.navigationService.navigateToNextCell(null,key,this.getCellPosition(),!1)}},CellCtrl.prototype.flashCell=function(delays){var flashDelay=delays&&delays.flashDelay,fadeDelay=delays&&delays.fadeDelay;this.animateCell("data-changed",flashDelay,fadeDelay)},CellCtrl.prototype.animateCell=function(cssName,flashDelay,fadeDelay){var _a,_b,_this=this;if(this.cellComp){var fullName="ag-cell-"+cssName,animationFullName="ag-cell-"+cssName+"-animation",gridOptionsService=this.beans.gridOptionsService;flashDelay||(flashDelay=null!==(_a=gridOptionsService.getNum("cellFlashDelay"))&&void 0!==_a?_a:500),exists(fadeDelay)||(fadeDelay=null!==(_b=gridOptionsService.getNum("cellFadeDelay"))&&void 0!==_b?_b:1e3),this.cellComp.addOrRemoveCssClass(fullName,!0),this.cellComp.addOrRemoveCssClass(animationFullName,!1),window.setTimeout((function(){_this.isAlive()&&(_this.cellComp.addOrRemoveCssClass(fullName,!1),_this.cellComp.addOrRemoveCssClass(animationFullName,!0),_this.eGui.style.transition="background-color "+fadeDelay+"ms",window.setTimeout((function(){_this.isAlive()&&(_this.cellComp.addOrRemoveCssClass(animationFullName,!1),_this.eGui.style.transition="")}),fadeDelay))}),flashDelay)}},CellCtrl.prototype.onFlashCells=function(event){if(this.cellComp){var cellId=this.beans.cellPositionUtils.createId(this.getCellPosition());event.cells[cellId]&&this.animateCell("highlight")}},CellCtrl.prototype.isCellEditable=function(){return this.column.isCellEditable(this.rowNode)},CellCtrl.prototype.isSuppressFillHandle=function(){return this.column.isSuppressFillHandle()},CellCtrl.prototype.formatValue=function(value){var _a;return null!==(_a=this.callValueFormatter(value))&&void 0!==_a?_a:value},CellCtrl.prototype.callValueFormatter=function(value){return this.beans.valueFormatterService.formatValue(this.column,this.rowNode,value)},CellCtrl.prototype.updateAndFormatValue=function(force){void 0===force&&(force=!1);var oldValue=this.value,oldValueFormatted=this.valueFormatted;return this.value=this.rowNode.getValueFromValueService(this.column),this.valueFormatted=this.callValueFormatter(this.value),!!force||(!this.valuesAreEqual(oldValue,this.value)||this.valueFormatted!=oldValueFormatted)},CellCtrl.prototype.valuesAreEqual=function(val1,val2){var colDef=this.column.getColDef();return colDef.equals?colDef.equals(val1,val2):val1===val2},CellCtrl.prototype.getComp=function(){return this.cellComp},CellCtrl.prototype.getValue=function(){return this.value},CellCtrl.prototype.getValueFormatted=function(){return this.valueFormatted},CellCtrl.prototype.addDomData=function(){var _this=this,element=this.getGui();this.beans.gridOptionsService.setDomData(element,CellCtrl.DOM_DATA_KEY_CELL_CTRL,this),this.addDestroyFunc((function(){return _this.beans.gridOptionsService.setDomData(element,CellCtrl.DOM_DATA_KEY_CELL_CTRL,null)}))},CellCtrl.prototype.createEvent=function(domEvent,eventType){return{type:eventType,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),context:this.beans.gridOptionsService.context,api:this.beans.gridApi,columnApi:this.beans.columnApi,rowPinned:this.rowNode.rowPinned,event:domEvent,rowIndex:this.rowNode.rowIndex}},CellCtrl.prototype.processCharacter=function(event){var _a;null===(_a=this.cellKeyboardListenerFeature)||void 0===_a||_a.processCharacter(event)},CellCtrl.prototype.onKeyDown=function(event){var _a;null===(_a=this.cellKeyboardListenerFeature)||void 0===_a||_a.onKeyDown(event)},CellCtrl.prototype.onMouseEvent=function(eventName,mouseEvent){var _a;null===(_a=this.cellMouseListenerFeature)||void 0===_a||_a.onMouseEvent(eventName,mouseEvent)},CellCtrl.prototype.getGui=function(){return this.eGui},CellCtrl.prototype.refreshToolTip=function(){var _a;null===(_a=this.tooltipFeature)||void 0===_a||_a.refreshToolTip()},CellCtrl.prototype.getColSpanningList=function(){return this.cellPositionFeature.getColSpanningList()},CellCtrl.prototype.onLeftChanged=function(){var _a;this.cellComp&&(null===(_a=this.cellPositionFeature)||void 0===_a||_a.onLeftChanged())},CellCtrl.prototype.onDisplayedColumnsChanged=function(){this.eGui&&this.setAriaColIndex()},CellCtrl.prototype.setAriaColIndex=function(){var colIdx=this.beans.columnModel.getAriaColumnIndex(this.column);setAriaColIndex(this.getGui(),colIdx)},CellCtrl.prototype.isSuppressNavigable=function(){return this.column.isSuppressNavigable(this.rowNode)},CellCtrl.prototype.onWidthChanged=function(){var _a;return null===(_a=this.cellPositionFeature)||void 0===_a?void 0:_a.onWidthChanged()},CellCtrl.prototype.getColumn=function(){return this.column},CellCtrl.prototype.getRowNode=function(){return this.rowNode},CellCtrl.prototype.getBeans=function(){return this.beans},CellCtrl.prototype.isPrintLayout=function(){return this.printLayout},CellCtrl.prototype.appendChild=function(htmlElement){this.eGui.appendChild(htmlElement)},CellCtrl.prototype.refreshHandle=function(){this.cellRangeFeature&&this.cellRangeFeature.refreshHandle()},CellCtrl.prototype.getCellPosition=function(){return this.cellPosition},CellCtrl.prototype.isEditing=function(){return this.editing},CellCtrl.prototype.startRowOrCellEdit=function(key,event){void 0===event&&(event=null),this.cellComp&&("fullRow"===this.beans.gridOptionsService.get("editType")?this.rowCtrl.startRowEditing(key,this):this.startEditing(key,!0,event))},CellCtrl.prototype.getRowCtrl=function(){return this.rowCtrl},CellCtrl.prototype.getRowPosition=function(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}},CellCtrl.prototype.updateRangeBordersIfRangeCount=function(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()},CellCtrl.prototype.onRangeSelectionChanged=function(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()},CellCtrl.prototype.isRangeSelectionEnabled=function(){return null!=this.cellRangeFeature},CellCtrl.prototype.focusCell=function(forceBrowserFocus){void 0===forceBrowserFocus&&(forceBrowserFocus=!1),this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus})},CellCtrl.prototype.onRowIndexChanged=function(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()},CellCtrl.prototype.onFirstRightPinnedChanged=function(){if(this.cellComp){var firstRightPinned=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass("ag-cell-first-right-pinned",firstRightPinned)}},CellCtrl.prototype.onLastLeftPinnedChanged=function(){if(this.cellComp){var lastLeftPinned=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass("ag-cell-last-left-pinned",lastLeftPinned)}},CellCtrl.prototype.onCellFocused=function(event){if(!this.beans.gridOptionsService.is("suppressCellFocus")){var cellFocused=this.beans.focusService.isCellFocused(this.cellPosition);if(this.cellComp){if(this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass("ag-cell-focus",cellFocused),cellFocused&&event&&event.forceBrowserFocus)this.cellComp.getFocusableElement().focus({preventScroll:!!event.preventScrollOnBrowserFocus});var fullRowEdit="fullRow"===this.beans.gridOptionsService.get("editType");cellFocused||fullRowEdit||!this.editing||this.stopRowOrCellEdit()}else cellFocused&&(null==event?void 0:event.forceBrowserFocus)&&(this.focusEventToRestore=event)}},CellCtrl.prototype.createCellPosition=function(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:makeNull(this.rowNode.rowPinned),column:this.column}},CellCtrl.prototype.applyStaticCssClasses=function(){this.cellComp.addOrRemoveCssClass("ag-cell",!0),this.cellComp.addOrRemoveCssClass("ag-cell-not-inline-editing",!0);var autoHeight=1==this.column.isAutoHeight();this.cellComp.addOrRemoveCssClass("ag-cell-auto-height",autoHeight),this.cellComp.addOrRemoveCssClass("ag-cell-normal-height",!autoHeight)},CellCtrl.prototype.onColumnHover=function(){if(this.cellComp&&this.beans.gridOptionsService.is("columnHoverHighlight")){var isHovered=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass("ag-column-hover",isHovered)}},CellCtrl.prototype.onColDefChanged=function(){this.cellComp&&(this.setWrapText(),this.editing||this.refreshCell({forceRefresh:!0,suppressFlash:!0}))},CellCtrl.prototype.setWrapText=function(){var value=1==this.column.getColDef().wrapText;this.cellComp.addOrRemoveCssClass("ag-cell-wrap-text",value)},CellCtrl.prototype.dispatchCellContextMenuEvent=function(event){var colDef=this.column.getColDef(),cellContextMenuEvent=this.createEvent(event,Events.EVENT_CELL_CONTEXT_MENU);this.beans.eventService.dispatchEvent(cellContextMenuEvent),colDef.onCellContextMenu&&window.setTimeout((function(){return colDef.onCellContextMenu(cellContextMenuEvent)}),0)},CellCtrl.prototype.getCellRenderer=function(){return this.cellComp?this.cellComp.getCellRenderer():null},CellCtrl.prototype.getCellEditor=function(){return this.cellComp?this.cellComp.getCellEditor():null},CellCtrl.prototype.destroy=function(){this.onCellCompAttachedFuncs=[],_super.prototype.destroy.call(this)},CellCtrl.prototype.createSelectionCheckbox=function(){var cbSelectionComponent=new CheckboxSelectionComponent;return this.beans.context.createBean(cbSelectionComponent),cbSelectionComponent.init({rowNode:this.rowNode,column:this.column}),cbSelectionComponent},CellCtrl.prototype.createDndSource=function(){var dndSourceComp=new DndSourceComp(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(dndSourceComp),dndSourceComp},CellCtrl.prototype.registerRowDragger=function(customElement,dragStartPixels,suppressVisibilityChange){var _this=this;if(this.customRowDragComp)this.customRowDragComp.setDragElement(customElement,dragStartPixels);else{var newComp=this.createRowDragComp(customElement,dragStartPixels,suppressVisibilityChange);newComp&&(this.customRowDragComp=newComp,this.addDestroyFunc((function(){_this.beans.context.destroyBean(newComp),_this.customRowDragComp=null})))}},CellCtrl.prototype.createRowDragComp=function(customElement,dragStartPixels,suppressVisibilityChange){var _this=this,pagination=this.beans.gridOptionsService.is("pagination"),rowDragManaged=this.beans.gridOptionsService.is("rowDragManaged"),clientSideRowModelActive=this.beans.gridOptionsService.isRowModelType("clientSide");if(rowDragManaged){if(!clientSideRowModelActive)return void doOnce((function(){return console.warn("AG Grid: managed row dragging is only allowed in the Client Side Row Model")}),"CellComp.addRowDragging");if(pagination)return void doOnce((function(){return console.warn("AG Grid: managed row dragging is not possible when doing pagination")}),"CellComp.addRowDragging")}var rowDragComp=new RowDragComp((function(){return _this.value}),this.rowNode,this.column,customElement,dragStartPixels,suppressVisibilityChange);return this.beans.context.createBean(rowDragComp),rowDragComp},CellCtrl.DOM_DATA_KEY_CELL_CTRL="cellCtrl",CellCtrl}(BeanStub),__extends$1W=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__read$l=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spreadArray$h=function(to,from){for(var i=0,il=from.length,j=to.length;i<il;i++,j++)to[j]=from[i];return to};!function(RowType){RowType.Normal="Normal",RowType.FullWidth="FullWidth",RowType.FullWidthLoading="FullWidthLoading",RowType.FullWidthGroup="FullWidthGroup",RowType.FullWidthDetail="FullWidthDetail"}(RowType$1||(RowType$1={}));var RowContainerName,RowContainerType,instanceIdSequence$2=0,RowCtrl=function(_super){function RowCtrl(rowNode,beans,animateIn,useAnimationFrameForCreate,printLayout){var _this=_super.call(this)||this;return _this.allRowGuis=[],_this.active=!0,_this.centerCellCtrls={list:[],map:{}},_this.leftCellCtrls={list:[],map:{}},_this.rightCellCtrls={list:[],map:{}},_this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},_this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},_this.lastMouseDownOnDragger=!1,_this.emptyStyle={},_this.updateColumnListsPending=!1,_this.rowId=null,_this.businessKeySanitised=null,_this.beans=beans,_this.gridOptionsService=beans.gridOptionsService,_this.rowNode=rowNode,_this.paginationPage=beans.paginationProxy.getCurrentPage(),_this.useAnimationFrameForCreate=useAnimationFrameForCreate,_this.printLayout=printLayout,_this.instanceId=rowNode.id+"-"+instanceIdSequence$2++,_this.rowId=escapeString(rowNode.id),_this.initRowBusinessKey(),_this.rowFocused=beans.focusService.isRowFocused(_this.rowNode.rowIndex,_this.rowNode.rowPinned),_this.rowLevel=beans.rowCssClassCalculator.calculateRowLevel(_this.rowNode),_this.setRowType(),_this.setAnimateFlags(animateIn),_this.rowStyles=_this.processStylesFromGridOptions(),_this.isFullWidth()&&!_this.gridOptionsService.is("suppressCellFocus")&&(_this.tabIndex=-1),_this.addListeners(),_this}return __extends$1W(RowCtrl,_super),RowCtrl.prototype.initRowBusinessKey=function(){this.businessKeyForNodeFunc=this.gridOptionsService.get("getBusinessKeyForNode"),this.updateRowBusinessKey()},RowCtrl.prototype.updateRowBusinessKey=function(){if("function"==typeof this.businessKeyForNodeFunc){var businessKey=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=escapeString(businessKey)}},RowCtrl.prototype.getRowId=function(){return this.rowId},RowCtrl.prototype.getRowStyles=function(){return this.rowStyles},RowCtrl.prototype.getTabIndex=function(){return this.tabIndex},RowCtrl.prototype.isSticky=function(){return this.rowNode.sticky},RowCtrl.prototype.getBeans=function(){return this.beans},RowCtrl.prototype.getInstanceId=function(){return this.instanceId},RowCtrl.prototype.setComp=function(rowComp,element,containerType){var gui={rowComp,element,containerType};this.allRowGuis.push(gui),containerType===RowContainerType.LEFT?this.leftGui=gui:containerType===RowContainerType.RIGHT?this.rightGui=gui:containerType===RowContainerType.FULL_WIDTH?this.fullWidthGui=gui:this.centerGui=gui,this.initialiseRowComp(gui),"FullWidthLoading"===this.rowType||this.rowNode.rowPinned||this.beans.rowRenderer.dispatchFirstDataRenderedEvent()},RowCtrl.prototype.unsetComp=function(containerType){switch(this.allRowGuis=this.allRowGuis.filter((function(rowGui){return rowGui.containerType!==containerType})),containerType){case RowContainerType.LEFT:this.leftGui=void 0;break;case RowContainerType.RIGHT:this.rightGui=void 0;break;case RowContainerType.FULL_WIDTH:this.fullWidthGui=void 0;break;case RowContainerType.CENTER:this.centerGui=void 0}},RowCtrl.prototype.isCacheable=function(){return this.rowType===RowType$1.FullWidthDetail&&this.gridOptionsService.is("keepDetailRows")},RowCtrl.prototype.setCached=function(cached){var displayValue=cached?"none":"";this.allRowGuis.forEach((function(rg){return rg.element.style.display=displayValue}))},RowCtrl.prototype.initialiseRowComp=function(gui){var _this=this,gos=this.gridOptionsService;this.listenOnDomOrder(gui),this.onRowHeightChanged(gui),this.updateRowIndexes(gui),this.setFocusedClasses(gui),this.setStylesFromGridOptions(!1,gui),gos.isRowSelection()&&this.rowNode.selectable&&this.onRowSelected(gui),this.updateColumnLists(!this.useAnimationFrameForCreate);var comp=gui.rowComp;this.getInitialRowClasses(gui.containerType).forEach((function(name){return comp.addOrRemoveCssClass(name,!0)})),this.executeSlideAndFadeAnimations(gui),this.rowNode.group&&setAriaExpanded(gui.element,1==this.rowNode.expanded),this.setRowCompRowId(comp),this.setRowCompRowBusinessKey(comp),gos.setDomData(gui.element,RowCtrl.DOM_DATA_KEY_ROW_CTRL,this),this.addDestroyFunc((function(){return gos.setDomData(gui.element,RowCtrl.DOM_DATA_KEY_ROW_CTRL,null)})),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,gui.element),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(gui.element),this.isFullWidth()&&this.setupFullWidth(gui),gos.is("rowDragEntireRow")&&this.addRowDraggerToRow(gui),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask((function(){_this.isAlive()&&gui.rowComp.addOrRemoveCssClass("ag-after-created",!0)})),this.executeProcessRowPostCreateFunc()},RowCtrl.prototype.setRowCompRowBusinessKey=function(comp){null!=this.businessKeySanitised&&comp.setRowBusinessKey(this.businessKeySanitised)},RowCtrl.prototype.getBusinessKey=function(){return this.businessKeySanitised},RowCtrl.prototype.setRowCompRowId=function(comp){this.rowId=escapeString(this.rowNode.id),null!=this.rowId&&comp.setRowId(this.rowId)},RowCtrl.prototype.executeSlideAndFadeAnimations=function(gui){var _this=this,containerType=gui.containerType;this.slideInAnimation[containerType]&&(executeNextVMTurn((function(){_this.onTopChanged()})),this.slideInAnimation[containerType]=!1),this.fadeInAnimation[containerType]&&(executeNextVMTurn((function(){gui.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)})),this.fadeInAnimation[containerType]=!1)},RowCtrl.prototype.addRowDraggerToRow=function(gui){if(this.gridOptionsService.is("enableRangeSelection"))doOnce((function(){console.warn("AG Grid: Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `enableRangeSelection: true`")}),"rowDragAndRangeSelectionEnabled");else{var translate=this.beans.localeService.getLocaleTextFunc(),rowDragComp=new RowDragComp((function(){return"1 "+translate("rowDragRow","row")}),this.rowNode,void 0,gui.element,void 0,!0);this.createManagedBean(rowDragComp,this.beans.context)}},RowCtrl.prototype.setupFullWidth=function(gui){var pinned=this.getPinnedForContainer(gui.containerType),params=this.createFullWidthParams(gui.element,pinned);if(this.rowType!=RowType$1.FullWidthDetail||ModuleRegistry.__assertRegistered(ModuleNames.MasterDetailModule,"cell renderer 'agDetailCellRenderer' (for master detail)",this.beans.context.getGridId())){var compDetails;switch(this.rowType){case RowType$1.FullWidthDetail:compDetails=this.beans.userComponentFactory.getFullWidthDetailCellRendererDetails(params);break;case RowType$1.FullWidthGroup:compDetails=this.beans.userComponentFactory.getFullWidthGroupCellRendererDetails(params);break;case RowType$1.FullWidthLoading:compDetails=this.beans.userComponentFactory.getFullWidthLoadingCellRendererDetails(params);break;default:compDetails=this.beans.userComponentFactory.getFullWidthCellRendererDetails(params)}gui.rowComp.showFullWidth(compDetails)}},RowCtrl.prototype.isPrintLayout=function(){return this.printLayout},RowCtrl.prototype.getFullWidthCellRenderer=function(){var _a,_b;return null===(_b=null===(_a=this.fullWidthGui)||void 0===_a?void 0:_a.rowComp)||void 0===_b?void 0:_b.getFullWidthCellRenderer()},RowCtrl.prototype.getCellElement=function(column){var cellCtrl=this.getCellCtrl(column);return cellCtrl?cellCtrl.getGui():null},RowCtrl.prototype.executeProcessRowPostCreateFunc=function(){var func=this.gridOptionsService.getCallback("processRowPostCreate");func&&this.areAllContainersReady()&&func({eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)})},RowCtrl.prototype.areAllContainersReady=function(){var isLeftReady=!!this.leftGui||!this.beans.columnModel.isPinningLeft(),isCenterReady=!!this.centerGui,isRightReady=!!this.rightGui||!this.beans.columnModel.isPinningRight();return isLeftReady&&isCenterReady&&isRightReady},RowCtrl.prototype.setRowType=function(){var isStub=this.rowNode.stub,isFullWidthCell=this.rowNode.isFullWidthCell(),isDetailCell=this.beans.doingMasterDetail&&this.rowNode.detail,pivotMode=this.beans.columnModel.isPivotMode(),isFullWidthGroup=!!this.rowNode.group&&!this.rowNode.footer&&this.gridOptionsService.isGroupUseEntireRow(pivotMode);this.rowType=isStub?RowType$1.FullWidthLoading:isDetailCell?RowType$1.FullWidthDetail:isFullWidthCell?RowType$1.FullWidth:isFullWidthGroup?RowType$1.FullWidthGroup:RowType$1.Normal},RowCtrl.prototype.updateColumnLists=function(suppressAnimationFrame,useFlushSync){var _this=this;(void 0===suppressAnimationFrame&&(suppressAnimationFrame=!1),void 0===useFlushSync&&(useFlushSync=!1),this.isFullWidth())||(suppressAnimationFrame||this.gridOptionsService.is("suppressAnimationFrame")||this.printLayout?this.updateColumnListsImpl(useFlushSync):this.updateColumnListsPending||(this.beans.animationFrameService.createTask((function(){_this.active&&_this.updateColumnListsImpl(!0)}),this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0))},RowCtrl.prototype.createCellCtrls=function(prev,cols,pinned){var _this=this;void 0===pinned&&(pinned=null);var res={list:[],map:{}},addCell=function(colInstanceId,cellCtrl){res.list.push(cellCtrl),res.map[colInstanceId]=cellCtrl};return cols.forEach((function(col){var colInstanceId=col.getInstanceId(),cellCtrl=prev.map[colInstanceId];cellCtrl||(cellCtrl=new CellCtrl(col,_this.rowNode,_this.beans,_this)),addCell(colInstanceId,cellCtrl)})),prev.list.forEach((function(prevCellCtrl){null!=res.map[prevCellCtrl.getColumn().getInstanceId()]||(!_this.isCellEligibleToBeRemoved(prevCellCtrl,pinned)?addCell(prevCellCtrl.getColumn().getInstanceId(),prevCellCtrl):prevCellCtrl.destroy())})),res},RowCtrl.prototype.updateColumnListsImpl=function(useFlushSync){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(useFlushSync)},RowCtrl.prototype.setCellCtrls=function(useFlushSync){var _this=this;this.allRowGuis.forEach((function(item){var cellControls=_this.getCellCtrlsForContainer(item.containerType);item.rowComp.setCellCtrls(cellControls,useFlushSync)}))},RowCtrl.prototype.getCellCtrlsForContainer=function(containerType){switch(containerType){case RowContainerType.LEFT:return this.leftCellCtrls.list;case RowContainerType.RIGHT:return this.rightCellCtrls.list;case RowContainerType.FULL_WIDTH:return[];case RowContainerType.CENTER:return this.centerCellCtrls.list;default:throw new Error("Unhandled case: "+containerType)}},RowCtrl.prototype.createAllCellCtrls=function(){var columnModel=this.beans.columnModel;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,columnModel.getAllDisplayedColumns()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{var centerCols=columnModel.getViewportCenterColumnsForRow(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,centerCols);var leftCols=columnModel.getDisplayedLeftColumnsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,leftCols,"left");var rightCols=columnModel.getDisplayedRightColumnsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,rightCols,"right")}},RowCtrl.prototype.isCellEligibleToBeRemoved=function(cellCtrl,nextContainerPinned){if(cellCtrl.getColumn().getPinned()!=nextContainerPinned)return true;var editing=cellCtrl.isEditing(),focused=this.beans.focusService.isCellFocused(cellCtrl.getCellPosition());if(editing||focused){var column_1=cellCtrl.getColumn();return!(this.beans.columnModel.getAllDisplayedColumns().indexOf(column_1)>=0)}return true},RowCtrl.prototype.getDomOrder=function(){return this.gridOptionsService.is("ensureDomOrder")||this.gridOptionsService.isDomLayout("print")},RowCtrl.prototype.listenOnDomOrder=function(gui){var _this=this,listener=function(){gui.rowComp.setDomOrder(_this.getDomOrder())};this.addManagedPropertyListener("domLayout",listener),this.addManagedPropertyListener("ensureDomOrder",listener)},RowCtrl.prototype.setAnimateFlags=function(animateIn){if(!this.isSticky()&&animateIn){var oldRowTopExists=exists(this.rowNode.oldRowTop),pinningLeft=this.beans.columnModel.isPinningLeft(),pinningRight=this.beans.columnModel.isPinningRight();if(oldRowTopExists){if(this.isFullWidth()&&!this.gridOptionsService.is("embedFullWidthRows"))return void(this.slideInAnimation.fullWidth=!0);this.slideInAnimation.center=!0,this.slideInAnimation.left=pinningLeft,this.slideInAnimation.right=pinningRight}else{if(this.isFullWidth()&&!this.gridOptionsService.is("embedFullWidthRows"))return void(this.fadeInAnimation.fullWidth=!0);this.fadeInAnimation.center=!0,this.fadeInAnimation.left=pinningLeft,this.fadeInAnimation.right=pinningRight}}},RowCtrl.prototype.isEditing=function(){return this.editingRow},RowCtrl.prototype.stopRowEditing=function(cancel){this.stopEditing(cancel)},RowCtrl.prototype.isFullWidth=function(){return this.rowType!==RowType$1.Normal},RowCtrl.prototype.getRowType=function(){return this.rowType},RowCtrl.prototype.refreshFullWidth=function(){var _this=this,tryRefresh=function(gui,pinned){if(!gui)return!0;var cellRenderer=gui.rowComp.getFullWidthCellRenderer();if(!cellRenderer)return!1;if(!cellRenderer.refresh)return!1;var params=_this.createFullWidthParams(gui.element,pinned);return cellRenderer.refresh(params)},fullWidthSuccess=tryRefresh(this.fullWidthGui,null),centerSuccess=tryRefresh(this.centerGui,null),leftSuccess=tryRefresh(this.leftGui,"left"),rightSuccess=tryRefresh(this.rightGui,"right");return fullWidthSuccess&&centerSuccess&&leftSuccess&&rightSuccess},RowCtrl.prototype.addListeners=function(){var _this=this;this.addManagedListener(this.rowNode,RowNode.EVENT_HEIGHT_CHANGED,(function(){return _this.onRowHeightChanged()})),this.addManagedListener(this.rowNode,RowNode.EVENT_ROW_SELECTED,(function(){return _this.onRowSelected()})),this.addManagedListener(this.rowNode,RowNode.EVENT_ROW_INDEX_CHANGED,this.onRowIndexChanged.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_TOP_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_EXPANDED_CHANGED,this.updateExpandedCss.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_HAS_CHILDREN_CHANGED,this.updateExpandedCss.bind(this)),this.rowNode.detail&&this.addManagedListener(this.rowNode.parent,RowNode.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_CELL_CHANGED,this.onRowNodeCellChanged.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_HIGHLIGHT_CHANGED,this.onRowNodeHighlightChanged.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_DRAGGING_CHANGED,this.onRowNodeDraggingChanged.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_UI_LEVEL_CHANGED,this.onUiLevelChanged.bind(this));var eventService=this.beans.eventService;this.addManagedListener(eventService,Events.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,this.onPaginationPixelOffsetChanged.bind(this)),this.addManagedListener(eventService,Events.EVENT_HEIGHT_SCALE_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(eventService,Events.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(eventService,Events.EVENT_CELL_FOCUSED,this.onCellFocused.bind(this)),this.addManagedListener(eventService,Events.EVENT_CELL_FOCUS_CLEARED,this.onCellFocusCleared.bind(this)),this.addManagedListener(eventService,Events.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),this.addManagedListener(eventService,Events.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedListener(eventService,Events.EVENT_COLUMN_MOVED,this.onColumnMoved.bind(this)),this.addListenersForCellComps()},RowCtrl.prototype.onColumnMoved=function(){this.updateColumnLists()},RowCtrl.prototype.addListenersForCellComps=function(){var _this=this;this.addManagedListener(this.rowNode,RowNode.EVENT_ROW_INDEX_CHANGED,(function(){_this.getAllCellCtrls().forEach((function(cellCtrl){return cellCtrl.onRowIndexChanged()}))})),this.addManagedListener(this.rowNode,RowNode.EVENT_CELL_CHANGED,(function(event){_this.getAllCellCtrls().forEach((function(cellCtrl){return cellCtrl.onCellChanged(event)}))}))},RowCtrl.prototype.onRowNodeDataChanged=function(event){var _this=this;this.isFullWidth()!==!!this.rowNode.isFullWidthCell()?this.beans.rowRenderer.redrawRow(this.rowNode):this.isFullWidth()?this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode):(this.getAllCellCtrls().forEach((function(cellCtrl){return cellCtrl.refreshCell({suppressFlash:!event.update,newData:!event.update})})),this.allRowGuis.forEach((function(gui){_this.setRowCompRowId(gui.rowComp),_this.updateRowBusinessKey(),_this.setRowCompRowBusinessKey(gui.rowComp)})),this.onRowSelected(),this.postProcessCss())},RowCtrl.prototype.onRowNodeCellChanged=function(){this.postProcessCss()},RowCtrl.prototype.postProcessCss=function(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()},RowCtrl.prototype.onRowNodeHighlightChanged=function(){var highlighted=this.rowNode.highlighted;this.allRowGuis.forEach((function(gui){var aboveOn=highlighted===RowHighlightPosition.Above,belowOn=highlighted===RowHighlightPosition.Below;gui.rowComp.addOrRemoveCssClass("ag-row-highlight-above",aboveOn),gui.rowComp.addOrRemoveCssClass("ag-row-highlight-below",belowOn)}))},RowCtrl.prototype.onRowNodeDraggingChanged=function(){this.postProcessRowDragging()},RowCtrl.prototype.postProcessRowDragging=function(){var dragging=this.rowNode.dragging;this.allRowGuis.forEach((function(gui){return gui.rowComp.addOrRemoveCssClass("ag-row-dragging",dragging)}))},RowCtrl.prototype.updateExpandedCss=function(){var expandable=this.rowNode.isExpandable(),expanded=1==this.rowNode.expanded;this.allRowGuis.forEach((function(gui){gui.rowComp.addOrRemoveCssClass("ag-row-group",expandable),gui.rowComp.addOrRemoveCssClass("ag-row-group-expanded",expandable&&expanded),gui.rowComp.addOrRemoveCssClass("ag-row-group-contracted",expandable&&!expanded),setAriaExpanded(gui.element,expandable&&expanded)}))},RowCtrl.prototype.onDisplayedColumnsChanged=function(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()},RowCtrl.prototype.onVirtualColumnsChanged=function(){this.updateColumnLists(!1,!0)},RowCtrl.prototype.getRowPosition=function(){return{rowPinned:makeNull(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}},RowCtrl.prototype.onKeyboardNavigate=function(keyboardEvent){var currentFullWidthComp=this.allRowGuis.find((function(c){return c.element.contains(keyboardEvent.target)}));if((currentFullWidthComp?currentFullWidthComp.element:null)===keyboardEvent.target){var node=this.rowNode,lastFocusedCell=this.beans.focusService.getFocusedCell(),cellPosition={rowIndex:node.rowIndex,rowPinned:node.rowPinned,column:lastFocusedCell&&lastFocusedCell.column};this.beans.navigationService.navigateToNextCell(keyboardEvent,keyboardEvent.key,cellPosition,!0),keyboardEvent.preventDefault()}},RowCtrl.prototype.onTabKeyDown=function(keyboardEvent){if(!keyboardEvent.defaultPrevented&&!isStopPropagationForAgGrid(keyboardEvent)){var currentFullWidthComp=this.allRowGuis.find((function(c){return c.element.contains(keyboardEvent.target)})),currentFullWidthContainer=currentFullWidthComp?currentFullWidthComp.element:null,isFullWidthContainerFocused=currentFullWidthContainer===keyboardEvent.target,nextEl=null;isFullWidthContainerFocused||(nextEl=this.beans.focusService.findNextFocusableElement(currentFullWidthContainer,!1,keyboardEvent.shiftKey)),(this.isFullWidth()&&isFullWidthContainerFocused||!nextEl)&&this.beans.navigationService.onTabKeyDown(this,keyboardEvent)}},RowCtrl.prototype.onFullWidthRowFocused=function(event){var _a,node=this.rowNode,isFocused=!!event&&(this.isFullWidth()&&event.rowIndex===node.rowIndex&&event.rowPinned==node.rowPinned),element=this.fullWidthGui?this.fullWidthGui.element:null===(_a=this.centerGui)||void 0===_a?void 0:_a.element;element&&(element.classList.toggle("ag-full-width-focus",isFocused),isFocused&&element.focus({preventScroll:!0}))},RowCtrl.prototype.refreshCell=function(cellCtrl){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,cellCtrl),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,cellCtrl),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,cellCtrl),this.updateColumnLists()},RowCtrl.prototype.removeCellCtrl=function(prev,cellCtrlToRemove){var res={list:[],map:{}};return prev.list.forEach((function(cellCtrl){cellCtrl!==cellCtrlToRemove&&(res.list.push(cellCtrl),res.map[cellCtrl.getInstanceId()]=cellCtrl)})),res},RowCtrl.prototype.onMouseEvent=function(eventName,mouseEvent){switch(eventName){case"dblclick":this.onRowDblClick(mouseEvent);break;case"click":this.onRowClick(mouseEvent);break;case"touchstart":case"mousedown":this.onRowMouseDown(mouseEvent)}},RowCtrl.prototype.createRowEvent=function(type,domEvent){return{type,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,context:this.gridOptionsService.context,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,event:domEvent}},RowCtrl.prototype.createRowEventWithSource=function(type,domEvent){var event=this.createRowEvent(type,domEvent);return event.source=this,event},RowCtrl.prototype.onRowDblClick=function(mouseEvent){if(!isStopPropagationForAgGrid(mouseEvent)){var agEvent=this.createRowEventWithSource(Events.EVENT_ROW_DOUBLE_CLICKED,mouseEvent);this.beans.eventService.dispatchEvent(agEvent)}},RowCtrl.prototype.onRowMouseDown=function(mouseEvent){if(this.lastMouseDownOnDragger=isElementChildOfClass(mouseEvent.target,"ag-row-drag",3),this.isFullWidth()){var node=this.rowNode,columnModel=this.beans.columnModel;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges(),this.beans.focusService.setFocusedCell({rowIndex:node.rowIndex,column:columnModel.getAllDisplayedColumns()[0],rowPinned:node.rowPinned,forceBrowserFocus:!0})}},RowCtrl.prototype.onRowClick=function(mouseEvent){if(!(isStopPropagationForAgGrid(mouseEvent)||this.lastMouseDownOnDragger)){var agEvent=this.createRowEventWithSource(Events.EVENT_ROW_CLICKED,mouseEvent);this.beans.eventService.dispatchEvent(agEvent);var isMultiKey=mouseEvent.ctrlKey||mouseEvent.metaKey,isShiftKey=mouseEvent.shiftKey;if(!(this.gridOptionsService.is("groupSelectsChildren")&&this.rowNode.group||!this.rowNode.selectable||this.rowNode.rowPinned||!this.gridOptionsService.isRowSelection()||this.gridOptionsService.is("suppressRowClickSelection"))){var multiSelectOnClick=this.gridOptionsService.is("rowMultiSelectWithClick"),rowDeselectionWithCtrl=!this.gridOptionsService.is("suppressRowDeselection"),source="rowClicked";if(this.rowNode.isSelected())multiSelectOnClick?this.rowNode.setSelectedParams({newValue:!1,event:mouseEvent,source}):isMultiKey?rowDeselectionWithCtrl&&this.rowNode.setSelectedParams({newValue:!1,event:mouseEvent,source}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!isShiftKey,rangeSelect:isShiftKey,event:mouseEvent,source});else{var clearSelection=!multiSelectOnClick&&!isMultiKey;this.rowNode.setSelectedParams({newValue:!0,clearSelection,rangeSelect:isShiftKey,event:mouseEvent,source})}}}},RowCtrl.prototype.setupDetailRowAutoHeight=function(eDetailGui){var _this=this;if(this.rowType===RowType$1.FullWidthDetail&&this.gridOptionsService.is("detailRowAutoHeight")){var checkRowSizeFunc=function(){var clientHeight=eDetailGui.clientHeight;if(null!=clientHeight&&clientHeight>0){_this.beans.frameworkOverrides.setTimeout((function(){_this.rowNode.setRowHeight(clientHeight),_this.beans.clientSideRowModel?_this.beans.clientSideRowModel.onRowHeightChanged():_this.beans.serverSideRowModel&&_this.beans.serverSideRowModel.onRowHeightChanged()}),0)}},resizeObserverDestroyFunc=this.beans.resizeObserverService.observeResize(eDetailGui,checkRowSizeFunc);this.addDestroyFunc(resizeObserverDestroyFunc),checkRowSizeFunc()}},RowCtrl.prototype.createFullWidthParams=function(eRow,pinned){var _this=this;return{fullWidth:!0,data:this.rowNode.data,node:this.rowNode,value:this.rowNode.key,valueFormatted:this.rowNode.key,rowIndex:this.rowNode.rowIndex,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,eGridCell:eRow,eParentOfValue:eRow,pinned,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:function(rowDraggerElement,dragStartPixels,value,suppressVisibilityChange){return _this.addFullWidthRowDragging(rowDraggerElement,dragStartPixels,value,suppressVisibilityChange)}}},RowCtrl.prototype.addFullWidthRowDragging=function(rowDraggerElement,dragStartPixels,value,suppressVisibilityChange){if(void 0===value&&(value=""),this.isFullWidth()){var rowDragComp=new RowDragComp((function(){return value}),this.rowNode,void 0,rowDraggerElement,dragStartPixels,suppressVisibilityChange);this.createManagedBean(rowDragComp,this.beans.context)}},RowCtrl.prototype.onUiLevelChanged=function(){var newLevel=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=newLevel){var classToAdd_1="ag-row-level-"+newLevel,classToRemove_1="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach((function(gui){gui.rowComp.addOrRemoveCssClass(classToAdd_1,!0),gui.rowComp.addOrRemoveCssClass(classToRemove_1,!1)}))}this.rowLevel=newLevel},RowCtrl.prototype.isFirstRowOnPage=function(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageFirstRow()},RowCtrl.prototype.isLastRowOnPage=function(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageLastRow()},RowCtrl.prototype.onModelUpdated=function(){this.refreshFirstAndLastRowStyles()},RowCtrl.prototype.refreshFirstAndLastRowStyles=function(){var newFirst=this.isFirstRowOnPage(),newLast=this.isLastRowOnPage();this.firstRowOnPage!==newFirst&&(this.firstRowOnPage=newFirst,this.allRowGuis.forEach((function(gui){return gui.rowComp.addOrRemoveCssClass("ag-row-first",newFirst)}))),this.lastRowOnPage!==newLast&&(this.lastRowOnPage=newLast,this.allRowGuis.forEach((function(gui){return gui.rowComp.addOrRemoveCssClass("ag-row-last",newLast)})))},RowCtrl.prototype.stopEditing=function(cancel){var e_1,_a;if(void 0===cancel&&(cancel=!1),!this.stoppingRowEdit){var cellControls=this.getAllCellCtrls(),isRowEdit=this.editingRow;this.stoppingRowEdit=!0;var fireRowEditEvent=!1;try{for(var cellControls_1=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}(cellControls),cellControls_1_1=cellControls_1.next();!cellControls_1_1.done;cellControls_1_1=cellControls_1.next()){var valueChanged=cellControls_1_1.value.stopEditing(cancel);isRowEdit&&!cancel&&!fireRowEditEvent&&valueChanged&&(fireRowEditEvent=!0)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{cellControls_1_1&&!cellControls_1_1.done&&(_a=cellControls_1.return)&&_a.call(cellControls_1)}finally{if(e_1)throw e_1.error}}if(fireRowEditEvent){var event_1=this.createRowEvent(Events.EVENT_ROW_VALUE_CHANGED);this.beans.eventService.dispatchEvent(event_1)}isRowEdit&&this.setEditingRow(!1),this.stoppingRowEdit=!1}},RowCtrl.prototype.setInlineEditingCss=function(editing){this.allRowGuis.forEach((function(gui){gui.rowComp.addOrRemoveCssClass("ag-row-inline-editing",editing),gui.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!editing)}))},RowCtrl.prototype.setEditingRow=function(value){this.editingRow=value,this.allRowGuis.forEach((function(gui){return gui.rowComp.addOrRemoveCssClass("ag-row-editing",value)}));var event=value?this.createRowEvent(Events.EVENT_ROW_EDITING_STARTED):this.createRowEvent(Events.EVENT_ROW_EDITING_STOPPED);this.beans.eventService.dispatchEvent(event)},RowCtrl.prototype.startRowEditing=function(key,sourceRenderedCell,event){(void 0===key&&(key=null),void 0===sourceRenderedCell&&(sourceRenderedCell=null),void 0===event&&(event=null),this.editingRow)||this.getAllCellCtrls().reduce((function(prev,cellCtrl){var cellStartedEdit=cellCtrl===sourceRenderedCell;return cellStartedEdit?cellCtrl.startEditing(key,cellStartedEdit,event):cellCtrl.startEditing(null,cellStartedEdit,event),!!prev||cellCtrl.isEditing()}),!1)&&this.setEditingRow(!0)},RowCtrl.prototype.getAllCellCtrls=function(){return 0===this.leftCellCtrls.list.length&&0===this.rightCellCtrls.list.length?this.centerCellCtrls.list:__spreadArray$h(__spreadArray$h(__spreadArray$h([],__read$l(this.centerCellCtrls.list)),__read$l(this.leftCellCtrls.list)),__read$l(this.rightCellCtrls.list))},RowCtrl.prototype.postProcessClassesFromGridOptions=function(){var _this=this,cssClasses=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);cssClasses&&cssClasses.length&&cssClasses.forEach((function(classStr){_this.allRowGuis.forEach((function(c){return c.rowComp.addOrRemoveCssClass(classStr,!0)}))}))},RowCtrl.prototype.postProcessRowClassRules=function(){var _this=this;this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,(function(className){_this.allRowGuis.forEach((function(gui){return gui.rowComp.addOrRemoveCssClass(className,!0)}))}),(function(className){_this.allRowGuis.forEach((function(gui){return gui.rowComp.addOrRemoveCssClass(className,!1)}))}))},RowCtrl.prototype.setStylesFromGridOptions=function(updateStyles,gui){var _this=this;updateStyles&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(gui,(function(gui){return gui.rowComp.setUserStyles(_this.rowStyles)}))},RowCtrl.prototype.getPinnedForContainer=function(rowContainerType){return rowContainerType===RowContainerType.LEFT?"left":rowContainerType===RowContainerType.RIGHT?"right":null},RowCtrl.prototype.getInitialRowClasses=function(rowContainerType){var pinned=this.getPinnedForContainer(rowContainerType),params={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[rowContainerType],rowIsEven:this.rowNode.rowIndex%2==0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned};return this.beans.rowCssClassCalculator.getInitialRowClasses(params)},RowCtrl.prototype.processStylesFromGridOptions=function(){var rowStyle=this.gridOptionsService.get("rowStyle");if(!rowStyle||"function"!=typeof rowStyle){var rowStyleFuncResult,rowStyleFunc=this.gridOptionsService.getCallback("getRowStyle");if(rowStyleFunc)rowStyleFuncResult=rowStyleFunc({data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex});return rowStyleFuncResult||rowStyle?Object.assign({},rowStyle,rowStyleFuncResult):this.emptyStyle}console.warn("AG Grid: rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead")},RowCtrl.prototype.onRowSelected=function(gui){var _this=this,selected=!!this.rowNode.isSelected();this.forEachGui(gui,(function(gui){gui.rowComp.addOrRemoveCssClass("ag-row-selected",selected),setAriaSelected(gui.element,!!selected||void 0);var ariaLabel=_this.createAriaLabel();setAriaLabel(gui.element,null==ariaLabel?"":ariaLabel)}))},RowCtrl.prototype.createAriaLabel=function(){var selected=this.rowNode.isSelected();if(!selected||!this.gridOptionsService.is("suppressRowDeselection"))return this.beans.localeService.getLocaleTextFunc()(selected?"ariaRowDeselect":"ariaRowSelect","Press SPACE to "+(selected?"deselect":"select")+" this row.")},RowCtrl.prototype.isUseAnimationFrameForCreate=function(){return this.useAnimationFrameForCreate},RowCtrl.prototype.addHoverFunctionality=function(eRow){var _this=this;this.active&&(this.addManagedListener(eRow,"mouseenter",(function(){return _this.rowNode.onMouseEnter()})),this.addManagedListener(eRow,"mouseleave",(function(){return _this.rowNode.onMouseLeave()})),this.addManagedListener(this.rowNode,RowNode.EVENT_MOUSE_ENTER,(function(){_this.beans.dragService.isDragging()||_this.gridOptionsService.is("suppressRowHoverHighlight")||(eRow.classList.add("ag-row-hover"),_this.rowNode.setHovered(!0))})),this.addManagedListener(this.rowNode,RowNode.EVENT_MOUSE_LEAVE,(function(){eRow.classList.remove("ag-row-hover"),_this.rowNode.setHovered(!1)})))},RowCtrl.prototype.roundRowTopToBounds=function(rowTop){var range=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),minPixel=this.applyPaginationOffset(range.top,!0)-100,maxPixel=this.applyPaginationOffset(range.bottom,!0)+100;return Math.min(Math.max(minPixel,rowTop),maxPixel)},RowCtrl.prototype.getFrameworkOverrides=function(){return this.beans.frameworkOverrides},RowCtrl.prototype.forEachGui=function(gui,callback){gui?callback(gui):this.allRowGuis.forEach(callback)},RowCtrl.prototype.onRowHeightChanged=function(gui){if(null!=this.rowNode.rowHeight){var rowHeight=this.rowNode.rowHeight,defaultRowHeight=this.beans.environment.getDefaultRowHeight(),heightFromFunc=this.gridOptionsService.isGetRowHeightFunction()?this.gridOptionsService.getRowHeightForNode(this.rowNode).height:void 0,lineHeight=heightFromFunc?Math.min(defaultRowHeight,heightFromFunc)-2+"px":void 0;this.forEachGui(gui,(function(gui){gui.element.style.height=rowHeight+"px",lineHeight&&gui.element.style.setProperty("--ag-line-height",lineHeight)}))}},RowCtrl.prototype.addEventListener=function(eventType,listener){_super.prototype.addEventListener.call(this,eventType,listener)},RowCtrl.prototype.removeEventListener=function(eventType,listener){_super.prototype.removeEventListener.call(this,eventType,listener)},RowCtrl.prototype.destroyFirstPass=function(){this.active=!1,this.gridOptionsService.isAnimateRows()&&this.setupRemoveAnimation(),this.rowNode.setHovered(!1);var event=this.createRowEvent(Events.EVENT_VIRTUAL_ROW_REMOVED);this.dispatchEvent(event),this.beans.eventService.dispatchEvent(event),_super.prototype.destroy.call(this)},RowCtrl.prototype.setupRemoveAnimation=function(){if(!this.isSticky())if(null!=this.rowNode.rowTop){var rowTop=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(rowTop)}else this.allRowGuis.forEach((function(gui){return gui.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0)}))},RowCtrl.prototype.destroySecondPass=function(){this.allRowGuis.length=0;var destroyCellCtrls=function(ctrls){return ctrls.list.forEach((function(c){return c.destroy()})),{list:[],map:{}}};this.centerCellCtrls=destroyCellCtrls(this.centerCellCtrls),this.leftCellCtrls=destroyCellCtrls(this.leftCellCtrls),this.rightCellCtrls=destroyCellCtrls(this.rightCellCtrls)},RowCtrl.prototype.setFocusedClasses=function(gui){var _this=this;this.forEachGui(gui,(function(gui){gui.rowComp.addOrRemoveCssClass("ag-row-focus",_this.rowFocused),gui.rowComp.addOrRemoveCssClass("ag-row-no-focus",!_this.rowFocused)}))},RowCtrl.prototype.onCellFocused=function(){this.onCellFocusChanged()},RowCtrl.prototype.onCellFocusCleared=function(){this.onCellFocusChanged()},RowCtrl.prototype.onCellFocusChanged=function(){var rowFocused=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);rowFocused!==this.rowFocused&&(this.rowFocused=rowFocused,this.setFocusedClasses()),!rowFocused&&this.editingRow&&this.stopEditing(!1)},RowCtrl.prototype.onPaginationChanged=function(){var currentPage=this.beans.paginationProxy.getCurrentPage();this.paginationPage!==currentPage&&(this.paginationPage=currentPage,this.onTopChanged()),this.refreshFirstAndLastRowStyles()},RowCtrl.prototype.onTopChanged=function(){this.setRowTop(this.rowNode.rowTop)},RowCtrl.prototype.onPaginationPixelOffsetChanged=function(){this.onTopChanged()},RowCtrl.prototype.applyPaginationOffset=function(topPx,reverse){return void 0===reverse&&(reverse=!1),this.rowNode.isRowPinned()||this.rowNode.sticky?topPx:topPx+this.beans.paginationProxy.getPixelOffset()*(reverse?1:-1)},RowCtrl.prototype.setRowTop=function(pixels){if(!this.printLayout&&exists(pixels)){var afterPaginationPixels=this.applyPaginationOffset(pixels),topPx=(this.rowNode.isRowPinned()||this.rowNode.sticky?afterPaginationPixels:this.beans.rowContainerHeightService.getRealPixelPosition(afterPaginationPixels))+"px";this.setRowTopStyle(topPx)}},RowCtrl.prototype.getInitialRowTop=function(rowContainerType){return this.gridOptionsService.is("suppressRowTransform")?this.getInitialRowTopShared(rowContainerType):void 0},RowCtrl.prototype.getInitialTransform=function(rowContainerType){return this.gridOptionsService.is("suppressRowTransform")?void 0:"translateY("+this.getInitialRowTopShared(rowContainerType)+")"},RowCtrl.prototype.getInitialRowTopShared=function(rowContainerType){if(this.printLayout)return"";var rowTop;if(this.isSticky())rowTop=this.rowNode.stickyRowTop;else{var pixels=this.slideInAnimation[rowContainerType]?this.roundRowTopToBounds(this.rowNode.oldRowTop):this.rowNode.rowTop,afterPaginationPixels=this.applyPaginationOffset(pixels);rowTop=this.rowNode.isRowPinned()?afterPaginationPixels:this.beans.rowContainerHeightService.getRealPixelPosition(afterPaginationPixels)}return rowTop+"px"},RowCtrl.prototype.setRowTopStyle=function(topPx){var suppressRowTransform=this.gridOptionsService.is("suppressRowTransform");this.allRowGuis.forEach((function(gui){return suppressRowTransform?gui.rowComp.setTop(topPx):gui.rowComp.setTransform("translateY("+topPx+")")}))},RowCtrl.prototype.getRowNode=function(){return this.rowNode},RowCtrl.prototype.getCellCtrl=function(column){var res=null;return this.getAllCellCtrls().forEach((function(cellCtrl){cellCtrl.getColumn()==column&&(res=cellCtrl)})),null!=res||this.getAllCellCtrls().forEach((function(cellCtrl){cellCtrl.getColSpanningList().indexOf(column)>=0&&(res=cellCtrl)})),res},RowCtrl.prototype.onRowIndexChanged=function(){null!=this.rowNode.rowIndex&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())},RowCtrl.prototype.getRowIndex=function(){return this.rowNode.getRowIndexString()},RowCtrl.prototype.updateRowIndexes=function(gui){var rowIndexStr=this.rowNode.getRowIndexString(),headerRowCount=this.beans.headerNavigationService.getHeaderRowCount()+this.beans.filterManager.getHeaderRowCount(),rowIsEven=this.rowNode.rowIndex%2==0,ariaRowIndex=headerRowCount+this.rowNode.rowIndex+1;this.forEachGui(gui,(function(c){c.rowComp.setRowIndex(rowIndexStr),c.rowComp.addOrRemoveCssClass("ag-row-even",rowIsEven),c.rowComp.addOrRemoveCssClass("ag-row-odd",!rowIsEven),setAriaRowIndex(c.element,ariaRowIndex)}))},RowCtrl.prototype.getPinnedLeftRowElement=function(){return this.leftGui?this.leftGui.element:void 0},RowCtrl.prototype.getPinnedRightRowElement=function(){return this.rightGui?this.rightGui.element:void 0},RowCtrl.prototype.getBodyRowElement=function(){return this.centerGui?this.centerGui.element:void 0},RowCtrl.prototype.getFullWidthRowElement=function(){return this.fullWidthGui?this.fullWidthGui.element:void 0},RowCtrl.DOM_DATA_KEY_ROW_CTRL="renderedRow",RowCtrl}(BeanStub),__extends$1V=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1Q=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},RowContainerEventsFeature=function(_super){function RowContainerEventsFeature(element){var _this=_super.call(this)||this;return _this.element=element,_this}return __extends$1V(RowContainerEventsFeature,_super),RowContainerEventsFeature.prototype.postConstruct=function(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()},RowContainerEventsFeature.prototype.addKeyboardListeners=function(){var listener=this.processKeyboardEvent.bind(this,"keydown");this.addManagedListener(this.element,"keydown",listener)},RowContainerEventsFeature.prototype.addMouseListeners=function(){var _this=this;["dblclick","contextmenu","mouseover","mouseout","click",isEventSupported("touchstart")?"touchstart":"mousedown"].forEach((function(eventName){var listener=_this.processMouseEvent.bind(_this,eventName);_this.addManagedListener(_this.element,eventName,listener)}))},RowContainerEventsFeature.prototype.processMouseEvent=function(eventName,mouseEvent){if(this.mouseEventService.isEventFromThisGrid(mouseEvent)&&!isStopPropagationForAgGrid(mouseEvent)){var rowComp=this.getRowForEvent(mouseEvent),cellCtrl=this.mouseEventService.getRenderedCellForEvent(mouseEvent);"contextmenu"===eventName?this.handleContextMenuMouseEvent(mouseEvent,null,rowComp,cellCtrl):(cellCtrl&&cellCtrl.onMouseEvent(eventName,mouseEvent),rowComp&&rowComp.onMouseEvent(eventName,mouseEvent))}},RowContainerEventsFeature.prototype.mockContextMenuForIPad=function(){var _this=this;if(isIOSUserAgent()){var touchListener=new TouchListener(this.element);this.addManagedListener(touchListener,TouchListener.EVENT_LONG_TAP,(function(event){var rowComp=_this.getRowForEvent(event.touchEvent),cellComp=_this.mouseEventService.getRenderedCellForEvent(event.touchEvent);_this.handleContextMenuMouseEvent(null,event.touchEvent,rowComp,cellComp)})),this.addDestroyFunc((function(){return touchListener.destroy()}))}},RowContainerEventsFeature.prototype.getRowForEvent=function(event){for(var sourceElement=event.target;sourceElement;){var rowCon=this.gridOptionsService.getDomData(sourceElement,RowCtrl.DOM_DATA_KEY_ROW_CTRL);if(rowCon)return rowCon;sourceElement=sourceElement.parentElement}return null},RowContainerEventsFeature.prototype.handleContextMenuMouseEvent=function(mouseEvent,touchEvent,rowComp,cellCtrl){var rowNode=rowComp?rowComp.getRowNode():null,column=cellCtrl?cellCtrl.getColumn():null,value=null;if(column){var event_1=mouseEvent||touchEvent;cellCtrl.dispatchCellContextMenuEvent(event_1),value=this.valueService.getValue(column,rowNode)}var gridBodyCon=this.ctrlsService.getGridBodyCtrl(),anchorToElement=cellCtrl?cellCtrl.getGui():gridBodyCon.getGridBodyElement();this.contextMenuFactory&&this.contextMenuFactory.onContextMenu(mouseEvent,touchEvent,rowNode,column,value,anchorToElement)},RowContainerEventsFeature.prototype.getControlsForEventTarget=function(target){return{cellCtrl:getCtrlForEventTarget(this.gridOptionsService,target,CellCtrl.DOM_DATA_KEY_CELL_CTRL),rowCtrl:getCtrlForEventTarget(this.gridOptionsService,target,RowCtrl.DOM_DATA_KEY_ROW_CTRL)}},RowContainerEventsFeature.prototype.processKeyboardEvent=function(eventName,keyboardEvent){var _a=this.getControlsForEventTarget(keyboardEvent.target),cellCtrl=_a.cellCtrl,rowCtrl=_a.rowCtrl;keyboardEvent.defaultPrevented||(cellCtrl?this.processCellKeyboardEvent(cellCtrl,eventName,keyboardEvent):rowCtrl&&rowCtrl.isFullWidth()&&this.processFullWidthRowKeyboardEvent(rowCtrl,eventName,keyboardEvent))},RowContainerEventsFeature.prototype.processCellKeyboardEvent=function(cellCtrl,eventName,keyboardEvent){var rowNode=cellCtrl.getRowNode(),column=cellCtrl.getColumn(),editing=cellCtrl.isEditing();isUserSuppressingKeyboardEvent(this.gridOptionsService,keyboardEvent,rowNode,column,editing)||"keydown"===eventName&&(!editing&&this.navigationService.handlePageScrollingKey(keyboardEvent)||cellCtrl.onKeyDown(keyboardEvent),this.doGridOperations(keyboardEvent,cellCtrl.isEditing()),isEventFromPrintableCharacter(keyboardEvent)&&cellCtrl.processCharacter(keyboardEvent));if("keydown"===eventName){var cellKeyDownEvent=cellCtrl.createEvent(keyboardEvent,Events.EVENT_CELL_KEY_DOWN);this.eventService.dispatchEvent(cellKeyDownEvent)}},RowContainerEventsFeature.prototype.processFullWidthRowKeyboardEvent=function(rowComp,eventName,keyboardEvent){var rowNode=rowComp.getRowNode(),focusedCell=this.focusService.getFocusedCell(),column=focusedCell&&focusedCell.column;if(!isUserSuppressingKeyboardEvent(this.gridOptionsService,keyboardEvent,rowNode,column,!1)){var key=keyboardEvent.key;if("keydown"===eventName)switch(key){case KeyCode.PAGE_HOME:case KeyCode.PAGE_END:case KeyCode.PAGE_UP:case KeyCode.PAGE_DOWN:this.navigationService.handlePageScrollingKey(keyboardEvent,!0);break;case KeyCode.UP:case KeyCode.DOWN:rowComp.onKeyboardNavigate(keyboardEvent);break;case KeyCode.TAB:rowComp.onTabKeyDown(keyboardEvent)}}if("keydown"===eventName){var cellKeyDownEvent=rowComp.createRowEvent(Events.EVENT_CELL_KEY_DOWN,keyboardEvent);this.eventService.dispatchEvent(cellKeyDownEvent)}},RowContainerEventsFeature.prototype.doGridOperations=function(keyboardEvent,editing){if((keyboardEvent.ctrlKey||keyboardEvent.metaKey)&&!editing&&this.mouseEventService.isEventFromThisGrid(keyboardEvent)){var keyCode=normaliseQwertyAzerty(keyboardEvent);return keyCode===KeyCode.A?this.onCtrlAndA(keyboardEvent):keyCode===KeyCode.C?this.onCtrlAndC(keyboardEvent):keyCode===KeyCode.D?this.onCtrlAndD(keyboardEvent):keyCode===KeyCode.V?this.onCtrlAndV(keyboardEvent):keyCode===KeyCode.X?this.onCtrlAndX(keyboardEvent):keyCode===KeyCode.Y?this.onCtrlAndY():keyCode===KeyCode.Z?this.onCtrlAndZ(keyboardEvent):void 0}},RowContainerEventsFeature.prototype.onCtrlAndA=function(event){var pinnedRowModel=this.pinnedRowModel,paginationProxy=this.paginationProxy,rangeService=this.rangeService;if(rangeService&&paginationProxy.isRowsToRender()){var _b=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}([pinnedRowModel.isEmpty("top"),pinnedRowModel.isEmpty("bottom")],2),floatingStart=_b[0]?null:"top",floatingEnd=void 0,rowEnd=void 0;_b[1]?(floatingEnd=null,rowEnd=this.paginationProxy.getRowCount()-1):(floatingEnd="bottom",rowEnd=pinnedRowModel.getPinnedBottomRowData().length-1);var allDisplayedColumns=this.columnModel.getAllDisplayedColumns();if(missingOrEmpty(allDisplayedColumns))return;rangeService.setCellRange({rowStartIndex:0,rowStartPinned:floatingStart,rowEndIndex:rowEnd,rowEndPinned:floatingEnd,columnStart:allDisplayedColumns[0],columnEnd:last(allDisplayedColumns)})}event.preventDefault()},RowContainerEventsFeature.prototype.onCtrlAndC=function(event){if(this.clipboardService&&!this.gridOptionsService.is("enableCellTextSelection")){var _a=this.getControlsForEventTarget(event.target),cellCtrl=_a.cellCtrl,rowCtrl=_a.rowCtrl;(null==cellCtrl?void 0:cellCtrl.isEditing())||(null==rowCtrl?void 0:rowCtrl.isEditing())||(event.preventDefault(),this.clipboardService.copyToClipboard())}},RowContainerEventsFeature.prototype.onCtrlAndX=function(event){if(this.clipboardService&&!this.gridOptionsService.is("enableCellTextSelection")&&!this.gridOptionsService.is("suppressCutToClipboard")){var _a=this.getControlsForEventTarget(event.target),cellCtrl=_a.cellCtrl,rowCtrl=_a.rowCtrl;(null==cellCtrl?void 0:cellCtrl.isEditing())||(null==rowCtrl?void 0:rowCtrl.isEditing())||(event.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}},RowContainerEventsFeature.prototype.onCtrlAndV=function(event){var _a=this.getControlsForEventTarget(event.target),cellCtrl=_a.cellCtrl,rowCtrl=_a.rowCtrl;(null==cellCtrl?void 0:cellCtrl.isEditing())||(null==rowCtrl?void 0:rowCtrl.isEditing())||this.clipboardService&&!this.gridOptionsService.is("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()},RowContainerEventsFeature.prototype.onCtrlAndD=function(event){this.clipboardService&&!this.gridOptionsService.is("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),event.preventDefault()},RowContainerEventsFeature.prototype.onCtrlAndZ=function(event){this.gridOptionsService.is("undoRedoCellEditing")&&(event.preventDefault(),event.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))},RowContainerEventsFeature.prototype.onCtrlAndY=function(){this.undoRedoService.redo("ui")},__decorate$1Q([Autowired("mouseEventService")],RowContainerEventsFeature.prototype,"mouseEventService",void 0),__decorate$1Q([Autowired("valueService")],RowContainerEventsFeature.prototype,"valueService",void 0),__decorate$1Q([Optional("contextMenuFactory")],RowContainerEventsFeature.prototype,"contextMenuFactory",void 0),__decorate$1Q([Autowired("ctrlsService")],RowContainerEventsFeature.prototype,"ctrlsService",void 0),__decorate$1Q([Autowired("navigationService")],RowContainerEventsFeature.prototype,"navigationService",void 0),__decorate$1Q([Autowired("focusService")],RowContainerEventsFeature.prototype,"focusService",void 0),__decorate$1Q([Autowired("undoRedoService")],RowContainerEventsFeature.prototype,"undoRedoService",void 0),__decorate$1Q([Autowired("columnModel")],RowContainerEventsFeature.prototype,"columnModel",void 0),__decorate$1Q([Autowired("paginationProxy")],RowContainerEventsFeature.prototype,"paginationProxy",void 0),__decorate$1Q([Autowired("pinnedRowModel")],RowContainerEventsFeature.prototype,"pinnedRowModel",void 0),__decorate$1Q([Optional("rangeService")],RowContainerEventsFeature.prototype,"rangeService",void 0),__decorate$1Q([Optional("clipboardService")],RowContainerEventsFeature.prototype,"clipboardService",void 0),__decorate$1Q([PostConstruct],RowContainerEventsFeature.prototype,"postConstruct",null),RowContainerEventsFeature}(BeanStub),__extends$1U=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1P=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ViewportSizeFeature=function(_super){function ViewportSizeFeature(centerContainerCtrl){var _this=_super.call(this)||this;return _this.centerContainerCtrl=centerContainerCtrl,_this}return __extends$1U(ViewportSizeFeature,_super),ViewportSizeFeature.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady((function(){_this.gridBodyCtrl=_this.ctrlsService.getGridBodyCtrl(),_this.listenForResize()})),this.addManagedListener(this.eventService,Events.EVENT_SCROLLBAR_WIDTH_CHANGED,this.onScrollbarWidthChanged.bind(this))},ViewportSizeFeature.prototype.listenForResize=function(){var _this=this,listener=function(){return _this.onCenterViewportResized()};this.centerContainerCtrl.registerViewportResizeListener(listener),this.gridBodyCtrl.registerBodyViewportResizeListener(listener)},ViewportSizeFeature.prototype.onScrollbarWidthChanged=function(){this.checkViewportAndScrolls()},ViewportSizeFeature.prototype.onCenterViewportResized=function(){if(this.centerContainerCtrl.isViewportVisible()){this.checkViewportAndScrolls();var newWidth=this.centerContainerCtrl.getCenterWidth();newWidth!==this.centerWidth&&(this.centerWidth=newWidth,this.columnModel.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0},ViewportSizeFeature.prototype.checkViewportAndScrolls=function(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()},ViewportSizeFeature.prototype.getBodyHeight=function(){return this.bodyHeight},ViewportSizeFeature.prototype.checkBodyHeight=function(){var bodyHeight=getInnerHeight(this.gridBodyCtrl.getBodyViewportElement());if(this.bodyHeight!==bodyHeight){this.bodyHeight=bodyHeight;var event_1={type:Events.EVENT_BODY_HEIGHT_CHANGED};this.eventService.dispatchEvent(event_1)}},ViewportSizeFeature.prototype.updateScrollVisibleService=function(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)},ViewportSizeFeature.prototype.updateScrollVisibleServiceImpl=function(){var params={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(params)},ViewportSizeFeature.prototype.isHorizontalScrollShowing=function(){return this.centerContainerCtrl.isHorizontalScrollShowing()},ViewportSizeFeature.prototype.onHorizontalViewportChanged=function(){var scrollWidth=this.centerContainerCtrl.getCenterWidth(),scrollPosition=this.centerContainerCtrl.getViewportScrollLeft();this.columnModel.setViewportPosition(scrollWidth,scrollPosition)},__decorate$1P([Autowired("ctrlsService")],ViewportSizeFeature.prototype,"ctrlsService",void 0),__decorate$1P([Autowired("columnModel")],ViewportSizeFeature.prototype,"columnModel",void 0),__decorate$1P([Autowired("scrollVisibleService")],ViewportSizeFeature.prototype,"scrollVisibleService",void 0),__decorate$1P([PostConstruct],ViewportSizeFeature.prototype,"postConstruct",null),ViewportSizeFeature}(BeanStub),__extends$1T=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1O=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SetPinnedLeftWidthFeature=function(_super){function SetPinnedLeftWidthFeature(element){var _this=_super.call(this)||this;return _this.element=element,_this}return __extends$1T(SetPinnedLeftWidthFeature,_super),SetPinnedLeftWidthFeature.prototype.postConstruct=function(){this.addManagedListener(this.eventService,Events.EVENT_LEFT_PINNED_WIDTH_CHANGED,this.onPinnedLeftWidthChanged.bind(this))},SetPinnedLeftWidthFeature.prototype.onPinnedLeftWidthChanged=function(){var leftWidth=this.pinnedWidthService.getPinnedLeftWidth(),displayed=leftWidth>0;setDisplayed(this.element,displayed),setFixedWidth(this.element,leftWidth)},SetPinnedLeftWidthFeature.prototype.getWidth=function(){return this.pinnedWidthService.getPinnedLeftWidth()},__decorate$1O([Autowired("pinnedWidthService")],SetPinnedLeftWidthFeature.prototype,"pinnedWidthService",void 0),__decorate$1O([PostConstruct],SetPinnedLeftWidthFeature.prototype,"postConstruct",null),SetPinnedLeftWidthFeature}(BeanStub),__extends$1S=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1N=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SetPinnedRightWidthFeature=function(_super){function SetPinnedRightWidthFeature(element){var _this=_super.call(this)||this;return _this.element=element,_this}return __extends$1S(SetPinnedRightWidthFeature,_super),SetPinnedRightWidthFeature.prototype.postConstruct=function(){this.addManagedListener(this.eventService,Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED,this.onPinnedRightWidthChanged.bind(this))},SetPinnedRightWidthFeature.prototype.onPinnedRightWidthChanged=function(){var rightWidth=this.pinnedWidthService.getPinnedRightWidth(),displayed=rightWidth>0;setDisplayed(this.element,displayed),setFixedWidth(this.element,rightWidth)},SetPinnedRightWidthFeature.prototype.getWidth=function(){return this.pinnedWidthService.getPinnedRightWidth()},__decorate$1N([Autowired("pinnedWidthService")],SetPinnedRightWidthFeature.prototype,"pinnedWidthService",void 0),__decorate$1N([PostConstruct],SetPinnedRightWidthFeature.prototype,"postConstruct",null),SetPinnedRightWidthFeature}(BeanStub),__extends$1R=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1M=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SetHeightFeature=function(_super){function SetHeightFeature(eContainer,eViewport){var _this=_super.call(this)||this;return _this.eContainer=eContainer,_this.eViewport=eViewport,_this}return __extends$1R(SetHeightFeature,_super),SetHeightFeature.prototype.postConstruct=function(){this.addManagedListener(this.eventService,Events.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onHeightChanged.bind(this))},SetHeightFeature.prototype.onHeightChanged=function(){var height=this.maxDivHeightScaler.getUiContainerHeight(),heightString=null!=height?height+"px":"";this.eContainer.style.height=heightString,this.eViewport&&(this.eViewport.style.height=heightString)},__decorate$1M([Autowired("rowContainerHeightService")],SetHeightFeature.prototype,"maxDivHeightScaler",void 0),__decorate$1M([PostConstruct],SetHeightFeature.prototype,"postConstruct",null),SetHeightFeature}(BeanStub),__extends$1Q=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1L=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},DragListenerFeature=function(_super){function DragListenerFeature(eContainer){var _this=_super.call(this)||this;return _this.eContainer=eContainer,_this}return __extends$1Q(DragListenerFeature,_super),DragListenerFeature.prototype.postConstruct=function(){var _this=this;if(this.gridOptionsService.is("enableRangeSelection")&&!missing(this.rangeService)){var params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)};this.dragService.addDragSource(params),this.addDestroyFunc((function(){return _this.dragService.removeDragSource(params)}))}},__decorate$1L([Optional("rangeService")],DragListenerFeature.prototype,"rangeService",void 0),__decorate$1L([Autowired("dragService")],DragListenerFeature.prototype,"dragService",void 0),__decorate$1L([PostConstruct],DragListenerFeature.prototype,"postConstruct",null),DragListenerFeature}(BeanStub),__extends$1P=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1K=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},CenterWidthFeature=function(_super){function CenterWidthFeature(callback,addSpacer){void 0===addSpacer&&(addSpacer=!1);var _this=_super.call(this)||this;return _this.callback=callback,_this.addSpacer=addSpacer,_this}return __extends$1P(CenterWidthFeature,_super),CenterWidthFeature.prototype.postConstruct=function(){var listener=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",listener),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,listener),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,listener),this.addManagedListener(this.eventService,Events.EVENT_LEFT_PINNED_WIDTH_CHANGED,listener),this.addSpacer&&(this.addManagedListener(this.eventService,Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED,listener),this.addManagedListener(this.eventService,Events.EVENT_SCROLL_VISIBILITY_CHANGED,listener),this.addManagedListener(this.eventService,Events.EVENT_SCROLLBAR_WIDTH_CHANGED,listener)),this.setWidth()},CenterWidthFeature.prototype.setWidth=function(){var totalWidth,columnModel=this.columnModel,printLayout=this.gridOptionsService.isDomLayout("print"),centerWidth=columnModel.getBodyContainerWidth(),leftWidth=columnModel.getDisplayedColumnsLeftWidth(),rightWidth=columnModel.getDisplayedColumnsRightWidth();printLayout?totalWidth=centerWidth+leftWidth+rightWidth:(totalWidth=centerWidth,this.addSpacer&&0===(this.gridOptionsService.is("enableRtl")?leftWidth:rightWidth)&&this.scrollVisibleService.isVerticalScrollShowing()&&(totalWidth+=this.gridOptionsService.getScrollbarWidth()));this.callback(totalWidth)},__decorate$1K([Autowired("columnModel")],CenterWidthFeature.prototype,"columnModel",void 0),__decorate$1K([Autowired("scrollVisibleService")],CenterWidthFeature.prototype,"scrollVisibleService",void 0),__decorate$1K([PostConstruct],CenterWidthFeature.prototype,"postConstruct",null),CenterWidthFeature}(BeanStub),__extends$1O=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1J=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$j=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spreadArray$g=function(to,from){for(var i=0,il=from.length,j=to.length;i<il;i++,j++)to[j]=from[i];return to};!function(RowContainerName){RowContainerName.LEFT="left",RowContainerName.RIGHT="right",RowContainerName.CENTER="center",RowContainerName.FULL_WIDTH="fullWidth",RowContainerName.TOP_LEFT="topLeft",RowContainerName.TOP_RIGHT="topRight",RowContainerName.TOP_CENTER="topCenter",RowContainerName.TOP_FULL_WIDTH="topFullWidth",RowContainerName.STICKY_TOP_LEFT="stickyTopLeft",RowContainerName.STICKY_TOP_RIGHT="stickyTopRight",RowContainerName.STICKY_TOP_CENTER="stickyTopCenter",RowContainerName.STICKY_TOP_FULL_WIDTH="stickyTopFullWidth",RowContainerName.BOTTOM_LEFT="bottomLeft",RowContainerName.BOTTOM_RIGHT="bottomRight",RowContainerName.BOTTOM_CENTER="bottomCenter",RowContainerName.BOTTOM_FULL_WIDTH="bottomFullWidth"}(RowContainerName||(RowContainerName={})),function(RowContainerType){RowContainerType.LEFT="left",RowContainerType.RIGHT="right",RowContainerType.CENTER="center",RowContainerType.FULL_WIDTH="fullWidth"}(RowContainerType||(RowContainerType={}));var ContainerCssClasses=convertToMap([[RowContainerName.CENTER,"ag-center-cols-container"],[RowContainerName.LEFT,"ag-pinned-left-cols-container"],[RowContainerName.RIGHT,"ag-pinned-right-cols-container"],[RowContainerName.FULL_WIDTH,"ag-full-width-container"],[RowContainerName.TOP_CENTER,"ag-floating-top-container"],[RowContainerName.TOP_LEFT,"ag-pinned-left-floating-top"],[RowContainerName.TOP_RIGHT,"ag-pinned-right-floating-top"],[RowContainerName.TOP_FULL_WIDTH,"ag-floating-top-full-width-container"],[RowContainerName.STICKY_TOP_CENTER,"ag-sticky-top-container"],[RowContainerName.STICKY_TOP_LEFT,"ag-pinned-left-sticky-top"],[RowContainerName.STICKY_TOP_RIGHT,"ag-pinned-right-sticky-top"],[RowContainerName.STICKY_TOP_FULL_WIDTH,"ag-sticky-top-full-width-container"],[RowContainerName.BOTTOM_CENTER,"ag-floating-bottom-container"],[RowContainerName.BOTTOM_LEFT,"ag-pinned-left-floating-bottom"],[RowContainerName.BOTTOM_RIGHT,"ag-pinned-right-floating-bottom"],[RowContainerName.BOTTOM_FULL_WIDTH,"ag-floating-bottom-full-width-container"]]),ViewportCssClasses=convertToMap([[RowContainerName.CENTER,"ag-center-cols-viewport"],[RowContainerName.TOP_CENTER,"ag-floating-top-viewport"],[RowContainerName.STICKY_TOP_CENTER,"ag-sticky-top-viewport"],[RowContainerName.BOTTOM_CENTER,"ag-floating-bottom-viewport"]]),RowContainerCtrl=function(_super){function RowContainerCtrl(name){var _this=_super.call(this)||this;return _this.visible=!0,_this.EMPTY_CTRLS=[],_this.name=name,_this.isFullWithContainer=_this.name===RowContainerName.TOP_FULL_WIDTH||_this.name===RowContainerName.STICKY_TOP_FULL_WIDTH||_this.name===RowContainerName.BOTTOM_FULL_WIDTH||_this.name===RowContainerName.FULL_WIDTH,_this}return __extends$1O(RowContainerCtrl,_super),RowContainerCtrl.getRowContainerCssClasses=function(name){return{container:ContainerCssClasses.get(name),viewport:ViewportCssClasses.get(name)}},RowContainerCtrl.getPinned=function(name){switch(name){case RowContainerName.BOTTOM_LEFT:case RowContainerName.TOP_LEFT:case RowContainerName.STICKY_TOP_LEFT:case RowContainerName.LEFT:return"left";case RowContainerName.BOTTOM_RIGHT:case RowContainerName.TOP_RIGHT:case RowContainerName.STICKY_TOP_RIGHT:case RowContainerName.RIGHT:return"right";default:return null}},RowContainerCtrl.prototype.postConstruct=function(){var _this=this;this.enableRtl=this.gridOptionsService.is("enableRtl"),this.embedFullWidthRows=this.gridOptionsService.is("embedFullWidthRows"),this.forContainers([RowContainerName.CENTER],(function(){return _this.viewportSizeFeature=_this.createManagedBean(new ViewportSizeFeature(_this))}))},RowContainerCtrl.prototype.registerWithCtrlsService=function(){switch(this.name){case RowContainerName.CENTER:this.ctrlsService.registerCenterRowContainerCtrl(this);break;case RowContainerName.LEFT:this.ctrlsService.registerLeftRowContainerCtrl(this);break;case RowContainerName.RIGHT:this.ctrlsService.registerRightRowContainerCtrl(this);break;case RowContainerName.TOP_CENTER:this.ctrlsService.registerTopCenterRowContainerCtrl(this);break;case RowContainerName.TOP_LEFT:this.ctrlsService.registerTopLeftRowContainerCon(this);break;case RowContainerName.TOP_RIGHT:this.ctrlsService.registerTopRightRowContainerCtrl(this);break;case RowContainerName.STICKY_TOP_CENTER:this.ctrlsService.registerStickyTopCenterRowContainerCtrl(this);break;case RowContainerName.STICKY_TOP_LEFT:this.ctrlsService.registerStickyTopLeftRowContainerCon(this);break;case RowContainerName.STICKY_TOP_RIGHT:this.ctrlsService.registerStickyTopRightRowContainerCtrl(this);break;case RowContainerName.BOTTOM_CENTER:this.ctrlsService.registerBottomCenterRowContainerCtrl(this);break;case RowContainerName.BOTTOM_LEFT:this.ctrlsService.registerBottomLeftRowContainerCtrl(this);break;case RowContainerName.BOTTOM_RIGHT:this.ctrlsService.registerBottomRightRowContainerCtrl(this)}},RowContainerCtrl.prototype.forContainers=function(names,callback){names.indexOf(this.name)>=0&&callback()},RowContainerCtrl.prototype.getContainerElement=function(){return this.eContainer},RowContainerCtrl.prototype.getViewportSizeFeature=function(){return this.viewportSizeFeature},RowContainerCtrl.prototype.setComp=function(view,eContainer,eViewport){var _this=this;this.comp=view,this.eContainer=eContainer,this.eViewport=eViewport,this.createManagedBean(new RowContainerEventsFeature(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder(),this.stopHScrollOnPinnedRows();var allTopNoFW=[RowContainerName.TOP_CENTER,RowContainerName.TOP_LEFT,RowContainerName.TOP_RIGHT],allStickyTopNoFW=[RowContainerName.STICKY_TOP_CENTER,RowContainerName.STICKY_TOP_LEFT,RowContainerName.STICKY_TOP_RIGHT],allBottomNoFW=[RowContainerName.BOTTOM_CENTER,RowContainerName.BOTTOM_LEFT,RowContainerName.BOTTOM_RIGHT],allMiddleNoFW=[RowContainerName.CENTER,RowContainerName.LEFT,RowContainerName.RIGHT],allNoFW=__spreadArray$g(__spreadArray$g(__spreadArray$g(__spreadArray$g([],__read$j(allTopNoFW)),__read$j(allBottomNoFW)),__read$j(allMiddleNoFW)),__read$j(allStickyTopNoFW)),allMiddle=[RowContainerName.CENTER,RowContainerName.LEFT,RowContainerName.RIGHT,RowContainerName.FULL_WIDTH],allCenter=[RowContainerName.CENTER,RowContainerName.TOP_CENTER,RowContainerName.STICKY_TOP_CENTER,RowContainerName.BOTTOM_CENTER],allLeft=[RowContainerName.LEFT,RowContainerName.BOTTOM_LEFT,RowContainerName.TOP_LEFT,RowContainerName.STICKY_TOP_LEFT],allRight=[RowContainerName.RIGHT,RowContainerName.BOTTOM_RIGHT,RowContainerName.TOP_RIGHT,RowContainerName.STICKY_TOP_RIGHT];this.forContainers(allLeft,(function(){_this.pinnedWidthFeature=_this.createManagedBean(new SetPinnedLeftWidthFeature(_this.eContainer)),_this.addManagedListener(_this.eventService,Events.EVENT_LEFT_PINNED_WIDTH_CHANGED,(function(){return _this.onPinnedWidthChanged()}))})),this.forContainers(allRight,(function(){_this.pinnedWidthFeature=_this.createManagedBean(new SetPinnedRightWidthFeature(_this.eContainer)),_this.addManagedListener(_this.eventService,Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED,(function(){return _this.onPinnedWidthChanged()}))})),this.forContainers(allMiddle,(function(){return _this.createManagedBean(new SetHeightFeature(_this.eContainer,_this.name===RowContainerName.CENTER?eViewport:void 0))})),this.forContainers(allNoFW,(function(){return _this.createManagedBean(new DragListenerFeature(_this.eContainer))})),this.forContainers(allCenter,(function(){return _this.createManagedBean(new CenterWidthFeature((function(width){return _this.comp.setContainerWidth(width+"px")})))})),isInvisibleScrollbar()&&(this.forContainers([RowContainerName.CENTER],(function(){var pinnedWidthChangedEvent=_this.enableRtl?Events.EVENT_LEFT_PINNED_WIDTH_CHANGED:Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED;_this.addManagedListener(_this.eventService,pinnedWidthChangedEvent,(function(){return _this.refreshPaddingForFakeScrollbar()}))})),this.refreshPaddingForFakeScrollbar()),this.addListeners(),this.registerWithCtrlsService()},RowContainerCtrl.prototype.refreshPaddingForFakeScrollbar=function(){var enableRtl=this.enableRtl,columnModel=this.columnModel,eContainer=this.eContainer,sideToCheck=enableRtl?RowContainerName.LEFT:RowContainerName.RIGHT;this.forContainers([RowContainerName.CENTER,sideToCheck],(function(){var pinnedWidth=columnModel.getContainerWidth(sideToCheck),marginSide=enableRtl?"marginLeft":"marginRight";eContainer.style[marginSide]=pinnedWidth?"16px":"0px"}))},RowContainerCtrl.prototype.addListeners=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,(function(){return _this.onDisplayedColumnsChanged()})),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,(function(){return _this.onDisplayedColumnsWidthChanged()})),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_ROWS_CHANGED,(function(params){return _this.onDisplayedRowsChanged(params.afterScroll)})),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()},RowContainerCtrl.prototype.listenOnDomOrder=function(){var _this=this;if([RowContainerName.STICKY_TOP_CENTER,RowContainerName.STICKY_TOP_LEFT,RowContainerName.STICKY_TOP_RIGHT,RowContainerName.STICKY_TOP_FULL_WIDTH].indexOf(this.name)>=0)this.comp.setDomOrder(!0);else{var listener=function(){var isEnsureDomOrder=_this.gridOptionsService.is("ensureDomOrder"),isPrintLayout=_this.gridOptionsService.isDomLayout("print");_this.comp.setDomOrder(isEnsureDomOrder||isPrintLayout)};this.addManagedPropertyListener("domLayout",listener),listener()}},RowContainerCtrl.prototype.stopHScrollOnPinnedRows=function(){var _this=this;this.forContainers([RowContainerName.TOP_CENTER,RowContainerName.STICKY_TOP_CENTER,RowContainerName.BOTTOM_CENTER],(function(){_this.addManagedListener(_this.eViewport,"scroll",(function(){return _this.eViewport.scrollLeft=0}))}))},RowContainerCtrl.prototype.onDisplayedColumnsChanged=function(){var _this=this;this.forContainers([RowContainerName.CENTER],(function(){return _this.onHorizontalViewportChanged()}))},RowContainerCtrl.prototype.onDisplayedColumnsWidthChanged=function(){var _this=this;this.forContainers([RowContainerName.CENTER],(function(){return _this.onHorizontalViewportChanged()}))},RowContainerCtrl.prototype.addPreventScrollWhileDragging=function(){var _this=this,preventScroll=function(e){_this.dragService.isDragging()&&e.cancelable&&e.preventDefault()};this.eContainer.addEventListener("touchmove",preventScroll,{passive:!1}),this.addDestroyFunc((function(){return _this.eContainer.removeEventListener("touchmove",preventScroll)}))},RowContainerCtrl.prototype.onHorizontalViewportChanged=function(afterScroll){void 0===afterScroll&&(afterScroll=!1);var scrollWidth=this.getCenterWidth(),scrollPosition=this.getCenterViewportScrollLeft();this.columnModel.setViewportPosition(scrollWidth,scrollPosition,afterScroll)},RowContainerCtrl.prototype.getCenterWidth=function(){return getInnerWidth(this.eViewport)},RowContainerCtrl.prototype.getCenterViewportScrollLeft=function(){return getScrollLeft(this.eViewport,this.enableRtl)},RowContainerCtrl.prototype.registerViewportResizeListener=function(listener){var unsubscribeFromResize=this.resizeObserverService.observeResize(this.eViewport,listener);this.addDestroyFunc((function(){return unsubscribeFromResize()}))},RowContainerCtrl.prototype.isViewportVisible=function(){return isVisible(this.eViewport)},RowContainerCtrl.prototype.getViewportScrollLeft=function(){return getScrollLeft(this.eViewport,this.enableRtl)},RowContainerCtrl.prototype.isHorizontalScrollShowing=function(){return this.gridOptionsService.is("alwaysShowHorizontalScroll")||isHorizontalScrollShowing(this.eViewport)},RowContainerCtrl.prototype.getViewportElement=function(){return this.eViewport},RowContainerCtrl.prototype.setContainerTranslateX=function(amount){this.eContainer.style.transform="translateX("+amount+"px)"},RowContainerCtrl.prototype.getHScrollPosition=function(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}},RowContainerCtrl.prototype.setCenterViewportScrollLeft=function(value){setScrollLeft(this.eViewport,value,this.enableRtl)},RowContainerCtrl.prototype.isContainerVisible=function(){return!RowContainerCtrl.getPinned(this.name)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0},RowContainerCtrl.prototype.onPinnedWidthChanged=function(){var visible=this.isContainerVisible();this.visible!=visible&&(this.visible=visible,this.onDisplayedRowsChanged()),isInvisibleScrollbar()&&this.refreshPaddingForFakeScrollbar()},RowContainerCtrl.prototype.onDisplayedRowsChanged=function(useFlushSync){var _this=this;if(void 0===useFlushSync&&(useFlushSync=!1),this.visible){var printLayout_1=this.gridOptionsService.isDomLayout("print"),rowsThisContainer=this.getRowCtrls().filter((function(rowCtrl){var fullWidthRow=rowCtrl.isFullWidth(),embedFW=_this.embedFullWidthRows||printLayout_1;return _this.isFullWithContainer?!embedFW&&fullWidthRow:embedFW||!fullWidthRow}));this.comp.setRowCtrls(rowsThisContainer,useFlushSync)}else this.comp.setRowCtrls(this.EMPTY_CTRLS,!1)},RowContainerCtrl.prototype.getRowCtrls=function(){switch(this.name){case RowContainerName.TOP_CENTER:case RowContainerName.TOP_LEFT:case RowContainerName.TOP_RIGHT:case RowContainerName.TOP_FULL_WIDTH:return this.rowRenderer.getTopRowCtrls();case RowContainerName.STICKY_TOP_CENTER:case RowContainerName.STICKY_TOP_LEFT:case RowContainerName.STICKY_TOP_RIGHT:case RowContainerName.STICKY_TOP_FULL_WIDTH:return this.rowRenderer.getStickyTopRowCtrls();case RowContainerName.BOTTOM_CENTER:case RowContainerName.BOTTOM_LEFT:case RowContainerName.BOTTOM_RIGHT:case RowContainerName.BOTTOM_FULL_WIDTH:return this.rowRenderer.getBottomRowCtrls();default:return this.rowRenderer.getCentreRowCtrls()}},__decorate$1J([Autowired("scrollVisibleService")],RowContainerCtrl.prototype,"scrollVisibleService",void 0),__decorate$1J([Autowired("dragService")],RowContainerCtrl.prototype,"dragService",void 0),__decorate$1J([Autowired("ctrlsService")],RowContainerCtrl.prototype,"ctrlsService",void 0),__decorate$1J([Autowired("columnModel")],RowContainerCtrl.prototype,"columnModel",void 0),__decorate$1J([Autowired("resizeObserverService")],RowContainerCtrl.prototype,"resizeObserverService",void 0),__decorate$1J([Autowired("animationFrameService")],RowContainerCtrl.prototype,"animationFrameService",void 0),__decorate$1J([Autowired("rowRenderer")],RowContainerCtrl.prototype,"rowRenderer",void 0),__decorate$1J([PostConstruct],RowContainerCtrl.prototype,"postConstruct",null),RowContainerCtrl}(BeanStub),__extends$1N=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1I=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},GRID_BODY_TEMPLATE='<div class="ag-root ag-unselectable" role="treegrid">\n        <ag-header-root ref="gridHeader"></ag-header-root>\n        <div class="ag-floating-top" ref="eTop" role="presentation">\n            <ag-row-container ref="topLeftContainer" name="'+RowContainerName.TOP_LEFT+'"></ag-row-container>\n            <ag-row-container ref="topCenterContainer" name="'+RowContainerName.TOP_CENTER+'"></ag-row-container>\n            <ag-row-container ref="topRightContainer" name="'+RowContainerName.TOP_RIGHT+'"></ag-row-container>\n            <ag-row-container ref="topFullWidthContainer" name="'+RowContainerName.TOP_FULL_WIDTH+'"></ag-row-container>\n        </div>\n        <div class="ag-body" ref="eBody" role="presentation">\n            <div class="ag-body-viewport" ref="eBodyViewport" role="presentation">\n                <ag-row-container ref="leftContainer" name="'+RowContainerName.LEFT+'"></ag-row-container>\n                <ag-row-container ref="centerContainer" name="'+RowContainerName.CENTER+'"></ag-row-container>\n                <ag-row-container ref="rightContainer" name="'+RowContainerName.RIGHT+'"></ag-row-container>\n                <ag-row-container ref="fullWidthContainer" name="'+RowContainerName.FULL_WIDTH+'"></ag-row-container>\n            </div>\n            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>\n        </div>\n        <div class="ag-sticky-top" ref="eStickyTop" role="presentation">\n            <ag-row-container ref="stickyTopLeftContainer" name="'+RowContainerName.STICKY_TOP_LEFT+'"></ag-row-container>\n            <ag-row-container ref="stickyTopCenterContainer" name="'+RowContainerName.STICKY_TOP_CENTER+'"></ag-row-container>\n            <ag-row-container ref="stickyTopRightContainer" name="'+RowContainerName.STICKY_TOP_RIGHT+'"></ag-row-container>\n            <ag-row-container ref="stickyTopFullWidthContainer" name="'+RowContainerName.STICKY_TOP_FULL_WIDTH+'"></ag-row-container>\n        </div>\n        <div class="ag-floating-bottom" ref="eBottom" role="presentation">\n            <ag-row-container ref="bottomLeftContainer" name="'+RowContainerName.BOTTOM_LEFT+'"></ag-row-container>\n            <ag-row-container ref="bottomCenterContainer" name="'+RowContainerName.BOTTOM_CENTER+'"></ag-row-container>\n            <ag-row-container ref="bottomRightContainer" name="'+RowContainerName.BOTTOM_RIGHT+'"></ag-row-container>\n            <ag-row-container ref="bottomFullWidthContainer" name="'+RowContainerName.BOTTOM_FULL_WIDTH+'"></ag-row-container>\n        </div>\n        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>\n        <ag-overlay-wrapper></ag-overlay-wrapper>\n    </div>',GridBodyComp=function(_super){function GridBodyComp(){return _super.call(this,GRID_BODY_TEMPLATE)||this}return __extends$1N(GridBodyComp,_super),GridBodyComp.prototype.init=function(){var _this=this,setHeight=function(height,element){var heightString=height+"px";element.style.minHeight=heightString,element.style.height=heightString},compProxy={setRowAnimationCssOnBodyViewport:function(cssClass,animate){return _this.setRowAnimationCssOnBodyViewport(cssClass,animate)},setColumnCount:function(count){return setAriaColCount(_this.getGui(),count)},setRowCount:function(count){return setAriaRowCount(_this.getGui(),count)},setTopHeight:function(height){return setHeight(height,_this.eTop)},setBottomHeight:function(height){return setHeight(height,_this.eBottom)},setTopDisplay:function(display){return _this.eTop.style.display=display},setBottomDisplay:function(display){return _this.eBottom.style.display=display},setStickyTopHeight:function(height){return _this.eStickyTop.style.height=height},setStickyTopTop:function(top){return _this.eStickyTop.style.top=top},setStickyTopWidth:function(width){return _this.eStickyTop.style.width=width},setColumnMovingCss:function(cssClass,flag){return _this.addOrRemoveCssClass(cssClass,flag)},updateLayoutClasses:function(cssClass,params){[_this.eBodyViewport.classList,_this.eBody.classList].forEach((function(classList){classList.toggle(LayoutCssClasses.AUTO_HEIGHT,params.autoHeight),classList.toggle(LayoutCssClasses.NORMAL,params.normal),classList.toggle(LayoutCssClasses.PRINT,params.print)})),_this.addOrRemoveCssClass(LayoutCssClasses.AUTO_HEIGHT,params.autoHeight),_this.addOrRemoveCssClass(LayoutCssClasses.NORMAL,params.normal),_this.addOrRemoveCssClass(LayoutCssClasses.PRINT,params.print)},setAlwaysVerticalScrollClass:function(cssClass,on){return _this.eBodyViewport.classList.toggle("ag-force-vertical-scroll",on)},registerBodyViewportResizeListener:function(listener){var unsubscribeFromResize=_this.resizeObserverService.observeResize(_this.eBodyViewport,listener);_this.addDestroyFunc((function(){return unsubscribeFromResize()}))},setPinnedTopBottomOverflowY:function(overflow){return _this.eTop.style.overflowY=_this.eBottom.style.overflowY=overflow},setCellSelectableCss:function(cssClass,selectable){[_this.eTop,_this.eBodyViewport,_this.eBottom].forEach((function(ct){return ct.classList.toggle(cssClass,selectable)}))},setBodyViewportWidth:function(width){return _this.eBodyViewport.style.width=width}};this.ctrl=this.createManagedBean(new GridBodyCtrl),this.ctrl.setComp(compProxy,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop),(this.rangeService||"multiple"===this.gridOptionsService.get("rowSelection"))&&setAriaMultiSelectable(this.getGui(),!0)},GridBodyComp.prototype.setRowAnimationCssOnBodyViewport=function(cssClass,animateRows){var bodyViewportClassList=this.eBodyViewport.classList;bodyViewportClassList.toggle(RowAnimationCssClasses.ANIMATION_ON,animateRows),bodyViewportClassList.toggle(RowAnimationCssClasses.ANIMATION_OFF,!animateRows)},GridBodyComp.prototype.getFloatingTopBottom=function(){return[this.eTop,this.eBottom]},__decorate$1I([Autowired("resizeObserverService")],GridBodyComp.prototype,"resizeObserverService",void 0),__decorate$1I([Optional("rangeService")],GridBodyComp.prototype,"rangeService",void 0),__decorate$1I([RefSelector("eBodyViewport")],GridBodyComp.prototype,"eBodyViewport",void 0),__decorate$1I([RefSelector("eStickyTop")],GridBodyComp.prototype,"eStickyTop",void 0),__decorate$1I([RefSelector("eTop")],GridBodyComp.prototype,"eTop",void 0),__decorate$1I([RefSelector("eBottom")],GridBodyComp.prototype,"eBottom",void 0),__decorate$1I([RefSelector("gridHeader")],GridBodyComp.prototype,"headerRootComp",void 0),__decorate$1I([RefSelector("eBody")],GridBodyComp.prototype,"eBody",void 0),__decorate$1I([PostConstruct],GridBodyComp.prototype,"init",null),GridBodyComp}(Component),__extends$1M=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1H=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ScrollVisibleService=function(_super){function ScrollVisibleService(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1M(ScrollVisibleService,_super),ScrollVisibleService.prototype.postConstruct=function(){this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this))},ScrollVisibleService.prototype.onDisplayedColumnsChanged=function(){this.update()},ScrollVisibleService.prototype.onDisplayedColumnsWidthChanged=function(){this.update()},ScrollVisibleService.prototype.update=function(){this.updateImpl(),setTimeout(this.updateImpl.bind(this),500)},ScrollVisibleService.prototype.updateImpl=function(){var centerRowCtrl=this.ctrlsService.getCenterRowContainerCtrl();if(centerRowCtrl){var params={horizontalScrollShowing:centerRowCtrl.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(params)}},ScrollVisibleService.prototype.setScrollsVisible=function(params){if(this.horizontalScrollShowing!==params.horizontalScrollShowing||this.verticalScrollShowing!==params.verticalScrollShowing){this.horizontalScrollShowing=params.horizontalScrollShowing,this.verticalScrollShowing=params.verticalScrollShowing;var event_1={type:Events.EVENT_SCROLL_VISIBILITY_CHANGED};this.eventService.dispatchEvent(event_1)}},ScrollVisibleService.prototype.isHorizontalScrollShowing=function(){return this.horizontalScrollShowing},ScrollVisibleService.prototype.isVerticalScrollShowing=function(){return this.verticalScrollShowing},__decorate$1H([Autowired("ctrlsService")],ScrollVisibleService.prototype,"ctrlsService",void 0),__decorate$1H([PostConstruct],ScrollVisibleService.prototype,"postConstruct",null),ScrollVisibleService=__decorate$1H([Bean("scrollVisibleService")],ScrollVisibleService)}(BeanStub),__extends$1L=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1G=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},MouseEventService=function(_super){function MouseEventService(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.gridInstanceId=MouseEventService_1.gridInstanceSequence.next(),_this}var MouseEventService_1;return __extends$1L(MouseEventService,_super),MouseEventService_1=MouseEventService,MouseEventService.prototype.stampTopLevelGridCompWithGridInstance=function(eGridDiv){eGridDiv[MouseEventService_1.GRID_DOM_KEY]=this.gridInstanceId},MouseEventService.prototype.getRenderedCellForEvent=function(event){return getCtrlForEventTarget(this.gridOptionsService,event.target,CellCtrl.DOM_DATA_KEY_CELL_CTRL)},MouseEventService.prototype.isEventFromThisGrid=function(event){return this.isElementInThisGrid(event.target)},MouseEventService.prototype.isElementInThisGrid=function(element){for(var pointer=element;pointer;){var instanceId=pointer[MouseEventService_1.GRID_DOM_KEY];if(exists(instanceId))return instanceId===this.gridInstanceId;pointer=pointer.parentElement}return!1},MouseEventService.prototype.getCellPositionForEvent=function(event){var cellComp=this.getRenderedCellForEvent(event);return cellComp?cellComp.getCellPosition():null},MouseEventService.prototype.getNormalisedPosition=function(event){var x,y,gridPanelHasScrolls=this.gridOptionsService.isDomLayout("normal"),e=event;if(null!=e.clientX||null!=e.clientY?(x=e.clientX,y=e.clientY):(x=e.x,y=e.y),gridPanelHasScrolls){var gridBodyCon=this.ctrlsService.getGridBodyCtrl(),vRange=gridBodyCon.getScrollFeature().getVScrollPosition();x+=gridBodyCon.getScrollFeature().getHScrollPosition().left,y+=vRange.top}return{x,y}},MouseEventService.gridInstanceSequence=new NumberSequence,MouseEventService.GRID_DOM_KEY="__ag_grid_instance",__decorate$1G([Autowired("ctrlsService")],MouseEventService.prototype,"ctrlsService",void 0),MouseEventService=MouseEventService_1=__decorate$1G([Bean("mouseEventService")],MouseEventService)}(BeanStub),__extends$1K=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$9=function(){return __assign$9=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$9.apply(this,arguments)},__decorate$1F=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},NavigationService=function(_super){function NavigationService(){var _this=_super.call(this)||this;return _this.onPageDown=throttle(_this.onPageDown,100),_this.onPageUp=throttle(_this.onPageUp,100),_this}return __extends$1K(NavigationService,_super),NavigationService.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady((function(p){_this.gridBodyCon=p.gridBodyCtrl}))},NavigationService.prototype.handlePageScrollingKey=function(event,fromFullWidth){void 0===fromFullWidth&&(fromFullWidth=!1);var key=event.key,alt=event.altKey,ctrl=event.ctrlKey||event.metaKey,rangeServiceShouldHandleShift=!!this.rangeService&&event.shiftKey,currentCell=this.mouseEventService.getCellPositionForEvent(event),processed=!1;switch(key){case KeyCode.PAGE_HOME:case KeyCode.PAGE_END:ctrl||alt||(this.onHomeOrEndKey(key),processed=!0);break;case KeyCode.LEFT:case KeyCode.RIGHT:case KeyCode.UP:case KeyCode.DOWN:if(!currentCell)return!1;!ctrl||alt||rangeServiceShouldHandleShift||(this.onCtrlUpDownLeftRight(key,currentCell),processed=!0);break;case KeyCode.PAGE_DOWN:case KeyCode.PAGE_UP:ctrl||alt||(processed=this.handlePageUpDown(key,currentCell,fromFullWidth))}return processed&&event.preventDefault(),processed},NavigationService.prototype.handlePageUpDown=function(key,currentCell,fromFullWidth){return fromFullWidth&&(currentCell=this.focusService.getFocusedCell()),!!currentCell&&(key===KeyCode.PAGE_UP?this.onPageUp(currentCell):this.onPageDown(currentCell),!0)},NavigationService.prototype.navigateTo=function(navigateParams){var scrollIndex=navigateParams.scrollIndex,scrollType=navigateParams.scrollType,scrollColumn=navigateParams.scrollColumn,focusIndex=navigateParams.focusIndex,focusColumn=navigateParams.focusColumn;if(exists(scrollColumn)&&!scrollColumn.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(scrollColumn),exists(scrollIndex)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(scrollIndex,scrollType),navigateParams.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(focusIndex),this.focusService.setFocusedCell({rowIndex:focusIndex,column:focusColumn,rowPinned:null,forceBrowserFocus:!0}),this.rangeService){var cellPosition={rowIndex:focusIndex,rowPinned:null,column:focusColumn};this.rangeService.setRangeToCell(cellPosition)}},NavigationService.prototype.onPageDown=function(gridCell){var scrollPosition=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),pixelsInOnePage=this.getViewportHeight(),pagingPixelOffset=this.paginationProxy.getPixelOffset(),currentPageBottomPixel=scrollPosition.top+pixelsInOnePage,currentPageBottomRow=this.paginationProxy.getRowIndexAtPixel(currentPageBottomPixel+pagingPixelOffset);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(gridCell,currentPageBottomRow):this.navigateToNextPage(gridCell,currentPageBottomRow)},NavigationService.prototype.onPageUp=function(gridCell){var scrollPosition=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),pagingPixelOffset=this.paginationProxy.getPixelOffset(),currentPageTopPixel=scrollPosition.top,currentPageTopRow=this.paginationProxy.getRowIndexAtPixel(currentPageTopPixel+pagingPixelOffset);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(gridCell,currentPageTopRow,!0):this.navigateToNextPage(gridCell,currentPageTopRow,!0)},NavigationService.prototype.navigateToNextPage=function(gridCell,scrollIndex,up){void 0===up&&(up=!1);var scrollType,pixelsInOnePage=this.getViewportHeight(),firstRow=this.paginationProxy.getPageFirstRow(),lastRow=this.paginationProxy.getPageLastRow(),pagingPixelOffset=this.paginationProxy.getPixelOffset(),currentRowNode=this.paginationProxy.getRow(gridCell.rowIndex),rowPixelDiff=up?(null==currentRowNode?void 0:currentRowNode.rowHeight)-pixelsInOnePage-pagingPixelOffset:pixelsInOnePage-pagingPixelOffset,nextCellPixel=(null==currentRowNode?void 0:currentRowNode.rowTop)+rowPixelDiff,focusIndex=this.paginationProxy.getRowIndexAtPixel(nextCellPixel+pagingPixelOffset);if(focusIndex===gridCell.rowIndex){var diff=up?-1:1;scrollIndex=focusIndex=gridCell.rowIndex+diff}up?(scrollType="bottom",focusIndex<firstRow&&(focusIndex=firstRow),scrollIndex<firstRow&&(scrollIndex=firstRow)):(scrollType="top",focusIndex>lastRow&&(focusIndex=lastRow),scrollIndex>lastRow&&(scrollIndex=lastRow)),this.isRowTallerThanView(focusIndex)&&(scrollIndex=focusIndex,scrollType="top"),this.navigateTo({scrollIndex,scrollType,scrollColumn:null,focusIndex,focusColumn:gridCell.column})},NavigationService.prototype.navigateToNextPageWithAutoHeight=function(gridCell,scrollIndex,up){var _this=this;void 0===up&&(up=!1),this.navigateTo({scrollIndex,scrollType:up?"bottom":"top",scrollColumn:null,focusIndex:scrollIndex,focusColumn:gridCell.column}),setTimeout((function(){var focusIndex=_this.getNextFocusIndexForAutoHeight(gridCell,up);_this.navigateTo({scrollIndex,scrollType:up?"bottom":"top",scrollColumn:null,focusIndex,focusColumn:gridCell.column,isAsync:!0})}),50)},NavigationService.prototype.getNextFocusIndexForAutoHeight=function(gridCell,up){var _a;void 0===up&&(up=!1);for(var step=up?-1:1,pixelsInOnePage=this.getViewportHeight(),lastRowIndex=this.paginationProxy.getPageLastRow(),pixelSum=0,currentIndex=gridCell.rowIndex;currentIndex>=0&&currentIndex<=lastRowIndex;){var currentCell=this.paginationProxy.getRow(currentIndex);if(currentCell){var currentCellHeight=null!==(_a=currentCell.rowHeight)&&void 0!==_a?_a:0;if(pixelSum+currentCellHeight>pixelsInOnePage)break;pixelSum+=currentCellHeight}currentIndex+=step}return Math.max(0,Math.min(currentIndex,lastRowIndex))},NavigationService.prototype.getViewportHeight=function(){var scrollPosition=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),scrollbarWidth=this.gridOptionsService.getScrollbarWidth(),pixelsInOnePage=scrollPosition.bottom-scrollPosition.top;return this.ctrlsService.getCenterRowContainerCtrl().isHorizontalScrollShowing()&&(pixelsInOnePage-=scrollbarWidth),pixelsInOnePage},NavigationService.prototype.isRowTallerThanView=function(rowIndex){var rowNode=this.paginationProxy.getRow(rowIndex);if(!rowNode)return!1;var rowHeight=rowNode.rowHeight;return"number"==typeof rowHeight&&rowHeight>this.getViewportHeight()},NavigationService.prototype.onCtrlUpDownLeftRight=function(key,gridCell){var cellToFocus=this.cellNavigationService.getNextCellToFocus(key,gridCell,!0),rowIndex=cellToFocus.rowIndex,column=cellToFocus.column;this.navigateTo({scrollIndex:rowIndex,scrollType:null,scrollColumn:column,focusIndex:rowIndex,focusColumn:column})},NavigationService.prototype.onHomeOrEndKey=function(key){var homeKey=key===KeyCode.PAGE_HOME,allColumns=this.columnModel.getAllDisplayedColumns(),columnToSelect=homeKey?allColumns[0]:last(allColumns),scrollIndex=homeKey?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow();this.navigateTo({scrollIndex,scrollType:null,scrollColumn:columnToSelect,focusIndex:scrollIndex,focusColumn:columnToSelect})},NavigationService.prototype.onTabKeyDown=function(previous,keyboardEvent){var backwards=keyboardEvent.shiftKey;if(this.tabToNextCellCommon(previous,backwards,keyboardEvent))keyboardEvent.preventDefault();else if(backwards){var _a=previous.getRowPosition(),rowIndex=_a.rowIndex;(_a.rowPinned?0===rowIndex:rowIndex===this.paginationProxy.getPageFirstRow())&&(0===this.gridOptionsService.getNum("headerHeight")?this.focusService.focusNextGridCoreContainer(!0,!0):(keyboardEvent.preventDefault(),this.focusService.focusPreviousFromFirstCell(keyboardEvent)))}else previous instanceof CellCtrl&&previous.focusCell(!0),this.focusService.focusNextGridCoreContainer(backwards)&&keyboardEvent.preventDefault()},NavigationService.prototype.tabToNextCell=function(backwards,event){var focusedCell=this.focusService.getFocusedCell();if(!focusedCell)return!1;var cellOrRow=this.getCellByPosition(focusedCell);return!!(cellOrRow||(cellOrRow=this.rowRenderer.getRowByPosition(focusedCell))&&cellOrRow.isFullWidth())&&this.tabToNextCellCommon(cellOrRow,backwards,event)},NavigationService.prototype.tabToNextCellCommon=function(previous,backwards,event){var editing=previous.isEditing();if(!editing&&previous instanceof CellCtrl){var row=previous.getRowCtrl();row&&(editing=row.isEditing())}return(editing?"fullRow"===this.gridOptionsService.get("editType")?this.moveToNextEditingRow(previous,backwards,event):this.moveToNextEditingCell(previous,backwards,event):this.moveToNextCellNotEditing(previous,backwards))||!!this.focusService.getFocusedHeader()},NavigationService.prototype.moveToNextEditingCell=function(previousCell,backwards,event){void 0===event&&(event=null);var previousPos=previousCell.getCellPosition();previousCell.getGui().focus(),previousCell.stopEditing();var nextCell=this.findNextCellToFocusOn(previousPos,backwards,!0);return null!=nextCell&&(nextCell.startEditing(null,!0,event),nextCell.focusCell(!1),!0)},NavigationService.prototype.moveToNextEditingRow=function(previousCell,backwards,event){void 0===event&&(event=null);var previousPos=previousCell.getCellPosition(),nextCell=this.findNextCellToFocusOn(previousPos,backwards,!0);if(null==nextCell)return!1;var nextPos=nextCell.getCellPosition(),previousEditable=this.isCellEditable(previousPos),nextEditable=this.isCellEditable(nextPos),rowsMatch=nextPos&&previousPos.rowIndex===nextPos.rowIndex&&previousPos.rowPinned===nextPos.rowPinned;(previousEditable&&previousCell.setFocusOutOnEditor(),rowsMatch)||(previousCell.getRowCtrl().stopEditing(),nextCell.getRowCtrl().startRowEditing(void 0,void 0,event));return nextEditable?(nextCell.setFocusInOnEditor(),nextCell.focusCell()):nextCell.focusCell(!0),!0},NavigationService.prototype.moveToNextCellNotEditing=function(previousCell,backwards){var cellPos,displayedColumns=this.columnModel.getAllDisplayedColumns();cellPos=previousCell instanceof RowCtrl?__assign$9(__assign$9({},previousCell.getRowPosition()),{column:backwards?displayedColumns[0]:last(displayedColumns)}):previousCell.getCellPosition();var nextCell=this.findNextCellToFocusOn(cellPos,backwards,!1);if(nextCell instanceof CellCtrl)nextCell.focusCell(!0);else if(nextCell)return this.tryToFocusFullWidthRow(nextCell.getRowPosition(),backwards);return exists(nextCell)},NavigationService.prototype.findNextCellToFocusOn=function(previousPosition,backwards,startEditing){for(var nextPosition=previousPosition;;){previousPosition!==nextPosition&&(previousPosition=nextPosition),backwards||(nextPosition=this.getLastCellOfColSpan(nextPosition)),nextPosition=this.cellNavigationService.getNextTabbedCell(nextPosition,backwards);var userFunc=this.gridOptionsService.getCallback("tabToNextCell");if(exists(userFunc)){var userCell=userFunc({backwards,editing:startEditing,previousCellPosition:previousPosition,nextCellPosition:nextPosition||null});exists(userCell)?(userCell.floating&&(doOnce((function(){console.warn("AG Grid: tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?")}),"no floating in userCell"),userCell.rowPinned=userCell.floating),nextPosition={rowIndex:userCell.rowIndex,column:userCell.column,rowPinned:userCell.rowPinned}):nextPosition=null}if(!nextPosition)return null;if(nextPosition.rowIndex<0){var headerLen=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:headerLen+nextPosition.rowIndex,column:nextPosition.column},fromCell:!0}),null}var fullRowEdit="fullRow"===this.gridOptionsService.get("editType");if(startEditing&&!fullRowEdit)if(!this.isCellEditable(nextPosition))continue;this.ensureCellVisible(nextPosition);var nextCell=this.getCellByPosition(nextPosition);if(!nextCell){var row=this.rowRenderer.getRowByPosition(nextPosition);if(!row||!row.isFullWidth()||startEditing)continue;return row}if(!nextCell.isSuppressNavigable())return this.rangeService&&this.rangeService.setRangeToCell(nextPosition),nextCell}},NavigationService.prototype.isCellEditable=function(cell){var rowNode=this.lookupRowNodeForCell(cell);return!!rowNode&&cell.column.isCellEditable(rowNode)},NavigationService.prototype.getCellByPosition=function(cellPosition){var rowCtrl=this.rowRenderer.getRowByPosition(cellPosition);return rowCtrl?rowCtrl.getCellCtrl(cellPosition.column):null},NavigationService.prototype.lookupRowNodeForCell=function(cell){return"top"===cell.rowPinned?this.pinnedRowModel.getPinnedTopRow(cell.rowIndex):"bottom"===cell.rowPinned?this.pinnedRowModel.getPinnedBottomRow(cell.rowIndex):this.paginationProxy.getRow(cell.rowIndex)},NavigationService.prototype.navigateToNextCell=function(event,key,currentCell,allowUserOverride){for(var nextCell=currentCell,hitEdgeOfGrid=!1;nextCell&&(nextCell===currentCell||!this.isValidNavigateCell(nextCell));)this.gridOptionsService.is("enableRtl")?key===KeyCode.LEFT&&(nextCell=this.getLastCellOfColSpan(nextCell)):key===KeyCode.RIGHT&&(nextCell=this.getLastCellOfColSpan(nextCell)),hitEdgeOfGrid=missing(nextCell=this.cellNavigationService.getNextCellToFocus(key,nextCell));if(hitEdgeOfGrid&&event&&event.key===KeyCode.UP&&(nextCell={rowIndex:-1,rowPinned:null,column:currentCell.column}),allowUserOverride){var userFunc=this.gridOptionsService.getCallback("navigateToNextCell");if(exists(userFunc)){var userCell=userFunc({key,previousCellPosition:currentCell,nextCellPosition:nextCell||null,event});exists(userCell)?(userCell.floating&&(doOnce((function(){console.warn("AG Grid: tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?")}),"no floating in userCell"),userCell.rowPinned=userCell.floating),nextCell={rowPinned:userCell.rowPinned,rowIndex:userCell.rowIndex,column:userCell.column}):nextCell=null}}if(nextCell)if(nextCell.rowIndex<0){var headerLen=this.headerNavigationService.getHeaderRowCount();this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:headerLen+nextCell.rowIndex,column:currentCell.column},event:event||void 0,fromCell:!0})}else{var normalisedPosition=this.getNormalisedPosition(nextCell);normalisedPosition?this.focusPosition(normalisedPosition):this.tryToFocusFullWidthRow(nextCell)}},NavigationService.prototype.getNormalisedPosition=function(cellPosition){this.ensureCellVisible(cellPosition);var cellCtrl=this.getCellByPosition(cellPosition);return cellCtrl?(cellPosition=cellCtrl.getCellPosition(),this.ensureCellVisible(cellPosition),cellPosition):null},NavigationService.prototype.tryToFocusFullWidthRow=function(position,backwards){void 0===backwards&&(backwards=!1);var displayedColumns=this.columnModel.getAllDisplayedColumns(),rowComp=this.rowRenderer.getRowByPosition(position);if(!rowComp||!rowComp.isFullWidth())return!1;var currentCellFocused=this.focusService.getFocusedCell(),cellPosition={rowIndex:position.rowIndex,rowPinned:position.rowPinned,column:position.column||(backwards?last(displayedColumns):displayedColumns[0])};this.focusPosition(cellPosition);var fromBelow=null!=currentCellFocused&&this.rowPositionUtils.before(cellPosition,currentCellFocused),focusEvent={type:Events.EVENT_FULL_WIDTH_ROW_FOCUSED,rowIndex:cellPosition.rowIndex,rowPinned:cellPosition.rowPinned,column:cellPosition.column,isFullWidthCell:!0,floating:cellPosition.rowPinned,fromBelow};return this.eventService.dispatchEvent(focusEvent),!0},NavigationService.prototype.focusPosition=function(cellPosition){this.focusService.setFocusedCell({rowIndex:cellPosition.rowIndex,column:cellPosition.column,rowPinned:cellPosition.rowPinned,forceBrowserFocus:!0}),this.rangeService&&this.rangeService.setRangeToCell(cellPosition)},NavigationService.prototype.isValidNavigateCell=function(cell){return!!this.rowPositionUtils.getRowNode(cell)},NavigationService.prototype.getLastCellOfColSpan=function(cell){var cellCtrl=this.getCellByPosition(cell);if(!cellCtrl)return cell;var colSpanningList=cellCtrl.getColSpanningList();return 1===colSpanningList.length?cell:{rowIndex:cell.rowIndex,column:last(colSpanningList),rowPinned:cell.rowPinned}},NavigationService.prototype.ensureCellVisible=function(gridCell){var isGroupStickyEnabled=this.gridOptionsService.isGroupRowsSticky(),rowNode=this.rowModel.getRow(gridCell.rowIndex);!(isGroupStickyEnabled&&(null==rowNode?void 0:rowNode.sticky))&&missing(gridCell.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(gridCell.rowIndex),gridCell.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(gridCell.column)},__decorate$1F([Autowired("mouseEventService")],NavigationService.prototype,"mouseEventService",void 0),__decorate$1F([Autowired("paginationProxy")],NavigationService.prototype,"paginationProxy",void 0),__decorate$1F([Autowired("focusService")],NavigationService.prototype,"focusService",void 0),__decorate$1F([Optional("rangeService")],NavigationService.prototype,"rangeService",void 0),__decorate$1F([Autowired("columnModel")],NavigationService.prototype,"columnModel",void 0),__decorate$1F([Autowired("rowModel")],NavigationService.prototype,"rowModel",void 0),__decorate$1F([Autowired("ctrlsService")],NavigationService.prototype,"ctrlsService",void 0),__decorate$1F([Autowired("rowRenderer")],NavigationService.prototype,"rowRenderer",void 0),__decorate$1F([Autowired("headerNavigationService")],NavigationService.prototype,"headerNavigationService",void 0),__decorate$1F([Autowired("rowPositionUtils")],NavigationService.prototype,"rowPositionUtils",void 0),__decorate$1F([Autowired("cellNavigationService")],NavigationService.prototype,"cellNavigationService",void 0),__decorate$1F([Autowired("pinnedRowModel")],NavigationService.prototype,"pinnedRowModel",void 0),__decorate$1F([PostConstruct],NavigationService.prototype,"postConstruct",null),NavigationService=__decorate$1F([Bean("navigationService")],NavigationService)}(BeanStub),__extends$1J=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),PopupEditorWrapper=function(_super){function PopupEditorWrapper(params){var _this=_super.call(this,'<div class="ag-popup-editor" tabindex="-1"/>')||this;return _this.params=params,_this}return __extends$1J(PopupEditorWrapper,_super),PopupEditorWrapper.prototype.postConstruct=function(){this.gridOptionsService.setDomData(this.getGui(),PopupEditorWrapper.DOM_KEY_POPUP_EDITOR_WRAPPER,!0),this.addKeyDownListener()},PopupEditorWrapper.prototype.addKeyDownListener=function(){var _this=this,eGui=this.getGui(),params=this.params;this.addManagedListener(eGui,"keydown",(function(event){isUserSuppressingKeyboardEvent(_this.gridOptionsService,event,params.node,params.column,!0)||params.onKeyDown(event)}))},PopupEditorWrapper.DOM_KEY_POPUP_EDITOR_WRAPPER="popupEditorWrapper",function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([PostConstruct],PopupEditorWrapper.prototype,"postConstruct",null),PopupEditorWrapper}(PopupComponent),__extends$1I=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),CellComp=function(_super){function CellComp(beans,cellCtrl,printLayout,eRow,editingRow){var _this=_super.call(this)||this;_this.rendererVersion=0,_this.editorVersion=0,_this.beans=beans,_this.column=cellCtrl.getColumn(),_this.rowNode=cellCtrl.getRowNode(),_this.rowCtrl=cellCtrl.getRowCtrl(),_this.eRow=eRow,_this.cellCtrl=cellCtrl,_this.setTemplate('<div comp-id="'+_this.getCompId()+'"/>');var eGui=_this.getGui();_this.forceWrapper=cellCtrl.isForceWrapper(),_this.refreshWrapper(!1);var setAttribute=function(name,value){null!=value&&""!=value?eGui.setAttribute(name,value):eGui.removeAttribute(name)};setAriaRole(eGui,"gridcell"),setAttribute("col-id",cellCtrl.getColumnIdSanitised());var tabIndex=cellCtrl.getTabIndex();void 0!==tabIndex&&setAttribute("tabindex",tabIndex.toString());var compProxy={addOrRemoveCssClass:function(cssClassName,on){return _this.addOrRemoveCssClass(cssClassName,on)},setUserStyles:function(styles){return addStylesToElement(eGui,styles)},getFocusableElement:function(){return _this.getFocusableElement()},setIncludeSelection:function(include){return _this.includeSelection=include},setIncludeRowDrag:function(include){return _this.includeRowDrag=include},setIncludeDndSource:function(include){return _this.includeDndSource=include},setRenderDetails:function(compDetails,valueToDisplay,force){return _this.setRenderDetails(compDetails,valueToDisplay,force)},setEditDetails:function(compDetails,popup,position){return _this.setEditDetails(compDetails,popup,position)},getCellEditor:function(){return _this.cellEditor||null},getCellRenderer:function(){return _this.cellRenderer||null},getParentOfValue:function(){return _this.getParentOfValue()}};return cellCtrl.setComp(compProxy,_this.getGui(),_this.eCellWrapper,printLayout,editingRow),_this}return __extends$1I(CellComp,_super),CellComp.prototype.getParentOfValue=function(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()},CellComp.prototype.setRenderDetails=function(compDetails,valueToDisplay,forceNewCellRendererInstance){if(!(this.cellEditor&&!this.cellEditorPopupWrapper)){this.firstRender=null==this.firstRender;var controlWrapperChanged=this.refreshWrapper(!1);if(this.refreshEditStyles(!1),compDetails)!(forceNewCellRendererInstance||controlWrapperChanged)&&this.refreshCellRenderer(compDetails)||(this.destroyRenderer(),this.createCellRendererInstance(compDetails));else this.destroyRenderer(),this.insertValueWithoutCellRenderer(valueToDisplay)}},CellComp.prototype.setEditDetails=function(compDetails,popup,position){compDetails?this.createCellEditorInstance(compDetails,popup,position):this.destroyEditor()},CellComp.prototype.removeControls=function(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)},CellComp.prototype.refreshWrapper=function(editing){var providingControls=this.includeRowDrag||this.includeDndSource||this.includeSelection,usingWrapper=providingControls||this.forceWrapper,putWrapperIn=usingWrapper&&null==this.eCellWrapper;putWrapperIn&&(this.eCellWrapper=loadTemplate('<div class="ag-cell-wrapper" role="presentation"></div>'),this.getGui().appendChild(this.eCellWrapper));var takeWrapperOut=!usingWrapper&&null!=this.eCellWrapper;takeWrapperOut&&(removeFromParent(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!usingWrapper);var usingCellValue=!editing&&usingWrapper,putCellValueIn=usingCellValue&&null==this.eCellValue;putCellValueIn&&(this.eCellValue=loadTemplate('<span class="ag-cell-value" role="presentation"></span>'),this.eCellWrapper.appendChild(this.eCellValue));var takeCellValueOut=!usingCellValue&&null!=this.eCellValue;takeCellValueOut&&(removeFromParent(this.eCellValue),this.eCellValue=void 0);var templateChanged=putWrapperIn||takeWrapperOut||putCellValueIn||takeCellValueOut;return templateChanged&&this.removeControls(),editing||providingControls&&this.addControls(),templateChanged},CellComp.prototype.addControls=function(){this.includeRowDrag&&null==this.rowDraggingComp&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&null==this.dndSourceComp&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&null==this.checkboxSelectionComp&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))},CellComp.prototype.createCellEditorInstance=function(compDetails,popup,position){var _this=this,versionCopy=this.editorVersion,cellEditorPromise=compDetails.newAgStackInstance();if(cellEditorPromise){var params=compDetails.params;cellEditorPromise.then((function(c){return _this.afterCellEditorCreated(versionCopy,c,params,popup,position)})),missing(this.cellEditor)&&params.cellStartedEdit&&this.cellCtrl.focusCell(!0)}},CellComp.prototype.insertValueWithoutCellRenderer=function(valueToDisplay){var eParent=this.getParentOfValue();clearElement(eParent);var escapedValue=null!=valueToDisplay?escapeString(valueToDisplay):null;null!=escapedValue&&(eParent.innerHTML=escapedValue)},CellComp.prototype.destroyEditorAndRenderer=function(){this.destroyRenderer(),this.destroyEditor()},CellComp.prototype.destroyRenderer=function(){var context=this.beans.context;this.cellRenderer=context.destroyBean(this.cellRenderer),removeFromParent(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++},CellComp.prototype.destroyEditor=function(){var context=this.beans.context;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=context.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=context.destroyBean(this.cellEditorPopupWrapper),removeFromParent(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++},CellComp.prototype.refreshCellRenderer=function(compClassAndParams){if(null==this.cellRenderer||null==this.cellRenderer.refresh)return!1;if(this.cellRendererClass!==compClassAndParams.componentClass)return!1;var result=this.cellRenderer.refresh(compClassAndParams.params);return!0===result||void 0===result},CellComp.prototype.createCellRendererInstance=function(compDetails){var _this=this,useTaskService=!this.beans.gridOptionsService.is("suppressAnimationFrame"),displayComponentVersionCopy=this.rendererVersion,componentClass=compDetails.componentClass,createCellRendererFunc=function(){if(!(_this.rendererVersion!==displayComponentVersionCopy||!_this.isAlive())){var componentPromise=compDetails.newAgStackInstance(),callback=_this.afterCellRendererCreated.bind(_this,displayComponentVersionCopy,componentClass);componentPromise&&componentPromise.then(callback)}};useTaskService&&this.firstRender?this.beans.animationFrameService.createTask(createCellRendererFunc,this.rowNode.rowIndex,"createTasksP2"):createCellRendererFunc()},CellComp.prototype.getCtrl=function(){return this.cellCtrl},CellComp.prototype.getRowCtrl=function(){return this.rowCtrl},CellComp.prototype.getCellRenderer=function(){return this.cellRenderer},CellComp.prototype.getCellEditor=function(){return this.cellEditor},CellComp.prototype.afterCellRendererCreated=function(cellRendererVersion,cellRendererClass,cellRenderer){if(!this.isAlive()||cellRendererVersion!==this.rendererVersion)this.beans.context.destroyBean(cellRenderer);else if(this.cellRenderer=cellRenderer,this.cellRendererClass=cellRendererClass,this.cellRendererGui=this.cellRenderer.getGui(),null!=this.cellRendererGui){var eParent=this.getParentOfValue();clearElement(eParent),eParent.appendChild(this.cellRendererGui)}},CellComp.prototype.afterCellEditorCreated=function(requestVersion,cellEditor,params,popup,position){if(requestVersion!==this.editorVersion)this.beans.context.destroyBean(cellEditor);else{if(cellEditor.isCancelBeforeStart&&cellEditor.isCancelBeforeStart())return this.beans.context.destroyBean(cellEditor),void this.cellCtrl.stopEditing(!0);if(!cellEditor.getGui)return console.warn("AG Grid: cellEditor for column "+this.column.getId()+" is missing getGui() method"),void this.beans.context.destroyBean(cellEditor);this.cellEditor=cellEditor,this.cellEditorGui=cellEditor.getGui();var cellEditorInPopup=popup||void 0!==cellEditor.isPopup&&cellEditor.isPopup();cellEditorInPopup?this.addPopupCellEditor(params,position):this.addInCellEditor(),this.refreshEditStyles(!0,cellEditorInPopup),cellEditor.afterGuiAttached&&cellEditor.afterGuiAttached()}},CellComp.prototype.refreshEditStyles=function(editing,isPopup){var _a;this.addOrRemoveCssClass("ag-cell-inline-editing",editing&&!isPopup),this.addOrRemoveCssClass("ag-cell-popup-editing",editing&&!!isPopup),this.addOrRemoveCssClass("ag-cell-not-inline-editing",!editing||!!isPopup),null===(_a=this.rowCtrl)||void 0===_a||_a.setInlineEditingCss(editing)},CellComp.prototype.addInCellEditor=function(){var eGui=this.getGui(),eDocument=this.beans.gridOptionsService.getDocument();(eGui.contains(eDocument.activeElement)&&eGui.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui)&&this.getParentOfValue().appendChild(this.cellEditorGui)},CellComp.prototype.addPopupCellEditor=function(params,position){var _this=this;"fullRow"===this.beans.gridOptionsService.get("editType")&&console.warn("AG Grid: popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");var cellEditor=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(new PopupEditorWrapper(params));var ePopupGui=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&ePopupGui.appendChild(this.cellEditorGui);var popupService=this.beans.popupService,useModelPopup=this.beans.gridOptionsService.is("stopEditingWhenCellsLoseFocus"),positionToUse=null!=position?position:cellEditor.getPopupPosition?cellEditor.getPopupPosition():"over",isRtl=this.beans.gridOptionsService.is("enableRtl"),positionParams={ePopup:ePopupGui,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),position:positionToUse,alignSide:isRtl?"right":"left",keepWithinBounds:!0},positionCallback=popupService.positionPopupByComponent.bind(popupService,positionParams),translate=this.beans.localeService.getLocaleTextFunc(),addPopupRes=popupService.addPopup({modal:useModelPopup,eChild:ePopupGui,closeOnEsc:!0,closedCallback:function(){_this.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback,ariaLabel:translate("ariaLabelCellEditor","Cell Editor")});addPopupRes&&(this.hideEditorPopup=addPopupRes.hideFunc)},CellComp.prototype.detach=function(){this.eRow.removeChild(this.getGui())},CellComp.prototype.destroy=function(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),_super.prototype.destroy.call(this)},CellComp.prototype.clearParentOfValue=function(){var eGui=this.getGui(),eDocument=this.beans.gridOptionsService.getDocument();eGui.contains(eDocument.activeElement)&&browserSupportsPreventScroll()&&eGui.focus({preventScroll:!0}),clearElement(this.getParentOfValue())},CellComp}(Component),__extends$1H=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),RowComp=function(_super){function RowComp(ctrl,beans,containerType){var _this=_super.call(this)||this;_this.cellComps={},_this.beans=beans,_this.rowCtrl=ctrl,_this.setTemplate('<div comp-id="'+_this.getCompId()+'" style="'+_this.getInitialStyle(containerType)+'"/>');var eGui=_this.getGui(),style=eGui.style;_this.domOrder=_this.rowCtrl.getDomOrder(),setAriaRole(eGui,"row");var tabIndex=_this.rowCtrl.getTabIndex();null!=tabIndex&&eGui.setAttribute("tabindex",tabIndex.toString());var compProxy={setDomOrder:function(domOrder){return _this.domOrder=domOrder},setCellCtrls:function(cellCtrls){return _this.setCellCtrls(cellCtrls)},showFullWidth:function(compDetails){return _this.showFullWidth(compDetails)},getFullWidthCellRenderer:function(){return _this.getFullWidthCellRenderer()},addOrRemoveCssClass:function(name,on){return _this.addOrRemoveCssClass(name,on)},setUserStyles:function(styles){return addStylesToElement(eGui,styles)},setTop:function(top){return style.top=top},setTransform:function(transform){return style.transform=transform},setRowIndex:function(rowIndex){return eGui.setAttribute("row-index",rowIndex)},setRowId:function(rowId){return eGui.setAttribute("row-id",rowId)},setRowBusinessKey:function(businessKey){return eGui.setAttribute("row-business-key",businessKey)}};return ctrl.setComp(compProxy,_this.getGui(),containerType),_this.addDestroyFunc((function(){ctrl.unsetComp(containerType)})),_this}return __extends$1H(RowComp,_super),RowComp.prototype.getInitialStyle=function(containerType){var transform=this.rowCtrl.getInitialTransform(containerType),top=this.rowCtrl.getInitialRowTop(containerType);return transform?"transform: "+transform:"top: "+top},RowComp.prototype.showFullWidth=function(compDetails){var _this=this,res=compDetails.newAgStackInstance();res&&res.then((function(cellRenderer){if(_this.isAlive()){var eGui=cellRenderer.getGui();_this.getGui().appendChild(eGui),_this.rowCtrl.setupDetailRowAutoHeight(eGui),_this.setFullWidthRowComp(cellRenderer)}else _this.beans.context.destroyBean(cellRenderer)}))},RowComp.prototype.setCellCtrls=function(cellCtrls){var _this=this,cellsToRemove=Object.assign({},this.cellComps);cellCtrls.forEach((function(cellCtrl){var key=cellCtrl.getInstanceId();null==_this.cellComps[key]?_this.newCellComp(cellCtrl):cellsToRemove[key]=null}));var cellCompsToRemove=getAllValuesInObject(cellsToRemove).filter((function(cellComp){return null!=cellComp}));this.destroyCells(cellCompsToRemove),this.ensureDomOrder(cellCtrls)},RowComp.prototype.ensureDomOrder=function(cellCtrls){var _this=this;if(this.domOrder){var elementsInOrder=[];cellCtrls.forEach((function(cellCtrl){var cellComp=_this.cellComps[cellCtrl.getInstanceId()];cellComp&&elementsInOrder.push(cellComp.getGui())})),setDomChildOrder(this.getGui(),elementsInOrder)}},RowComp.prototype.newCellComp=function(cellCtrl){var cellComp=new CellComp(this.beans,cellCtrl,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[cellCtrl.getInstanceId()]=cellComp,this.getGui().appendChild(cellComp.getGui())},RowComp.prototype.destroy=function(){_super.prototype.destroy.call(this),this.destroyAllCells()},RowComp.prototype.destroyAllCells=function(){var cellsToDestroy=getAllValuesInObject(this.cellComps).filter((function(cp){return null!=cp}));this.destroyCells(cellsToDestroy)},RowComp.prototype.setFullWidthRowComp=function(fullWidthRowComponent){var _this=this;this.fullWidthCellRenderer&&console.error("AG Grid - should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=fullWidthRowComponent,this.addDestroyFunc((function(){_this.fullWidthCellRenderer=_this.beans.context.destroyBean(_this.fullWidthCellRenderer)}))},RowComp.prototype.getFullWidthCellRenderer=function(){return this.fullWidthCellRenderer},RowComp.prototype.destroyCells=function(cellComps){var _this=this;cellComps.forEach((function(cellComp){if(cellComp){var instanceId=cellComp.getCtrl().getInstanceId();_this.cellComps[instanceId]===cellComp&&(cellComp.detach(),cellComp.destroy(),_this.cellComps[instanceId]=null)}}))},RowComp}(Component),__extends$1G=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$8=function(){return __assign$8=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$8.apply(this,arguments)},__decorate$1D=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};var HeaderRowType,RowContainerComp=function(_super){function RowContainerComp(){var _this=_super.call(this,function templateFactory(){var name=Component.elementGettingCreated.getAttribute("name"),cssClasses=RowContainerCtrl.getRowContainerCssClasses(name);return name===RowContainerName.CENTER||name===RowContainerName.TOP_CENTER||name===RowContainerName.STICKY_TOP_CENTER||name===RowContainerName.BOTTOM_CENTER?'<div class="'+cssClasses.viewport+'" ref="eViewport" role="presentation">\n                <div class="'+cssClasses.container+'" ref="eContainer"></div>\n            </div>':'<div class="'+cssClasses.container+'" ref="eContainer"></div>'}())||this;return _this.rowComps={},_this.name=Component.elementGettingCreated.getAttribute("name"),_this.type=function getRowContainerTypeForName(name){switch(name){case RowContainerName.CENTER:case RowContainerName.TOP_CENTER:case RowContainerName.STICKY_TOP_CENTER:case RowContainerName.BOTTOM_CENTER:return RowContainerType.CENTER;case RowContainerName.LEFT:case RowContainerName.TOP_LEFT:case RowContainerName.STICKY_TOP_LEFT:case RowContainerName.BOTTOM_LEFT:return RowContainerType.LEFT;case RowContainerName.RIGHT:case RowContainerName.TOP_RIGHT:case RowContainerName.STICKY_TOP_RIGHT:case RowContainerName.BOTTOM_RIGHT:return RowContainerType.RIGHT;case RowContainerName.FULL_WIDTH:case RowContainerName.TOP_FULL_WIDTH:case RowContainerName.STICKY_TOP_FULL_WIDTH:case RowContainerName.BOTTOM_FULL_WIDTH:return RowContainerType.FULL_WIDTH;default:throw Error("Invalid Row Container Type")}}(_this.name),_this}return __extends$1G(RowContainerComp,_super),RowContainerComp.prototype.postConstruct=function(){var _this=this,compProxy={setViewportHeight:function(height){return _this.eViewport.style.height=height},setRowCtrls:function(rowCtrls){return _this.setRowCtrls(rowCtrls)},setDomOrder:function(domOrder){_this.domOrder=domOrder},setContainerWidth:function(width){return _this.eContainer.style.width=width}};this.createManagedBean(new RowContainerCtrl(this.name)).setComp(compProxy,this.eContainer,this.eViewport)},RowContainerComp.prototype.preDestroy=function(){this.setRowCtrls([])},RowContainerComp.prototype.setRowCtrls=function(rowCtrls){var _this=this,oldRows=__assign$8({},this.rowComps);this.rowComps={},this.lastPlacedElement=null;rowCtrls.forEach((function(rowCon){var instanceId=rowCon.getInstanceId(),existingRowComp=oldRows[instanceId];if(existingRowComp)_this.rowComps[instanceId]=existingRowComp,delete oldRows[instanceId],_this.ensureDomOrder(existingRowComp.getGui());else{if(!rowCon.getRowNode().displayed)return;var rowComp=new RowComp(rowCon,_this.beans,_this.type);_this.rowComps[instanceId]=rowComp,_this.appendRow(rowComp.getGui())}})),getAllValuesInObject(oldRows).forEach((function(oldRowComp){_this.eContainer.removeChild(oldRowComp.getGui()),oldRowComp.destroy()})),setAriaRole(this.eContainer,rowCtrls.length?"rowgroup":"presentation")},RowContainerComp.prototype.appendRow=function(element){this.domOrder?insertWithDomOrder(this.eContainer,element,this.lastPlacedElement):this.eContainer.appendChild(element),this.lastPlacedElement=element},RowContainerComp.prototype.ensureDomOrder=function(eRow){this.domOrder&&(ensureDomOrder(this.eContainer,eRow,this.lastPlacedElement),this.lastPlacedElement=eRow)},__decorate$1D([Autowired("beans")],RowContainerComp.prototype,"beans",void 0),__decorate$1D([RefSelector("eViewport")],RowContainerComp.prototype,"eViewport",void 0),__decorate$1D([RefSelector("eContainer")],RowContainerComp.prototype,"eContainer",void 0),__decorate$1D([PostConstruct],RowContainerComp.prototype,"postConstruct",null),__decorate$1D([PreDestroy],RowContainerComp.prototype,"preDestroy",null),RowContainerComp}(Component),__decorate$1C=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},BodyDropPivotTarget=function(){function BodyDropPivotTarget(pinned){this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=pinned}return BodyDropPivotTarget.prototype.onDragEnter=function(draggingEvent){var _this=this;if(this.clearColumnsList(),!this.gridOptionsService.is("functionsReadOnly")){var dragColumns=draggingEvent.dragItem.columns;dragColumns&&dragColumns.forEach((function(column){column.isPrimary()&&(column.isAnyFunctionActive()||(column.isAllowValue()?_this.columnsToAggregate.push(column):column.isAllowRowGroup()?_this.columnsToGroup.push(column):column.isAllowPivot()&&_this.columnsToPivot.push(column)))}))}},BodyDropPivotTarget.prototype.getIconName=function(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?DragAndDropService.ICON_PINNED:DragAndDropService.ICON_MOVE:null},BodyDropPivotTarget.prototype.onDragLeave=function(draggingEvent){this.clearColumnsList()},BodyDropPivotTarget.prototype.clearColumnsList=function(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0},BodyDropPivotTarget.prototype.onDragging=function(draggingEvent){},BodyDropPivotTarget.prototype.onDragStop=function(draggingEvent){this.columnsToAggregate.length>0&&this.columnModel.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.columnModel.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.columnModel.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")},__decorate$1C([Autowired("columnModel")],BodyDropPivotTarget.prototype,"columnModel",void 0),__decorate$1C([Autowired("gridOptionsService")],BodyDropPivotTarget.prototype,"gridOptionsService",void 0),BodyDropPivotTarget}(),__decorate$1B=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},MoveColumnFeature=function(){function MoveColumnFeature(pinned,eContainer){this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=pinned,this.eContainer=eContainer,this.centerContainer=!exists(pinned)}return MoveColumnFeature.prototype.init=function(){var _this=this;this.ctrlsService.whenReady((function(){_this.gridBodyCon=_this.ctrlsService.getGridBodyCtrl()}))},MoveColumnFeature.prototype.getIconName=function(){return this.pinned?DragAndDropService.ICON_PINNED:DragAndDropService.ICON_MOVE},MoveColumnFeature.prototype.onDragEnter=function(draggingEvent){var columns=draggingEvent.dragItem.columns;if(draggingEvent.dragSource.type===DragSourceType.ToolPanel)this.setColumnsVisible(columns,!0,"uiColumnDragged");else{var visibleState_1=draggingEvent.dragItem.visibleState,visibleColumns=(columns||[]).filter((function(column){return visibleState_1[column.getId()]}));this.setColumnsVisible(visibleColumns,!0,"uiColumnDragged")}this.setColumnsPinned(columns,this.pinned,"uiColumnDragged"),this.onDragging(draggingEvent,!0,!0)},MoveColumnFeature.prototype.onDragLeave=function(){this.ensureIntervalCleared(),this.lastMovedInfo=null},MoveColumnFeature.prototype.setColumnsVisible=function(columns,visible,source){if(void 0===source&&(source="api"),columns){var allowedCols=columns.filter((function(c){return!c.getColDef().lockVisible}));this.columnModel.setColumnsVisible(allowedCols,visible,source)}},MoveColumnFeature.prototype.setColumnsPinned=function(columns,pinned,source){if(void 0===source&&(source="api"),columns){var allowedCols=columns.filter((function(c){return!c.getColDef().lockPinned}));this.columnModel.setColumnsPinned(allowedCols,pinned,source)}},MoveColumnFeature.prototype.onDragStop=function(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null},MoveColumnFeature.prototype.normaliseX=function(x){this.gridOptionsService.is("enableRtl")&&(x=this.eContainer.clientWidth-x);return this.centerContainer&&(x+=this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft()),x},MoveColumnFeature.prototype.checkCenterForScrolling=function(xAdjustedForScroll){if(this.centerContainer){var firstVisiblePixel=this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft(),lastVisiblePixel=firstVisiblePixel+this.ctrlsService.getCenterRowContainerCtrl().getCenterWidth();this.gridOptionsService.is("enableRtl")?(this.needToMoveRight=xAdjustedForScroll<firstVisiblePixel+50,this.needToMoveLeft=xAdjustedForScroll>lastVisiblePixel-50):(this.needToMoveLeft=xAdjustedForScroll<firstVisiblePixel+50,this.needToMoveRight=xAdjustedForScroll>lastVisiblePixel-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}},MoveColumnFeature.prototype.onDragging=function(draggingEvent,fromEnter,fakeEvent,finished){var _a,_this=this;if(void 0===draggingEvent&&(draggingEvent=this.lastDraggingEvent),void 0===fromEnter&&(fromEnter=!1),void 0===fakeEvent&&(fakeEvent=!1),void 0===finished&&(finished=!1),finished){if(this.lastMovedInfo){var _b=this.lastMovedInfo,columns=_b.columns,toIndex=_b.toIndex;this.moveColumns(columns,toIndex,"uiColumnMoved",!0)}}else if(this.lastDraggingEvent=draggingEvent,!missing(draggingEvent.hDirection)){var mouseX=this.normaliseX(draggingEvent.x);fromEnter||this.checkCenterForScrolling(mouseX);var hDirection=this.normaliseDirection(draggingEvent.hDirection),dragSourceType=draggingEvent.dragSource.type,allMovingColumns=(null===(_a=draggingEvent.dragSource.getDragItem().columns)||void 0===_a?void 0:_a.filter((function(col){return!col.getColDef().lockPinned||col.getPinned()==_this.pinned})))||[];this.attemptMoveColumns({dragSourceType,allMovingColumns,hDirection,mouseX,fromEnter,fakeEvent})}},MoveColumnFeature.prototype.normaliseDirection=function(hDirection){if(!this.gridOptionsService.is("enableRtl"))return hDirection;switch(hDirection){case HorizontalDirection.Left:return HorizontalDirection.Right;case HorizontalDirection.Right:return HorizontalDirection.Left;default:console.error("AG Grid: Unknown direction "+hDirection)}},MoveColumnFeature.prototype.attemptMoveColumns=function(params){var dragSourceType=params.dragSourceType,hDirection=params.hDirection,mouseX=params.mouseX,fromEnter=params.fromEnter,fakeEvent=params.fakeEvent,draggingLeft=hDirection===HorizontalDirection.Left,draggingRight=hDirection===HorizontalDirection.Right,allMovingColumns=params.allMovingColumns;if(dragSourceType===DragSourceType.HeaderCell){var newCols_1=[];allMovingColumns.forEach((function(col){for(var _a,movingGroup=null,parent=col.getParent();null!=parent&&1===parent.getDisplayedLeafColumns().length;)movingGroup=parent,parent=parent.getParent();null!=movingGroup?(!!(null===(_a=movingGroup.getColGroupDef())||void 0===_a?void 0:_a.marryChildren)?movingGroup.getProvidedColumnGroup().getLeafColumns():movingGroup.getLeafColumns()).forEach((function(newCol){newCols_1.includes(newCol)||newCols_1.push(newCol)})):newCols_1.includes(col)||newCols_1.push(col)})),allMovingColumns=newCols_1}var allMovingColumnsOrdered=allMovingColumns.slice();this.columnModel.sortColumnsLikeGridColumns(allMovingColumnsOrdered);var validMoves=this.calculateValidMoves(allMovingColumnsOrdered,draggingRight,mouseX),oldIndex=this.calculateOldIndex(allMovingColumnsOrdered);if(0!==validMoves.length){var firstValidMove=validMoves[0],constrainDirection=null!==oldIndex&&!fromEnter;if(dragSourceType==DragSourceType.HeaderCell&&(constrainDirection=null!==oldIndex),constrainDirection&&!fakeEvent){if(draggingLeft&&firstValidMove>=oldIndex)return;if(draggingRight&&firstValidMove<=oldIndex)return}for(var displayedCols=this.columnModel.getAllDisplayedColumns(),potentialMoves=[],targetOrder=null,i=0;i<validMoves.length;i++){var move=validMoves[i],order=this.columnModel.getProposedColumnOrder(allMovingColumnsOrdered,move);if(this.columnModel.doesOrderPassRules(order)){var displayedOrder=order.filter((function(col){return displayedCols.includes(col)}));if(null===targetOrder)targetOrder=displayedOrder;else if(!_.areEqual(displayedOrder,targetOrder))break;var fragCount=this.groupFragCount(order);potentialMoves.push({move,fragCount})}}0!==potentialMoves.length&&(potentialMoves.sort((function(a,b){return a.fragCount-b.fragCount})),this.moveColumns(allMovingColumns,potentialMoves[0].move,"uiColumnMoved",!1))}},MoveColumnFeature.prototype.calculateOldIndex=function(movingCols){var gridCols=this.columnModel.getAllGridColumns(),indexes=sortNumerically(movingCols.map((function(col){return gridCols.indexOf(col)}))),firstIndex=indexes[0];return last(indexes)-firstIndex!==indexes.length-1?null:firstIndex},MoveColumnFeature.prototype.moveColumns=function(columns,toIndex,source,finished){this.columnModel.moveColumns(columns,toIndex,source,finished),this.lastMovedInfo=finished?null:{columns,toIndex}},MoveColumnFeature.prototype.groupFragCount=function(columns){function parents(col){for(var result=[],parent=col.getOriginalParent();null!=parent;)result.push(parent),parent=parent.getOriginalParent();return result}for(var count=0,_loop_1=function(i){var _a,a=parents(columns[i]),b=parents(columns[i+1]);_a=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}(a.length>b.length?[a,b]:[b,a],2),a=_a[0],b=_a[1],a.forEach((function(parent){-1===b.indexOf(parent)&&count++}))},i=0;i<columns.length-1;i++)_loop_1(i);return count},MoveColumnFeature.prototype.calculateValidMoves=function(movingCols,draggingRight,mouseX){var isMoveBlocked=this.gridOptionsService.is("suppressMovableColumns")||movingCols.some((function(col){return col.getColDef().suppressMovable}));if(isMoveBlocked)return[];var firstValidMove,allDisplayedCols=this.columnModel.getDisplayedColumns(this.pinned),allGridCols=this.columnModel.getAllGridColumns(),movingDisplayedCols=allDisplayedCols.filter((function(col){return includes(movingCols,col)})),otherDisplayedCols=allDisplayedCols.filter((function(col){return!includes(movingCols,col)})),otherGridCols=allGridCols.filter((function(col){return!includes(movingCols,col)})),displayIndex=0,availableWidth=mouseX;if(draggingRight){var widthOfMovingDisplayedCols_1=0;movingDisplayedCols.forEach((function(col){return widthOfMovingDisplayedCols_1+=col.getActualWidth()})),availableWidth-=widthOfMovingDisplayedCols_1}if(availableWidth>0){for(var i=0;i<otherDisplayedCols.length;i++){if((availableWidth-=otherDisplayedCols[i].getActualWidth())<0)break;displayIndex++}draggingRight&&displayIndex++}if(displayIndex>0){var leftColumn=otherDisplayedCols[displayIndex-1];firstValidMove=otherGridCols.indexOf(leftColumn)+1}else-1===(firstValidMove=otherGridCols.indexOf(otherDisplayedCols[0]))&&(firstValidMove=0);var validMoves=[firstValidMove],numberComparator=function(a,b){return a-b};if(draggingRight){for(var pointer=firstValidMove+1,lastIndex=allGridCols.length-1;pointer<=lastIndex;)validMoves.push(pointer),pointer++;validMoves.sort(numberComparator)}else{pointer=firstValidMove,lastIndex=allGridCols.length-1;for(var displacedCol=allGridCols[pointer];pointer<=lastIndex&&this.isColumnHidden(allDisplayedCols,displacedCol);)pointer++,validMoves.push(pointer),displacedCol=allGridCols[pointer];pointer=firstValidMove-1;for(;pointer>=0;)validMoves.push(pointer),pointer--;validMoves.sort(numberComparator).reverse()}return validMoves},MoveColumnFeature.prototype.isColumnHidden=function(displayedColumns,col){return displayedColumns.indexOf(col)<0},MoveColumnFeature.prototype.ensureIntervalStarted=function(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.needToMoveLeft?this.dragAndDropService.setGhostIcon(DragAndDropService.ICON_LEFT,!0):this.dragAndDropService.setGhostIcon(DragAndDropService.ICON_RIGHT,!0))},MoveColumnFeature.prototype.ensureIntervalCleared=function(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon(DragAndDropService.ICON_MOVE))},MoveColumnFeature.prototype.moveInterval=function(){var pixelsToMove;this.intervalCount++,(pixelsToMove=10+5*this.intervalCount)>100&&(pixelsToMove=100);var pixelsMoved=null,scrollFeature=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?pixelsMoved=scrollFeature.scrollHorizontally(-pixelsToMove):this.needToMoveRight&&(pixelsMoved=scrollFeature.scrollHorizontally(pixelsToMove)),0!==pixelsMoved)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;var columnsThatCanPin=this.lastDraggingEvent.dragItem.columns.filter((function(c){return!c.getColDef().lockPinned}));if(columnsThatCanPin.length>0&&(this.dragAndDropService.setGhostIcon(DragAndDropService.ICON_PINNED),this.failedMoveAttempts>7)){var pinType=this.needToMoveLeft?"left":"right";this.setColumnsPinned(columnsThatCanPin,pinType,"uiColumnDragged"),this.dragAndDropService.nudge()}}},__decorate$1B([Autowired("columnModel")],MoveColumnFeature.prototype,"columnModel",void 0),__decorate$1B([Autowired("dragAndDropService")],MoveColumnFeature.prototype,"dragAndDropService",void 0),__decorate$1B([Autowired("gridOptionsService")],MoveColumnFeature.prototype,"gridOptionsService",void 0),__decorate$1B([Autowired("ctrlsService")],MoveColumnFeature.prototype,"ctrlsService",void 0),__decorate$1B([PostConstruct],MoveColumnFeature.prototype,"init",null),MoveColumnFeature}(),__extends$1F=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1A=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},BodyDropTarget=function(_super){function BodyDropTarget(pinned,eContainer){var _this=_super.call(this)||this;return _this.pinned=pinned,_this.eContainer=eContainer,_this}return __extends$1F(BodyDropTarget,_super),BodyDropTarget.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady((function(p){switch(_this.pinned){case"left":_this.eSecondaryContainers=[[p.gridBodyCtrl.getBodyViewportElement(),p.leftRowContainerCtrl.getContainerElement()],[p.bottomLeftRowContainerCtrl.getContainerElement()],[p.topLeftRowContainerCtrl.getContainerElement()]];break;case"right":_this.eSecondaryContainers=[[p.gridBodyCtrl.getBodyViewportElement(),p.rightRowContainerCtrl.getContainerElement()],[p.bottomRightRowContainerCtrl.getContainerElement()],[p.topRightRowContainerCtrl.getContainerElement()]];break;default:_this.eSecondaryContainers=[[p.gridBodyCtrl.getBodyViewportElement(),p.centerRowContainerCtrl.getViewportElement()],[p.bottomCenterRowContainerCtrl.getViewportElement()],[p.topCenterRowContainerCtrl.getViewportElement()]]}}))},BodyDropTarget.prototype.isInterestedIn=function(type){return type===DragSourceType.HeaderCell||type===DragSourceType.ToolPanel&&this.gridOptionsService.is("allowDragFromColumnsToolPanel")},BodyDropTarget.prototype.getSecondaryContainers=function(){return this.eSecondaryContainers},BodyDropTarget.prototype.getContainer=function(){return this.eContainer},BodyDropTarget.prototype.init=function(){this.moveColumnFeature=this.createManagedBean(new MoveColumnFeature(this.pinned,this.eContainer)),this.bodyDropPivotTarget=this.createManagedBean(new BodyDropPivotTarget(this.pinned)),this.dragAndDropService.addDropTarget(this)},BodyDropTarget.prototype.getIconName=function(){return this.currentDropListener.getIconName()},BodyDropTarget.prototype.isDropColumnInPivotMode=function(draggingEvent){return this.columnModel.isPivotMode()&&draggingEvent.dragSource.type===DragSourceType.ToolPanel},BodyDropTarget.prototype.onDragEnter=function(draggingEvent){this.currentDropListener=this.isDropColumnInPivotMode(draggingEvent)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(draggingEvent)},BodyDropTarget.prototype.onDragLeave=function(params){this.currentDropListener.onDragLeave(params)},BodyDropTarget.prototype.onDragging=function(params){this.currentDropListener.onDragging(params)},BodyDropTarget.prototype.onDragStop=function(params){this.currentDropListener.onDragStop(params)},__decorate$1A([Autowired("dragAndDropService")],BodyDropTarget.prototype,"dragAndDropService",void 0),__decorate$1A([Autowired("columnModel")],BodyDropTarget.prototype,"columnModel",void 0),__decorate$1A([Autowired("ctrlsService")],BodyDropTarget.prototype,"ctrlsService",void 0),__decorate$1A([PostConstruct],BodyDropTarget.prototype,"postConstruct",null),__decorate$1A([PostConstruct],BodyDropTarget.prototype,"init",null),BodyDropTarget}(BeanStub),CssClassApplier=function(){function CssClassApplier(){}return CssClassApplier.getHeaderClassesFromColDef=function(abstractColDef,gridOptionsService,column,columnGroup){return missing(abstractColDef)?[]:this.getColumnClassesFromCollDef(abstractColDef.headerClass,abstractColDef,gridOptionsService,column,columnGroup)},CssClassApplier.getToolPanelClassesFromColDef=function(abstractColDef,gridOptionsService,column,columnGroup){return missing(abstractColDef)?[]:this.getColumnClassesFromCollDef(abstractColDef.toolPanelClass,abstractColDef,gridOptionsService,column,columnGroup)},CssClassApplier.getClassParams=function(abstractColDef,gridOptionsService,column,columnGroup){return{colDef:abstractColDef,column,columnGroup,api:gridOptionsService.api,columnApi:gridOptionsService.columnApi,context:gridOptionsService.context}},CssClassApplier.getColumnClassesFromCollDef=function(classesOrFunc,abstractColDef,gridOptionsService,column,columnGroup){if(missing(classesOrFunc))return[];var classToUse;"function"==typeof classesOrFunc?classToUse=classesOrFunc(this.getClassParams(abstractColDef,gridOptionsService,column,columnGroup)):classToUse=classesOrFunc;return"string"==typeof classToUse?[classToUse]:Array.isArray(classToUse)?function(to,from){for(var i=0,il=from.length,j=to.length;i<il;i++,j++)to[j]=from[i];return to}([],function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}(classToUse)):[]},CssClassApplier}(),__extends$1E=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1z=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HeaderCellComp=function(_super){function HeaderCellComp(ctrl){var _this=_super.call(this,HeaderCellComp.TEMPLATE,ctrl)||this;return _this.headerCompVersion=0,_this.column=ctrl.getColumnGroupChild(),_this.pinned=ctrl.getPinned(),_this}return __extends$1E(HeaderCellComp,_super),HeaderCellComp.prototype.postConstruct=function(){var name,value,_this=this,eGui=this.getGui();name="col-id",null!=(value=this.column.getColId())&&""!=value?eGui.setAttribute(name,value):eGui.removeAttribute(name);var compProxy={setWidth:function(width){return eGui.style.width=width},addOrRemoveCssClass:function(cssClassName,on){return _this.addOrRemoveCssClass(cssClassName,on)},setAriaDescription:function(label){return setAriaDescription(eGui,label)},setAriaSort:function(sort){return sort?setAriaSort(eGui,sort):removeAriaSort(eGui)},setUserCompDetails:function(compDetails){return _this.setUserCompDetails(compDetails)},getUserCompInstance:function(){return _this.headerComp}};this.ctrl.setComp(compProxy,this.getGui(),this.eResize,this.eHeaderCompWrapper);var selectAllGui=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",selectAllGui)},HeaderCellComp.prototype.destroyHeaderComp=function(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)},HeaderCellComp.prototype.setUserCompDetails=function(compDetails){var _this=this;this.headerCompVersion++;var versionCopy=this.headerCompVersion;compDetails.newAgStackInstance().then((function(comp){return _this.afterCompCreated(versionCopy,comp)}))},HeaderCellComp.prototype.afterCompCreated=function(version,headerComp){version==this.headerCompVersion&&this.isAlive()?(this.destroyHeaderComp(),this.headerComp=headerComp,this.headerCompGui=headerComp.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())):this.destroyBean(headerComp)},HeaderCellComp.TEMPLATE='<div class="ag-header-cell" role="columnheader" tabindex="-1">\n            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>\n            <div ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>\n        </div>',__decorate$1z([RefSelector("eResize")],HeaderCellComp.prototype,"eResize",void 0),__decorate$1z([RefSelector("eHeaderCompWrapper")],HeaderCellComp.prototype,"eHeaderCompWrapper",void 0),__decorate$1z([PostConstruct],HeaderCellComp.prototype,"postConstruct",null),__decorate$1z([PreDestroy],HeaderCellComp.prototype,"destroyHeaderComp",null),HeaderCellComp}(AbstractHeaderCellComp),__extends$1D=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1y=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HeaderGroupCellComp=function(_super){function HeaderGroupCellComp(ctrl){return _super.call(this,HeaderGroupCellComp.TEMPLATE,ctrl)||this}return __extends$1D(HeaderGroupCellComp,_super),HeaderGroupCellComp.prototype.postConstruct=function(){var _this=this,eGui=this.getGui();eGui.setAttribute("col-id",this.ctrl.getColId());var compProxy={addOrRemoveCssClass:function(cssClassName,on){return _this.addOrRemoveCssClass(cssClassName,on)},setResizableDisplayed:function(displayed){return setDisplayed(_this.eResize,displayed)},setWidth:function(width){return eGui.style.width=width},setAriaExpanded:function(expanded){return key="aria-expanded",null!=(value=expanded)?eGui.setAttribute(key,value):eGui.removeAttribute(key);var key,value},setUserCompDetails:function(details){return _this.setUserCompDetails(details)}};this.ctrl.setComp(compProxy,eGui,this.eResize)},HeaderGroupCellComp.prototype.setUserCompDetails=function(details){var _this=this;details.newAgStackInstance().then((function(comp){return _this.afterHeaderCompCreated(comp)}))},HeaderGroupCellComp.prototype.afterHeaderCompCreated=function(headerGroupComp){var _this=this,destroyFunc=function(){return _this.destroyBean(headerGroupComp)};if(this.isAlive()){var eGui=this.getGui(),eHeaderGroupGui=headerGroupComp.getGui();eGui.appendChild(eHeaderGroupGui),this.addDestroyFunc(destroyFunc),this.ctrl.setDragSource(eGui)}else destroyFunc()},HeaderGroupCellComp.TEMPLATE='<div class="ag-header-group-cell" role="columnheader" tabindex="-1">\n            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>\n        </div>',__decorate$1y([Autowired("userComponentFactory")],HeaderGroupCellComp.prototype,"userComponentFactory",void 0),__decorate$1y([RefSelector("eResize")],HeaderGroupCellComp.prototype,"eResize",void 0),__decorate$1y([PostConstruct],HeaderGroupCellComp.prototype,"postConstruct",null),HeaderGroupCellComp}(AbstractHeaderCellComp),__extends$1C=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1x=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};!function(HeaderRowType){HeaderRowType.COLUMN_GROUP="group",HeaderRowType.COLUMN="column",HeaderRowType.FLOATING_FILTER="filter"}(HeaderRowType||(HeaderRowType={}));var TabGuardClassNames,HeaderRowComp=function(_super){function HeaderRowComp(ctrl){var _this=_super.call(this)||this;return _this.headerComps={},_this.ctrl=ctrl,_this.setTemplate('<div class="'+_this.ctrl.getHeaderRowClass()+'" role="row"></div>'),_this}return __extends$1C(HeaderRowComp,_super),HeaderRowComp.prototype.init=function(){var _this=this;this.getGui().style.transform=this.ctrl.getTransform(),setAriaRowIndex(this.getGui(),this.ctrl.getAriaRowIndex());var compProxy={setHeight:function(height){return _this.getGui().style.height=height},setTop:function(top){return _this.getGui().style.top=top},setHeaderCtrls:function(ctrls,forceOrder){return _this.setHeaderCtrls(ctrls,forceOrder)},setWidth:function(width){return _this.getGui().style.width=width}};this.ctrl.setComp(compProxy)},HeaderRowComp.prototype.destroyHeaderCtrls=function(){this.setHeaderCtrls([],!1)},HeaderRowComp.prototype.setHeaderCtrls=function(ctrls,forceOrder){var _this=this;if(this.isAlive()){var oldComps=this.headerComps;if(this.headerComps={},ctrls.forEach((function(ctrl){var id=ctrl.getInstanceId(),comp=oldComps[id];delete oldComps[id],null==comp&&(comp=_this.createHeaderComp(ctrl),_this.getGui().appendChild(comp.getGui())),_this.headerComps[id]=comp})),iterateObject(oldComps,(function(id,comp){_this.getGui().removeChild(comp.getGui()),_this.destroyBean(comp)})),forceOrder){var comps=getAllValuesInObject(this.headerComps);comps.sort((function(a,b){return a.getCtrl().getColumnGroupChild().getLeft()-b.getCtrl().getColumnGroupChild().getLeft()}));var elementsInOrder=comps.map((function(c){return c.getGui()}));setDomChildOrder(this.getGui(),elementsInOrder)}}},HeaderRowComp.prototype.createHeaderComp=function(headerCtrl){var result;switch(this.ctrl.getType()){case HeaderRowType.COLUMN_GROUP:result=new HeaderGroupCellComp(headerCtrl);break;case HeaderRowType.FLOATING_FILTER:result=new HeaderFilterCellComp(headerCtrl);break;default:result=new HeaderCellComp(headerCtrl)}return this.createBean(result),result.setParentComponent(this),result},__decorate$1x([PostConstruct],HeaderRowComp.prototype,"init",null),__decorate$1x([PreDestroy],HeaderRowComp.prototype,"destroyHeaderCtrls",null),HeaderRowComp}(Component),__extends$1B=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1w=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},instanceIdSequence$1=0,AbstractHeaderCellCtrl=function(_super){function AbstractHeaderCellCtrl(columnGroupChild,parentRowCtrl){var _this=_super.call(this)||this;return _this.lastFocusEvent=null,_this.columnGroupChild=columnGroupChild,_this.parentRowCtrl=parentRowCtrl,_this.instanceId=columnGroupChild.getUniqueId()+"-"+instanceIdSequence$1++,_this}return __extends$1B(AbstractHeaderCellCtrl,_super),AbstractHeaderCellCtrl.prototype.shouldStopEventPropagation=function(e){var _a=this.focusService.getFocusedHeader(),headerRowIndex=_a.headerRowIndex,column=_a.column;return isUserSuppressingHeaderKeyboardEvent(this.gridOptionsService,e,headerRowIndex,column)},AbstractHeaderCellCtrl.prototype.getWrapperHasFocus=function(){return this.gridOptionsService.getDocument().activeElement===this.eGui},AbstractHeaderCellCtrl.prototype.setGui=function(eGui){this.eGui=eGui,this.addDomData()},AbstractHeaderCellCtrl.prototype.handleKeyDown=function(e){var wrapperHasFocus=this.getWrapperHasFocus();switch(e.key){case KeyCode.PAGE_DOWN:case KeyCode.PAGE_UP:case KeyCode.PAGE_HOME:case KeyCode.PAGE_END:wrapperHasFocus&&e.preventDefault()}},AbstractHeaderCellCtrl.prototype.addDomData=function(){var _this=this,key=AbstractHeaderCellCtrl.DOM_DATA_KEY_HEADER_CTRL;this.gridOptionsService.setDomData(this.eGui,key,this),this.addDestroyFunc((function(){return _this.gridOptionsService.setDomData(_this.eGui,key,null)}))},AbstractHeaderCellCtrl.prototype.getGui=function(){return this.eGui},AbstractHeaderCellCtrl.prototype.focus=function(event){return!!this.eGui&&(this.lastFocusEvent=event||null,this.eGui.focus(),!0)},AbstractHeaderCellCtrl.prototype.getRowIndex=function(){return this.parentRowCtrl.getRowIndex()},AbstractHeaderCellCtrl.prototype.getParentRowCtrl=function(){return this.parentRowCtrl},AbstractHeaderCellCtrl.prototype.getPinned=function(){return this.parentRowCtrl.getPinned()},AbstractHeaderCellCtrl.prototype.getInstanceId=function(){return this.instanceId},AbstractHeaderCellCtrl.prototype.getColumnGroupChild=function(){return this.columnGroupChild},AbstractHeaderCellCtrl.DOM_DATA_KEY_HEADER_CTRL="headerCtrl",__decorate$1w([Autowired("focusService")],AbstractHeaderCellCtrl.prototype,"focusService",void 0),__decorate$1w([Autowired("beans")],AbstractHeaderCellCtrl.prototype,"beans",void 0),__decorate$1w([Autowired("userComponentFactory")],AbstractHeaderCellCtrl.prototype,"userComponentFactory",void 0),AbstractHeaderCellCtrl}(BeanStub),__extends$1A=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),SetLeftFeature=function(_super){function SetLeftFeature(columnOrGroup,eCell,beans,colsSpanning){var _this=_super.call(this)||this;return _this.columnOrGroup=columnOrGroup,_this.eCell=eCell,_this.ariaEl=_this.eCell.querySelector("[role=columnheader]")||_this.eCell,_this.colsSpanning=colsSpanning,_this.beans=beans,_this}return __extends$1A(SetLeftFeature,_super),SetLeftFeature.prototype.setColsSpanning=function(colsSpanning){this.colsSpanning=colsSpanning,this.onLeftChanged()},SetLeftFeature.prototype.getColumnOrGroup=function(){return this.beans.gridOptionsService.is("enableRtl")&&this.colsSpanning?last(this.colsSpanning):this.columnOrGroup},SetLeftFeature.prototype.postConstruct=function(){this.addManagedListener(this.columnOrGroup,Column.EVENT_LEFT_CHANGED,this.onLeftChanged.bind(this)),this.setLeftFirstTime(),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onLeftChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onLeftChanged.bind(this))},SetLeftFeature.prototype.setLeftFirstTime=function(){var suppressMoveAnimation=this.beans.gridOptionsService.is("suppressColumnMoveAnimation"),oldLeftExists=exists(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&oldLeftExists&&!suppressMoveAnimation?this.animateInLeft():this.onLeftChanged()},SetLeftFeature.prototype.animateInLeft=function(){var _this=this,colOrGroup=this.getColumnOrGroup(),left=colOrGroup.getLeft(),oldLeft=colOrGroup.getOldLeft(),oldActualLeft=this.modifyLeftForPrintLayout(colOrGroup,oldLeft),actualLeft=this.modifyLeftForPrintLayout(colOrGroup,left);this.setLeft(oldActualLeft),this.actualLeft=actualLeft,this.beans.columnAnimationService.executeNextVMTurn((function(){_this.actualLeft===actualLeft&&_this.setLeft(actualLeft)}))},SetLeftFeature.prototype.onLeftChanged=function(){var colOrGroup=this.getColumnOrGroup(),left=colOrGroup.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(colOrGroup,left),this.setLeft(this.actualLeft)},SetLeftFeature.prototype.modifyLeftForPrintLayout=function(colOrGroup,leftPosition){if(!this.beans.gridOptionsService.isDomLayout("print"))return leftPosition;if("left"===colOrGroup.getPinned())return leftPosition;var leftWidth=this.beans.columnModel.getDisplayedColumnsLeftWidth();return"right"===colOrGroup.getPinned()?leftWidth+this.beans.columnModel.getBodyContainerWidth()+leftPosition:leftWidth+leftPosition},SetLeftFeature.prototype.setLeft=function(value){var indexColumn;if(exists(value)&&(this.eCell.style.left=value+"px"),this.columnOrGroup instanceof Column)indexColumn=this.columnOrGroup;else{var children=this.columnOrGroup.getLeafColumns();if(!children.length)return;children.length>1&&setAriaColSpan(this.ariaEl,children.length),indexColumn=children[0]}var index=this.beans.columnModel.getAriaColumnIndex(indexColumn);setAriaColIndex(this.ariaEl,index)},function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([PostConstruct],SetLeftFeature.prototype,"postConstruct",null),SetLeftFeature}(BeanStub),__extends$1z=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1u=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HoverFeature=function(_super){function HoverFeature(columns,element){var _this=_super.call(this)||this;return _this.columns=columns,_this.element=element,_this}return __extends$1z(HoverFeature,_super),HoverFeature.prototype.postConstruct=function(){this.gridOptionsService.is("columnHoverHighlight")&&this.addMouseHoverListeners()},HoverFeature.prototype.addMouseHoverListeners=function(){this.addManagedListener(this.element,"mouseout",this.onMouseOut.bind(this)),this.addManagedListener(this.element,"mouseover",this.onMouseOver.bind(this))},HoverFeature.prototype.onMouseOut=function(){this.columnHoverService.clearMouseOver()},HoverFeature.prototype.onMouseOver=function(){this.columnHoverService.setMouseOver(this.columns)},__decorate$1u([Autowired("columnHoverService")],HoverFeature.prototype,"columnHoverService",void 0),__decorate$1u([PostConstruct],HoverFeature.prototype,"postConstruct",null),HoverFeature}(BeanStub),__extends$1y=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1t=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HeaderFilterCellCtrl=function(_super){function HeaderFilterCellCtrl(column,parentRowCtrl){var _this=_super.call(this,column,parentRowCtrl)||this;return _this.iconCreated=!1,_this.column=column,_this}return __extends$1y(HeaderFilterCellCtrl,_super),HeaderFilterCellCtrl.prototype.setComp=function(comp,eGui,eButtonShowMainFilter,eFloatingFilterBody){_super.prototype.setGui.call(this,eGui),this.comp=comp,this.eButtonShowMainFilter=eButtonShowMainFilter,this.eFloatingFilterBody=eFloatingFilterBody,this.setupActive(),this.setupWidth(),this.setupLeft(),this.setupHover(),this.setupFocus(),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(),this.setupUi(),this.addManagedListener(this.eButtonShowMainFilter,"click",this.showParentFilter.bind(this)),this.setupFilterChangedListener(),this.addManagedListener(this.column,Column.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this))},HeaderFilterCellCtrl.prototype.setupActive=function(){var colDef=this.column.getColDef(),filterExists=!!colDef.filter,floatingFilterExists=!!colDef.floatingFilter;this.active=filterExists&&floatingFilterExists},HeaderFilterCellCtrl.prototype.setupUi=function(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),this.active&&!this.iconCreated){var eMenuIcon=createIconNoSpan("filter",this.gridOptionsService,this.column);eMenuIcon&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(eMenuIcon))}},HeaderFilterCellCtrl.prototype.setupFocus=function(){this.createManagedBean(new ManagedFocusFeature(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))},HeaderFilterCellCtrl.prototype.setupAria=function(){var localeTextFunc=this.localeService.getLocaleTextFunc();setAriaLabel(this.eButtonShowMainFilter,localeTextFunc("ariaFilterMenuOpen","Open Filter Menu"))},HeaderFilterCellCtrl.prototype.onTabKeyDown=function(e){if(!(this.gridOptionsService.getDocument().activeElement===this.eGui)){var nextFocusableEl=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(nextFocusableEl)return this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),void nextFocusableEl.focus();var nextFocusableColumn=this.findNextColumnWithFloatingFilter(e.shiftKey);nextFocusableColumn&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:nextFocusableColumn},event:e})&&e.preventDefault()}},HeaderFilterCellCtrl.prototype.findNextColumnWithFloatingFilter=function(backwards){var columModel=this.beans.columnModel,nextCol=this.column;do{if(!(nextCol=backwards?columModel.getDisplayedColBefore(nextCol):columModel.getDisplayedColAfter(nextCol)))break}while(!nextCol.getColDef().filter||!nextCol.getColDef().floatingFilter);return nextCol},HeaderFilterCellCtrl.prototype.handleKeyDown=function(e){_super.prototype.handleKeyDown.call(this,e);var wrapperHasFocus=this.getWrapperHasFocus();switch(e.key){case KeyCode.UP:case KeyCode.DOWN:wrapperHasFocus||e.preventDefault();case KeyCode.LEFT:case KeyCode.RIGHT:if(wrapperHasFocus)return;e.stopPropagation();case KeyCode.ENTER:wrapperHasFocus&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case KeyCode.ESCAPE:wrapperHasFocus||this.eGui.focus()}},HeaderFilterCellCtrl.prototype.onFocusIn=function(e){if(!this.eGui.contains(e.relatedTarget)){var notFromHeaderWrapper=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),fromWithinHeader=!!e.relatedTarget&&isElementChildOfClass(e.relatedTarget,"ag-floating-filter");if(notFromHeaderWrapper&&fromWithinHeader&&e.target===this.eGui){var lastFocusEvent=this.lastFocusEvent,fromTab=!(!lastFocusEvent||lastFocusEvent.key!==KeyCode.TAB);if(lastFocusEvent&&fromTab){var shouldFocusLast=lastFocusEvent.shiftKey;this.focusService.focusInto(this.eGui,shouldFocusLast)}}var rowIndex=this.getRowIndex();this.beans.focusService.setFocusedHeader(rowIndex,this.column)}},HeaderFilterCellCtrl.prototype.setupHover=function(){var _this=this;this.createManagedBean(new HoverFeature([this.column],this.eGui));var listener=function(){if(_this.gridOptionsService.is("columnHoverHighlight")){var hovered=_this.columnHoverService.isHovered(_this.column);_this.comp.addOrRemoveCssClass("ag-column-hover",hovered)}};this.addManagedListener(this.eventService,Events.EVENT_COLUMN_HOVER_CHANGED,listener),listener()},HeaderFilterCellCtrl.prototype.setupLeft=function(){var setLeftFeature=new SetLeftFeature(this.column,this.eGui,this.beans);this.createManagedBean(setLeftFeature)},HeaderFilterCellCtrl.prototype.setupFilterButton=function(){var colDef=this.column.getColDef();this.suppressFilterButton=!!colDef.floatingFilterComponentParams&&!!colDef.floatingFilterComponentParams.suppressFilterButton},HeaderFilterCellCtrl.prototype.setupUserComp=function(){var _this=this;if(this.active){var compDetails=this.filterManager.getFloatingFilterCompDetails(this.column,(function(){return _this.showParentFilter()}));compDetails&&this.setCompDetails(compDetails)}},HeaderFilterCellCtrl.prototype.setCompDetails=function(compDetails){this.userCompDetails=compDetails,this.comp.setCompDetails(compDetails)},HeaderFilterCellCtrl.prototype.showParentFilter=function(){var eventSource=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuFactory.showMenuAfterButtonClick(this.column,eventSource,"floatingFilter","filterMenuTab",["filterMenuTab"])},HeaderFilterCellCtrl.prototype.setupSyncWithFilter=function(){var _this=this;if(this.active){var syncWithFilter=function(filterChangedEvent){var compPromise=_this.comp.getFloatingFilterComp();compPromise&&compPromise.then((function(comp){if(comp){var parentModel=_this.filterManager.getCurrentFloatingFilterParentModel(_this.column);comp.onParentModelChanged(parentModel,filterChangedEvent)}}))};this.destroySyncListener=this.addManagedListener(this.column,Column.EVENT_FILTER_CHANGED,syncWithFilter),this.filterManager.isFilterActive(this.column)&&syncWithFilter(null)}},HeaderFilterCellCtrl.prototype.setupWidth=function(){var _this=this,listener=function(){var width=_this.column.getActualWidth()+"px";_this.comp.setWidth(width)};this.addManagedListener(this.column,Column.EVENT_WIDTH_CHANGED,listener),listener()},HeaderFilterCellCtrl.prototype.setupFilterChangedListener=function(){this.active&&(this.destroyFilterChangedListener=this.addManagedListener(this.column,Column.EVENT_FILTER_CHANGED,this.updateFilterButton.bind(this)))},HeaderFilterCellCtrl.prototype.updateFilterButton=function(){!this.suppressFilterButton&&this.comp&&this.comp.setButtonWrapperDisplayed(this.filterManager.isFilterAllowed(this.column))},HeaderFilterCellCtrl.prototype.onColDefChanged=function(){var _a,_b,_this=this,wasActive=this.active;this.setupActive();var becomeActive=!wasActive&&this.active;wasActive&&!this.active&&(null===(_a=this.destroySyncListener)||void 0===_a||_a.call(this),null===(_b=this.destroyFilterChangedListener)||void 0===_b||_b.call(this));var newCompDetails=this.active?this.filterManager.getFloatingFilterCompDetails(this.column,(function(){return _this.showParentFilter()})):null,compPromise=this.comp.getFloatingFilterComp();compPromise&&newCompDetails?compPromise.then((function(compInstance){var _a;!compInstance||_this.filterManager.areFilterCompsDifferent(null!==(_a=_this.userCompDetails)&&void 0!==_a?_a:null,newCompDetails)?_this.updateCompDetails(newCompDetails,becomeActive):_this.updateFloatingFilterParams(newCompDetails)})):this.updateCompDetails(newCompDetails,becomeActive)},HeaderFilterCellCtrl.prototype.updateCompDetails=function(compDetails,becomeActive){this.setCompDetails(compDetails),this.setupFilterButton(),this.setupUi(),becomeActive&&(this.setupSyncWithFilter(),this.setupFilterChangedListener())},HeaderFilterCellCtrl.prototype.updateFloatingFilterParams=function(userCompDetails){var _a;if(userCompDetails){var params=userCompDetails.params;null===(_a=this.comp.getFloatingFilterComp())||void 0===_a||_a.then((function(floatingFilter){(null==floatingFilter?void 0:floatingFilter.onParamsUpdated)&&"function"==typeof floatingFilter.onParamsUpdated&&floatingFilter.onParamsUpdated(params)}))}},__decorate$1t([Autowired("filterManager")],HeaderFilterCellCtrl.prototype,"filterManager",void 0),__decorate$1t([Autowired("columnHoverService")],HeaderFilterCellCtrl.prototype,"columnHoverService",void 0),__decorate$1t([Autowired("menuFactory")],HeaderFilterCellCtrl.prototype,"menuFactory",void 0),HeaderFilterCellCtrl}(AbstractHeaderCellCtrl),__extends$1x=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1s=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ResizeFeature=function(_super){function ResizeFeature(pinned,column,eResize,comp,ctrl){var _this=_super.call(this)||this;return _this.pinned=pinned,_this.column=column,_this.eResize=eResize,_this.comp=comp,_this.ctrl=ctrl,_this}return __extends$1x(ResizeFeature,_super),ResizeFeature.prototype.postConstruct=function(){var canResize,canAutosize,_this=this,colDef=this.column.getColDef(),destroyResizeFuncs=[],removeResize=function(){destroyResizeFuncs.forEach((function(f){return f()})),destroyResizeFuncs.length=0},refresh=function(){var resize=_this.column.isResizable(),autoSize=!_this.gridOptionsService.is("suppressAutoSize")&&!colDef.suppressAutoSize;(resize!==canResize||autoSize!==canAutosize)&&(canResize=resize,canAutosize=autoSize,removeResize(),function(){if(setDisplayed(_this.eResize,canResize),canResize){var finishedWithResizeFunc=_this.horizontalResizeService.addResizeBar({eResizeBar:_this.eResize,onResizeStart:_this.onResizeStart.bind(_this),onResizing:_this.onResizing.bind(_this,!1),onResizeEnd:_this.onResizing.bind(_this,!0)});if(destroyResizeFuncs.push(finishedWithResizeFunc),canAutosize){var skipHeaderOnAutoSize_1=_this.gridOptionsService.is("skipHeaderOnAutoSize"),autoSizeColListener_1=function(){_this.columnModel.autoSizeColumn(_this.column,skipHeaderOnAutoSize_1,"uiColumnResized")};_this.eResize.addEventListener("dblclick",autoSizeColListener_1);var touchListener_1=new TouchListener(_this.eResize);touchListener_1.addEventListener(TouchListener.EVENT_DOUBLE_TAP,autoSizeColListener_1),_this.addDestroyFunc((function(){_this.eResize.removeEventListener("dblclick",autoSizeColListener_1),touchListener_1.removeEventListener(TouchListener.EVENT_DOUBLE_TAP,autoSizeColListener_1),touchListener_1.destroy()}))}}}())};refresh(),this.addDestroyFunc(removeResize),this.ctrl.addRefreshFunction(refresh)},ResizeFeature.prototype.onResizing=function(finished,resizeAmount){var resizeAmountNormalised=this.normaliseResizeAmount(resizeAmount),columnWidths=[{key:this.column,newWidth:this.resizeStartWidth+resizeAmountNormalised}];this.columnModel.setColumnWidths(columnWidths,this.resizeWithShiftKey,finished,"uiColumnResized"),finished&&this.comp.addOrRemoveCssClass("ag-column-resizing",!1)},ResizeFeature.prototype.onResizeStart=function(shiftKey){this.resizeStartWidth=this.column.getActualWidth(),this.resizeWithShiftKey=shiftKey,this.comp.addOrRemoveCssClass("ag-column-resizing",!0)},ResizeFeature.prototype.normaliseResizeAmount=function(dragChange){var result=dragChange,notPinningLeft="left"!==this.pinned,pinningRight="right"===this.pinned;return this.gridOptionsService.is("enableRtl")?notPinningLeft&&(result*=-1):pinningRight&&(result*=-1),result},__decorate$1s([Autowired("horizontalResizeService")],ResizeFeature.prototype,"horizontalResizeService",void 0),__decorate$1s([Autowired("columnModel")],ResizeFeature.prototype,"columnModel",void 0),__decorate$1s([PostConstruct],ResizeFeature.prototype,"postConstruct",null),ResizeFeature}(BeanStub),__extends$1w=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1r=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SelectAllFeature=function(_super){function SelectAllFeature(column){var _this=_super.call(this)||this;_this.cbSelectAllVisible=!1,_this.processingEventFromCheckbox=!1,_this.column=column;var colDef=column.getColDef();return _this.filteredOnly=!!(null==colDef?void 0:colDef.headerCheckboxSelectionFilteredOnly),_this.currentPageOnly=!!(null==colDef?void 0:colDef.headerCheckboxSelectionCurrentPageOnly),_this}return __extends$1w(SelectAllFeature,_super),SelectAllFeature.prototype.onSpaceKeyDown=function(e){var checkbox=this.cbSelectAll,eDocument=this.gridOptionsService.getDocument();checkbox.isDisplayed()&&!checkbox.getGui().contains(eDocument.activeElement)&&(e.preventDefault(),checkbox.setValue(!checkbox.getValue()))},SelectAllFeature.prototype.getCheckboxGui=function(){return this.cbSelectAll.getGui()},SelectAllFeature.prototype.setComp=function(ctrl){this.headerCellCtrl=ctrl,this.cbSelectAll=this.createManagedBean(new AgCheckbox),this.cbSelectAll.addCssClass("ag-header-select-all"),setAriaRole(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.showOrHideSelectAll.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.showOrHideSelectAll.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_SELECTION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_PAGINATION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_MODEL_UPDATED,this.onModelChanged.bind(this)),this.addManagedListener(this.cbSelectAll,Events.EVENT_FIELD_VALUE_CHANGED,this.onCbSelectAll.bind(this)),setAriaHidden(this.cbSelectAll.getGui(),!0),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()},SelectAllFeature.prototype.showOrHideSelectAll=function(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible,{skipAriaHidden:!0}),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()},SelectAllFeature.prototype.onModelChanged=function(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()},SelectAllFeature.prototype.onSelectionChanged=function(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()},SelectAllFeature.prototype.updateStateOfCheckbox=function(){if(!this.processingEventFromCheckbox){this.processingEventFromCheckbox=!0;var allSelected=this.selectionService.getSelectAllState(this.filteredOnly,this.currentPageOnly);this.cbSelectAll.setValue(allSelected),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}},SelectAllFeature.prototype.refreshSelectAllLabel=function(){var translate=this.localeService.getLocaleTextFunc(),ariaStatus=this.cbSelectAll.getValue()?translate("ariaChecked","checked"):translate("ariaUnchecked","unchecked"),ariaLabel=translate("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll",ariaLabel+" ("+ariaStatus+")"):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(ariaLabel+" ("+ariaStatus+")"),this.headerCellCtrl.refreshAriaDescription()},SelectAllFeature.prototype.checkSelectionType=function(feature){return!("multiple"!==this.gridOptionsService.get("rowSelection"))||(console.warn("AG Grid: "+feature+" is only available if using 'multiple' rowSelection."),!1)},SelectAllFeature.prototype.checkRightRowModelType=function(feature){var rowModelType=this.rowModel.getType();return!("clientSide"!==rowModelType&&"serverSide"!==rowModelType)||(console.warn("AG Grid: "+feature+" is only available if using 'clientSide' or 'serverSide' rowModelType, you are using "+rowModelType+"."),!1)},SelectAllFeature.prototype.onCbSelectAll=function(){if(!this.processingEventFromCheckbox&&this.cbSelectAllVisible){var value=this.cbSelectAll.getValue(),source="uiSelectAll";this.currentPageOnly?source="uiSelectAllCurrentPage":this.filteredOnly&&(source="uiSelectAllFiltered");var params={source,justFiltered:this.filteredOnly,justCurrentPage:this.currentPageOnly};value?this.selectionService.selectAllRowNodes(params):this.selectionService.deselectAllRowNodes(params)}},SelectAllFeature.prototype.isCheckboxSelection=function(){var result=this.column.getColDef().headerCheckboxSelection;"function"==typeof result&&(result=result({column:this.column,colDef:this.column.getColDef(),columnApi:this.columnApi,api:this.gridApi,context:this.gridOptionsService.context}));return!!result&&(this.checkRightRowModelType("headerCheckboxSelection")&&this.checkSelectionType("headerCheckboxSelection"))},__decorate$1r([Autowired("gridApi")],SelectAllFeature.prototype,"gridApi",void 0),__decorate$1r([Autowired("columnApi")],SelectAllFeature.prototype,"columnApi",void 0),__decorate$1r([Autowired("rowModel")],SelectAllFeature.prototype,"rowModel",void 0),__decorate$1r([Autowired("selectionService")],SelectAllFeature.prototype,"selectionService",void 0),SelectAllFeature}(BeanStub),__extends$1v=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1q=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};!function(TabGuardClassNames){TabGuardClassNames.TAB_GUARD="ag-tab-guard",TabGuardClassNames.TAB_GUARD_TOP="ag-tab-guard-top",TabGuardClassNames.TAB_GUARD_BOTTOM="ag-tab-guard-bottom"}(TabGuardClassNames||(TabGuardClassNames={}));var HeaderNavigationDirection,TabGuardCtrl=function(_super){function TabGuardCtrl(params){var _this=_super.call(this)||this;_this.skipTabGuardFocus=!1;var comp=params.comp,eTopGuard=params.eTopGuard,eBottomGuard=params.eBottomGuard,focusInnerElement=params.focusInnerElement,onFocusIn=params.onFocusIn,onFocusOut=params.onFocusOut,shouldStopEventPropagation=params.shouldStopEventPropagation,onTabKeyDown=params.onTabKeyDown,handleKeyDown=params.handleKeyDown,eFocusableElement=params.eFocusableElement;return _this.comp=comp,_this.eTopGuard=eTopGuard,_this.eBottomGuard=eBottomGuard,_this.providedFocusInnerElement=focusInnerElement,_this.eFocusableElement=eFocusableElement,_this.providedFocusIn=onFocusIn,_this.providedFocusOut=onFocusOut,_this.providedShouldStopEventPropagation=shouldStopEventPropagation,_this.providedOnTabKeyDown=onTabKeyDown,_this.providedHandleKeyDown=handleKeyDown,_this}return __extends$1v(TabGuardCtrl,_super),TabGuardCtrl.prototype.postConstruct=function(){var _this=this;this.createManagedBean(new ManagedFocusFeature(this.eFocusableElement,{shouldStopEventPropagation:function(){return _this.shouldStopEventPropagation()},onTabKeyDown:function(e){return _this.onTabKeyDown(e)},handleKeyDown:function(e){return _this.handleKeyDown(e)},onFocusIn:function(e){return _this.onFocusIn(e)},onFocusOut:function(e){return _this.onFocusOut(e)}})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach((function(guard){return _this.addManagedListener(guard,"focus",_this.onFocus.bind(_this))}))},TabGuardCtrl.prototype.handleKeyDown=function(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)},TabGuardCtrl.prototype.tabGuardsAreActive=function(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")},TabGuardCtrl.prototype.shouldStopEventPropagation=function(){return!!this.providedShouldStopEventPropagation&&this.providedShouldStopEventPropagation()},TabGuardCtrl.prototype.activateTabGuards=function(){var tabIndex=this.gridOptionsService.getNum("tabIndex")||0;this.comp.setTabIndex(tabIndex.toString())},TabGuardCtrl.prototype.deactivateTabGuards=function(){this.comp.setTabIndex()},TabGuardCtrl.prototype.onFocus=function(e){if(this.skipTabGuardFocus)this.skipTabGuardFocus=!1;else{var fromBottom=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(fromBottom):this.focusInnerElement(fromBottom)}},TabGuardCtrl.prototype.onFocusIn=function(e){this.providedFocusIn&&this.providedFocusIn(e)||this.deactivateTabGuards()},TabGuardCtrl.prototype.onFocusOut=function(e){this.providedFocusOut&&this.providedFocusOut(e)||this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards()},TabGuardCtrl.prototype.onTabKeyDown=function(e){var _this=this;if(this.providedOnTabKeyDown)this.providedOnTabKeyDown(e);else if(!e.defaultPrevented){var tabGuardsAreActive=this.tabGuardsAreActive();tabGuardsAreActive&&this.deactivateTabGuards();var nextRoot=this.getNextFocusableElement(e.shiftKey);tabGuardsAreActive&&setTimeout((function(){return _this.activateTabGuards()}),0),nextRoot&&(nextRoot.focus(),e.preventDefault())}},TabGuardCtrl.prototype.focusInnerElement=function(fromBottom){void 0===fromBottom&&(fromBottom=!1);var focusable=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(focusable.splice(0,1),focusable.splice(focusable.length-1,1)),focusable.length&&focusable[fromBottom?focusable.length-1:0].focus({preventScroll:!0})},TabGuardCtrl.prototype.getNextFocusableElement=function(backwards){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,backwards)},TabGuardCtrl.prototype.forceFocusOutOfContainer=function(up){void 0===up&&(up=!1);var tabGuardToFocus=up?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,tabGuardToFocus.focus()},__decorate$1q([Autowired("focusService")],TabGuardCtrl.prototype,"focusService",void 0),__decorate$1q([PostConstruct],TabGuardCtrl.prototype,"postConstruct",null),TabGuardCtrl}(BeanStub),__extends$1u=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$7=function(){return __assign$7=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$7.apply(this,arguments)},__decorate$1p=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},FocusService=function(_super){function FocusService(){return null!==_super&&_super.apply(this,arguments)||this}var FocusService_1;return __extends$1u(FocusService,_super),FocusService_1=FocusService,FocusService.addKeyboardModeEvents=function(doc,controller){var docControllers=FocusService_1.instancesMonitored.get(doc);docControllers&&docControllers.length>0?-1===docControllers.indexOf(controller)&&docControllers.push(controller):(FocusService_1.instancesMonitored.set(doc,[controller]),doc.addEventListener("keydown",FocusService_1.toggleKeyboardMode),doc.addEventListener("mousedown",FocusService_1.toggleKeyboardMode))},FocusService.removeKeyboardModeEvents=function(doc,controller){var docControllers=FocusService_1.instancesMonitored.get(doc),newControllers=[];docControllers&&docControllers.length&&(newControllers=function(to,from){for(var i=0,il=from.length,j=to.length;i<il;i++,j++)to[j]=from[i];return to}([],function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}(docControllers)).filter((function(currentGridCore){return currentGridCore!==controller})),FocusService_1.instancesMonitored.set(doc,newControllers)),0===newControllers.length&&(doc.removeEventListener("keydown",FocusService_1.toggleKeyboardMode),doc.removeEventListener("mousedown",FocusService_1.toggleKeyboardMode))},FocusService.toggleKeyboardMode=function(event){var isKeyboardActive=FocusService_1.keyboardModeActive,isKeyboardEvent="keydown"===event.type;if(!(isKeyboardEvent&&(event.ctrlKey||event.metaKey||event.altKey)||isKeyboardActive&&isKeyboardEvent||!isKeyboardActive&&!isKeyboardEvent)){FocusService_1.keyboardModeActive=isKeyboardEvent;var doc=event.target.ownerDocument;if(doc){var controllersForDoc=FocusService_1.instancesMonitored.get(doc);controllersForDoc&&controllersForDoc.forEach((function(controller){controller.dispatchEvent({type:isKeyboardEvent?Events.EVENT_KEYBOARD_FOCUS:Events.EVENT_MOUSE_FOCUS})}))}}},FocusService.prototype.init=function(){var _this=this,clearFocusedCellListener=this.clearFocusedCell.bind(this);this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,clearFocusedCellListener),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverythingChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_GROUP_OPENED,clearFocusedCellListener),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,clearFocusedCellListener),this.ctrlsService.whenReady((function(p){_this.gridCtrl=p.gridCtrl;var doc=_this.gridOptionsService.getDocument();FocusService_1.addKeyboardModeEvents(doc,_this.gridCtrl),_this.addDestroyFunc((function(){return _this.unregisterGridCompController(_this.gridCtrl)}))}))},FocusService.prototype.unregisterGridCompController=function(gridCompController){var doc=this.gridOptionsService.getDocument();FocusService_1.removeKeyboardModeEvents(doc,gridCompController)},FocusService.prototype.onColumnEverythingChanged=function(){if(this.focusedCellPosition){var col=this.focusedCellPosition.column,colFromColumnModel=this.columnModel.getGridColumn(col.getId());col!==colFromColumnModel&&this.clearFocusedCell()}},FocusService.prototype.isKeyboardMode=function(){return FocusService_1.keyboardModeActive},FocusService.prototype.getFocusCellToUseAfterRefresh=function(){var eDocument=this.gridOptionsService.getDocument();return this.gridOptionsService.is("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(eDocument.activeElement,RowCtrl.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition},FocusService.prototype.getFocusHeaderToUseAfterRefresh=function(){var eDocument=this.gridOptionsService.getDocument();return this.gridOptionsService.is("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(eDocument.activeElement,AbstractHeaderCellCtrl.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition},FocusService.prototype.isDomDataMissingInHierarchy=function(eBrowserCell,key){for(var ePointer=eBrowserCell;ePointer;){if(this.gridOptionsService.getDomData(ePointer,key))return!1;ePointer=ePointer.parentNode}return!0},FocusService.prototype.getFocusedCell=function(){return this.focusedCellPosition},FocusService.prototype.shouldRestoreFocus=function(cell){var _this=this;return!!this.isCellRestoreFocused(cell)&&(setTimeout((function(){_this.restoredFocusedCellPosition=null}),0),!0)},FocusService.prototype.isCellRestoreFocused=function(cellPosition){return null!=this.restoredFocusedCellPosition&&this.cellPositionUtils.equals(cellPosition,this.restoredFocusedCellPosition)},FocusService.prototype.setRestoreFocusedCell=function(cellPosition){"react"===this.getFrameworkOverrides().renderingEngine&&(this.restoredFocusedCellPosition=cellPosition)},FocusService.prototype.getFocusEventParams=function(){var _a=this.focusedCellPosition,rowIndex=_a.rowIndex,rowPinned=_a.rowPinned,params={rowIndex,rowPinned,column:_a.column,isFullWidthCell:!1},rowCtrl=this.rowRenderer.getRowByPosition({rowIndex,rowPinned});return rowCtrl&&(params.isFullWidthCell=rowCtrl.isFullWidth()),params},FocusService.prototype.clearFocusedCell=function(){if(this.restoredFocusedCellPosition=null,null!=this.focusedCellPosition){var event=__assign$7({type:Events.EVENT_CELL_FOCUS_CLEARED},this.getFocusEventParams());this.focusedCellPosition=null,this.eventService.dispatchEvent(event)}},FocusService.prototype.setFocusedCell=function(params){var column=params.column,rowIndex=params.rowIndex,rowPinned=params.rowPinned,_a=params.forceBrowserFocus,forceBrowserFocus=void 0!==_a&&_a,_b=params.preventScrollOnBrowserFocus,preventScrollOnBrowserFocus=void 0!==_b&&_b,gridColumn=this.columnModel.getGridColumn(column);if(gridColumn){this.focusedCellPosition=gridColumn?{rowIndex,rowPinned:makeNull(rowPinned),column:gridColumn}:null;var event=__assign$7(__assign$7({type:Events.EVENT_CELL_FOCUSED},this.getFocusEventParams()),{forceBrowserFocus,preventScrollOnBrowserFocus,floating:null});this.eventService.dispatchEvent(event)}else this.focusedCellPosition=null},FocusService.prototype.isCellFocused=function(cellPosition){return null!=this.focusedCellPosition&&this.cellPositionUtils.equals(cellPosition,this.focusedCellPosition)},FocusService.prototype.isRowNodeFocused=function(rowNode){return this.isRowFocused(rowNode.rowIndex,rowNode.rowPinned)},FocusService.prototype.isHeaderWrapperFocused=function(headerCtrl){if(null==this.focusedHeaderPosition)return!1;var column=headerCtrl.getColumnGroupChild(),headerRowIndex=headerCtrl.getRowIndex(),pinned=headerCtrl.getPinned(),_a=this.focusedHeaderPosition,focusedColumn=_a.column,focusedHeaderRowIndex=_a.headerRowIndex;return column===focusedColumn&&headerRowIndex===focusedHeaderRowIndex&&pinned==focusedColumn.getPinned()},FocusService.prototype.clearFocusedHeader=function(){this.focusedHeaderPosition=null},FocusService.prototype.getFocusedHeader=function(){return this.focusedHeaderPosition},FocusService.prototype.setFocusedHeader=function(headerRowIndex,column){this.focusedHeaderPosition={headerRowIndex,column}},FocusService.prototype.focusHeaderPosition=function(params){var direction=params.direction,fromTab=params.fromTab,allowUserOverride=params.allowUserOverride,event=params.event,fromCell=params.fromCell,headerPosition=params.headerPosition;if(fromCell&&this.filterManager.isAdvancedFilterHeaderActive())return this.focusAdvancedFilter(headerPosition);if(allowUserOverride){var userFunc,currentPosition=this.getFocusedHeader(),headerRowCount=this.headerNavigationService.getHeaderRowCount();if(fromTab){if(userFunc=this.gridOptionsService.getCallback("tabToNextHeader"))headerPosition=userFunc({backwards:"Before"===direction,previousHeaderPosition:currentPosition,nextHeaderPosition:headerPosition,headerRowCount})}else if((userFunc=this.gridOptionsService.getCallback("navigateToNextHeader"))&&event)headerPosition=userFunc({key:event.key,previousHeaderPosition:currentPosition,nextHeaderPosition:headerPosition,headerRowCount,event})}return!!headerPosition&&(-1===headerPosition.headerRowIndex?this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(headerPosition):this.focusGridView(headerPosition.column):(this.headerNavigationService.scrollToColumn(headerPosition.column,direction),this.ctrlsService.getHeaderRowContainerCtrl(headerPosition.column.getPinned()).focusHeader(headerPosition.headerRowIndex,headerPosition.column,event)))},FocusService.prototype.focusFirstHeader=function(){var firstColumn=this.columnModel.getAllDisplayedColumns()[0];return!!firstColumn&&(firstColumn.getParent()&&(firstColumn=this.columnModel.getColumnGroupAtLevel(firstColumn,0)),this.focusHeaderPosition({headerPosition:{headerRowIndex:0,column:firstColumn}}))},FocusService.prototype.focusLastHeader=function(event){var headerRowIndex=this.headerNavigationService.getHeaderRowCount()-1,column=last(this.columnModel.getAllDisplayedColumns());return this.focusHeaderPosition({headerPosition:{headerRowIndex,column},event})},FocusService.prototype.focusPreviousFromFirstCell=function(event){return this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(event)},FocusService.prototype.isAnyCellFocused=function(){return!!this.focusedCellPosition},FocusService.prototype.isRowFocused=function(rowIndex,floating){return null!=this.focusedCellPosition&&(this.focusedCellPosition.rowIndex===rowIndex&&this.focusedCellPosition.rowPinned===makeNull(floating))},FocusService.prototype.findFocusableElements=function(rootNode,exclude,onlyUnmanaged){void 0===onlyUnmanaged&&(onlyUnmanaged=!1);var excludeString=FOCUSABLE_EXCLUDE;exclude&&(excludeString+=", "+exclude),onlyUnmanaged&&(excludeString+=', [tabindex="-1"]');var nodes=Array.prototype.slice.apply(rootNode.querySelectorAll("[tabindex], input, select, button, textarea, [href]")),excludeNodes=Array.prototype.slice.apply(rootNode.querySelectorAll(excludeString));if(!excludeNodes.length)return nodes;var b;return b=excludeNodes,nodes.filter((function(element){return-1===b.indexOf(element)}))},FocusService.prototype.focusInto=function(rootNode,up,onlyUnmanaged){void 0===up&&(up=!1),void 0===onlyUnmanaged&&(onlyUnmanaged=!1);var focusableElements=this.findFocusableElements(rootNode,null,onlyUnmanaged),toFocus=up?last(focusableElements):focusableElements[0];return!!toFocus&&(toFocus.focus({preventScroll:!0}),!0)},FocusService.prototype.findFocusableElementBeforeTabGuard=function(rootNode,referenceElement){if(!referenceElement)return null;var focusableElements=this.findFocusableElements(rootNode),referenceIndex=focusableElements.indexOf(referenceElement);if(-1===referenceIndex)return null;for(var lastTabGuardIndex=-1,i=referenceIndex-1;i>=0;i--)if(focusableElements[i].classList.contains(TabGuardClassNames.TAB_GUARD_TOP)){lastTabGuardIndex=i;break}return lastTabGuardIndex<=0?null:focusableElements[lastTabGuardIndex-1]},FocusService.prototype.findNextFocusableElement=function(rootNode,onlyManaged,backwards){void 0===rootNode&&(rootNode=this.eGridDiv);var focusable=this.findFocusableElements(rootNode,onlyManaged?':not([tabindex="-1"])':null),activeEl=this.gridOptionsService.getDocument().activeElement,nextIndex=(onlyManaged?focusable.findIndex((function(el){return el.contains(activeEl)})):focusable.indexOf(activeEl))+(backwards?-1:1);return nextIndex<0||nextIndex>=focusable.length?null:focusable[nextIndex]},FocusService.prototype.isTargetUnderManagedComponent=function(rootNode,target){if(!target)return!1;var managedContainers=rootNode.querySelectorAll("."+ManagedFocusFeature.FOCUS_MANAGED_CLASS);if(!managedContainers.length)return!1;for(var i=0;i<managedContainers.length;i++)if(managedContainers[i].contains(target))return!0;return!1},FocusService.prototype.findTabbableParent=function(node,limit){void 0===limit&&(limit=5);for(var counter=0;node&&null===getTabIndex(node)&&++counter<=limit;)node=node.parentElement;return null===getTabIndex(node)?null:node},FocusService.prototype.focusGridView=function(column,backwards){if(this.gridOptionsService.is("suppressCellFocus"))return backwards?this.focusLastHeader():this.focusNextGridCoreContainer(!1);var nextRow=backwards?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(!nextRow)return!1;var rowIndex=nextRow.rowIndex,rowPinned=nextRow.rowPinned,focusedHeader=this.getFocusedHeader();if(!column&&focusedHeader&&(column=focusedHeader.column),null==rowIndex||!column)return!1;if(this.navigationService.ensureCellVisible({rowIndex,column,rowPinned}),this.setFocusedCell({rowIndex,column,rowPinned:makeNull(rowPinned),forceBrowserFocus:!0}),this.rangeService){var cellPosition={rowIndex,rowPinned,column};this.rangeService.setRangeToCell(cellPosition)}return!0},FocusService.prototype.focusNextGridCoreContainer=function(backwards,forceOut){return void 0===forceOut&&(forceOut=!1),!(forceOut||!this.gridCtrl.focusNextInnerContainer(backwards))||((forceOut||!backwards&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(backwards),!1)},FocusService.prototype.focusAdvancedFilter=function(position){return this.advancedFilterFocusColumn=null==position?void 0:position.column,this.advancedFilterService.getCtrl().focusHeaderComp()},FocusService.prototype.focusNextFromAdvancedFilter=function(backwards,forceFirstColumn){var _a,_b,column=null!==(_a=forceFirstColumn?void 0:this.advancedFilterFocusColumn)&&void 0!==_a?_a:null===(_b=this.columnModel.getAllDisplayedColumns())||void 0===_b?void 0:_b[0];return backwards?this.focusHeaderPosition({headerPosition:{column,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(column)},FocusService.prototype.clearAdvancedFilterColumn=function(){this.advancedFilterFocusColumn=void 0},FocusService.AG_KEYBOARD_FOCUS="ag-keyboard-focus",FocusService.keyboardModeActive=!1,FocusService.instancesMonitored=new Map,__decorate$1p([Autowired("eGridDiv")],FocusService.prototype,"eGridDiv",void 0),__decorate$1p([Autowired("columnModel")],FocusService.prototype,"columnModel",void 0),__decorate$1p([Autowired("headerNavigationService")],FocusService.prototype,"headerNavigationService",void 0),__decorate$1p([Autowired("rowRenderer")],FocusService.prototype,"rowRenderer",void 0),__decorate$1p([Autowired("rowPositionUtils")],FocusService.prototype,"rowPositionUtils",void 0),__decorate$1p([Autowired("cellPositionUtils")],FocusService.prototype,"cellPositionUtils",void 0),__decorate$1p([Optional("rangeService")],FocusService.prototype,"rangeService",void 0),__decorate$1p([Autowired("navigationService")],FocusService.prototype,"navigationService",void 0),__decorate$1p([Autowired("ctrlsService")],FocusService.prototype,"ctrlsService",void 0),__decorate$1p([Autowired("filterManager")],FocusService.prototype,"filterManager",void 0),__decorate$1p([Optional("advancedFilterService")],FocusService.prototype,"advancedFilterService",void 0),__decorate$1p([PostConstruct],FocusService.prototype,"init",null),FocusService=FocusService_1=__decorate$1p([Bean("focusService")],FocusService)}(BeanStub),__extends$1t=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1o=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HeaderCellCtrl=function(_super){function HeaderCellCtrl(column,parentRowCtrl){var _this=_super.call(this,column,parentRowCtrl)||this;return _this.refreshFunctions=[],_this.userHeaderClasses=new Set,_this.ariaDescriptionProperties=new Map,_this.column=column,_this}return __extends$1t(HeaderCellCtrl,_super),HeaderCellCtrl.prototype.setComp=function(comp,eGui,eResize,eHeaderCompWrapper){var _this=this;_super.prototype.setGui.call(this,eGui),this.comp=comp,this.updateState(),this.setupWidth(),this.setupMovingCss(),this.setupMenuClass(),this.setupSortableClass(),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight(eHeaderCompWrapper),this.addColumnHoverListener(),this.setupFilterCss(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(),this.setupSelectAll(),this.setupUserComp(),this.refreshAria(),this.createManagedBean(new ResizeFeature(this.getPinned(),this.column,eResize,comp,this)),this.createManagedBean(new HoverFeature([this.column],eGui)),this.createManagedBean(new SetLeftFeature(this.column,eGui,this.beans)),this.createManagedBean(new ManagedFocusFeature(eGui,{shouldStopEventPropagation:function(e){return _this.shouldStopEventPropagation(e)},onTabKeyDown:function(){return null},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addMouseDownListenerIfNeeded(eGui),this.addManagedListener(this.column,Column.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VALUE_CHANGED,this.onColumnValueChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onColumnRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_CHANGED,this.onColumnPivotChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onHeaderHeightChanged.bind(this))},HeaderCellCtrl.prototype.addMouseDownListenerIfNeeded=function(eGui){var _this=this;if(isBrowserSafari()){var eDocument=this.gridOptionsService.getDocument();["mousedown","touchstart"].forEach((function(eventName){_this.addManagedListener(eGui,eventName,(function(e){var activeEl=eDocument.activeElement;activeEl===eGui||eGui.contains(activeEl)||(eGui.focus(),FocusService.toggleKeyboardMode(e))}))}))}},HeaderCellCtrl.prototype.setupUserComp=function(){var compDetails=this.lookupUserCompDetails();this.setCompDetails(compDetails)},HeaderCellCtrl.prototype.setCompDetails=function(compDetails){this.userCompDetails=compDetails,this.comp.setUserCompDetails(compDetails)},HeaderCellCtrl.prototype.lookupUserCompDetails=function(){var params=this.createParams(),colDef=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(colDef,params)},HeaderCellCtrl.prototype.createParams=function(){var _this=this,colDef=this.column.getColDef();return{column:this.column,displayName:this.displayName,enableSorting:colDef.sortable,enableMenu:this.menuEnabled,showColumnMenu:function(source){_this.gridApi.showColumnMenuAfterButtonClick(_this.column,source)},progressSort:function(multiSort){_this.sortController.progressSort(_this.column,!!multiSort,"uiColumnSorted")},setSort:function(sort,multiSort){_this.sortController.setSortForColumn(_this.column,sort,!!multiSort,"uiColumnSorted")},api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context,eGridHeader:this.getGui()}},HeaderCellCtrl.prototype.setupSelectAll=function(){this.selectAllFeature=this.createManagedBean(new SelectAllFeature(this.column)),this.selectAllFeature.setComp(this)},HeaderCellCtrl.prototype.getSelectAllGui=function(){return this.selectAllFeature.getCheckboxGui()},HeaderCellCtrl.prototype.handleKeyDown=function(e){_super.prototype.handleKeyDown.call(this,e),e.key===KeyCode.SPACE&&this.selectAllFeature.onSpaceKeyDown(e),e.key===KeyCode.ENTER&&this.onEnterKeyDown(e)},HeaderCellCtrl.prototype.onEnterKeyDown=function(e){var headerComp=this.comp.getUserCompInstance();if(headerComp)if(e.ctrlKey||e.metaKey)this.menuEnabled&&headerComp.showMenu&&(e.preventDefault(),headerComp.showMenu());else if(this.sortable){var multiSort=e.shiftKey;this.sortController.progressSort(this.column,multiSort,"uiColumnSorted")}},HeaderCellCtrl.prototype.isMenuEnabled=function(){return this.menuEnabled},HeaderCellCtrl.prototype.onFocusIn=function(e){if(!this.getGui().contains(e.relatedTarget)){var rowIndex=this.getRowIndex();this.focusService.setFocusedHeader(rowIndex,this.column)}this.setActiveHeader(!0)},HeaderCellCtrl.prototype.onFocusOut=function(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)},HeaderCellCtrl.prototype.setupTooltip=function(){var _this=this,tooltipCtrl={getColumn:function(){return _this.column},getColDef:function(){return _this.column.getColDef()},getGui:function(){return _this.eGui},getLocation:function(){return"header"},getTooltipValue:function(){return _this.column.getColDef().headerTooltip}},tooltipFeature=this.createManagedBean(new TooltipFeature(tooltipCtrl,this.beans));tooltipFeature.setComp(this.eGui),this.refreshFunctions.push((function(){return tooltipFeature.refreshToolTip()}))},HeaderCellCtrl.prototype.setupClassesFromColDef=function(){var _this=this,refreshHeaderClasses=function(){var colDef=_this.column.getColDef(),classes=CssClassApplier.getHeaderClassesFromColDef(colDef,_this.gridOptionsService,_this.column,null),oldClasses=_this.userHeaderClasses;_this.userHeaderClasses=new Set(classes),classes.forEach((function(c){oldClasses.has(c)?oldClasses.delete(c):_this.comp.addOrRemoveCssClass(c,!0)})),oldClasses.forEach((function(c){return _this.comp.addOrRemoveCssClass(c,!1)}))};this.refreshFunctions.push(refreshHeaderClasses),refreshHeaderClasses()},HeaderCellCtrl.prototype.setDragSource=function(eSource){var _this=this;if(this.dragSourceElement=eSource,this.removeDragSource(),eSource&&this.draggable){var hideColumnOnExit=!this.gridOptionsService.is("suppressDragLeaveHidesColumns");this.moveDragSource={type:DragSourceType.HeaderCell,eElement:eSource,getDefaultIconName:function(){return hideColumnOnExit?DragAndDropService.ICON_HIDE:DragAndDropService.ICON_NOT_ALLOWED},getDragItem:function(){return _this.createDragItem()},dragItemName:this.displayName,onDragStarted:function(){hideColumnOnExit=!_this.gridOptionsService.is("suppressDragLeaveHidesColumns"),_this.column.setMoving(!0,"uiColumnMoved")},onDragStopped:function(){return _this.column.setMoving(!1,"uiColumnMoved")},onGridEnter:function(dragItem){var _a;if(hideColumnOnExit){var unlockedColumns=(null===(_a=null==dragItem?void 0:dragItem.columns)||void 0===_a?void 0:_a.filter((function(col){return!col.getColDef().lockVisible})))||[];_this.columnModel.setColumnsVisible(unlockedColumns,!0,"uiColumnMoved")}},onGridExit:function(dragItem){var _a;if(hideColumnOnExit){var unlockedColumns=(null===(_a=null==dragItem?void 0:dragItem.columns)||void 0===_a?void 0:_a.filter((function(col){return!col.getColDef().lockVisible})))||[];_this.columnModel.setColumnsVisible(unlockedColumns,!1,"uiColumnMoved")}}},this.dragAndDropService.addDragSource(this.moveDragSource,!0)}},HeaderCellCtrl.prototype.createDragItem=function(){var visibleState={};return visibleState[this.column.getId()]=this.column.isVisible(),{columns:[this.column],visibleState}},HeaderCellCtrl.prototype.removeDragSource=function(){this.moveDragSource&&(this.dragAndDropService.removeDragSource(this.moveDragSource),this.moveDragSource=void 0)},HeaderCellCtrl.prototype.onColDefChanged=function(){this.refresh()},HeaderCellCtrl.prototype.updateState=function(){var colDef=this.column.getColDef();this.menuEnabled=this.menuFactory.isMenuEnabled(this.column)&&!colDef.suppressMenu,this.sortable=colDef.sortable,this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()},HeaderCellCtrl.prototype.addRefreshFunction=function(func){this.refreshFunctions.push(func)},HeaderCellCtrl.prototype.refresh=function(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),this.refreshFunctions.forEach((function(f){return f()}))},HeaderCellCtrl.prototype.refreshHeaderComp=function(){var newCompDetails=this.lookupUserCompDetails();!!(null!=this.comp.getUserCompInstance()&&this.userCompDetails.componentClass==newCompDetails.componentClass)&&this.attemptHeaderCompRefresh(newCompDetails.params)?this.setDragSource(this.dragSourceElement):this.setCompDetails(newCompDetails)},HeaderCellCtrl.prototype.attemptHeaderCompRefresh=function(params){var headerComp=this.comp.getUserCompInstance();return!!headerComp&&(!!headerComp.refresh&&headerComp.refresh(params))},HeaderCellCtrl.prototype.calculateDisplayName=function(){return this.columnModel.getDisplayNameForColumn(this.column,"header",!0)},HeaderCellCtrl.prototype.checkDisplayName=function(){this.displayName!==this.calculateDisplayName()&&this.refresh()},HeaderCellCtrl.prototype.workOutDraggable=function(){var colDef=this.column.getColDef();return!!(!this.gridOptionsService.is("suppressMovableColumns")&&!colDef.suppressMovable&&!colDef.lockPosition)||!!colDef.enableRowGroup||!!colDef.enablePivot},HeaderCellCtrl.prototype.onColumnRowGroupChanged=function(){this.checkDisplayName()},HeaderCellCtrl.prototype.onColumnPivotChanged=function(){this.checkDisplayName()},HeaderCellCtrl.prototype.onColumnValueChanged=function(){this.checkDisplayName()},HeaderCellCtrl.prototype.setupWidth=function(){var _this=this,listener=function(){var columnWidth=_this.column.getActualWidth();_this.comp.setWidth(columnWidth+"px")};this.addManagedListener(this.column,Column.EVENT_WIDTH_CHANGED,listener),listener()},HeaderCellCtrl.prototype.setupMovingCss=function(){var _this=this,listener=function(){_this.comp.addOrRemoveCssClass("ag-header-cell-moving",_this.column.isMoving())};this.addManagedListener(this.column,Column.EVENT_MOVING_CHANGED,listener),listener()},HeaderCellCtrl.prototype.setupMenuClass=function(){var _this=this,listener=function(){_this.comp.addOrRemoveCssClass("ag-column-menu-visible",_this.column.isMenuVisible())};this.addManagedListener(this.column,Column.EVENT_MENU_VISIBLE_CHANGED,listener),listener()},HeaderCellCtrl.prototype.setupSortableClass=function(){var _this=this,updateSortableCssClass=function(){_this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!_this.sortable)};updateSortableCssClass(),this.addRefreshFunction(updateSortableCssClass),this.addManagedListener(this.eventService,Column.EVENT_SORT_CHANGED,this.refreshAriaSort.bind(this))},HeaderCellCtrl.prototype.setupWrapTextClass=function(){var _this=this,listener=function(){var wrapText=!!_this.column.getColDef().wrapHeaderText;_this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",wrapText)};listener(),this.addRefreshFunction(listener)},HeaderCellCtrl.prototype.onHeaderHeightChanged=function(){this.refreshSpanHeaderHeight()},HeaderCellCtrl.prototype.refreshSpanHeaderHeight=function(){var _a=this,eGui=_a.eGui,column=_a.column,comp=_a.comp,columnModel=_a.columnModel,gridOptionsService=_a.gridOptionsService;if(column.isSpanHeaderHeight()){var _b=this.getColumnGroupPaddingInfo(),numberOfParents=_b.numberOfParents,isSpanningTotal=_b.isSpanningTotal;comp.addOrRemoveCssClass("ag-header-span-height",numberOfParents>0);var headerHeight=columnModel.getColumnHeaderRowHeight();if(0===numberOfParents)return comp.addOrRemoveCssClass("ag-header-span-total",!1),eGui.style.setProperty("top","0px"),void eGui.style.setProperty("height",headerHeight+"px");comp.addOrRemoveCssClass("ag-header-span-total",isSpanningTotal);var extraHeight=numberOfParents*(gridOptionsService.is("pivotMode")?columnModel.getPivotGroupHeaderHeight():columnModel.getGroupHeaderHeight());eGui.style.setProperty("top",-extraHeight+"px"),eGui.style.setProperty("height",headerHeight+extraHeight+"px")}},HeaderCellCtrl.prototype.getColumnGroupPaddingInfo=function(){var parent=this.column.getParent();if(!parent||!parent.isPadding())return{numberOfParents:0,isSpanningTotal:!1};for(var numberOfParents=parent.getPaddingLevel()+1,isSpanningTotal=!0;parent;){if(!parent.isPadding()){isSpanningTotal=!1;break}parent=parent.getParent()}return{numberOfParents,isSpanningTotal}},HeaderCellCtrl.prototype.setupAutoHeight=function(wrapperElement){var stopResizeObserver,_this=this,measureHeight=function(timesCalled){if(_this.isAlive()){var _a=getElementSize(_this.getGui()),extraHeight=_a.paddingTop+_a.paddingBottom+_a.borderBottomWidth+_a.borderTopWidth,autoHeight=wrapperElement.offsetHeight+extraHeight;if(timesCalled<5){var doc=_this.beans.gridOptionsService.getDocument();if(!doc||!doc.contains(wrapperElement)||0==autoHeight)return void _this.beans.frameworkOverrides.setTimeout((function(){return measureHeight(timesCalled+1)}),0)}_this.columnModel.setColumnHeaderHeight(_this.column,autoHeight)}},isMeasuring=!1,checkMeasuring=function(){var newValue=_this.column.isAutoHeaderHeight();newValue&&!isMeasuring&&startMeasuring(),!newValue&&isMeasuring&&stopMeasuring()},startMeasuring=function(){isMeasuring=!0,measureHeight(0),_this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),stopResizeObserver=_this.resizeObserverService.observeResize(wrapperElement,(function(){return measureHeight(0)}))},stopMeasuring=function(){isMeasuring=!1,stopResizeObserver&&stopResizeObserver(),_this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),stopResizeObserver=void 0};checkMeasuring(),this.addDestroyFunc((function(){return stopMeasuring()})),this.addManagedListener(this.column,Column.EVENT_WIDTH_CHANGED,(function(){return isMeasuring&&measureHeight(0)})),this.addManagedListener(this.eventService,Column.EVENT_SORT_CHANGED,(function(){isMeasuring&&_this.beans.frameworkOverrides.setTimeout((function(){return measureHeight(0)}))})),this.addRefreshFunction(checkMeasuring)},HeaderCellCtrl.prototype.refreshAriaSort=function(){if(this.sortable){var translate=this.localeService.getLocaleTextFunc(),sort=this.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(getAriaSortState(sort)),this.setAriaDescriptionProperty("sort",translate("ariaSortableColumn","Press ENTER to sort."))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)},HeaderCellCtrl.prototype.refreshAriaMenu=function(){if(this.menuEnabled){var translate=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",translate("ariaMenuColumn","Press CTRL ENTER to open column menu."))}else this.setAriaDescriptionProperty("menu",null)},HeaderCellCtrl.prototype.setAriaDescriptionProperty=function(property,value){null!=value?this.ariaDescriptionProperties.set(property,value):this.ariaDescriptionProperties.delete(property)},HeaderCellCtrl.prototype.refreshAriaDescription=function(){var descriptionArray=Array.from(this.ariaDescriptionProperties.values());this.comp.setAriaDescription(descriptionArray.length?descriptionArray.join(" "):void 0)},HeaderCellCtrl.prototype.refreshAria=function(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaDescription()},HeaderCellCtrl.prototype.addColumnHoverListener=function(){var _this=this,listener=function(){if(_this.gridOptionsService.is("columnHoverHighlight")){var isHovered=_this.columnHoverService.isHovered(_this.column);_this.comp.addOrRemoveCssClass("ag-column-hover",isHovered)}};this.addManagedListener(this.eventService,Events.EVENT_COLUMN_HOVER_CHANGED,listener),listener()},HeaderCellCtrl.prototype.setupFilterCss=function(){var _this=this,listener=function(){_this.comp.addOrRemoveCssClass("ag-header-cell-filtered",_this.column.isFilterActive())};this.addManagedListener(this.column,Column.EVENT_FILTER_ACTIVE_CHANGED,listener),listener()},HeaderCellCtrl.prototype.getColId=function(){return this.column.getColId()},HeaderCellCtrl.prototype.addActiveHeaderMouseListeners=function(){var _this=this,listener=function(e){return _this.setActiveHeader("mouseenter"===e.type)};this.addManagedListener(this.getGui(),"mouseenter",listener),this.addManagedListener(this.getGui(),"mouseleave",listener)},HeaderCellCtrl.prototype.setActiveHeader=function(active){this.comp.addOrRemoveCssClass("ag-header-active",active)},__decorate$1o([Autowired("columnModel")],HeaderCellCtrl.prototype,"columnModel",void 0),__decorate$1o([Autowired("columnHoverService")],HeaderCellCtrl.prototype,"columnHoverService",void 0),__decorate$1o([Autowired("sortController")],HeaderCellCtrl.prototype,"sortController",void 0),__decorate$1o([Autowired("menuFactory")],HeaderCellCtrl.prototype,"menuFactory",void 0),__decorate$1o([Autowired("dragAndDropService")],HeaderCellCtrl.prototype,"dragAndDropService",void 0),__decorate$1o([Autowired("resizeObserverService")],HeaderCellCtrl.prototype,"resizeObserverService",void 0),__decorate$1o([Autowired("gridApi")],HeaderCellCtrl.prototype,"gridApi",void 0),__decorate$1o([Autowired("columnApi")],HeaderCellCtrl.prototype,"columnApi",void 0),__decorate$1o([PreDestroy],HeaderCellCtrl.prototype,"removeDragSource",null),HeaderCellCtrl}(AbstractHeaderCellCtrl),__extends$1s=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1n=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},GroupResizeFeature=function(_super){function GroupResizeFeature(comp,eResize,pinned,columnGroup){var _this=_super.call(this)||this;return _this.eResize=eResize,_this.comp=comp,_this.pinned=pinned,_this.columnGroup=columnGroup,_this}return __extends$1s(GroupResizeFeature,_super),GroupResizeFeature.prototype.postConstruct=function(){var _this=this;if(this.columnGroup.isResizable()){var finishedWithResizeFunc=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(finishedWithResizeFunc),!this.gridOptionsService.is("suppressAutoSize")){var skipHeaderOnAutoSize_1=this.gridOptionsService.is("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",(function(){var keys=[];_this.columnGroup.getDisplayedLeafColumns().forEach((function(column){column.getColDef().suppressAutoSize||keys.push(column.getColId())})),keys.length>0&&_this.columnModel.autoSizeColumns({columns:keys,skipHeader:skipHeaderOnAutoSize_1,stopAtGroup:_this.columnGroup,source:"uiColumnResized"}),_this.resizeLeafColumnsToFit("uiColumnResized")}))}}else this.comp.setResizableDisplayed(!1)},GroupResizeFeature.prototype.onResizeStart=function(shiftKey){var _this=this;this.calculateInitialValues();var takeFromGroup=null;if(shiftKey&&(takeFromGroup=this.columnModel.getDisplayedGroupAfter(this.columnGroup)),takeFromGroup){var takeFromLeafCols=takeFromGroup.getDisplayedLeafColumns();this.resizeTakeFromCols=takeFromLeafCols.filter((function(col){return col.isResizable()})),this.resizeTakeFromStartWidth=0,this.resizeTakeFromCols.forEach((function(col){return _this.resizeTakeFromStartWidth+=col.getActualWidth()})),this.resizeTakeFromRatios=[],this.resizeTakeFromCols.forEach((function(col){return _this.resizeTakeFromRatios.push(col.getActualWidth()/_this.resizeTakeFromStartWidth)}))}else this.resizeTakeFromCols=null,this.resizeTakeFromStartWidth=null,this.resizeTakeFromRatios=null;this.comp.addOrRemoveCssClass("ag-column-resizing",!0)},GroupResizeFeature.prototype.onResizing=function(finished,resizeAmount,source){void 0===source&&(source="uiColumnResized");var resizeAmountNormalised=this.normaliseDragChange(resizeAmount),width=this.resizeStartWidth+resizeAmountNormalised;this.resizeColumns(width,source,finished)},GroupResizeFeature.prototype.resizeLeafColumnsToFit=function(source){var preferredSize=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup);this.calculateInitialValues(),preferredSize>this.resizeStartWidth&&this.resizeColumns(preferredSize,source,!0)},GroupResizeFeature.prototype.resizeColumns=function(totalWidth,source,finished){void 0===finished&&(finished=!0);var resizeSets=[];if(resizeSets.push({columns:this.resizeCols,ratios:this.resizeRatios,width:totalWidth}),this.resizeTakeFromCols){var diff=totalWidth-this.resizeStartWidth;resizeSets.push({columns:this.resizeTakeFromCols,ratios:this.resizeTakeFromRatios,width:this.resizeTakeFromStartWidth-diff})}this.columnModel.resizeColumnSets({resizeSets,finished,source}),finished&&this.comp.addOrRemoveCssClass("ag-column-resizing",!1)},GroupResizeFeature.prototype.calculateInitialValues=function(){var _this=this,leafCols=this.columnGroup.getDisplayedLeafColumns();this.resizeCols=leafCols.filter((function(col){return col.isResizable()})),this.resizeStartWidth=0,this.resizeCols.forEach((function(col){return _this.resizeStartWidth+=col.getActualWidth()})),this.resizeRatios=[],this.resizeCols.forEach((function(col){return _this.resizeRatios.push(col.getActualWidth()/_this.resizeStartWidth)}))},GroupResizeFeature.prototype.normaliseDragChange=function(dragChange){var result=dragChange;return this.gridOptionsService.is("enableRtl")?"left"!==this.pinned&&(result*=-1):"right"===this.pinned&&(result*=-1),result},__decorate$1n([Autowired("horizontalResizeService")],GroupResizeFeature.prototype,"horizontalResizeService",void 0),__decorate$1n([Autowired("autoWidthCalculator")],GroupResizeFeature.prototype,"autoWidthCalculator",void 0),__decorate$1n([Autowired("columnModel")],GroupResizeFeature.prototype,"columnModel",void 0),__decorate$1n([PostConstruct],GroupResizeFeature.prototype,"postConstruct",null),GroupResizeFeature}(BeanStub),__extends$1r=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),GroupWidthFeature=function(_super){function GroupWidthFeature(comp,columnGroup){var _this=_super.call(this)||this;return _this.removeChildListenersFuncs=[],_this.columnGroup=columnGroup,_this.comp=comp,_this}return __extends$1r(GroupWidthFeature,_super),GroupWidthFeature.prototype.postConstruct=function(){this.addListenersToChildrenColumns(),this.addManagedListener(this.columnGroup,ColumnGroup.EVENT_DISPLAYED_CHILDREN_CHANGED,this.onDisplayedChildrenChanged.bind(this)),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))},GroupWidthFeature.prototype.addListenersToChildrenColumns=function(){var _this=this;this.removeListenersOnChildrenColumns();var widthChangedListener=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach((function(column){column.addEventListener("widthChanged",widthChangedListener),column.addEventListener("visibleChanged",widthChangedListener),_this.removeChildListenersFuncs.push((function(){column.removeEventListener("widthChanged",widthChangedListener),column.removeEventListener("visibleChanged",widthChangedListener)}))}))},GroupWidthFeature.prototype.removeListenersOnChildrenColumns=function(){this.removeChildListenersFuncs.forEach((function(func){return func()})),this.removeChildListenersFuncs=[]},GroupWidthFeature.prototype.onDisplayedChildrenChanged=function(){this.addListenersToChildrenColumns(),this.onWidthChanged()},GroupWidthFeature.prototype.onWidthChanged=function(){var columnWidth=this.columnGroup.getActualWidth();this.comp.setWidth(columnWidth+"px"),this.comp.addOrRemoveCssClass("ag-hidden",0===columnWidth)},function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([PostConstruct],GroupWidthFeature.prototype,"postConstruct",null),GroupWidthFeature}(BeanStub),__extends$1q=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1l=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HeaderGroupCellCtrl=function(_super){function HeaderGroupCellCtrl(columnGroup,parentRowCtrl){var _this=_super.call(this,columnGroup,parentRowCtrl)||this;return _this.columnGroup=columnGroup,_this}return __extends$1q(HeaderGroupCellCtrl,_super),HeaderGroupCellCtrl.prototype.setComp=function(comp,eGui,eResize){_super.prototype.setGui.call(this,eGui),this.comp=comp,this.displayName=this.columnModel.getDisplayNameForColumnGroup(this.columnGroup,"header"),this.addClasses(),this.setupMovingCss(),this.setupExpandable(),this.setupTooltip(),this.setupUserComp();var pinned=this.getParentRowCtrl().getPinned(),leafCols=this.columnGroup.getProvidedColumnGroup().getLeafColumns();this.createManagedBean(new HoverFeature(leafCols,eGui)),this.createManagedBean(new SetLeftFeature(this.columnGroup,eGui,this.beans)),this.createManagedBean(new GroupWidthFeature(comp,this.columnGroup)),this.groupResizeFeature=this.createManagedBean(new GroupResizeFeature(comp,eResize,pinned,this.columnGroup)),this.createManagedBean(new ManagedFocusFeature(eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:function(){},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))},HeaderGroupCellCtrl.prototype.resizeLeafColumnsToFit=function(source){this.groupResizeFeature&&this.groupResizeFeature.resizeLeafColumnsToFit(source)},HeaderGroupCellCtrl.prototype.setupUserComp=function(){var _this=this,displayName=this.displayName,params={displayName:this.displayName,columnGroup:this.columnGroup,setExpanded:function(expanded){_this.columnModel.setColumnGroupOpened(_this.columnGroup.getProvidedColumnGroup(),expanded,"gridInitializing")},api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context};if(!displayName){for(var columnGroup=this.columnGroup,leafCols=columnGroup.getLeafColumns();columnGroup.getParent()&&columnGroup.getParent().getLeafColumns().length===leafCols.length;)columnGroup=columnGroup.getParent();var colGroupDef=columnGroup.getColGroupDef();colGroupDef&&(displayName=colGroupDef.headerName),displayName||(displayName=leafCols?this.columnModel.getDisplayNameForColumn(leafCols[0],"header",!0):"")}var compDetails=this.userComponentFactory.getHeaderGroupCompDetails(params);this.comp.setUserCompDetails(compDetails)},HeaderGroupCellCtrl.prototype.setupTooltip=function(){var _this=this,colGroupDef=this.columnGroup.getColGroupDef(),tooltipCtrl={getColumn:function(){return _this.columnGroup},getGui:function(){return _this.eGui},getLocation:function(){return"headerGroup"},getTooltipValue:function(){return colGroupDef&&colGroupDef.headerTooltip}};colGroupDef&&(tooltipCtrl.getColDef=function(){return colGroupDef}),this.createManagedBean(new TooltipFeature(tooltipCtrl,this.beans)).setComp(this.eGui)},HeaderGroupCellCtrl.prototype.setupExpandable=function(){var providedColGroup=this.columnGroup.getProvidedColumnGroup();this.refreshExpanded(),this.addManagedListener(providedColGroup,ProvidedColumnGroup.EVENT_EXPANDABLE_CHANGED,this.refreshExpanded.bind(this)),this.addManagedListener(providedColGroup,ProvidedColumnGroup.EVENT_EXPANDED_CHANGED,this.refreshExpanded.bind(this))},HeaderGroupCellCtrl.prototype.refreshExpanded=function(){var column=this.columnGroup;this.expandable=column.isExpandable();var expanded=column.isExpanded();this.expandable?this.comp.setAriaExpanded(expanded?"true":"false"):this.comp.setAriaExpanded(void 0)},HeaderGroupCellCtrl.prototype.getColId=function(){return this.columnGroup.getUniqueId()},HeaderGroupCellCtrl.prototype.addClasses=function(){var _this=this,colGroupDef=this.columnGroup.getColGroupDef(),classes=CssClassApplier.getHeaderClassesFromColDef(colGroupDef,this.gridOptionsService,null,this.columnGroup);this.columnGroup.isPadding()?(classes.push("ag-header-group-cell-no-group"),this.columnGroup.getLeafColumns().every((function(col){return col.isSpanHeaderHeight()}))&&classes.push("ag-header-span-height")):classes.push("ag-header-group-cell-with-group");classes.forEach((function(c){return _this.comp.addOrRemoveCssClass(c,!0)}))},HeaderGroupCellCtrl.prototype.setupMovingCss=function(){var _this=this,leafColumns=this.columnGroup.getProvidedColumnGroup().getLeafColumns(),listener=function(){return _this.comp.addOrRemoveCssClass("ag-header-cell-moving",_this.columnGroup.isMoving())};leafColumns.forEach((function(col){_this.addManagedListener(col,Column.EVENT_MOVING_CHANGED,listener)})),listener()},HeaderGroupCellCtrl.prototype.onFocusIn=function(e){if(!this.eGui.contains(e.relatedTarget)){var rowIndex=this.getRowIndex();this.beans.focusService.setFocusedHeader(rowIndex,this.columnGroup)}},HeaderGroupCellCtrl.prototype.handleKeyDown=function(e){_super.prototype.handleKeyDown.call(this,e);var wrapperHasFocus=this.getWrapperHasFocus();if(this.expandable&&wrapperHasFocus&&e.key===KeyCode.ENTER){var column=this.columnGroup,newExpandedValue=!column.isExpanded();this.columnModel.setColumnGroupOpened(column.getProvidedColumnGroup(),newExpandedValue,"uiColumnExpanded")}},HeaderGroupCellCtrl.prototype.setDragSource=function(eHeaderGroup){var _this=this;if(!this.isSuppressMoving()){var allLeafColumns=this.columnGroup.getProvidedColumnGroup().getLeafColumns(),hideColumnOnExit=!this.gridOptionsService.is("suppressDragLeaveHidesColumns"),dragSource={type:DragSourceType.HeaderCell,eElement:eHeaderGroup,getDefaultIconName:function(){return hideColumnOnExit?DragAndDropService.ICON_HIDE:DragAndDropService.ICON_NOT_ALLOWED},dragItemName:this.displayName,getDragItem:this.getDragItemForGroup.bind(this),onDragStarted:function(){hideColumnOnExit=!_this.gridOptionsService.is("suppressDragLeaveHidesColumns"),allLeafColumns.forEach((function(col){return col.setMoving(!0,"uiColumnDragged")}))},onDragStopped:function(){return allLeafColumns.forEach((function(col){return col.setMoving(!1,"uiColumnDragged")}))},onGridEnter:function(dragItem){var _a;if(hideColumnOnExit){var unlockedColumns=(null===(_a=null==dragItem?void 0:dragItem.columns)||void 0===_a?void 0:_a.filter((function(col){return!col.getColDef().lockVisible})))||[];_this.columnModel.setColumnsVisible(unlockedColumns,!0,"uiColumnMoved")}},onGridExit:function(dragItem){var _a;if(hideColumnOnExit){var unlockedColumns=(null===(_a=null==dragItem?void 0:dragItem.columns)||void 0===_a?void 0:_a.filter((function(col){return!col.getColDef().lockVisible})))||[];_this.columnModel.setColumnsVisible(unlockedColumns,!1,"uiColumnMoved")}}};this.dragAndDropService.addDragSource(dragSource,!0),this.addDestroyFunc((function(){return _this.dragAndDropService.removeDragSource(dragSource)}))}},HeaderGroupCellCtrl.prototype.getDragItemForGroup=function(){var allColumnsOriginalOrder=this.columnGroup.getProvidedColumnGroup().getLeafColumns(),visibleState={};allColumnsOriginalOrder.forEach((function(column){return visibleState[column.getId()]=column.isVisible()}));var allColumnsCurrentOrder=[];return this.columnModel.getAllDisplayedColumns().forEach((function(column){allColumnsOriginalOrder.indexOf(column)>=0&&(allColumnsCurrentOrder.push(column),removeFromArray(allColumnsOriginalOrder,column))})),allColumnsOriginalOrder.forEach((function(column){return allColumnsCurrentOrder.push(column)})),{columns:allColumnsCurrentOrder,visibleState}},HeaderGroupCellCtrl.prototype.isSuppressMoving=function(){var childSuppressesMoving=!1;return this.columnGroup.getLeafColumns().forEach((function(column){(column.getColDef().suppressMovable||column.getColDef().lockPosition)&&(childSuppressesMoving=!0)})),childSuppressesMoving||this.gridOptionsService.is("suppressMovableColumns")},__decorate$1l([Autowired("columnModel")],HeaderGroupCellCtrl.prototype,"columnModel",void 0),__decorate$1l([Autowired("dragAndDropService")],HeaderGroupCellCtrl.prototype,"dragAndDropService",void 0),__decorate$1l([Autowired("gridApi")],HeaderGroupCellCtrl.prototype,"gridApi",void 0),__decorate$1l([Autowired("columnApi")],HeaderGroupCellCtrl.prototype,"columnApi",void 0),HeaderGroupCellCtrl}(AbstractHeaderCellCtrl),__extends$1p=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1k=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},instanceIdSequence=0,HeaderRowCtrl=function(_super){function HeaderRowCtrl(rowIndex,pinned,type){var _this=_super.call(this)||this;_this.instanceId=instanceIdSequence++,_this.headerCellCtrls={},_this.rowIndex=rowIndex,_this.pinned=pinned,_this.type=type;var typeClass=type==HeaderRowType.COLUMN_GROUP?"ag-header-row-column-group":type==HeaderRowType.FLOATING_FILTER?"ag-header-row-column-filter":"ag-header-row-column";return _this.headerRowClass="ag-header-row "+typeClass,_this}return __extends$1p(HeaderRowCtrl,_super),HeaderRowCtrl.prototype.postConstruct=function(){this.isPrintLayout=this.gridOptionsService.isDomLayout("print"),this.isEnsureDomOrder=this.gridOptionsService.is("ensureDomOrder")},HeaderRowCtrl.prototype.getInstanceId=function(){return this.instanceId},HeaderRowCtrl.prototype.setComp=function(comp,initCompState){void 0===initCompState&&(initCompState=!0),this.comp=comp,initCompState&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners()},HeaderRowCtrl.prototype.getHeaderRowClass=function(){return this.headerRowClass},HeaderRowCtrl.prototype.getAriaRowIndex=function(){return this.rowIndex+1},HeaderRowCtrl.prototype.getTransform=function(){if(isBrowserSafari())return"translateZ(0)"},HeaderRowCtrl.prototype.addEventListeners=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_VIRTUAL_COLUMNS_CHANGED,(function(params){return _this.onVirtualColumnsChanged(params.afterScroll)})),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_GRID_STYLES_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),this.addManagedPropertyListener("ensureDomOrder",(function(e){return _this.isEnsureDomOrder=e.currentValue})),this.addManagedPropertyListener("headerHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("groupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotGroupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("floatingFiltersHeight",this.onRowHeightChanged.bind(this))},HeaderRowCtrl.prototype.getHeaderCellCtrl=function(column){return values(this.headerCellCtrls).find((function(cellCtrl){return cellCtrl.getColumnGroupChild()===column}))},HeaderRowCtrl.prototype.onDisplayedColumnsChanged=function(){this.isPrintLayout=this.gridOptionsService.isDomLayout("print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()},HeaderRowCtrl.prototype.getType=function(){return this.type},HeaderRowCtrl.prototype.onColumnResized=function(){this.setWidth()},HeaderRowCtrl.prototype.setWidth=function(){var width=this.getWidthForRow();this.comp.setWidth(width+"px")},HeaderRowCtrl.prototype.getWidthForRow=function(){return this.isPrintLayout?null!=this.pinned?0:this.columnModel.getContainerWidth("right")+this.columnModel.getContainerWidth("left")+this.columnModel.getContainerWidth(null):this.columnModel.getContainerWidth(this.pinned)},HeaderRowCtrl.prototype.onRowHeightChanged=function(){var _a=this.getTopAndHeight(),topOffset=_a.topOffset,rowHeight=_a.rowHeight;this.comp.setTop(topOffset+"px"),this.comp.setHeight(rowHeight+"px")},HeaderRowCtrl.prototype.getTopAndHeight=function(){var headerRowCount=this.columnModel.getHeaderRowCount(),sizes=[],numberOfFloating=0;this.filterManager.hasFloatingFilters()&&(headerRowCount++,numberOfFloating=1);for(var groupHeight=this.columnModel.getColumnGroupHeaderRowHeight(),headerHeight=this.columnModel.getColumnHeaderRowHeight(),numberOfGroups=headerRowCount-(1+numberOfFloating),i=0;i<numberOfGroups;i++)sizes.push(groupHeight);sizes.push(headerHeight);for(i=0;i<numberOfFloating;i++)sizes.push(this.columnModel.getFloatingFiltersHeight());var topOffset=0;for(i=0;i<this.rowIndex;i++)topOffset+=sizes[i];return{topOffset,rowHeight:sizes[this.rowIndex]}},HeaderRowCtrl.prototype.getPinned=function(){return this.pinned},HeaderRowCtrl.prototype.getRowIndex=function(){return this.rowIndex},HeaderRowCtrl.prototype.onVirtualColumnsChanged=function(afterScroll){void 0===afterScroll&&(afterScroll=!1);var ctrlsToDisplay=this.getHeaderCtrls(),forceOrder=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(ctrlsToDisplay,forceOrder,afterScroll)},HeaderRowCtrl.prototype.getHeaderCtrls=function(){var _this=this,oldCtrls=this.headerCellCtrls;this.headerCellCtrls={},this.getColumnsInViewport().forEach((function(child){if(!child.isEmptyGroup()){var idOfChild=child.getUniqueId(),headerCtrl=oldCtrls[idOfChild];if(delete oldCtrls[idOfChild],headerCtrl&&headerCtrl.getColumnGroupChild()!=child&&(_this.destroyBean(headerCtrl),headerCtrl=void 0),null==headerCtrl)switch(_this.type){case HeaderRowType.FLOATING_FILTER:headerCtrl=_this.createBean(new HeaderFilterCellCtrl(child,_this));break;case HeaderRowType.COLUMN_GROUP:headerCtrl=_this.createBean(new HeaderGroupCellCtrl(child,_this));break;default:headerCtrl=_this.createBean(new HeaderCellCtrl(child,_this))}_this.headerCellCtrls[idOfChild]=headerCtrl}}));return iterateObject(oldCtrls,(function(id,oldCtrl){var ctrl;(ctrl=oldCtrl,!!_this.focusService.isHeaderWrapperFocused(ctrl)&&_this.columnModel.isDisplayed(ctrl.getColumnGroupChild()))?_this.headerCellCtrls[id]=oldCtrl:_this.destroyBean(oldCtrl)})),getAllValuesInObject(this.headerCellCtrls)},HeaderRowCtrl.prototype.getColumnsInViewport=function(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()},HeaderRowCtrl.prototype.getColumnsInViewportPrintLayout=function(){var _this=this;if(null!=this.pinned)return[];var viewportColumns=[],actualDepth=this.getActualDepth();return["left",null,"right"].forEach((function(pinned){var items=_this.columnModel.getVirtualHeaderGroupRow(pinned,actualDepth);viewportColumns=viewportColumns.concat(items)})),viewportColumns},HeaderRowCtrl.prototype.getActualDepth=function(){return this.type==HeaderRowType.FLOATING_FILTER?this.rowIndex-1:this.rowIndex},HeaderRowCtrl.prototype.getColumnsInViewportNormalLayout=function(){return this.columnModel.getVirtualHeaderGroupRow(this.pinned,this.getActualDepth())},HeaderRowCtrl.prototype.focusHeader=function(column,event){var ctrl=getAllValuesInObject(this.headerCellCtrls).find((function(ctrl){return ctrl.getColumnGroupChild()==column}));return!!ctrl&&(ctrl.focus(event),!0)},HeaderRowCtrl.prototype.destroy=function(){var _this=this;iterateObject(this.headerCellCtrls,(function(key,ctrl){_this.destroyBean(ctrl)})),this.headerCellCtrls={},_super.prototype.destroy.call(this)},__decorate$1k([Autowired("columnModel")],HeaderRowCtrl.prototype,"columnModel",void 0),__decorate$1k([Autowired("focusService")],HeaderRowCtrl.prototype,"focusService",void 0),__decorate$1k([Autowired("filterManager")],HeaderRowCtrl.prototype,"filterManager",void 0),__decorate$1k([PostConstruct],HeaderRowCtrl.prototype,"postConstruct",null),HeaderRowCtrl}(BeanStub),__extends$1o=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1j=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HeaderRowContainerCtrl=function(_super){function HeaderRowContainerCtrl(pinned){var _this=_super.call(this)||this;return _this.hidden=!1,_this.includeFloatingFilter=!1,_this.groupsRowCtrls=[],_this.pinned=pinned,_this}return __extends$1o(HeaderRowContainerCtrl,_super),HeaderRowContainerCtrl.prototype.setComp=function(comp,eGui){this.comp=comp,this.eViewport=eGui,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport),this.addManagedListener(this.eventService,Events.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.ctrlsService.registerHeaderContainer(this,this.pinned),this.columnModel.isReady()&&this.refresh()},HeaderRowContainerCtrl.prototype.setupDragAndDrop=function(dropContainer){var bodyDropTarget=new BodyDropTarget(this.pinned,dropContainer);this.createManagedBean(bodyDropTarget)},HeaderRowContainerCtrl.prototype.refresh=function(keepColumns){var _this=this;void 0===keepColumns&&(keepColumns=!1);var rowIndex,needNewInstance,sequence=new NumberSequence,focusedHeaderPosition=this.focusService.getFocusHeaderToUseAfterRefresh();!function(){var groupRowCount=_this.columnModel.getHeaderRowCount()-1;_this.groupsRowCtrls=_this.destroyBeans(_this.groupsRowCtrls);for(var i=0;i<groupRowCount;i++){var ctrl=_this.createBean(new HeaderRowCtrl(sequence.next(),_this.pinned,HeaderRowType.COLUMN_GROUP));_this.groupsRowCtrls.push(ctrl)}}(),rowIndex=sequence.next(),((needNewInstance=!(_this.hidden||null!=_this.columnsRowCtrl&&keepColumns&&_this.columnsRowCtrl.getRowIndex()===rowIndex))||_this.hidden)&&(_this.columnsRowCtrl=_this.destroyBean(_this.columnsRowCtrl)),needNewInstance&&(_this.columnsRowCtrl=_this.createBean(new HeaderRowCtrl(rowIndex,_this.pinned,HeaderRowType.COLUMN))),function(){_this.includeFloatingFilter=_this.filterManager.hasFloatingFilters()&&!_this.hidden;var destroyPreviousComp=function(){_this.filtersRowCtrl=_this.destroyBean(_this.filtersRowCtrl)};if(_this.includeFloatingFilter){var rowIndex=sequence.next();if(_this.filtersRowCtrl){var rowIndexMismatch=_this.filtersRowCtrl.getRowIndex()!==rowIndex;keepColumns&&!rowIndexMismatch||destroyPreviousComp()}_this.filtersRowCtrl||(_this.filtersRowCtrl=_this.createBean(new HeaderRowCtrl(rowIndex,_this.pinned,HeaderRowType.FLOATING_FILTER)))}else destroyPreviousComp()}();var allCtrls=this.getAllCtrls();this.comp.setCtrls(allCtrls),this.restoreFocusOnHeader(focusedHeaderPosition)},HeaderRowContainerCtrl.prototype.restoreFocusOnHeader=function(position){null!=position&&position.column.getPinned()==this.pinned&&this.focusService.focusHeaderPosition({headerPosition:position})},HeaderRowContainerCtrl.prototype.getAllCtrls=function(){var res=function(to,from){for(var i=0,il=from.length,j=to.length;i<il;i++,j++)to[j]=from[i];return to}([],function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}(this.groupsRowCtrls));return this.columnsRowCtrl&&res.push(this.columnsRowCtrl),this.filtersRowCtrl&&res.push(this.filtersRowCtrl),res},HeaderRowContainerCtrl.prototype.onGridColumnsChanged=function(){this.refresh(!0)},HeaderRowContainerCtrl.prototype.onDisplayedColumnsChanged=function(){var includeFloatingFilter=this.filterManager.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==includeFloatingFilter&&this.refresh(!0)},HeaderRowContainerCtrl.prototype.setupCenterWidth=function(){var _this=this;null==this.pinned&&this.createManagedBean(new CenterWidthFeature((function(width){return _this.comp.setCenterWidth(width+"px")}),!0))},HeaderRowContainerCtrl.prototype.setHorizontalScroll=function(offset){this.comp.setViewportScrollLeft(offset)},HeaderRowContainerCtrl.prototype.setupPinnedWidth=function(){var _this=this;if(null!=this.pinned){var pinningLeft="left"===this.pinned,pinningRight="right"===this.pinned;this.hidden=!0;var listener=function(){var width=pinningLeft?_this.pinnedWidthService.getPinnedLeftWidth():_this.pinnedWidthService.getPinnedRightWidth();if(null!=width){var hidden=0==width,hiddenChanged=_this.hidden!==hidden,isRtl=_this.gridOptionsService.is("enableRtl"),scrollbarWidth=_this.gridOptionsService.getScrollbarWidth(),widthWithPadding=_this.scrollVisibleService.isVerticalScrollShowing()&&(isRtl&&pinningLeft||!isRtl&&pinningRight)?width+scrollbarWidth:width;_this.comp.setPinnedContainerWidth(widthWithPadding+"px"),_this.comp.setDisplayed(!hidden),hiddenChanged&&(_this.hidden=hidden,_this.refresh())}};this.addManagedListener(this.eventService,Events.EVENT_LEFT_PINNED_WIDTH_CHANGED,listener),this.addManagedListener(this.eventService,Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED,listener),this.addManagedListener(this.eventService,Events.EVENT_SCROLL_VISIBILITY_CHANGED,listener),this.addManagedListener(this.eventService,Events.EVENT_SCROLLBAR_WIDTH_CHANGED,listener)}},HeaderRowContainerCtrl.prototype.getHeaderCtrlForColumn=function(column){if(column instanceof Column){if(!this.columnsRowCtrl)return;return this.columnsRowCtrl.getHeaderCellCtrl(column)}if(0!==this.groupsRowCtrls.length)for(var i=0;i<this.groupsRowCtrls.length;i++){var ctrl=this.groupsRowCtrls[i].getHeaderCellCtrl(column);if(ctrl)return ctrl}},HeaderRowContainerCtrl.prototype.getHtmlElementForColumnHeader=function(column){var cellCtrl=this.getHeaderCtrlForColumn(column);return cellCtrl?cellCtrl.getGui():null},HeaderRowContainerCtrl.prototype.getRowType=function(rowIndex){var ctrl=this.getAllCtrls()[rowIndex];return ctrl?ctrl.getType():void 0},HeaderRowContainerCtrl.prototype.focusHeader=function(rowIndex,column,event){var ctrl=this.getAllCtrls()[rowIndex];return!!ctrl&&ctrl.focusHeader(column,event)},HeaderRowContainerCtrl.prototype.getRowCount=function(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)},HeaderRowContainerCtrl.prototype.destroy=function(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),_super.prototype.destroy.call(this)},__decorate$1j([Autowired("ctrlsService")],HeaderRowContainerCtrl.prototype,"ctrlsService",void 0),__decorate$1j([Autowired("scrollVisibleService")],HeaderRowContainerCtrl.prototype,"scrollVisibleService",void 0),__decorate$1j([Autowired("pinnedWidthService")],HeaderRowContainerCtrl.prototype,"pinnedWidthService",void 0),__decorate$1j([Autowired("columnModel")],HeaderRowContainerCtrl.prototype,"columnModel",void 0),__decorate$1j([Autowired("focusService")],HeaderRowContainerCtrl.prototype,"focusService",void 0),__decorate$1j([Autowired("filterManager")],HeaderRowContainerCtrl.prototype,"filterManager",void 0),HeaderRowContainerCtrl}(BeanStub),__extends$1n=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1i=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HeaderRowContainerComp=function(_super){function HeaderRowContainerComp(pinned){var _this=_super.call(this)||this;return _this.headerRowComps={},_this.rowCompsList=[],_this.pinned=pinned,_this}return __extends$1n(HeaderRowContainerComp,_super),HeaderRowContainerComp.prototype.init=function(){var _this=this;this.selectAndSetTemplate();var compProxy={setDisplayed:function(displayed){return _this.setDisplayed(displayed)},setCtrls:function(ctrls){return _this.setCtrls(ctrls)},setCenterWidth:function(width){return _this.eCenterContainer.style.width=width},setViewportScrollLeft:function(left){return _this.getGui().scrollLeft=left},setPinnedContainerWidth:function(width){var eGui=_this.getGui();eGui.style.width=width,eGui.style.maxWidth=width,eGui.style.minWidth=width}};this.createManagedBean(new HeaderRowContainerCtrl(this.pinned)).setComp(compProxy,this.getGui())},HeaderRowContainerComp.prototype.selectAndSetTemplate=function(){var pinnedLeft="left"==this.pinned,pinnedRight="right"==this.pinned,template=pinnedLeft?HeaderRowContainerComp.PINNED_LEFT_TEMPLATE:pinnedRight?HeaderRowContainerComp.PINNED_RIGHT_TEMPLATE:HeaderRowContainerComp.CENTER_TEMPLATE;this.setTemplate(template),this.eRowContainer=this.eCenterContainer?this.eCenterContainer:this.getGui()},HeaderRowContainerComp.prototype.destroyRowComps=function(){this.setCtrls([])},HeaderRowContainerComp.prototype.destroyRowComp=function(rowComp){this.destroyBean(rowComp),this.eRowContainer.removeChild(rowComp.getGui())},HeaderRowContainerComp.prototype.setCtrls=function(ctrls){var prevGui,_this=this,oldRowComps=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];ctrls.forEach((function(ctrl){var ctrlId=ctrl.getInstanceId(),existingComp=oldRowComps[ctrlId];delete oldRowComps[ctrlId];var rowComp=existingComp||_this.createBean(new HeaderRowComp(ctrl));_this.headerRowComps[ctrlId]=rowComp,_this.rowCompsList.push(rowComp),function(rowComp){var eGui=rowComp.getGui();eGui.parentElement!=_this.eRowContainer&&_this.eRowContainer.appendChild(eGui),prevGui&&ensureDomOrder(_this.eRowContainer,eGui,prevGui),prevGui=eGui}(rowComp)})),getAllValuesInObject(oldRowComps).forEach((function(c){return _this.destroyRowComp(c)}))},HeaderRowContainerComp.PINNED_LEFT_TEMPLATE='<div class="ag-pinned-left-header" role="presentation"></div>',HeaderRowContainerComp.PINNED_RIGHT_TEMPLATE='<div class="ag-pinned-right-header" role="presentation"></div>',HeaderRowContainerComp.CENTER_TEMPLATE='<div class="ag-header-viewport" role="presentation">\n            <div class="ag-header-container" ref="eCenterContainer" role="rowgroup"></div>\n        </div>',__decorate$1i([RefSelector("eCenterContainer")],HeaderRowContainerComp.prototype,"eCenterContainer",void 0),__decorate$1i([PostConstruct],HeaderRowContainerComp.prototype,"init",null),__decorate$1i([PreDestroy],HeaderRowContainerComp.prototype,"destroyRowComps",null),HeaderRowContainerComp}(Component),__extends$1m=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1h=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};!function(HeaderNavigationDirection){HeaderNavigationDirection[HeaderNavigationDirection.UP=0]="UP",HeaderNavigationDirection[HeaderNavigationDirection.DOWN=1]="DOWN",HeaderNavigationDirection[HeaderNavigationDirection.LEFT=2]="LEFT",HeaderNavigationDirection[HeaderNavigationDirection.RIGHT=3]="RIGHT"}(HeaderNavigationDirection||(HeaderNavigationDirection={}));var HeaderNavigationService=function(_super){function HeaderNavigationService(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1m(HeaderNavigationService,_super),HeaderNavigationService.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady((function(p){_this.gridBodyCon=p.gridBodyCtrl}))},HeaderNavigationService.prototype.getHeaderRowCount=function(){var centerHeaderContainer=this.ctrlsService.getHeaderRowContainerCtrl();return centerHeaderContainer?centerHeaderContainer.getRowCount():0},HeaderNavigationService.prototype.navigateVertically=function(direction,fromHeader,event){if(fromHeader||(fromHeader=this.focusService.getFocusedHeader()),!fromHeader)return!1;var headerRowIndex=fromHeader.headerRowIndex,column=fromHeader.column,rowLen=this.getHeaderRowCount(),_a=direction===HeaderNavigationDirection.UP?this.headerPositionUtils.getColumnVisibleParent(column,headerRowIndex):this.headerPositionUtils.getColumnVisibleChild(column,headerRowIndex),nextRow=_a.nextRow,nextFocusColumn=_a.nextFocusColumn,skipColumn=!1;return nextRow<0&&(nextRow=0,nextFocusColumn=column,skipColumn=!0),nextRow>=rowLen&&(nextRow=-1),!(!skipColumn&&!nextFocusColumn)&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:nextRow,column:nextFocusColumn},allowUserOverride:!0,event})},HeaderNavigationService.prototype.navigateHorizontally=function(direction,fromTab,event){void 0===fromTab&&(fromTab=!1);var nextHeader,normalisedDirection,focusedHeader=this.focusService.getFocusedHeader();return direction===HeaderNavigationDirection.LEFT!==this.gridOptionsService.is("enableRtl")?(normalisedDirection="Before",nextHeader=this.headerPositionUtils.findHeader(focusedHeader,normalisedDirection)):(normalisedDirection="After",nextHeader=this.headerPositionUtils.findHeader(focusedHeader,normalisedDirection)),nextHeader||!fromTab?this.focusService.focusHeaderPosition({headerPosition:nextHeader,direction:normalisedDirection,fromTab,allowUserOverride:!0,event}):this.focusNextHeaderRow(focusedHeader,normalisedDirection,event)},HeaderNavigationService.prototype.focusNextHeaderRow=function(focusedHeader,direction,event){var nextRowIndex,currentIndex=focusedHeader.headerRowIndex,nextPosition=null;return"Before"===direction?currentIndex>0&&(nextRowIndex=currentIndex-1,nextPosition=this.headerPositionUtils.findColAtEdgeForHeaderRow(nextRowIndex,"end")):(nextRowIndex=currentIndex+1,nextPosition=this.headerPositionUtils.findColAtEdgeForHeaderRow(nextRowIndex,"start")),this.focusService.focusHeaderPosition({headerPosition:nextPosition,direction,fromTab:!0,allowUserOverride:!0,event})},HeaderNavigationService.prototype.scrollToColumn=function(column,direction){if(void 0===direction&&(direction="After"),!column.getPinned()){var columnToScrollTo;if(column instanceof ColumnGroup){var columns=column.getDisplayedLeafColumns();columnToScrollTo="Before"===direction?last(columns):columns[0]}else columnToScrollTo=column;this.gridBodyCon.getScrollFeature().ensureColumnVisible(columnToScrollTo)}},__decorate$1h([Autowired("focusService")],HeaderNavigationService.prototype,"focusService",void 0),__decorate$1h([Autowired("headerPositionUtils")],HeaderNavigationService.prototype,"headerPositionUtils",void 0),__decorate$1h([Autowired("ctrlsService")],HeaderNavigationService.prototype,"ctrlsService",void 0),__decorate$1h([PostConstruct],HeaderNavigationService.prototype,"postConstruct",null),HeaderNavigationService=__decorate$1h([Bean("headerNavigationService")],HeaderNavigationService)}(BeanStub),__extends$1l=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1g=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},GridHeaderCtrl=function(_super){function GridHeaderCtrl(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1l(GridHeaderCtrl,_super),GridHeaderCtrl.prototype.setComp=function(comp,eGui,eFocusableElement){this.comp=comp,this.eGui=eGui,this.createManagedBean(new ManagedFocusFeature(eFocusableElement,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.onPivotModeChanged(),this.setupHeaderHeight(),this.ctrlsService.registerGridHeaderCtrl(this)},GridHeaderCtrl.prototype.setupHeaderHeight=function(){var listener=this.setHeaderHeight.bind(this);listener(),this.addManagedPropertyListener("headerHeight",listener),this.addManagedPropertyListener("pivotHeaderHeight",listener),this.addManagedPropertyListener("groupHeaderHeight",listener),this.addManagedPropertyListener("pivotGroupHeaderHeight",listener),this.addManagedPropertyListener("floatingFiltersHeight",listener),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,listener),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,listener),this.addManagedListener(this.eventService,Events.EVENT_GRID_STYLES_CHANGED,listener),this.addManagedListener(this.eventService,Events.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,listener)},GridHeaderCtrl.prototype.getHeaderHeight=function(){return this.headerHeight},GridHeaderCtrl.prototype.setHeaderHeight=function(){var totalHeaderHeight,columnModel=this.columnModel,numberOfFloating=0,headerRowCount=columnModel.getHeaderRowCount();this.filterManager.hasFloatingFilters()&&(headerRowCount++,numberOfFloating=1);var groupHeight=this.columnModel.getColumnGroupHeaderRowHeight(),headerHeight=this.columnModel.getColumnHeaderRowHeight(),numberOfGroups=headerRowCount-(1+numberOfFloating);if(totalHeaderHeight=numberOfFloating*columnModel.getFloatingFiltersHeight(),totalHeaderHeight+=numberOfGroups*groupHeight,totalHeaderHeight+=headerHeight,this.headerHeight!==totalHeaderHeight){this.headerHeight=totalHeaderHeight;var px=totalHeaderHeight+1+"px";this.comp.setHeightAndMinHeight(px),this.eventService.dispatchEvent({type:Events.EVENT_HEADER_HEIGHT_CHANGED})}},GridHeaderCtrl.prototype.onPivotModeChanged=function(){var pivotMode=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",pivotMode),this.comp.addOrRemoveCssClass("ag-pivot-off",!pivotMode)},GridHeaderCtrl.prototype.onDisplayedColumnsChanged=function(){var shouldAllowOverflow=this.columnModel.getAllDisplayedColumns().some((function(col){return col.isSpanHeaderHeight()}));this.comp.addOrRemoveCssClass("ag-header-allow-overflow",shouldAllowOverflow)},GridHeaderCtrl.prototype.onTabKeyDown=function(e){var isRtl=this.gridOptionsService.is("enableRtl"),direction=e.shiftKey!==isRtl?HeaderNavigationDirection.LEFT:HeaderNavigationDirection.RIGHT;(this.headerNavigationService.navigateHorizontally(direction,!0,e)||this.focusService.focusNextGridCoreContainer(e.shiftKey))&&e.preventDefault()},GridHeaderCtrl.prototype.handleKeyDown=function(e){var direction=null;switch(e.key){case KeyCode.LEFT:direction=HeaderNavigationDirection.LEFT;case KeyCode.RIGHT:exists(direction)||(direction=HeaderNavigationDirection.RIGHT),this.headerNavigationService.navigateHorizontally(direction,!1,e);break;case KeyCode.UP:direction=HeaderNavigationDirection.UP;case KeyCode.DOWN:exists(direction)||(direction=HeaderNavigationDirection.DOWN),this.headerNavigationService.navigateVertically(direction,null,e)&&e.preventDefault();break;default:return}},GridHeaderCtrl.prototype.onFocusOut=function(e){var eDocument=this.gridOptionsService.getDocument(),relatedTarget=e.relatedTarget;!relatedTarget&&this.eGui.contains(eDocument.activeElement)||this.eGui.contains(relatedTarget)||this.focusService.clearFocusedHeader()},__decorate$1g([Autowired("headerNavigationService")],GridHeaderCtrl.prototype,"headerNavigationService",void 0),__decorate$1g([Autowired("focusService")],GridHeaderCtrl.prototype,"focusService",void 0),__decorate$1g([Autowired("columnModel")],GridHeaderCtrl.prototype,"columnModel",void 0),__decorate$1g([Autowired("ctrlsService")],GridHeaderCtrl.prototype,"ctrlsService",void 0),__decorate$1g([Autowired("filterManager")],GridHeaderCtrl.prototype,"filterManager",void 0),GridHeaderCtrl}(BeanStub),__extends$1k=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),GridHeaderComp=function(_super){function GridHeaderComp(){return _super.call(this,GridHeaderComp.TEMPLATE)||this}return __extends$1k(GridHeaderComp,_super),GridHeaderComp.prototype.postConstruct=function(){var _this=this,compProxy={addOrRemoveCssClass:function(cssClassName,on){return _this.addOrRemoveCssClass(cssClassName,on)},setHeightAndMinHeight:function(height){_this.getGui().style.height=height,_this.getGui().style.minHeight=height}};this.createManagedBean(new GridHeaderCtrl).setComp(compProxy,this.getGui(),this.getFocusableElement());var addContainer=function(container){_this.createManagedBean(container),_this.appendChild(container)};addContainer(new HeaderRowContainerComp("left")),addContainer(new HeaderRowContainerComp(null)),addContainer(new HeaderRowContainerComp("right"))},GridHeaderComp.TEMPLATE='<div class="ag-header" role="presentation"/>',function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([PostConstruct],GridHeaderComp.prototype,"postConstruct",null),GridHeaderComp}(Component),__extends$1j=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1e=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HorizontalResizeService=function(_super){function HorizontalResizeService(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1j(HorizontalResizeService,_super),HorizontalResizeService.prototype.addResizeBar=function(params){var _this=this,dragSource={dragStartPixels:params.dragStartPixels||0,eElement:params.eResizeBar,onDragStart:this.onDragStart.bind(this,params),onDragStop:this.onDragStop.bind(this,params),onDragging:this.onDragging.bind(this,params),includeTouch:!0,stopPropagationForTouch:!0};this.dragService.addDragSource(dragSource);return function(){return _this.dragService.removeDragSource(dragSource)}},HorizontalResizeService.prototype.onDragStart=function(params,mouseEvent){this.dragStartX=mouseEvent.clientX,this.setResizeIcons();var shiftKey=mouseEvent instanceof MouseEvent&&!0===mouseEvent.shiftKey;params.onResizeStart(shiftKey)},HorizontalResizeService.prototype.setResizeIcons=function(){var ctrl=this.ctrlsService.getGridCtrl();ctrl.setResizeCursor(!0),ctrl.disableUserSelect(!0)},HorizontalResizeService.prototype.onDragStop=function(params,mouseEvent){params.onResizeEnd(this.resizeAmount),this.resetIcons()},HorizontalResizeService.prototype.resetIcons=function(){var ctrl=this.ctrlsService.getGridCtrl();ctrl.setResizeCursor(!1),ctrl.disableUserSelect(!1)},HorizontalResizeService.prototype.onDragging=function(params,mouseEvent){this.resizeAmount=mouseEvent.clientX-this.dragStartX,params.onResizing(this.resizeAmount)},__decorate$1e([Autowired("dragService")],HorizontalResizeService.prototype,"dragService",void 0),__decorate$1e([Autowired("ctrlsService")],HorizontalResizeService.prototype,"ctrlsService",void 0),HorizontalResizeService=__decorate$1e([Bean("horizontalResizeService")],HorizontalResizeService)}(BeanStub),__extends$1i=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1d=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},StandardMenuFactory=function(_super){function StandardMenuFactory(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1i(StandardMenuFactory,_super),StandardMenuFactory.prototype.hideActiveMenu=function(){this.hidePopup&&this.hidePopup()},StandardMenuFactory.prototype.showMenuAfterMouseEvent=function(column,mouseEvent){var _this=this;this.showPopup(column,(function(eMenu){_this.popupService.positionPopupUnderMouseEvent({column,type:"columnMenu",mouseEvent,ePopup:eMenu})}),"columnMenu",mouseEvent.target)},StandardMenuFactory.prototype.showMenuAfterButtonClick=function(column,eventSource,containerType){var _this=this;this.showPopup(column,(function(eMenu){_this.popupService.positionPopupByComponent({type:containerType,eventSource,ePopup:eMenu,keepWithinBounds:!0,position:"under",column})}),containerType,eventSource)},StandardMenuFactory.prototype.showPopup=function(column,positionCallback,containerType,eventSource){var _this=this,filterWrapper=this.filterManager.getOrCreateFilterWrapper(column,"COLUMN_MENU");if(!filterWrapper)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");var hidePopup,eMenu=document.createElement("div");setAriaRole(eMenu,"presentation"),eMenu.classList.add("ag-menu"),this.tabListener=this.addManagedListener(eMenu,"keydown",(function(e){return _this.trapFocusWithin(e,eMenu)})),filterWrapper.guiPromise.then((function(gui){return eMenu.appendChild(gui)}));var anchorToElement=eventSource||this.ctrlsService.getGridBodyCtrl().getGui(),translate=this.localeService.getLocaleTextFunc(),addPopupRes=this.popupService.addPopup({modal:!0,eChild:eMenu,closeOnEsc:!0,closedCallback:function(e){column.setMenuVisible(!1,"contextMenu");var _a,isKeyboardEvent=e instanceof KeyboardEvent;if(_this.tabListener&&(_this.tabListener=_this.tabListener()),isKeyboardEvent&&eventSource&&isVisible(eventSource)){var focusableEl=_this.focusService.findTabbableParent(eventSource);focusableEl&&focusableEl.focus()}null===(_a=filterWrapper.filterPromise)||void 0===_a||_a.then((function(filter){var _a;return null===(_a=null==filter?void 0:filter.afterGuiDetached)||void 0===_a?void 0:_a.call(filter)}))},positionCallback:function(){return positionCallback(eMenu)},anchorToElement,ariaLabel:translate("ariaLabelColumnMenu","Column Menu")});addPopupRes&&(this.hidePopup=hidePopup=addPopupRes.hideFunc),filterWrapper.filterPromise.then((function(filter){positionCallback(eMenu),filter.afterGuiAttached&&filter.afterGuiAttached({container:containerType,hidePopup})})),column.setMenuVisible(!0,"contextMenu")},StandardMenuFactory.prototype.trapFocusWithin=function(e,menu){e.key!==KeyCode.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(menu,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(menu,e.shiftKey))},StandardMenuFactory.prototype.isMenuEnabled=function(column){return column.isFilterAllowed()&&column.getMenuTabs(["filterMenuTab"]).includes("filterMenuTab")},__decorate$1d([Autowired("filterManager")],StandardMenuFactory.prototype,"filterManager",void 0),__decorate$1d([Autowired("popupService")],StandardMenuFactory.prototype,"popupService",void 0),__decorate$1d([Autowired("focusService")],StandardMenuFactory.prototype,"focusService",void 0),__decorate$1d([Autowired("ctrlsService")],StandardMenuFactory.prototype,"ctrlsService",void 0),StandardMenuFactory=__decorate$1d([Bean("menuFactory")],StandardMenuFactory)}(BeanStub),__extends$1h=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1c=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};!function(_super){function TabbedLayout(params){var _this=_super.call(this,TabbedLayout.getTemplate(params.cssClass))||this;return _this.items=[],_this.tabbedItemScrollMap=new Map,_this.params=params,params.items&&params.items.forEach((function(item){return _this.addItem(item)})),_this}__extends$1h(TabbedLayout,_super),TabbedLayout.prototype.postConstruct=function(){var _this=this;this.createManagedBean(new ManagedFocusFeature(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)})),this.addDestroyFunc((function(){var _a,_b,_c;return null===(_c=null===(_b=null===(_a=_this.activeItem)||void 0===_a?void 0:_a.tabbedItem)||void 0===_b?void 0:_b.afterDetachedCallback)||void 0===_c?void 0:_c.call(_b)}))},TabbedLayout.getTemplate=function(cssClass){return'<div class="ag-tabs '+cssClass+'">\n            <div ref="eHeader" role="tablist" class="ag-tabs-header '+(cssClass?cssClass+"-header":"")+'"></div>\n            <div ref="eBody" role="presentation" class="ag-tabs-body '+(cssClass?cssClass+"-body":"")+'"></div>\n        </div>'},TabbedLayout.prototype.handleKeyDown=function(e){var eDocument=this.gridOptionsService.getDocument();switch(e.key){case KeyCode.RIGHT:case KeyCode.LEFT:if(!this.eHeader.contains(eDocument.activeElement))return;var isRightKey=e.key===KeyCode.RIGHT,isRtl=this.gridOptionsService.is("enableRtl"),currentPosition=this.items.indexOf(this.activeItem),nextPosition=isRightKey!==isRtl?Math.min(currentPosition+1,this.items.length-1):Math.max(currentPosition-1,0);if(currentPosition===nextPosition)return;e.preventDefault();var nextItem=this.items[nextPosition];this.showItemWrapper(nextItem),nextItem.eHeaderButton.focus();break;case KeyCode.UP:case KeyCode.DOWN:e.stopPropagation()}},TabbedLayout.prototype.onTabKeyDown=function(e){if(!e.defaultPrevented){var focusService=this.focusService,eHeader=this.eHeader,eBody=this.eBody,activeItem=this.activeItem,activeElement=this.gridOptionsService.getDocument().activeElement,target=e.target;if(e.preventDefault(),eHeader.contains(activeElement))focusService.focusInto(eBody,e.shiftKey);else{var nextEl=null;focusService.isTargetUnderManagedComponent(eBody,target)&&(e.shiftKey&&(nextEl=this.focusService.findFocusableElementBeforeTabGuard(eBody,target)),nextEl||(nextEl=activeItem.eHeaderButton)),!nextEl&&eBody.contains(activeElement)&&((nextEl=focusService.findNextFocusableElement(eBody,!1,e.shiftKey))||(nextEl=activeItem.eHeaderButton)),nextEl&&nextEl.focus()}}},TabbedLayout.prototype.setAfterAttachedParams=function(params){this.afterAttachedParams=params},TabbedLayout.prototype.showFirstItem=function(){this.items.length>0&&this.showItemWrapper(this.items[0])},TabbedLayout.prototype.addItem=function(item){var eHeaderButton=document.createElement("span");setAriaRole(eHeaderButton,"tab"),eHeaderButton.setAttribute("tabindex","-1"),eHeaderButton.appendChild(item.title),eHeaderButton.classList.add("ag-tab"),this.eHeader.appendChild(eHeaderButton),setAriaLabel(eHeaderButton,item.titleLabel);var wrapper={tabbedItem:item,eHeaderButton};this.items.push(wrapper),eHeaderButton.addEventListener("click",this.showItemWrapper.bind(this,wrapper))},TabbedLayout.prototype.showItem=function(tabbedItem){var itemWrapper=this.items.find((function(wrapper){return wrapper.tabbedItem===tabbedItem}));itemWrapper&&this.showItemWrapper(itemWrapper)},TabbedLayout.prototype.showItemWrapper=function(wrapper){var _a,_b,_this=this,tabbedItem=wrapper.tabbedItem,eHeaderButton=wrapper.eHeaderButton;this.params.onItemClicked&&this.params.onItemClicked({item:tabbedItem}),this.activeItem!==wrapper?(this.lastScrollListener&&(this.lastScrollListener=this.lastScrollListener()),clearElement(this.eBody),tabbedItem.bodyPromise.then((function(body){_this.eBody.appendChild(body);var onlyUnmanaged=!_this.focusService.isKeyboardMode();if(_this.focusService.focusInto(_this.eBody,!1,onlyUnmanaged),tabbedItem.afterAttachedCallback&&tabbedItem.afterAttachedCallback(_this.afterAttachedParams),_this.params.keepScrollPosition){var scrollableContainer_1=tabbedItem.getScrollableContainer&&tabbedItem.getScrollableContainer()||body;_this.lastScrollListener=_this.addManagedListener(scrollableContainer_1,"scroll",(function(){_this.tabbedItemScrollMap.set(tabbedItem.name,scrollableContainer_1.scrollTop)}));var scrollPosition_1=_this.tabbedItemScrollMap.get(tabbedItem.name);void 0!==scrollPosition_1&&setTimeout((function(){scrollableContainer_1.scrollTop=scrollPosition_1}),0)}})),this.activeItem&&(this.activeItem.eHeaderButton.classList.remove("ag-tab-selected"),null===(_b=(_a=this.activeItem.tabbedItem).afterDetachedCallback)||void 0===_b||_b.call(_a)),eHeaderButton.classList.add("ag-tab-selected"),this.activeItem=wrapper):callIfPresent(this.params.onActiveItemClicked)},__decorate$1c([Autowired("focusService")],TabbedLayout.prototype,"focusService",void 0),__decorate$1c([RefSelector("eHeader")],TabbedLayout.prototype,"eHeader",void 0),__decorate$1c([RefSelector("eBody")],TabbedLayout.prototype,"eBody",void 0),__decorate$1c([PostConstruct],TabbedLayout.prototype,"postConstruct",null)}(Component);var ServerSideTransactionResultStatus,__extends$1g=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),ResizeObserverService=function(_super){function ResizeObserverService(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.polyfillFunctions=[],_this}return __extends$1g(ResizeObserverService,_super),ResizeObserverService.prototype.observeResize=function(element,callback){var resizeObserver,widthLastTime,heightLastTime,running,periodicallyCheckWidthAndHeight,_this=this,win=this.gridOptionsService.getWindow(),suppressResize=this.gridOptionsService.is("suppressBrowserResizeObserver");return!!win.ResizeObserver&&!suppressResize?((resizeObserver=new win.ResizeObserver(callback)).observe(element),function(){return resizeObserver.disconnect()}):(widthLastTime=offsetWidth(element),heightLastTime=offsetHeight(element),running=!0,(periodicallyCheckWidthAndHeight=function(){if(running){var newWidth=offsetWidth(element),newHeight=offsetHeight(element);(newWidth!==widthLastTime||newHeight!==heightLastTime)&&(widthLastTime=newWidth,heightLastTime=newHeight,callback()),_this.doNextPolyfillTurn(periodicallyCheckWidthAndHeight)}})(),function(){return running=!1})},ResizeObserverService.prototype.doNextPolyfillTurn=function(func){this.polyfillFunctions.push(func),this.schedulePolyfill()},ResizeObserverService.prototype.schedulePolyfill=function(){var _this=this;if(!this.polyfillScheduled){this.polyfillScheduled=!0,this.getFrameworkOverrides().setTimeout((function(){var funcs=_this.polyfillFunctions;_this.polyfillScheduled=!1,_this.polyfillFunctions=[],funcs.forEach((function(f){return f()}))}),50)}},ResizeObserverService=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}([Bean("resizeObserverService")],ResizeObserverService),ResizeObserverService}(BeanStub),__extends$1f=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1a=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AnimationFrameService=function(_super){function AnimationFrameService(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.createTasksP1={list:[],sorted:!1},_this.createTasksP2={list:[],sorted:!1},_this.destroyTasks=[],_this.ticking=!1,_this.scrollGoingDown=!0,_this.lastPage=0,_this.lastScrollTop=0,_this.taskCount=0,_this.cancelledTasks=new Set,_this}return __extends$1f(AnimationFrameService,_super),AnimationFrameService.prototype.setScrollTop=function(scrollTop){var isPaginationActive=this.gridOptionsService.is("pagination");if(this.scrollGoingDown=scrollTop>=this.lastScrollTop,isPaginationActive&&0===scrollTop){var currentPage=this.paginationProxy.getCurrentPage();currentPage!==this.lastPage&&(this.lastPage=currentPage,this.scrollGoingDown=!0)}this.lastScrollTop=scrollTop},AnimationFrameService.prototype.init=function(){this.useAnimationFrame=!this.gridOptionsService.is("suppressAnimationFrame")},AnimationFrameService.prototype.isOn=function(){return this.useAnimationFrame},AnimationFrameService.prototype.verifyAnimationFrameOn=function(methodName){!1===this.useAnimationFrame&&console.warn("AG Grid: AnimationFrameService."+methodName+" called but animation frames are off")},AnimationFrameService.prototype.createTask=function(task,index,list){this.verifyAnimationFrameOn(list);var taskItem={task,index,createOrder:++this.taskCount};this.addTaskToList(this[list],taskItem),this.schedule()},AnimationFrameService.prototype.cancelTask=function(task){this.cancelledTasks.add(task)},AnimationFrameService.prototype.addTaskToList=function(taskList,task){taskList.list.push(task),taskList.sorted=!1},AnimationFrameService.prototype.sortTaskList=function(taskList){if(!taskList.sorted){var sortDirection=this.scrollGoingDown?1:-1;taskList.list.sort((function(a,b){return a.index!==b.index?sortDirection*(b.index-a.index):b.createOrder-a.createOrder})),taskList.sorted=!0}},AnimationFrameService.prototype.addDestroyTask=function(task){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(task),this.schedule()},AnimationFrameService.prototype.executeFrame=function(millis){this.verifyAnimationFrameOn("executeFrame");for(var p1TaskList=this.createTasksP1,p1Tasks=p1TaskList.list,p2TaskList=this.createTasksP2,p2Tasks=p2TaskList.list,destroyTasks=this.destroyTasks,frameStart=(new Date).getTime(),duration=(new Date).getTime()-frameStart,noMaxMillis=millis<=0,gridBodyCon=this.ctrlsService.getGridBodyCtrl();noMaxMillis||duration<millis;){if(!gridBodyCon.getScrollFeature().scrollGridIfNeeded()){var task=void 0;if(p1Tasks.length)this.sortTaskList(p1TaskList),task=p1Tasks.pop().task;else if(p2Tasks.length)this.sortTaskList(p2TaskList),task=p2Tasks.pop().task;else{if(!destroyTasks.length){this.cancelledTasks.clear();break}task=destroyTasks.pop()}this.cancelledTasks.has(task)||task()}duration=(new Date).getTime()-frameStart}p1Tasks.length||p2Tasks.length||destroyTasks.length?this.requestFrame():this.stopTicking()},AnimationFrameService.prototype.stopTicking=function(){this.ticking=!1},AnimationFrameService.prototype.flushAllFrames=function(){this.useAnimationFrame&&this.executeFrame(-1)},AnimationFrameService.prototype.schedule=function(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))},AnimationFrameService.prototype.requestFrame=function(){var callback=this.executeFrame.bind(this,60);this.requestAnimationFrame(callback)},AnimationFrameService.prototype.requestAnimationFrame=function(callback){var win=this.gridOptionsService.getWindow();win.requestAnimationFrame?win.requestAnimationFrame(callback):win.webkitRequestAnimationFrame?win.webkitRequestAnimationFrame(callback):win.setTimeout(callback,0)},AnimationFrameService.prototype.isQueueEmpty=function(){return!this.ticking},AnimationFrameService.prototype.debounce=function(func){var _this=this,pending=!1;return function(){_this.isOn()?pending||(pending=!0,_this.addDestroyTask((function(){pending=!1,func()}))):_this.getFrameworkOverrides().setTimeout(func,0)}},__decorate$1a([Autowired("ctrlsService")],AnimationFrameService.prototype,"ctrlsService",void 0),__decorate$1a([Autowired("paginationProxy")],AnimationFrameService.prototype,"paginationProxy",void 0),__decorate$1a([PostConstruct],AnimationFrameService.prototype,"init",null),AnimationFrameService=__decorate$1a([Bean("animationFrameService")],AnimationFrameService)}(BeanStub),__extends$1e=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$19=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AutoWidthCalculator=function(_super){function AutoWidthCalculator(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1e(AutoWidthCalculator,_super),AutoWidthCalculator.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady((function(p){_this.centerRowContainerCtrl=p.centerRowContainerCtrl}))},AutoWidthCalculator.prototype.getPreferredWidthForColumn=function(column,skipHeader){var eHeaderCell=this.getHeaderCellForColumn(column);if(!eHeaderCell)return-1;var elements=this.rowRenderer.getAllCellsForColumn(column);return skipHeader||elements.push(eHeaderCell),this.addElementsToContainerAndGetWidth(elements)},AutoWidthCalculator.prototype.getPreferredWidthForColumnGroup=function(columnGroup){var eHeaderCell=this.getHeaderCellForColumn(columnGroup);return eHeaderCell?this.addElementsToContainerAndGetWidth([eHeaderCell]):-1},AutoWidthCalculator.prototype.addElementsToContainerAndGetWidth=function(elements){var _this=this,eDummyContainer=document.createElement("form");eDummyContainer.style.position="fixed";var eBodyContainer=this.centerRowContainerCtrl.getContainerElement();elements.forEach((function(el){return _this.cloneItemIntoDummy(el,eDummyContainer)})),eBodyContainer.appendChild(eDummyContainer);var dummyContainerWidth=eDummyContainer.offsetWidth;return eBodyContainer.removeChild(eDummyContainer),dummyContainerWidth+this.getAutoSizePadding()},AutoWidthCalculator.prototype.getAutoSizePadding=function(){var value=this.gridOptionsService.getNum("autoSizePadding");return null!=value&&value>=0?value:20},AutoWidthCalculator.prototype.getHeaderCellForColumn=function(column){var element=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach((function(container){var res=container.getHtmlElementForColumnHeader(column);null!=res&&(element=res)})),element},AutoWidthCalculator.prototype.cloneItemIntoDummy=function(eCell,eDummyContainer){var eCellClone=eCell.cloneNode(!0);eCellClone.style.width="",eCellClone.style.position="static",eCellClone.style.left="";var eCloneParent=document.createElement("div"),eCloneParentClassList=eCloneParent.classList;["ag-header-cell","ag-header-group-cell"].some((function(cls){return eCellClone.classList.contains(cls)}))?(eCloneParentClassList.add("ag-header","ag-header-row"),eCloneParent.style.position="static"):eCloneParentClassList.add("ag-row");for(var pointer=eCell.parentElement;pointer;){if(["ag-header-row","ag-row"].some((function(cls){return pointer.classList.contains(cls)}))){for(var i=0;i<pointer.classList.length;i++){var item=pointer.classList[i];"ag-row-position-absolute"!=item&&eCloneParentClassList.add(item)}break}pointer=pointer.parentElement}eCloneParent.appendChild(eCellClone),eDummyContainer.appendChild(eCloneParent)},__decorate$19([Autowired("rowRenderer")],AutoWidthCalculator.prototype,"rowRenderer",void 0),__decorate$19([Autowired("ctrlsService")],AutoWidthCalculator.prototype,"ctrlsService",void 0),__decorate$19([Autowired("rowCssClassCalculator")],AutoWidthCalculator.prototype,"rowCssClassCalculator",void 0),__decorate$19([PostConstruct],AutoWidthCalculator.prototype,"postConstruct",null),AutoWidthCalculator=__decorate$19([Bean("autoWidthCalculator")],AutoWidthCalculator)}(BeanStub),__extends$1d=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$18=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},StickyRowFeature=function(_super){function StickyRowFeature(createRowCon,destroyRowCtrls){var _this=_super.call(this)||this;return _this.createRowCon=createRowCon,_this.destroyRowCtrls=destroyRowCtrls,_this.stickyRowCtrls=[],_this.containerHeight=0,_this}return __extends$1d(StickyRowFeature,_super),StickyRowFeature.prototype.postConstruct=function(){var _this=this;this.isClientSide="clientSide"===this.rowModel.getType(),this.ctrlsService.whenReady((function(params){_this.gridBodyCtrl=params.gridBodyCtrl}))},StickyRowFeature.prototype.getStickyRowCtrls=function(){return this.stickyRowCtrls},StickyRowFeature.prototype.checkStickyRows=function(){var _this=this,height=0;if(!this.gridOptionsService.isGroupRowsSticky())return this.refreshNodesAndContainerHeight([],height);for(var stickyRows=[],firstPixel=this.rowRenderer.getFirstVisibleVerticalPixel(),addStickyRow=function(stickyRow){var _a,_b,_c,lastChildBottom;if(stickyRows.push(stickyRow),_this.isClientSide){for(var lastAncestor=stickyRow;lastAncestor.expanded;)if(lastAncestor.master)lastAncestor=lastAncestor.detailNode;else if(lastAncestor.childrenAfterSort){if(0===lastAncestor.childrenAfterSort.length)break;lastAncestor=last(lastAncestor.childrenAfterSort)}lastChildBottom=lastAncestor.rowTop+lastAncestor.rowHeight}else if(stickyRow.master)lastChildBottom=stickyRow.detailNode.rowTop+stickyRow.detailNode.rowHeight;else{var storeBounds=null===(_a=stickyRow.childStore)||void 0===_a?void 0:_a.getStoreBounds();lastChildBottom=(null!==(_b=null==storeBounds?void 0:storeBounds.heightPx)&&void 0!==_b?_b:0)+(null!==(_c=null==storeBounds?void 0:storeBounds.topPx)&&void 0!==_c?_c:0)}var stickRowBottom=firstPixel+height+stickyRow.rowHeight;stickyRow.stickyRowTop=lastChildBottom<stickRowBottom?height+(lastChildBottom-stickRowBottom):height,height=0,stickyRows.forEach((function(rowNode){var thisRowLastPx=rowNode.stickyRowTop+rowNode.rowHeight;height<thisRowLastPx&&(height=thisRowLastPx)}))};;){var firstPixelAfterStickyRows=firstPixel+height,firstIndex=this.rowModel.getRowIndexAtPixel(firstPixelAfterStickyRows),firstRow=this.rowModel.getRow(firstIndex);if(null==firstRow)break;if(firstRow.level<0)break;for(var parents=[],p=firstRow.parent;p.level>=0;)parents.push(p),p=p.parent;var firstMissingParent=parents.reverse().find((function(parent){return stickyRows.indexOf(parent)<0&&parent.displayed}));if(firstMissingParent)addStickyRow(firstMissingParent);else{if(!(firstRow.isExpandable()&&firstRow.expanded&&firstRow.rowTop<firstPixelAfterStickyRows))break;addStickyRow(firstRow)}}return this.refreshNodesAndContainerHeight(stickyRows,height)},StickyRowFeature.prototype.refreshStickyNode=function(stickRowNode){for(var allStickyNodes=[],i=0;i<this.stickyRowCtrls.length;i++){var currentNode=this.stickyRowCtrls[i].getRowNode();currentNode!==stickRowNode&&allStickyNodes.push(currentNode)}this.refreshNodesAndContainerHeight(allStickyNodes,this.containerHeight)&&this.checkStickyRows()},StickyRowFeature.prototype.refreshNodesAndContainerHeight=function(allStickyNodes,height){var e_1,_a,_b,_this=this,stickyRowsChanged=!1,removedCtrls=this.stickyRowCtrls.filter((function(ctrl){return-1===allStickyNodes.indexOf(ctrl.getRowNode())})),addedNodes=allStickyNodes.filter((function(rowNode){return-1===_this.stickyRowCtrls.findIndex((function(ctrl){return ctrl.getRowNode()===rowNode}))}));(removedCtrls.length||addedNodes.length)&&(stickyRowsChanged=!0);var ctrlsToDestroy={};removedCtrls.forEach((function(removedCtrl){ctrlsToDestroy[removedCtrl.getRowNode().id]=removedCtrl,_this.stickyRowCtrls=_this.stickyRowCtrls.filter((function(ctrl){return ctrl!==removedCtrl}))}));try{for(var _c=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.values(ctrlsToDestroy)),_d=_c.next();!_d.done;_d=_c.next()){_d.value.getRowNode().sticky=!1}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_d&&!_d.done&&(_a=_c.return)&&_a.call(_c)}finally{if(e_1)throw e_1.error}}this.destroyRowCtrls(ctrlsToDestroy,!1);var newCtrls=addedNodes.map((function(rowNode){return rowNode.sticky=!0,_this.createRowCon(rowNode,!1,!1)}));return(_b=this.stickyRowCtrls).push.apply(_b,function(to,from){for(var i=0,il=from.length,j=to.length;i<il;i++,j++)to[j]=from[i];return to}([],function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}(newCtrls))),this.stickyRowCtrls.forEach((function(ctrl){return ctrl.setRowTop(ctrl.getRowNode().stickyRowTop)})),this.stickyRowCtrls.sort((function(a,b){return b.getRowNode().rowIndex-a.getRowNode().rowIndex})),this.containerHeight!==height&&(this.containerHeight=height,this.gridBodyCtrl.setStickyTopHeight(height),stickyRowsChanged=!0),stickyRowsChanged},__decorate$18([Autowired("rowModel")],StickyRowFeature.prototype,"rowModel",void 0),__decorate$18([Autowired("rowRenderer")],StickyRowFeature.prototype,"rowRenderer",void 0),__decorate$18([Autowired("ctrlsService")],StickyRowFeature.prototype,"ctrlsService",void 0),__decorate$18([PostConstruct],StickyRowFeature.prototype,"postConstruct",null),StickyRowFeature}(BeanStub),__extends$1c=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$17=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$d=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spreadArray$b=function(to,from){for(var i=0,il=from.length,j=to.length;i<il;i++,j++)to[j]=from[i];return to},RowRenderer=function(_super){function RowRenderer(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.destroyFuncsForColumnListeners=[],_this.rowCtrlsByRowIndex={},_this.zombieRowCtrls={},_this.allRowCtrls=[],_this.topRowCtrls=[],_this.bottomRowCtrls=[],_this.refreshInProgress=!1,_this.dataFirstRenderedFired=!1,_this}return __extends$1c(RowRenderer,_super),RowRenderer.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady((function(){_this.gridBodyCtrl=_this.ctrlsService.getGridBodyCtrl(),_this.initialise()}))},RowRenderer.prototype.initialise=function(){if(this.addManagedListener(this.eventService,Events.EVENT_PAGINATION_CHANGED,this.onPageLoaded.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_BODY_SCROLL,this.onBodyScroll.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_BODY_HEIGHT_CHANGED,this.redraw.bind(this)),this.addManagedPropertyListener("domLayout",this.onDomLayoutChanged.bind(this)),this.addManagedPropertyListener("rowClass",this.redrawRows.bind(this)),this.gridOptionsService.isGroupRowsSticky()){var rowModelType=this.rowModel.getType();"clientSide"!==rowModelType&&"serverSide"!==rowModelType||(this.stickyRowFeature=this.createManagedBean(new StickyRowFeature(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this))))}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=this.gridOptionsService.isDomLayout("print"),this.embedFullWidthRows=this.printLayout||this.gridOptionsService.is("embedFullWidthRows"),this.redrawAfterModelUpdate()},RowRenderer.prototype.initialiseCache=function(){if(this.gridOptionsService.is("keepDetailRows")){var countProp=this.getKeepDetailRowsCount(),count=null!=countProp?countProp:3;this.cachedRowCtrls=new RowCtrlCache(count)}},RowRenderer.prototype.getKeepDetailRowsCount=function(){var keepDetailRowsCount=this.gridOptionsService.getNum("keepDetailRowsCount");return exists(keepDetailRowsCount)&&keepDetailRowsCount>0?keepDetailRowsCount:10},RowRenderer.prototype.getStickyTopRowCtrls=function(){return this.stickyRowFeature?this.stickyRowFeature.getStickyRowCtrls():[]},RowRenderer.prototype.updateAllRowCtrls=function(){var liveList=getAllValuesInObject(this.rowCtrlsByRowIndex),isEnsureDomOrder=this.gridOptionsService.is("ensureDomOrder"),isPrintLayout=this.gridOptionsService.isDomLayout("print");(isEnsureDomOrder||isPrintLayout)&&liveList.sort((function(a,b){return a.getRowNode().rowIndex-b.getRowNode.rowIndex}));var zombieList=getAllValuesInObject(this.zombieRowCtrls),cachedList=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];zombieList.length>0||cachedList.length>0?this.allRowCtrls=__spreadArray$b(__spreadArray$b(__spreadArray$b([],__read$d(liveList)),__read$d(zombieList)),__read$d(cachedList)):this.allRowCtrls=liveList},RowRenderer.prototype.onCellFocusChanged=function(event){this.getAllCellCtrls().forEach((function(cellCtrl){return cellCtrl.onCellFocused(event)})),this.getFullWidthRowCtrls().forEach((function(rowCtrl){return rowCtrl.onFullWidthRowFocused(event)}))},RowRenderer.prototype.registerCellEventListeners=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_CELL_FOCUSED,(function(event){_this.onCellFocusChanged(event)})),this.addManagedListener(this.eventService,Events.EVENT_CELL_FOCUS_CLEARED,(function(){_this.onCellFocusChanged()})),this.addManagedListener(this.eventService,Events.EVENT_FLASH_CELLS,(function(event){_this.getAllCellCtrls().forEach((function(cellCtrl){return cellCtrl.onFlashCells(event)}))})),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_HOVER_CHANGED,(function(){_this.getAllCellCtrls().forEach((function(cellCtrl){return cellCtrl.onColumnHover()}))})),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,(function(){_this.getAllCellCtrls().forEach((function(cellCtrl){return cellCtrl.onDisplayedColumnsChanged()}))})),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,(function(){_this.printLayout&&_this.getAllCellCtrls().forEach((function(cellCtrl){return cellCtrl.onLeftChanged()}))})),this.gridOptionsService.is("enableRangeSelection")&&(this.addManagedListener(this.eventService,Events.EVENT_RANGE_SELECTION_CHANGED,(function(){_this.getAllCellCtrls().forEach((function(cellCtrl){return cellCtrl.onRangeSelectionChanged()}))})),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_MOVED,(function(){_this.getAllCellCtrls().forEach((function(cellCtrl){return cellCtrl.updateRangeBordersIfRangeCount()}))})),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PINNED,(function(){_this.getAllCellCtrls().forEach((function(cellCtrl){return cellCtrl.updateRangeBordersIfRangeCount()}))})),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VISIBLE,(function(){_this.getAllCellCtrls().forEach((function(cellCtrl){return cellCtrl.updateRangeBordersIfRangeCount()}))}))),this.refreshListenersToColumnsForCellComps(),this.addManagedListener(this.eventService,Events.EVENT_GRID_COLUMNS_CHANGED,this.refreshListenersToColumnsForCellComps.bind(this)),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))},RowRenderer.prototype.removeGridColumnListeners=function(){this.destroyFuncsForColumnListeners.forEach((function(func){return func()})),this.destroyFuncsForColumnListeners.length=0},RowRenderer.prototype.refreshListenersToColumnsForCellComps=function(){var _this=this;this.removeGridColumnListeners();var cols=this.columnModel.getAllGridColumns();cols&&cols.forEach((function(col){var forEachCellWithThisCol=function(callback){_this.getAllCellCtrls().forEach((function(cellCtrl){cellCtrl.getColumn()===col&&callback(cellCtrl)}))},leftChangedListener=function(){forEachCellWithThisCol((function(cellCtrl){return cellCtrl.onLeftChanged()}))},widthChangedListener=function(){forEachCellWithThisCol((function(cellCtrl){return cellCtrl.onWidthChanged()}))},firstRightPinnedChangedListener=function(){forEachCellWithThisCol((function(cellCtrl){return cellCtrl.onFirstRightPinnedChanged()}))},lastLeftPinnedChangedListener=function(){forEachCellWithThisCol((function(cellCtrl){return cellCtrl.onLastLeftPinnedChanged()}))},colDefChangedListener=function(){forEachCellWithThisCol((function(cellCtrl){return cellCtrl.onColDefChanged()}))};col.addEventListener("leftChanged",leftChangedListener),col.addEventListener("widthChanged",widthChangedListener),col.addEventListener("firstRightPinnedChanged",firstRightPinnedChangedListener),col.addEventListener("lastLeftPinnedChanged",lastLeftPinnedChangedListener),col.addEventListener("colDefChanged",colDefChangedListener),_this.destroyFuncsForColumnListeners.push((function(){col.removeEventListener("leftChanged",leftChangedListener),col.removeEventListener("widthChanged",widthChangedListener),col.removeEventListener("firstRightPinnedChanged",firstRightPinnedChangedListener),col.removeEventListener("lastLeftPinnedChanged",lastLeftPinnedChangedListener),col.removeEventListener("colDefChanged",colDefChangedListener)}))}))},RowRenderer.prototype.onDomLayoutChanged=function(){var printLayout=this.gridOptionsService.isDomLayout("print"),embedFullWidthRows=printLayout||this.gridOptionsService.is("embedFullWidthRows"),destroyRows=embedFullWidthRows!==this.embedFullWidthRows||this.printLayout!==printLayout;this.printLayout=printLayout,this.embedFullWidthRows=embedFullWidthRows,destroyRows&&this.redrawAfterModelUpdate({domLayoutChanged:!0})},RowRenderer.prototype.datasourceChanged=function(){this.firstRenderedRow=0,this.lastRenderedRow=-1;var rowIndexesToRemove=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(rowIndexesToRemove)},RowRenderer.prototype.onPageLoaded=function(event){var params={recycleRows:event.keepRenderedRows,animate:event.animate,newData:event.newData,newPage:event.newPage,onlyBody:!0};this.redrawAfterModelUpdate(params)},RowRenderer.prototype.getAllCellsForColumn=function(column){var res=[];return this.getAllRowCtrls().forEach((function(rowCtrl){var eCell=rowCtrl.getCellElement(column);eCell&&res.push(eCell)})),res},RowRenderer.prototype.refreshFloatingRowComps=function(){this.refreshFloatingRows(this.topRowCtrls,this.pinnedRowModel.getPinnedTopRowData()),this.refreshFloatingRows(this.bottomRowCtrls,this.pinnedRowModel.getPinnedBottomRowData())},RowRenderer.prototype.getTopRowCtrls=function(){return this.topRowCtrls},RowRenderer.prototype.getCentreRowCtrls=function(){return this.allRowCtrls},RowRenderer.prototype.getBottomRowCtrls=function(){return this.bottomRowCtrls},RowRenderer.prototype.refreshFloatingRows=function(rowComps,rowNodes){var _this=this;rowComps.forEach((function(row){row.destroyFirstPass(),row.destroySecondPass()})),rowComps.length=0,rowNodes&&rowNodes.forEach((function(rowNode){var rowCtrl=new RowCtrl(rowNode,_this.beans,!1,!1,_this.printLayout);rowComps.push(rowCtrl)}))},RowRenderer.prototype.onPinnedRowDataChanged=function(){this.redrawAfterModelUpdate({recycleRows:!0})},RowRenderer.prototype.redrawRow=function(rowNode,suppressEvent){var _this=this;if(void 0===suppressEvent&&(suppressEvent=!1),rowNode.sticky)this.stickyRowFeature.refreshStickyNode(rowNode);else{var destroyAndRecreateCtrl=function(dataStruct){var ctrl=dataStruct[rowNode.rowIndex];ctrl&&ctrl.getRowNode()===rowNode&&(ctrl.destroyFirstPass(),ctrl.destroySecondPass(),dataStruct[rowNode.rowIndex]=_this.createRowCon(rowNode,!1,!1))};switch(rowNode.rowPinned){case"top":destroyAndRecreateCtrl(this.topRowCtrls);case"bottom":destroyAndRecreateCtrl(this.bottomRowCtrls);default:destroyAndRecreateCtrl(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}suppressEvent||this.dispatchDisplayedRowsChanged(!1)},RowRenderer.prototype.redrawRows=function(rowNodes){var _this=this;if(null!=rowNodes)return null==rowNodes||rowNodes.forEach((function(node){return _this.redrawRow(node,!0)})),void this.dispatchDisplayedRowsChanged(!1);this.redrawAfterModelUpdate()},RowRenderer.prototype.getCellToRestoreFocusToAfterRefresh=function(params){var focusedCell=(null==params?void 0:params.suppressKeepFocus)?null:this.focusService.getFocusCellToUseAfterRefresh();if(null==focusedCell)return null;var activeElement=this.gridOptionsService.getDocument().activeElement,cellDomData=this.gridOptionsService.getDomData(activeElement,CellCtrl.DOM_DATA_KEY_CELL_CTRL),rowDomData=this.gridOptionsService.getDomData(activeElement,RowCtrl.DOM_DATA_KEY_ROW_CTRL);return cellDomData||rowDomData?focusedCell:null},RowRenderer.prototype.redrawAfterModelUpdate=function(params){void 0===params&&(params={}),this.getLockOnRefresh();var focusedCell=this.getCellToRestoreFocusToAfterRefresh(params);this.updateContainerHeights(),this.scrollToTopIfNewData(params);var recycleRows=!params.domLayoutChanged&&!!params.recycleRows,animate=params.animate&&this.gridOptionsService.isAnimateRows(),rowsToRecycle=recycleRows?this.getRowsToRecycle():null;recycleRows||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature&&this.stickyRowFeature.checkStickyRows(),this.recycleRows(rowsToRecycle,animate),this.gridBodyCtrl.updateRowCount(),params.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),null!=focusedCell&&this.restoreFocusedCell(focusedCell),this.releaseLockOnRefresh()},RowRenderer.prototype.scrollToTopIfNewData=function(params){var scrollToTop=params.newData||params.newPage,suppressScrollToTop=this.gridOptionsService.is("suppressScrollOnNewData");scrollToTop&&!suppressScrollToTop&&this.gridBodyCtrl.getScrollFeature().scrollToTop()},RowRenderer.prototype.updateContainerHeights=function(){if(this.printLayout)this.rowContainerHeightService.setModelHeight(null);else{var containerHeight=this.paginationProxy.getCurrentPageHeight();0===containerHeight&&(containerHeight=1),this.rowContainerHeightService.setModelHeight(containerHeight)}},RowRenderer.prototype.getLockOnRefresh=function(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0},RowRenderer.prototype.releaseLockOnRefresh=function(){this.refreshInProgress=!1},RowRenderer.prototype.isRefreshInProgress=function(){return this.refreshInProgress},RowRenderer.prototype.restoreFocusedCell=function(cellPosition){cellPosition&&(this.focusService.setRestoreFocusedCell(cellPosition),this.onCellFocusChanged({rowIndex:cellPosition.rowIndex,column:cellPosition.column,rowPinned:cellPosition.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,api:this.beans.gridApi,columnApi:this.beans.columnApi,context:this.beans.gridOptionsService.context,type:"mock"}))},RowRenderer.prototype.stopEditing=function(cancel){void 0===cancel&&(cancel=!1),this.getAllRowCtrls().forEach((function(rowCtrl){rowCtrl.stopEditing(cancel)}))},RowRenderer.prototype.getAllCellCtrls=function(){for(var res=[],rowCtrls=this.getAllRowCtrls(),rowCtrlsLength=rowCtrls.length,i=0;i<rowCtrlsLength;i++)for(var cellCtrls=rowCtrls[i].getAllCellCtrls(),cellCtrlsLength=cellCtrls.length,j=0;j<cellCtrlsLength;j++)res.push(cellCtrls[j]);return res},RowRenderer.prototype.getAllRowCtrls=function(){var e_1,_a,stickyRowCtrls=this.stickyRowFeature&&this.stickyRowFeature.getStickyRowCtrls()||[],res=__spreadArray$b(__spreadArray$b(__spreadArray$b([],__read$d(this.topRowCtrls)),__read$d(this.bottomRowCtrls)),__read$d(stickyRowCtrls));try{for(var _b=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.keys(this.rowCtrlsByRowIndex)),_c=_b.next();!_c.done;_c=_b.next()){var key=_c.value;res.push(this.rowCtrlsByRowIndex[key])}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}return res},RowRenderer.prototype.addRenderedRowListener=function(eventName,rowIndex,callback){var rowComp=this.rowCtrlsByRowIndex[rowIndex];rowComp&&rowComp.addEventListener(eventName,callback)},RowRenderer.prototype.flashCells=function(params){void 0===params&&(params={});var flashDelay=params.flashDelay,fadeDelay=params.fadeDelay;this.getCellCtrls(params.rowNodes,params.columns).forEach((function(cellCtrl){return cellCtrl.flashCell({flashDelay,fadeDelay})}))},RowRenderer.prototype.refreshCells=function(params){var _this=this;void 0===params&&(params={});var refreshCellParams={forceRefresh:params.force,newData:!1,suppressFlash:params.suppressFlash};this.getCellCtrls(params.rowNodes,params.columns).forEach((function(cellCtrl){if(cellCtrl.refreshShouldDestroy()){var rowCtrl=cellCtrl.getRowCtrl();rowCtrl&&rowCtrl.refreshCell(cellCtrl)}else cellCtrl.refreshCell(refreshCellParams)})),params.rowNodes&&(this.getRowCtrls(params.rowNodes).forEach((function(rowCtrl){rowCtrl.isFullWidth()&&(rowCtrl.refreshFullWidth()||_this.redrawRow(rowCtrl.getRowNode(),!0))})),this.dispatchDisplayedRowsChanged(!1))},RowRenderer.prototype.getCellRendererInstances=function(params){var _a,_this=this,cellRenderers=this.getCellCtrls(params.rowNodes,params.columns).map((function(cellCtrl){return cellCtrl.getCellRenderer()})).filter((function(renderer){return null!=renderer}));if(null===(_a=params.columns)||void 0===_a?void 0:_a.length)return cellRenderers;var fullWidthRenderers=[],rowIdMap=this.mapRowNodes(params.rowNodes);return this.getAllRowCtrls().forEach((function(rowCtrl){if((!rowIdMap||_this.isRowInMap(rowCtrl.getRowNode(),rowIdMap))&&rowCtrl.isFullWidth()){var fullWidthRenderer=rowCtrl.getFullWidthCellRenderer();fullWidthRenderer&&fullWidthRenderers.push(fullWidthRenderer)}})),__spreadArray$b(__spreadArray$b([],__read$d(fullWidthRenderers)),__read$d(cellRenderers))},RowRenderer.prototype.getCellEditorInstances=function(params){var res=[];return this.getCellCtrls(params.rowNodes,params.columns).forEach((function(cellCtrl){var cellEditor=cellCtrl.getCellEditor();cellEditor&&res.push(cellEditor)})),res},RowRenderer.prototype.getEditingCells=function(){var res=[];return this.getAllCellCtrls().forEach((function(cellCtrl){if(cellCtrl.isEditing()){var cellPosition=cellCtrl.getCellPosition();res.push(cellPosition)}})),res},RowRenderer.prototype.mapRowNodes=function(rowNodes){if(rowNodes){var res={top:{},bottom:{},normal:{}};return rowNodes.forEach((function(rowNode){var id=rowNode.id;"top"===rowNode.rowPinned?res.top[id]=rowNode:"bottom"===rowNode.rowPinned?res.bottom[id]=rowNode:res.normal[id]=rowNode})),res}},RowRenderer.prototype.isRowInMap=function(rowNode,rowIdsMap){var id=rowNode.id,floating=rowNode.rowPinned;return"bottom"===floating?null!=rowIdsMap.bottom[id]:"top"===floating?null!=rowIdsMap.top[id]:null!=rowIdsMap.normal[id]},RowRenderer.prototype.getRowCtrls=function(rowNodes){var _this=this,rowIdsMap=this.mapRowNodes(rowNodes),allRowCtrls=this.getAllRowCtrls();return rowNodes&&rowIdsMap?allRowCtrls.filter((function(rowCtrl){var rowNode=rowCtrl.getRowNode();return _this.isRowInMap(rowNode,rowIdsMap)})):allRowCtrls},RowRenderer.prototype.getCellCtrls=function(rowNodes,columns){var colIdsMap,_this=this;exists(columns)&&(colIdsMap={},columns.forEach((function(colKey){var column=_this.columnModel.getGridColumn(colKey);exists(column)&&(colIdsMap[column.getId()]=!0)})));var res=[];return this.getRowCtrls(rowNodes).forEach((function(rowCtrl){rowCtrl.getAllCellCtrls().forEach((function(cellCtrl){var colId=cellCtrl.getColumn().getId();colIdsMap&&!colIdsMap[colId]||res.push(cellCtrl)}))})),res},RowRenderer.prototype.destroy=function(){this.removeAllRowComps(),_super.prototype.destroy.call(this)},RowRenderer.prototype.removeAllRowComps=function(){var rowIndexesToRemove=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(rowIndexesToRemove)},RowRenderer.prototype.getRowsToRecycle=function(){var stubNodeIndexes=[];iterateObject(this.rowCtrlsByRowIndex,(function(index,rowComp){null==rowComp.getRowNode().id&&stubNodeIndexes.push(index)})),this.removeRowCtrls(stubNodeIndexes);var ctrlsByIdMap={};return iterateObject(this.rowCtrlsByRowIndex,(function(index,rowComp){var rowNode=rowComp.getRowNode();ctrlsByIdMap[rowNode.id]=rowComp})),this.rowCtrlsByRowIndex={},ctrlsByIdMap},RowRenderer.prototype.removeRowCtrls=function(rowsToRemove){var _this=this;rowsToRemove.forEach((function(indexToRemove){var rowCtrl=_this.rowCtrlsByRowIndex[indexToRemove];rowCtrl&&(rowCtrl.destroyFirstPass(),rowCtrl.destroySecondPass()),delete _this.rowCtrlsByRowIndex[indexToRemove]}))},RowRenderer.prototype.onBodyScroll=function(e){"vertical"===e.direction&&this.redraw({afterScroll:!0})},RowRenderer.prototype.redraw=function(params){void 0===params&&(params={});var cellFocused,afterScroll=params.afterScroll;this.stickyRowFeature&&browserSupportsPreventScroll()&&(cellFocused=this.getCellToRestoreFocusToAfterRefresh()||void 0);var oldFirstRow=this.firstRenderedRow,oldLastRow=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();var hasStickyRowChanges=!1;this.stickyRowFeature&&(hasStickyRowChanges=this.stickyRowFeature.checkStickyRows());var rangeChanged=this.firstRenderedRow!==oldFirstRow||this.lastRenderedRow!==oldLastRow;if((!afterScroll||hasStickyRowChanges||rangeChanged)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,afterScroll),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(afterScroll),null!=cellFocused)){var newFocusedCell=this.getCellToRestoreFocusToAfterRefresh();null!=cellFocused&&null==newFocusedCell&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(cellFocused))}},RowRenderer.prototype.removeRowCompsNotToDraw=function(indexesToDraw){var indexesToDrawMap={};indexesToDraw.forEach((function(index){return indexesToDrawMap[index]=!0}));var indexesNotToDraw=Object.keys(this.rowCtrlsByRowIndex).filter((function(index){return!indexesToDrawMap[index]}));this.removeRowCtrls(indexesNotToDraw)},RowRenderer.prototype.calculateIndexesToDraw=function(rowsToRecycle){var _this=this,indexesToDraw=createArrayOfNumbers(this.firstRenderedRow,this.lastRenderedRow),checkRowToDraw=function(indexStr,rowComp){var index=rowComp.getRowNode().rowIndex;null!=index&&(index<_this.firstRenderedRow||index>_this.lastRenderedRow)&&_this.doNotUnVirtualiseRow(rowComp)&&indexesToDraw.push(index)};iterateObject(this.rowCtrlsByRowIndex,checkRowToDraw),iterateObject(rowsToRecycle,checkRowToDraw),indexesToDraw.sort((function(a,b){return a-b}));for(var ret=[],i=0;i<indexesToDraw.length;i++){var currRow=indexesToDraw[i],rowNode=this.paginationProxy.getRow(currRow);rowNode&&!rowNode.sticky&&ret.push(currRow)}return ret},RowRenderer.prototype.recycleRows=function(rowsToRecycle,animate,afterScroll){var _this=this;void 0===animate&&(animate=!1),void 0===afterScroll&&(afterScroll=!1);var indexesToDraw=this.calculateIndexesToDraw(rowsToRecycle);(this.removeRowCompsNotToDraw(indexesToDraw),this.printLayout&&(animate=!1),indexesToDraw.forEach((function(rowIndex){exists(_this.createOrUpdateRowCtrl(rowIndex,rowsToRecycle,animate,afterScroll))})),rowsToRecycle)&&(afterScroll&&!this.gridOptionsService.is("suppressAnimationFrame")&&!this.printLayout?this.beans.animationFrameService.addDestroyTask((function(){_this.destroyRowCtrls(rowsToRecycle,animate),_this.updateAllRowCtrls(),_this.dispatchDisplayedRowsChanged()})):this.destroyRowCtrls(rowsToRecycle,animate));this.updateAllRowCtrls()},RowRenderer.prototype.dispatchDisplayedRowsChanged=function(afterScroll){void 0===afterScroll&&(afterScroll=!1);var event={type:Events.EVENT_DISPLAYED_ROWS_CHANGED,afterScroll};this.eventService.dispatchEvent(event)},RowRenderer.prototype.onDisplayedColumnsChanged=function(){var pinningLeft=this.columnModel.isPinningLeft(),pinningRight=this.columnModel.isPinningRight();(this.pinningLeft!==pinningLeft||pinningRight!==this.pinningRight)&&(this.pinningLeft=pinningLeft,this.pinningRight=pinningRight,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())},RowRenderer.prototype.redrawFullWidthEmbeddedRows=function(){var rowsToRemove=[];this.getFullWidthRowCtrls().forEach((function(fullWidthCtrl){var rowIndex=fullWidthCtrl.getRowNode().rowIndex;rowsToRemove.push(rowIndex.toString())})),this.refreshFloatingRowComps(),this.removeRowCtrls(rowsToRemove),this.redraw({afterScroll:!0})},RowRenderer.prototype.getFullWidthRowCtrls=function(rowNodes){var _this=this,rowNodesMap=this.mapRowNodes(rowNodes);return this.getAllRowCtrls().filter((function(rowCtrl){if(!rowCtrl.isFullWidth())return!1;var rowNode=rowCtrl.getRowNode();return!(null!=rowNodesMap&&!_this.isRowInMap(rowNode,rowNodesMap))}))},RowRenderer.prototype.createOrUpdateRowCtrl=function(rowIndex,rowsToRecycle,animate,afterScroll){var rowNode,rowCtrl=this.rowCtrlsByRowIndex[rowIndex];if(rowCtrl||exists(rowNode=this.paginationProxy.getRow(rowIndex))&&exists(rowsToRecycle)&&rowsToRecycle[rowNode.id]&&rowNode.alreadyRendered&&(rowCtrl=rowsToRecycle[rowNode.id],rowsToRecycle[rowNode.id]=null),!rowCtrl){if(rowNode||(rowNode=this.paginationProxy.getRow(rowIndex)),!exists(rowNode))return;rowCtrl=this.createRowCon(rowNode,animate,afterScroll)}return rowNode&&(rowNode.alreadyRendered=!0),this.rowCtrlsByRowIndex[rowIndex]=rowCtrl,rowCtrl},RowRenderer.prototype.destroyRowCtrls=function(rowCtrlsMap,animate){var _this=this,executeInAWhileFuncs=[];iterateObject(rowCtrlsMap,(function(nodeId,rowCtrl){rowCtrl&&(_this.cachedRowCtrls&&rowCtrl.isCacheable()?_this.cachedRowCtrls.addRow(rowCtrl):(rowCtrl.destroyFirstPass(),animate?(_this.zombieRowCtrls[rowCtrl.getInstanceId()]=rowCtrl,executeInAWhileFuncs.push((function(){rowCtrl.destroySecondPass(),delete _this.zombieRowCtrls[rowCtrl.getInstanceId()]}))):rowCtrl.destroySecondPass()))})),animate&&(executeInAWhileFuncs.push((function(){_this.updateAllRowCtrls(),_this.dispatchDisplayedRowsChanged()})),executeInAWhile(executeInAWhileFuncs))},RowRenderer.prototype.getRowBuffer=function(){var rowBuffer=this.gridOptionsService.getNum("rowBuffer");return"number"==typeof rowBuffer?rowBuffer<0&&(doOnce((function(){return console.warn("AG Grid: rowBuffer should not be negative")}),"warn rowBuffer negative"),rowBuffer=0,this.gridOptionsService.set("rowBuffer",0)):rowBuffer=10,rowBuffer},RowRenderer.prototype.getRowBufferInPixels=function(){return this.getRowBuffer()*this.gridOptionsService.getRowHeightAsNumber()},RowRenderer.prototype.workOutFirstAndLastRowsToRender=function(){var newFirst,newLast;if(this.rowContainerHeightService.updateOffset(),this.paginationProxy.isRowsToRender())if(this.printLayout)this.environment.refreshRowHeightVariable(),newFirst=this.paginationProxy.getPageFirstRow(),newLast=this.paginationProxy.getPageLastRow();else{var bufferPixels=this.getRowBufferInPixels(),gridBodyCtrl=this.ctrlsService.getGridBodyCtrl(),suppressRowVirtualisation=this.gridOptionsService.is("suppressRowVirtualisation"),rowHeightsChanged=!1,firstPixel=void 0,lastPixel=void 0;do{var paginationOffset=this.paginationProxy.getPixelOffset(),_a=this.paginationProxy.getCurrentPagePixelRange(),pageFirstPixel=_a.pageFirstPixel,pageLastPixel=_a.pageLastPixel,divStretchOffset=this.rowContainerHeightService.getDivStretchOffset(),bodyVRange=gridBodyCtrl.getScrollFeature().getVScrollPosition(),bodyTopPixel=bodyVRange.top,bodyBottomPixel=bodyVRange.bottom;suppressRowVirtualisation?(firstPixel=pageFirstPixel+divStretchOffset,lastPixel=pageLastPixel+divStretchOffset):(firstPixel=Math.max(bodyTopPixel+paginationOffset-bufferPixels,pageFirstPixel)+divStretchOffset,lastPixel=Math.min(bodyBottomPixel+paginationOffset+bufferPixels,pageLastPixel)+divStretchOffset),this.firstVisibleVPixel=Math.max(bodyTopPixel+paginationOffset,pageFirstPixel)+divStretchOffset,rowHeightsChanged=this.ensureAllRowsInRangeHaveHeightsCalculated(firstPixel,lastPixel)}while(rowHeightsChanged);var firstRowIndex=this.paginationProxy.getRowIndexAtPixel(firstPixel),lastRowIndex=this.paginationProxy.getRowIndexAtPixel(lastPixel),pageFirstRow=this.paginationProxy.getPageFirstRow(),pageLastRow=this.paginationProxy.getPageLastRow();firstRowIndex<pageFirstRow&&(firstRowIndex=pageFirstRow),lastRowIndex>pageLastRow&&(lastRowIndex=pageLastRow),newFirst=firstRowIndex,newLast=lastRowIndex}else newFirst=0,newLast=-1;var rowLayoutNormal=this.gridOptionsService.isDomLayout("normal"),suppressRowCountRestriction=this.gridOptionsService.is("suppressMaxRenderedRowRestriction"),rowBufferMaxSize=Math.max(this.getRowBuffer(),500);rowLayoutNormal&&!suppressRowCountRestriction&&newLast-newFirst>rowBufferMaxSize&&(newLast=newFirst+rowBufferMaxSize);var firstDiffers=newFirst!==this.firstRenderedRow,lastDiffers=newLast!==this.lastRenderedRow;if(firstDiffers||lastDiffers){this.firstRenderedRow=newFirst,this.lastRenderedRow=newLast;var event_1={type:Events.EVENT_VIEWPORT_CHANGED,firstRow:newFirst,lastRow:newLast};this.eventService.dispatchEvent(event_1)}},RowRenderer.prototype.dispatchFirstDataRenderedEvent=function(){var _this=this;if(!this.dataFirstRenderedFired){this.dataFirstRenderedFired=!0;var event={type:Events.EVENT_FIRST_DATA_RENDERED,firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow};window.requestAnimationFrame((function(){_this.beans.eventService.dispatchEvent(event)}))}},RowRenderer.prototype.ensureAllRowsInRangeHaveHeightsCalculated=function(topPixel,bottomPixel){var res=this.paginationProxy.ensureRowHeightsValid(topPixel,bottomPixel,-1,-1);return res&&this.updateContainerHeights(),res},RowRenderer.prototype.getFirstVisibleVerticalPixel=function(){return this.firstVisibleVPixel},RowRenderer.prototype.getFirstVirtualRenderedRow=function(){return this.firstRenderedRow},RowRenderer.prototype.getLastVirtualRenderedRow=function(){return this.lastRenderedRow},RowRenderer.prototype.doNotUnVirtualiseRow=function(rowComp){var rowNode=rowComp.getRowNode(),rowHasFocus=this.focusService.isRowNodeFocused(rowNode),rowIsEditing=rowComp.isEditing(),rowIsDetail=rowNode.detail;return!!(rowHasFocus||rowIsEditing||rowIsDetail)&&!!this.paginationProxy.isRowPresent(rowNode)},RowRenderer.prototype.createRowCon=function(rowNode,animate,afterScroll){var rowCtrlFromCache=this.cachedRowCtrls?this.cachedRowCtrls.getRow(rowNode):null;if(rowCtrlFromCache)return rowCtrlFromCache;var suppressAnimationFrame=this.gridOptionsService.is("suppressAnimationFrame"),useAnimationFrameForCreate=afterScroll&&!suppressAnimationFrame&&!this.printLayout;return new RowCtrl(rowNode,this.beans,animate,useAnimationFrameForCreate,this.printLayout)},RowRenderer.prototype.getRenderedNodes=function(){var renderedRows=this.rowCtrlsByRowIndex;return Object.keys(renderedRows).map((function(key){return renderedRows[key].getRowNode()}))},RowRenderer.prototype.getRowByPosition=function(rowPosition){var rowCtrl,rowIndex=rowPosition.rowIndex;switch(rowPosition.rowPinned){case"top":rowCtrl=this.topRowCtrls[rowIndex];break;case"bottom":rowCtrl=this.bottomRowCtrls[rowIndex];break;default:(rowCtrl=this.rowCtrlsByRowIndex[rowIndex])||(rowCtrl=this.getStickyTopRowCtrls().find((function(ctrl){return ctrl.getRowNode().rowIndex===rowIndex}))||null)}return rowCtrl},RowRenderer.prototype.getRowNode=function(gridRow){switch(gridRow.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[gridRow.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[gridRow.rowIndex];default:return this.rowModel.getRow(gridRow.rowIndex)}},RowRenderer.prototype.isRangeInRenderedViewport=function(startIndex,endIndex){if(null==startIndex||null==endIndex)return!1;var blockAfterViewport=startIndex>this.lastRenderedRow;return!(endIndex<this.firstRenderedRow)&&!blockAfterViewport},__decorate$17([Autowired("animationFrameService")],RowRenderer.prototype,"animationFrameService",void 0),__decorate$17([Autowired("paginationProxy")],RowRenderer.prototype,"paginationProxy",void 0),__decorate$17([Autowired("columnModel")],RowRenderer.prototype,"columnModel",void 0),__decorate$17([Autowired("pinnedRowModel")],RowRenderer.prototype,"pinnedRowModel",void 0),__decorate$17([Autowired("rowModel")],RowRenderer.prototype,"rowModel",void 0),__decorate$17([Autowired("focusService")],RowRenderer.prototype,"focusService",void 0),__decorate$17([Autowired("beans")],RowRenderer.prototype,"beans",void 0),__decorate$17([Autowired("rowContainerHeightService")],RowRenderer.prototype,"rowContainerHeightService",void 0),__decorate$17([Autowired("ctrlsService")],RowRenderer.prototype,"ctrlsService",void 0),__decorate$17([PostConstruct],RowRenderer.prototype,"postConstruct",null),RowRenderer=__decorate$17([Bean("rowRenderer")],RowRenderer)}(BeanStub),RowCtrlCache=function(){function RowCtrlCache(maxCount){this.entriesMap={},this.entriesList=[],this.maxCount=maxCount}return RowCtrlCache.prototype.addRow=function(rowCtrl){if(this.entriesMap[rowCtrl.getRowNode().id]=rowCtrl,this.entriesList.push(rowCtrl),rowCtrl.setCached(!0),this.entriesList.length>this.maxCount){var rowCtrlToDestroy=this.entriesList[0];rowCtrlToDestroy.destroyFirstPass(),rowCtrlToDestroy.destroySecondPass(),this.removeFromCache(rowCtrlToDestroy)}},RowCtrlCache.prototype.getRow=function(rowNode){if(null==rowNode||null==rowNode.id)return null;var res=this.entriesMap[rowNode.id];return res?(this.removeFromCache(res),res.setCached(!1),res.getRowNode()!=rowNode?null:res):null},RowCtrlCache.prototype.removeFromCache=function(rowCtrl){var rowNodeId=rowCtrl.getRowNode().id;delete this.entriesMap[rowNodeId],removeFromArray(this.entriesList,rowCtrl)},RowCtrlCache.prototype.getEntries=function(){return this.entriesList},RowCtrlCache}(),__extends$1b=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$16=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ValueFormatterService=function(_super){function ValueFormatterService(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1b(ValueFormatterService,_super),ValueFormatterService.prototype.formatValue=function(column,node,value,suppliedFormatter,useFormatterFromColumn){void 0===useFormatterFromColumn&&(useFormatterFromColumn=!0);var formatter,result=null,colDef=column.getColDef();if(suppliedFormatter?formatter=suppliedFormatter:useFormatterFromColumn&&(formatter=colDef.valueFormatter),formatter){var params={value,node,data:node?node.data:null,colDef,column,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};result="function"==typeof formatter?formatter(params):this.expressionService.evaluate(formatter,params)}else if(colDef.refData)return colDef.refData[value]||"";return null==result&&Array.isArray(value)&&(result=value.join(", ")),result},__decorate$16([Autowired("expressionService")],ValueFormatterService.prototype,"expressionService",void 0),ValueFormatterService=__decorate$16([Bean("valueFormatterService")],ValueFormatterService)}(BeanStub),__extends$1a=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$15=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},PinnedRowModel=function(_super){function PinnedRowModel(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1a(PinnedRowModel,_super),PinnedRowModel.prototype.init=function(){this.setPinnedTopRowData(this.gridOptionsService.get("pinnedTopRowData")),this.setPinnedBottomRowData(this.gridOptionsService.get("pinnedBottomRowData"))},PinnedRowModel.prototype.isEmpty=function(floating){return missingOrEmpty("top"===floating?this.pinnedTopRows:this.pinnedBottomRows)},PinnedRowModel.prototype.isRowsToRender=function(floating){return!this.isEmpty(floating)},PinnedRowModel.prototype.getRowAtPixel=function(pixel,floating){var rows="top"===floating?this.pinnedTopRows:this.pinnedBottomRows;if(missingOrEmpty(rows))return 0;for(var i=0;i<rows.length;i++){var rowNode=rows[i];if(rowNode.rowTop+rowNode.rowHeight-1>=pixel)return i}return rows.length-1},PinnedRowModel.prototype.setPinnedTopRowData=function(rowData){this.pinnedTopRows=this.createNodesFromData(rowData,!0);var event={type:Events.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(event)},PinnedRowModel.prototype.setPinnedBottomRowData=function(rowData){this.pinnedBottomRows=this.createNodesFromData(rowData,!1);var event={type:Events.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(event)},PinnedRowModel.prototype.createNodesFromData=function(allData,isTop){var _this=this,rowNodes=[];if(allData){var nextRowTop_1=0;allData.forEach((function(dataItem,index){var rowNode=new RowNode(_this.beans);rowNode.data=dataItem;var idPrefix=isTop?RowNode.ID_PREFIX_TOP_PINNED:RowNode.ID_PREFIX_BOTTOM_PINNED;rowNode.id=idPrefix+index,rowNode.rowPinned=isTop?"top":"bottom",rowNode.setRowTop(nextRowTop_1),rowNode.setRowHeight(_this.gridOptionsService.getRowHeightForNode(rowNode).height),rowNode.setRowIndex(index),nextRowTop_1+=rowNode.rowHeight,rowNodes.push(rowNode)}))}return rowNodes},PinnedRowModel.prototype.getPinnedTopRowData=function(){return this.pinnedTopRows},PinnedRowModel.prototype.getPinnedBottomRowData=function(){return this.pinnedBottomRows},PinnedRowModel.prototype.getPinnedTopTotalHeight=function(){return this.getTotalHeight(this.pinnedTopRows)},PinnedRowModel.prototype.getPinnedTopRowCount=function(){return this.pinnedTopRows?this.pinnedTopRows.length:0},PinnedRowModel.prototype.getPinnedBottomRowCount=function(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0},PinnedRowModel.prototype.getPinnedTopRow=function(index){return this.pinnedTopRows[index]},PinnedRowModel.prototype.getPinnedBottomRow=function(index){return this.pinnedBottomRows[index]},PinnedRowModel.prototype.forEachPinnedTopRow=function(callback){missingOrEmpty(this.pinnedTopRows)||this.pinnedTopRows.forEach(callback)},PinnedRowModel.prototype.forEachPinnedBottomRow=function(callback){missingOrEmpty(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(callback)},PinnedRowModel.prototype.getPinnedBottomTotalHeight=function(){return this.getTotalHeight(this.pinnedBottomRows)},PinnedRowModel.prototype.getTotalHeight=function(rowNodes){if(!rowNodes||0===rowNodes.length)return 0;var lastNode=last(rowNodes);return lastNode.rowTop+lastNode.rowHeight},__decorate$15([Autowired("beans")],PinnedRowModel.prototype,"beans",void 0),__decorate$15([PostConstruct],PinnedRowModel.prototype,"init",null),PinnedRowModel=__decorate$15([Bean("pinnedRowModel")],PinnedRowModel)}(BeanStub);!function(ServerSideTransactionResultStatus){ServerSideTransactionResultStatus.Applied="Applied",ServerSideTransactionResultStatus.StoreNotFound="StoreNotFound",ServerSideTransactionResultStatus.StoreLoading="StoreLoading",ServerSideTransactionResultStatus.StoreWaitingToLoad="StoreWaitingToLoad",ServerSideTransactionResultStatus.StoreLoadingFailed="StoreLoadingFailed",ServerSideTransactionResultStatus.StoreWrongType="StoreWrongType",ServerSideTransactionResultStatus.Cancelled="Cancelled"}(ServerSideTransactionResultStatus||(ServerSideTransactionResultStatus={}));var DIRECTION,ChangedPath=function(){function ChangedPath(keepingColumns,rootNode){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=keepingColumns,this.pathRoot={rowNode:rootNode,children:null},this.mapToItems[rootNode.id]=this.pathRoot}return ChangedPath.prototype.setInactive=function(){this.active=!1},ChangedPath.prototype.isActive=function(){return this.active},ChangedPath.prototype.depthFirstSearchChangedPath=function(pathItem,callback){if(pathItem.children)for(var i=0;i<pathItem.children.length;i++)this.depthFirstSearchChangedPath(pathItem.children[i],callback);callback(pathItem.rowNode)},ChangedPath.prototype.depthFirstSearchEverything=function(rowNode,callback,traverseEverything){if(rowNode.childrenAfterGroup)for(var i=0;i<rowNode.childrenAfterGroup.length;i++){var childNode=rowNode.childrenAfterGroup[i];childNode.childrenAfterGroup?this.depthFirstSearchEverything(rowNode.childrenAfterGroup[i],callback,traverseEverything):traverseEverything&&callback(childNode)}callback(rowNode)},ChangedPath.prototype.forEachChangedNodeDepthFirst=function(callback,traverseLeafNodes,includeUnchangedNodes){void 0===traverseLeafNodes&&(traverseLeafNodes=!1),void 0===includeUnchangedNodes&&(includeUnchangedNodes=!1),this.active&&!includeUnchangedNodes?this.depthFirstSearchChangedPath(this.pathRoot,callback):this.depthFirstSearchEverything(this.pathRoot.rowNode,callback,traverseLeafNodes)},ChangedPath.prototype.executeFromRootNode=function(callback){callback(this.pathRoot.rowNode)},ChangedPath.prototype.createPathItems=function(rowNode){for(var pointer=rowNode,newEntryCount=0;!this.mapToItems[pointer.id];){var newEntry={rowNode:pointer,children:null};this.mapToItems[pointer.id]=newEntry,newEntryCount++,pointer=pointer.parent}return newEntryCount},ChangedPath.prototype.populateColumnsMap=function(rowNode,columns){var _this=this;if(this.keepingColumns&&columns)for(var pointer=rowNode;pointer;)this.nodeIdsToColumns[pointer.id]||(this.nodeIdsToColumns[pointer.id]={}),columns.forEach((function(col){return _this.nodeIdsToColumns[pointer.id][col.getId()]=!0})),pointer=pointer.parent},ChangedPath.prototype.linkPathItems=function(rowNode,newEntryCount){for(var pointer=rowNode,i=0;i<newEntryCount;i++){var thisItem=this.mapToItems[pointer.id],parentItem=this.mapToItems[pointer.parent.id];parentItem.children||(parentItem.children=[]),parentItem.children.push(thisItem),pointer=pointer.parent}},ChangedPath.prototype.addParentNode=function(rowNode,columns){if(rowNode&&!rowNode.isRowPinned()){var newEntryCount=this.createPathItems(rowNode);this.linkPathItems(rowNode,newEntryCount),this.populateColumnsMap(rowNode,columns)}},ChangedPath.prototype.canSkip=function(rowNode){return this.active&&!this.mapToItems[rowNode.id]},ChangedPath.prototype.getValueColumnsForNode=function(rowNode,valueColumns){if(!this.keepingColumns)return valueColumns;var colsForThisNode=this.nodeIdsToColumns[rowNode.id];return valueColumns.filter((function(col){return colsForThisNode[col.getId()]}))},ChangedPath.prototype.getNotValueColumnsForNode=function(rowNode,valueColumns){if(!this.keepingColumns)return null;var colsForThisNode=this.nodeIdsToColumns[rowNode.id];return valueColumns.filter((function(col){return!colsForThisNode[col.getId()]}))},ChangedPath}(),__extends$19=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),RowNodeBlock=function(_super){function RowNodeBlock(id){var _this=_super.call(this)||this;return _this.state=RowNodeBlock.STATE_WAITING_TO_LOAD,_this.version=0,_this.id=id,_this}return __extends$19(RowNodeBlock,_super),RowNodeBlock.prototype.getId=function(){return this.id},RowNodeBlock.prototype.load=function(){this.state=RowNodeBlock.STATE_LOADING,this.loadFromDatasource()},RowNodeBlock.prototype.getVersion=function(){return this.version},RowNodeBlock.prototype.setStateWaitingToLoad=function(){this.version++,this.state=RowNodeBlock.STATE_WAITING_TO_LOAD},RowNodeBlock.prototype.getState=function(){return this.state},RowNodeBlock.prototype.pageLoadFailed=function(version){this.isRequestMostRecentAndLive(version)&&(this.state=RowNodeBlock.STATE_FAILED,this.processServerFail()),this.dispatchLoadCompleted(!1)},RowNodeBlock.prototype.success=function(version,params){this.successCommon(version,params)},RowNodeBlock.prototype.pageLoaded=function(version,rows,lastRow){this.successCommon(version,{rowData:rows,rowCount:lastRow})},RowNodeBlock.prototype.isRequestMostRecentAndLive=function(version){var thisIsMostRecentRequest=version===this.version,weAreNotDestroyed=this.isAlive();return thisIsMostRecentRequest&&weAreNotDestroyed},RowNodeBlock.prototype.successCommon=function(version,params){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(version)&&(this.state=RowNodeBlock.STATE_LOADED,this.processServerResult(params))},RowNodeBlock.prototype.dispatchLoadCompleted=function(success){void 0===success&&(success=!0);var event={type:RowNodeBlock.EVENT_LOAD_COMPLETE,success,block:this};this.dispatchEvent(event)},RowNodeBlock.EVENT_LOAD_COMPLETE="loadComplete",RowNodeBlock.STATE_WAITING_TO_LOAD="needsLoading",RowNodeBlock.STATE_LOADING="loading",RowNodeBlock.STATE_LOADED="loaded",RowNodeBlock.STATE_FAILED="failed",RowNodeBlock}(BeanStub),__extends$18=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$14=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},RowNodeBlockLoader=function(_super){function RowNodeBlockLoader(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.activeBlockLoadsCount=0,_this.blocks=[],_this.active=!0,_this}var RowNodeBlockLoader_1,paramIndex,decorator;return __extends$18(RowNodeBlockLoader,_super),RowNodeBlockLoader_1=RowNodeBlockLoader,RowNodeBlockLoader.prototype.postConstruct=function(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();var blockLoadDebounceMillis=this.gridOptionsService.getNum("blockLoadDebounceMillis");blockLoadDebounceMillis&&blockLoadDebounceMillis>0&&(this.checkBlockToLoadDebounce=_.debounce(this.performCheckBlocksToLoad.bind(this),blockLoadDebounceMillis))},RowNodeBlockLoader.prototype.setBeans=function(loggerFactory){this.logger=loggerFactory.create("RowNodeBlockLoader")},RowNodeBlockLoader.prototype.getMaxConcurrentDatasourceRequests=function(){var res=this.gridOptionsService.getNum("maxConcurrentDatasourceRequests");return null==res?2:res<=0?void 0:res},RowNodeBlockLoader.prototype.addBlock=function(block){this.blocks.push(block),block.addEventListener(RowNodeBlock.EVENT_LOAD_COMPLETE,this.loadComplete.bind(this)),this.checkBlockToLoad()},RowNodeBlockLoader.prototype.removeBlock=function(block){_.removeFromArray(this.blocks,block)},RowNodeBlockLoader.prototype.destroy=function(){_super.prototype.destroy.call(this),this.active=!1},RowNodeBlockLoader.prototype.loadComplete=function(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchEvent({type:RowNodeBlockLoader_1.BLOCK_LOADED_EVENT}),0==this.activeBlockLoadsCount&&this.dispatchEvent({type:RowNodeBlockLoader_1.BLOCK_LOADER_FINISHED_EVENT})},RowNodeBlockLoader.prototype.checkBlockToLoad=function(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()},RowNodeBlockLoader.prototype.performCheckBlocksToLoad=function(){if(this.active)if(this.printCacheStatus(),null!=this.maxConcurrentRequests&&this.activeBlockLoadsCount>=this.maxConcurrentRequests)this.logger.log("checkBlockToLoad: max loads exceeded");else{var loadAvailability=this.getAvailableLoadingCount(),blocksToLoad=this.blocks.filter((function(block){return block.getState()===RowNodeBlock.STATE_WAITING_TO_LOAD})).slice(0,loadAvailability);this.registerLoads(blocksToLoad.length),blocksToLoad.forEach((function(block){return block.load()})),this.printCacheStatus()}},RowNodeBlockLoader.prototype.getBlockState=function(){if(this.gridOptionsService.isRowModelType("serverSide"))return this.rowModel.getBlockStates();var result={};return this.blocks.forEach((function(block){var _a=block.getBlockStateJson(),id=_a.id,state=_a.state;result[id]=state})),result},RowNodeBlockLoader.prototype.printCacheStatus=function(){this.logger.isLogging()&&this.logger.log("printCacheStatus: activePageLoadsCount = "+this.activeBlockLoadsCount+", blocks = "+JSON.stringify(this.getBlockState()))},RowNodeBlockLoader.prototype.isLoading=function(){return this.activeBlockLoadsCount>0},RowNodeBlockLoader.prototype.registerLoads=function(count){this.activeBlockLoadsCount+=count},RowNodeBlockLoader.prototype.getAvailableLoadingCount=function(){return void 0!==this.maxConcurrentRequests?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0},RowNodeBlockLoader.BLOCK_LOADED_EVENT="blockLoaded",RowNodeBlockLoader.BLOCK_LOADER_FINISHED_EVENT="blockLoaderFinished",__decorate$14([Autowired("rowModel")],RowNodeBlockLoader.prototype,"rowModel",void 0),__decorate$14([PostConstruct],RowNodeBlockLoader.prototype,"postConstruct",null),__decorate$14([(paramIndex=0,decorator=Qualifier("loggerFactory"),function(target,key){decorator(target,key,paramIndex)})],RowNodeBlockLoader.prototype,"setBeans",null),RowNodeBlockLoader=RowNodeBlockLoader_1=__decorate$14([Bean("rowNodeBlockLoader")],RowNodeBlockLoader)}(BeanStub),__extends$17=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$13=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},PaginationProxy=function(_super){function PaginationProxy(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.currentPage=0,_this.topDisplayedRowIndex=0,_this.bottomDisplayedRowIndex=0,_this.pixelOffset=0,_this.masterRowCount=0,_this}return __extends$17(PaginationProxy,_super),PaginationProxy.prototype.postConstruct=function(){this.active=this.gridOptionsService.is("pagination"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedListener(this.eventService,Events.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedPropertyListener("pagination",this.onPaginationPageSizeChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPaginationPageSizeChanged.bind(this)),this.onModelUpdated()},PaginationProxy.prototype.ensureRowHeightsValid=function(startPixel,endPixel,startLimitIndex,endLimitIndex){var res=this.rowModel.ensureRowHeightsValid(startPixel,endPixel,this.getPageFirstRow(),this.getPageLastRow());return res&&this.calculatePages(),res},PaginationProxy.prototype.isPaginateChildRows=function(){return!(!this.gridOptionsService.is("groupRemoveSingleChildren")&&!this.gridOptionsService.is("groupRemoveLowestSingleChildren"))||this.gridOptionsService.is("paginateChildRows")},PaginationProxy.prototype.onModelUpdated=function(modelUpdatedEvent){this.calculatePages();var paginationChangedEvent={type:Events.EVENT_PAGINATION_CHANGED,animate:!!modelUpdatedEvent&&modelUpdatedEvent.animate,newData:!!modelUpdatedEvent&&modelUpdatedEvent.newData,newPage:!!modelUpdatedEvent&&modelUpdatedEvent.newPage,keepRenderedRows:!!modelUpdatedEvent&&modelUpdatedEvent.keepRenderedRows};this.eventService.dispatchEvent(paginationChangedEvent)},PaginationProxy.prototype.onPaginationPageSizeChanged=function(){this.active=this.gridOptionsService.is("pagination"),this.calculatePages();var paginationChangedEvent={type:Events.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,keepRenderedRows:!0};this.eventService.dispatchEvent(paginationChangedEvent)},PaginationProxy.prototype.goToPage=function(page){if(this.active&&this.currentPage!==page&&"number"==typeof this.currentPage){this.currentPage=page;var event={type:Events.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!0};this.onModelUpdated(event)}},PaginationProxy.prototype.getPixelOffset=function(){return this.pixelOffset},PaginationProxy.prototype.getRow=function(index){return this.rowModel.getRow(index)},PaginationProxy.prototype.getRowNode=function(id){return this.rowModel.getRowNode(id)},PaginationProxy.prototype.getRowIndexAtPixel=function(pixel){return this.rowModel.getRowIndexAtPixel(pixel)},PaginationProxy.prototype.getCurrentPageHeight=function(){return missing(this.topRowBounds)||missing(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)},PaginationProxy.prototype.getCurrentPagePixelRange=function(){return{pageFirstPixel:this.topRowBounds?this.topRowBounds.rowTop:0,pageLastPixel:this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0}},PaginationProxy.prototype.isRowPresent=function(rowNode){return!!this.rowModel.isRowPresent(rowNode)&&(rowNode.rowIndex>=this.topDisplayedRowIndex&&rowNode.rowIndex<=this.bottomDisplayedRowIndex)},PaginationProxy.prototype.isEmpty=function(){return this.rowModel.isEmpty()},PaginationProxy.prototype.isRowsToRender=function(){return this.rowModel.isRowsToRender()},PaginationProxy.prototype.forEachNode=function(callback){return this.rowModel.forEachNode(callback)},PaginationProxy.prototype.forEachNodeOnPage=function(callback){for(var firstRow=this.getPageFirstRow(),lastRow=this.getPageLastRow(),i=firstRow;i<=lastRow;i++){var node=this.getRow(i);node&&callback(node)}},PaginationProxy.prototype.getType=function(){return this.rowModel.getType()},PaginationProxy.prototype.getRowBounds=function(index){var res=this.rowModel.getRowBounds(index);return res.rowIndex=index,res},PaginationProxy.prototype.getPageFirstRow=function(){return this.topRowBounds?this.topRowBounds.rowIndex:-1},PaginationProxy.prototype.getPageLastRow=function(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1},PaginationProxy.prototype.getRowCount=function(){return this.rowModel.getRowCount()},PaginationProxy.prototype.getPageForIndex=function(index){return Math.floor(index/this.pageSize)},PaginationProxy.prototype.goToPageWithIndex=function(index){if(this.active){var pageNumber=this.getPageForIndex(index);this.goToPage(pageNumber)}},PaginationProxy.prototype.isRowInPage=function(row){return!this.active||this.getPageForIndex(row.rowIndex)===this.currentPage},PaginationProxy.prototype.isLastPageFound=function(){return this.rowModel.isLastRowIndexKnown()},PaginationProxy.prototype.getCurrentPage=function(){return this.currentPage},PaginationProxy.prototype.goToNextPage=function(){this.goToPage(this.currentPage+1)},PaginationProxy.prototype.goToPreviousPage=function(){this.goToPage(this.currentPage-1)},PaginationProxy.prototype.goToFirstPage=function(){this.goToPage(0)},PaginationProxy.prototype.goToLastPage=function(){var rowCount=this.rowModel.getRowCount(),lastPage=Math.floor(rowCount/this.pageSize);this.goToPage(lastPage)},PaginationProxy.prototype.getPageSize=function(){return this.pageSize},PaginationProxy.prototype.getTotalPages=function(){return this.totalPages},PaginationProxy.prototype.setPageSize=function(){this.pageSize=this.gridOptionsService.getNum("paginationPageSize"),(null==this.pageSize||this.pageSize<1)&&(this.pageSize=100)},PaginationProxy.prototype.calculatePages=function(){this.active?(this.setPageSize(),this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly()):this.calculatedPagesNotActive(),this.topRowBounds=this.rowModel.getRowBounds(this.topDisplayedRowIndex),this.topRowBounds&&(this.topRowBounds.rowIndex=this.topDisplayedRowIndex),this.bottomRowBounds=this.rowModel.getRowBounds(this.bottomDisplayedRowIndex),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=this.bottomDisplayedRowIndex),this.setPixelOffset(exists(this.topRowBounds)?this.topRowBounds.rowTop:0)},PaginationProxy.prototype.setPixelOffset=function(value){this.pixelOffset!==value&&(this.pixelOffset=value,this.eventService.dispatchEvent({type:Events.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED}))},PaginationProxy.prototype.setZeroRows=function(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0},PaginationProxy.prototype.adjustCurrentPageIfInvalid=function(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)},PaginationProxy.prototype.calculatePagesMasterRowsOnly=function(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0)this.setZeroRows();else{var masterLastRowIndex=this.masterRowCount-1;this.totalPages=Math.floor(masterLastRowIndex/this.pageSize)+1,this.adjustCurrentPageIfInvalid();var masterPageStartIndex=this.pageSize*this.currentPage,masterPageEndIndex=this.pageSize*(this.currentPage+1)-1;if(masterPageEndIndex>masterLastRowIndex&&(masterPageEndIndex=masterLastRowIndex),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(masterPageStartIndex),masterPageEndIndex===masterLastRowIndex)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{var firstIndexNotToShow=this.rowModel.getTopLevelRowDisplayedIndex(masterPageEndIndex+1);this.bottomDisplayedRowIndex=firstIndexNotToShow-1}}},PaginationProxy.prototype.getMasterRowCount=function(){return this.masterRowCount},PaginationProxy.prototype.calculatePagesAllRows=function(){if(this.masterRowCount=this.rowModel.getRowCount(),0!==this.masterRowCount){var maxRowIndex=this.masterRowCount-1;this.totalPages=Math.floor(maxRowIndex/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>maxRowIndex&&(this.bottomDisplayedRowIndex=maxRowIndex)}else this.setZeroRows()},PaginationProxy.prototype.calculatedPagesNotActive=function(){this.pageSize=this.rowModel.getRowCount(),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1},__decorate$13([Autowired("rowModel")],PaginationProxy.prototype,"rowModel",void 0),__decorate$13([PostConstruct],PaginationProxy.prototype,"postConstruct",null),PaginationProxy=__decorate$13([Bean("paginationProxy")],PaginationProxy)}(BeanStub),__extends$16=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$12=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},StylingService=function(_super){function StylingService(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$16(StylingService,_super),StylingService.prototype.processAllCellClasses=function(colDef,params,onApplicableClass,onNotApplicableClass){this.processClassRules(colDef.cellClassRules,params,onApplicableClass,onNotApplicableClass),this.processStaticCellClasses(colDef,params,onApplicableClass)},StylingService.prototype.processClassRules=function(classRules,params,onApplicableClass,onNotApplicableClass){if(null!=classRules){for(var classNames=Object.keys(classRules),classesToApply={},classesToRemove={},_loop_1=function(i){var resultOfRule,className=classNames[i],rule=classRules[className];"string"==typeof rule?resultOfRule=this_1.expressionService.evaluate(rule,params):"function"==typeof rule&&(resultOfRule=rule(params)),className.split(" ").forEach((function(singleClass){null!=singleClass&&""!=singleClass.trim()&&(resultOfRule?classesToApply[singleClass]=!0:classesToRemove[singleClass]=!0)}))},this_1=this,i=0;i<classNames.length;i++)_loop_1(i);onNotApplicableClass&&Object.keys(classesToRemove).forEach(onNotApplicableClass),Object.keys(classesToApply).forEach(onApplicableClass)}},StylingService.prototype.getStaticCellClasses=function(colDef,params){var classOrClasses,cellClass=colDef.cellClass;if(!cellClass)return[];"function"==typeof cellClass?classOrClasses=cellClass(params):classOrClasses=cellClass;return"string"==typeof classOrClasses&&(classOrClasses=[classOrClasses]),classOrClasses||[]},StylingService.prototype.processStaticCellClasses=function(colDef,params,onApplicableClass){this.getStaticCellClasses(colDef,params).forEach((function(cssClassItem){onApplicableClass(cssClassItem)}))},__decorate$12([Autowired("expressionService")],StylingService.prototype,"expressionService",void 0),StylingService=__decorate$12([Bean("stylingService")],StylingService)}(BeanStub),__extends$15=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgToggleButton=function(_super){function AgToggleButton(config){return _super.call(this,config,"ag-toggle-button")||this}return __extends$15(AgToggleButton,_super),AgToggleButton.prototype.setValue=function(value,silent){return _super.prototype.setValue.call(this,value,silent),this.addOrRemoveCssClass("ag-selected",this.getValue()),this},AgToggleButton}(AgCheckbox),__extends$14=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgInputTextArea=function(_super){function AgInputTextArea(config){return _super.call(this,config,"ag-text-area",null,"textarea")||this}return __extends$14(AgInputTextArea,_super),AgInputTextArea.prototype.setValue=function(value,silent){var ret=_super.prototype.setValue.call(this,value,silent);return this.eInput.value=value,ret},AgInputTextArea.prototype.setCols=function(cols){return this.eInput.cols=cols,this},AgInputTextArea.prototype.setRows=function(rows){return this.eInput.rows=rows,this},AgInputTextArea}(AgAbstractInputField),__extends$13=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgInputDateField=function(_super){function AgInputDateField(config){return _super.call(this,config,"ag-date-field","date")||this}return __extends$13(AgInputDateField,_super),AgInputDateField.prototype.postConstruct=function(){var _this=this;_super.prototype.postConstruct.call(this),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this));var usingSafari=isBrowserSafari();this.addManagedListener(this.eInput,"mousedown",(function(){_this.isDisabled()||usingSafari||_this.eInput.focus()})),this.eInput.step="any"},AgInputDateField.prototype.onWheel=function(e){document.activeElement===this.eInput&&e.preventDefault()},AgInputDateField.prototype.setMin=function(minDate){var _a,min=minDate instanceof Date?null!==(_a=serialiseDate(null!=minDate?minDate:null,!1))&&void 0!==_a?_a:void 0:minDate;return this.min===min||(this.min=min,addOrRemoveAttribute(this.eInput,"min",min)),this},AgInputDateField.prototype.setMax=function(maxDate){var _a,max=maxDate instanceof Date?null!==(_a=serialiseDate(null!=maxDate?maxDate:null,!1))&&void 0!==_a?_a:void 0:maxDate;return this.max===max||(this.max=max,addOrRemoveAttribute(this.eInput,"max",max)),this},AgInputDateField.prototype.setStep=function(step){return this.step===step||(this.step=step,addOrRemoveAttribute(this.eInput,"step",step)),this},AgInputDateField.prototype.getDate=function(){var _a;if(this.eInput.validity.valid)return null!==(_a=parseDateTimeFromString(this.getValue()))&&void 0!==_a?_a:void 0},AgInputDateField.prototype.setDate=function(date,silent){this.setValue(serialiseDate(null!=date?date:null,!1),silent)},AgInputDateField}(AgInputTextField),__extends$12=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgInputRange=function(_super){function AgInputRange(config){return _super.call(this,config,"ag-range-field","range")||this}return __extends$12(AgInputRange,_super),AgInputRange.prototype.postConstruct=function(){_super.prototype.postConstruct.call(this);var _a=this.config,min=_a.min,max=_a.max,step=_a.step;null!=min&&this.setMinValue(min),null!=max&&this.setMaxValue(max),this.setStep(step||1)},AgInputRange.prototype.addInputListeners=function(){var _this=this;this.addManagedListener(this.eInput,"input",(function(e){var value=e.target.value;_this.setValue(value)}))},AgInputRange.prototype.setMinValue=function(value){return this.min=value,this.eInput.setAttribute("min",value.toString()),this},AgInputRange.prototype.setMaxValue=function(value){return this.max=value,this.eInput.setAttribute("max",value.toString()),this},AgInputRange.prototype.setStep=function(value){return this.eInput.setAttribute("step",value.toString()),this},AgInputRange.prototype.setValue=function(value,silent){null!=this.min&&(value=Math.max(parseFloat(value),this.min).toString()),null!=this.max&&(value=Math.min(parseFloat(value),this.max).toString());var ret=_super.prototype.setValue.call(this,value,silent);return this.eInput.value=value,ret},AgInputRange}(AgAbstractInputField),__extends$11=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$11=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},RichSelectRow=function(_super){function RichSelectRow(params,wrapperEl){var _this=_super.call(this,'<div class="ag-rich-select-row" role="presentation"></div>')||this;return _this.params=params,_this.wrapperEl=wrapperEl,_this}return __extends$11(RichSelectRow,_super),RichSelectRow.prototype.postConstruct=function(){this.addManagedListener(this.getGui(),"mouseup",this.onMouseUp.bind(this))},RichSelectRow.prototype.setState=function(value){var formattedValue="";this.params.valueFormatter&&(formattedValue=this.params.valueFormatter(value)),this.populateWithRenderer(value,formattedValue)||this.populateWithoutRenderer(value,formattedValue),this.value=value},RichSelectRow.prototype.highlightString=function(matchString){var parsedValue=this.parsedValue;if(!this.params.cellRenderer&&exists(parsedValue))if(exists(matchString)){var index=null==parsedValue?void 0:parsedValue.toLocaleLowerCase().indexOf(matchString.toLocaleLowerCase());if(index>=0){var highlightEndIndex=index+matchString.length,startPart=escapeString(parsedValue.slice(0,index),!0),highlightedPart=escapeString(parsedValue.slice(index,highlightEndIndex),!0),endPart=escapeString(parsedValue.slice(highlightEndIndex));this.renderValueWithoutRenderer(startPart+'<span class="ag-rich-select-row-text-highlight">'+highlightedPart+"</span>"+endPart)}}else this.renderValueWithoutRenderer(parsedValue)},RichSelectRow.prototype.updateHighlighted=function(highlighted){var _a,eGui=this.getGui(),parentId="ag-rich-select-row-"+this.getCompId();(null===(_a=eGui.parentElement)||void 0===_a||_a.setAttribute("id",parentId),highlighted)&&(setAriaActiveDescendant(this.getParentComponent().getAriaElement(),parentId),this.wrapperEl.setAttribute("data-active-option",parentId));setAriaSelected(eGui.parentElement,highlighted),this.addOrRemoveCssClass("ag-rich-select-row-selected",highlighted)},RichSelectRow.prototype.populateWithoutRenderer=function(value,valueFormatted){var eDocument=this.gridOptionsService.getDocument(),eGui=this.getGui(),span=eDocument.createElement("span");span.style.overflow="hidden",span.style.textOverflow="ellipsis";var parsedValue=escapeString(exists(valueFormatted)?valueFormatted:value,!0);this.parsedValue=exists(parsedValue)?parsedValue:null,eGui.appendChild(span),this.renderValueWithoutRenderer(parsedValue)},RichSelectRow.prototype.renderValueWithoutRenderer=function(value){var span=this.getGui().querySelector("span");span&&(span.innerHTML=exists(value)?value:"&nbsp;")},RichSelectRow.prototype.populateWithRenderer=function(value,valueFormatted){var cellRendererPromise,userCompDetails,_this=this;return this.params.cellRenderer&&(userCompDetails=this.userComponentFactory.getCellRendererDetails(this.params,{value,valueFormatted,api:this.gridOptionsService.api})),userCompDetails&&(cellRendererPromise=userCompDetails.newAgStackInstance()),cellRendererPromise&&bindCellRendererToHtmlElement(cellRendererPromise,this.getGui()),!!cellRendererPromise&&(cellRendererPromise.then((function(childComponent){_this.addDestroyFunc((function(){_this.getContext().destroyBean(childComponent)}))})),!0)},RichSelectRow.prototype.onMouseUp=function(){var parent=this.getParentComponent(),event={type:Events.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:!1,value:this.value};null==parent||parent.dispatchEvent(event)},__decorate$11([Autowired("userComponentFactory")],RichSelectRow.prototype,"userComponentFactory",void 0),__decorate$11([PostConstruct],RichSelectRow.prototype,"postConstruct",null),RichSelectRow}(Component),__extends$10=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),TabGuardComp=function(_super){function TabGuardComp(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$10(TabGuardComp,_super),TabGuardComp.prototype.initialiseTabGuard=function(params){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.getFocusableElement();var tabGuards=[this.eTopGuard,this.eBottomGuard],compProxy={setTabIndex:function(tabIndex){tabGuards.forEach((function(tabGuard){return null!=tabIndex?tabGuard.setAttribute("tabindex",tabIndex):tabGuard.removeAttribute("tabindex")}))}};this.addTabGuards(this.eTopGuard,this.eBottomGuard),this.tabGuardCtrl=this.createManagedBean(new TabGuardCtrl({comp:compProxy,eTopGuard:this.eTopGuard,eBottomGuard:this.eBottomGuard,eFocusableElement:this.eFocusableElement,onFocusIn:params.onFocusIn,onFocusOut:params.onFocusOut,focusInnerElement:params.focusInnerElement,handleKeyDown:params.handleKeyDown,onTabKeyDown:params.onTabKeyDown,shouldStopEventPropagation:params.shouldStopEventPropagation}))},TabGuardComp.prototype.createTabGuard=function(side){var tabGuard=document.createElement("div"),cls="top"===side?TabGuardClassNames.TAB_GUARD_TOP:TabGuardClassNames.TAB_GUARD_BOTTOM;return tabGuard.classList.add(TabGuardClassNames.TAB_GUARD,cls),setAriaRole(tabGuard,"presentation"),tabGuard},TabGuardComp.prototype.addTabGuards=function(topTabGuard,bottomTabGuard){this.eFocusableElement.insertAdjacentElement("afterbegin",topTabGuard),this.eFocusableElement.insertAdjacentElement("beforeend",bottomTabGuard)},TabGuardComp.prototype.removeAllChildrenExceptTabGuards=function(){var tabGuards=[this.eTopGuard,this.eBottomGuard];clearElement(this.getFocusableElement()),this.addTabGuards.apply(this,function(to,from){for(var i=0,il=from.length,j=to.length;i<il;i++,j++)to[j]=from[i];return to}([],function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}(tabGuards)))},TabGuardComp.prototype.forceFocusOutOfContainer=function(up){void 0===up&&(up=!1),this.tabGuardCtrl.forceFocusOutOfContainer(up)},TabGuardComp.prototype.appendChild=function(newChild,container){isNodeOrElement(newChild)||(newChild=newChild.getGui());var bottomTabGuard=this.eBottomGuard;bottomTabGuard?bottomTabGuard.insertAdjacentElement("beforebegin",newChild):_super.prototype.appendChild.call(this,newChild,container)},TabGuardComp}(Component),__extends$$=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$10=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},VirtualList=function(_super){function VirtualList(params){var _this=_super.call(this,VirtualList.getTemplate((null==params?void 0:params.cssIdentifier)||"default"))||this;_this.renderedRows=new Map,_this.rowHeight=20;var _a=params||{},_b=_a.cssIdentifier,cssIdentifier=void 0===_b?"default":_b,_c=_a.ariaRole,ariaRole=void 0===_c?"listbox":_c,listName=_a.listName;return _this.cssIdentifier=cssIdentifier,_this.ariaRole=ariaRole,_this.listName=listName,_this}return __extends$$(VirtualList,_super),VirtualList.prototype.postConstruct=function(){var _this=this;this.addScrollListener(),this.rowHeight=this.getItemHeight(),this.addResizeObserver(),this.initialiseTabGuard({onFocusIn:function(e){return _this.onFocusIn(e)},onFocusOut:function(e){return _this.onFocusOut(e)},focusInnerElement:function(fromBottom){return _this.focusInnerElement(fromBottom)},onTabKeyDown:function(e){return _this.onTabKeyDown(e)},handleKeyDown:function(e){return _this.handleKeyDown(e)}}),this.setAriaProperties(),this.addManagedListener(this.eventService,Events.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanged.bind(this))},VirtualList.prototype.onGridStylesChanged=function(){this.rowHeight=this.getItemHeight(),this.refresh()},VirtualList.prototype.setAriaProperties=function(){var listName=this.localeService.getLocaleTextFunc()("ariaDefaultListName",this.listName||"List"),ariaEl=this.eContainer;setAriaRole(ariaEl,this.ariaRole),setAriaLabel(ariaEl,listName)},VirtualList.prototype.addResizeObserver=function(){var _this=this,destroyObserver=this.resizeObserverService.observeResize(this.getGui(),(function(){return _this.animationFrameService.requestAnimationFrame((function(){return _this.drawVirtualRows()}))}));this.addDestroyFunc(destroyObserver)},VirtualList.prototype.focusInnerElement=function(fromBottom){this.focusRow(fromBottom?this.model.getRowCount()-1:0)},VirtualList.prototype.onFocusIn=function(e){var target=e.target;return target.classList.contains("ag-virtual-list-item")&&(this.lastFocusedRowIndex=getAriaPosInSet(target)-1),!1},VirtualList.prototype.onFocusOut=function(e){return this.getFocusableElement().contains(e.relatedTarget)||(this.lastFocusedRowIndex=null),!1},VirtualList.prototype.handleKeyDown=function(e){switch(e.key){case KeyCode.UP:case KeyCode.DOWN:this.navigate(e.key===KeyCode.UP)&&e.preventDefault()}},VirtualList.prototype.onTabKeyDown=function(e){this.navigate(e.shiftKey)?e.preventDefault():(stopPropagationForAgGrid(e),this.forceFocusOutOfContainer(e.shiftKey))},VirtualList.prototype.navigate=function(up){if(null==this.lastFocusedRowIndex)return!1;var nextRow=this.lastFocusedRowIndex+(up?-1:1);return!(nextRow<0||nextRow>=this.model.getRowCount())&&(this.focusRow(nextRow),!0)},VirtualList.prototype.getLastFocusedRow=function(){return this.lastFocusedRowIndex},VirtualList.prototype.focusRow=function(rowNumber){var _this=this;this.ensureIndexVisible(rowNumber),window.setTimeout((function(){if(_this.isAlive()){var renderedRow=_this.renderedRows.get(rowNumber);renderedRow&&renderedRow.eDiv.focus()}}),10)},VirtualList.prototype.getComponentAt=function(rowIndex){var comp=this.renderedRows.get(rowIndex);return comp&&comp.rowComponent},VirtualList.prototype.forEachRenderedRow=function(func){this.renderedRows.forEach((function(value,key){return func(value.rowComponent,key)}))},VirtualList.getTemplate=function(cssIdentifier){return'<div class="ag-virtual-list-viewport ag-'+cssIdentifier+'-virtual-list-viewport" role="presentation">\n                <div class="ag-virtual-list-container ag-'+cssIdentifier+'-virtual-list-container" ref="eContainer"></div>\n            </div>'},VirtualList.prototype.getItemHeight=function(){return this.environment.getListItemHeight()},VirtualList.prototype.ensureIndexVisible=function(index,scrollPartialIntoView){void 0===scrollPartialIntoView&&(scrollPartialIntoView=!0);var lastRow=this.model.getRowCount();if("number"!=typeof index||index<0||index>=lastRow)return console.warn("AG Grid: invalid row index for ensureIndexVisible: "+index),!1;var rowTopPixel=index*this.rowHeight,rowBottomPixel=rowTopPixel+this.rowHeight,eGui=this.getGui(),viewportTopPixel=eGui.scrollTop,viewportHeight=eGui.offsetHeight,viewportBottomPixel=viewportTopPixel+viewportHeight,diff=scrollPartialIntoView?0:this.rowHeight,viewportScrolledBeforeRow=viewportBottomPixel<rowBottomPixel-diff;if(viewportTopPixel>rowTopPixel+diff)return eGui.scrollTop=rowTopPixel,!0;if(viewportScrolledBeforeRow){var newScrollPosition=rowBottomPixel-viewportHeight;return eGui.scrollTop=newScrollPosition,!0}return!1},VirtualList.prototype.setComponentCreator=function(componentCreator){this.componentCreator=componentCreator},VirtualList.prototype.setComponentUpdater=function(componentUpdater){this.componentUpdater=componentUpdater},VirtualList.prototype.getRowHeight=function(){return this.rowHeight},VirtualList.prototype.getScrollTop=function(){return this.getGui().scrollTop},VirtualList.prototype.setRowHeight=function(rowHeight){this.rowHeight=rowHeight,this.refresh()},VirtualList.prototype.refresh=function(softRefresh){var _this=this;if(null!=this.model&&this.isAlive()){var rowCount=this.model.getRowCount();this.eContainer.style.height=rowCount*this.rowHeight+"px",waitUntil((function(){return _this.eContainer.clientHeight>=rowCount*_this.rowHeight}),(function(){_this.isAlive()&&(_this.canSoftRefresh(softRefresh)?_this.drawVirtualRows(!0):(_this.clearVirtualRows(),_this.drawVirtualRows()))}))}},VirtualList.prototype.canSoftRefresh=function(softRefresh){return!!(softRefresh&&this.renderedRows.size&&"function"==typeof this.model.areRowsEqual&&this.componentUpdater)},VirtualList.prototype.clearVirtualRows=function(){var _this=this;this.renderedRows.forEach((function(_,rowIndex){return _this.removeRow(rowIndex)}))},VirtualList.prototype.drawVirtualRows=function(softRefresh){if(this.isAlive()&&this.model){var gui=this.getGui(),topPixel=gui.scrollTop,bottomPixel=topPixel+gui.offsetHeight,firstRow=Math.floor(topPixel/this.rowHeight),lastRow=Math.floor(bottomPixel/this.rowHeight);this.ensureRowsRendered(firstRow,lastRow,softRefresh)}},VirtualList.prototype.ensureRowsRendered=function(start,finish,softRefresh){var _this=this;this.renderedRows.forEach((function(_,rowIndex){(rowIndex<start||rowIndex>finish)&&rowIndex!==_this.lastFocusedRowIndex&&_this.removeRow(rowIndex)})),softRefresh&&this.refreshRows();for(var rowIndex=start;rowIndex<=finish;rowIndex++)this.renderedRows.has(rowIndex)||rowIndex<this.model.getRowCount()&&this.insertRow(rowIndex)},VirtualList.prototype.insertRow=function(rowIndex){var _this=this,value=this.model.getRow(rowIndex),eDiv=document.createElement("div");if(eDiv.classList.add("ag-virtual-list-item","ag-"+this.cssIdentifier+"-virtual-list-item"),setAriaRole(eDiv,"tree"===this.ariaRole?"treeitem":"option"),setAriaSetSize(eDiv,this.model.getRowCount()),setAriaPosInSet(eDiv,rowIndex+1),eDiv.setAttribute("tabindex","-1"),"function"==typeof this.model.isRowSelected){var isSelected=this.model.isRowSelected(rowIndex);setAriaSelected(eDiv,!!isSelected),setAriaChecked(eDiv,isSelected)}eDiv.style.height=this.rowHeight+"px",eDiv.style.top=this.rowHeight*rowIndex+"px";var rowComponent=this.componentCreator(value,eDiv);rowComponent.addGuiEventListener("focusin",(function(){return _this.lastFocusedRowIndex=rowIndex})),eDiv.appendChild(rowComponent.getGui()),this.renderedRows.has(rowIndex-1)?this.renderedRows.get(rowIndex-1).eDiv.insertAdjacentElement("afterend",eDiv):this.renderedRows.has(rowIndex+1)?this.renderedRows.get(rowIndex+1).eDiv.insertAdjacentElement("beforebegin",eDiv):this.eContainer.appendChild(eDiv),this.renderedRows.set(rowIndex,{rowComponent,eDiv,value})},VirtualList.prototype.removeRow=function(rowIndex){var component=this.renderedRows.get(rowIndex);this.eContainer.removeChild(component.eDiv),this.destroyBean(component.rowComponent),this.renderedRows.delete(rowIndex)},VirtualList.prototype.refreshRows=function(){var _this=this,rowCount=this.model.getRowCount();this.renderedRows.forEach((function(row,rowIndex){var _a,_b;if(rowIndex>=rowCount)_this.removeRow(rowIndex);else{var newValue=_this.model.getRow(rowIndex);(null===(_b=(_a=_this.model).areRowsEqual)||void 0===_b?void 0:_b.call(_a,row.value,newValue))?_this.componentUpdater(newValue,row.rowComponent):_this.removeRow(rowIndex)}}))},VirtualList.prototype.addScrollListener=function(){var _this=this;this.addGuiEventListener("scroll",(function(){return _this.drawVirtualRows()}),{passive:!0})},VirtualList.prototype.setModel=function(model){this.model=model},VirtualList.prototype.getAriaElement=function(){return this.eContainer},VirtualList.prototype.destroy=function(){this.isAlive()&&(this.clearVirtualRows(),_super.prototype.destroy.call(this))},__decorate$10([Autowired("resizeObserverService")],VirtualList.prototype,"resizeObserverService",void 0),__decorate$10([Autowired("animationFrameService")],VirtualList.prototype,"animationFrameService",void 0),__decorate$10([RefSelector("eContainer")],VirtualList.prototype,"eContainer",void 0),__decorate$10([PostConstruct],VirtualList.prototype,"postConstruct",null),VirtualList}(TabGuardComp),__extends$_=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$6=function(){return __assign$6=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$6.apply(this,arguments)},__decorate$$=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AgRichSelect=function(_super){function AgRichSelect(config){var _a,_b,_this=_super.call(this,__assign$6(__assign$6({pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"ag-list",className:"ag-rich-select",pickerIcon:"smallDown",ariaRole:"combobox",template:null!==(_a=null==config?void 0:config.template)&&void 0!==_a?_a:'\n    <div class="ag-picker-field" role="presentation">\n        <div ref="eLabel"></div>\n            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-rich-select-value ag-picker-collapsed">\n            <div ref="eDisplayField" class="ag-picker-field-display"></div>\n            <ag-input-text-field ref="eInput" class="ag-rich-select-field-input"></ag-input-text-field>\n            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n        </div>\n    </div>',modalPicker:!1},config),{maxPickerHeight:null!==(_b=null==config?void 0:config.maxPickerHeight)&&void 0!==_b?_b:"calc(var(--ag-row-height) * 6.5)"}))||this;_this.searchString="",_this.highlightedItem=-1,_this.lastRowHovered=-1,_this.searchStringCreator=null;var _c=config||{},cellRowHeight=_c.cellRowHeight,value=_c.value,valueList=_c.valueList,searchStringCreator=_c.searchStringCreator;return null!=cellRowHeight&&(_this.cellRowHeight=cellRowHeight),void 0!==value&&(_this.value=value),null!=valueList&&(_this.values=valueList),searchStringCreator&&(_this.searchStringCreator=searchStringCreator),_this}return __extends$_(AgRichSelect,_super),AgRichSelect.prototype.postConstruct=function(){var _a,_this=this;_super.prototype.postConstruct.call(this),this.createLoadingElement(),this.createListComponent();var _b=this.config,allowTyping=_b.allowTyping,placeholder=_b.placeholder;allowTyping?(this.eInput.setAutoComplete(!1).setInputPlaceholder(placeholder),this.eDisplayField.classList.add("ag-hidden")):this.eInput.setDisplayed(!1),this.eWrapper.tabIndex=null!==(_a=this.gridOptionsService.getNum("tabIndex"))&&void 0!==_a?_a:0;var _c=this.config.searchDebounceDelay,searchDebounceDelay=void 0===_c?300:_c;this.clearSearchString=debounce(this.clearSearchString,searchDebounceDelay),this.renderSelectedValue(),allowTyping&&(this.eInput.onValueChange((function(value){return _this.searchTextFromString(value)})),this.addManagedListener(this.eWrapper,"focus",this.onWrapperFocus.bind(this))),this.addManagedListener(this.eWrapper,"focusout",this.onWrapperFocusOut.bind(this))},AgRichSelect.prototype.createLoadingElement=function(){var eDocument=this.gridOptionsService.getDocument(),translate=this.localeService.getLocaleTextFunc(),el=eDocument.createElement("div");el.classList.add("ag-loading-text"),el.innerText=translate("loadingOoo","Loading..."),this.eLoading=el},AgRichSelect.prototype.createListComponent=function(){var _this=this;this.listComponent=this.createBean(new VirtualList({cssIdentifier:"rich-select"})),this.listComponent.setComponentCreator(this.createRowComponent.bind(this)),this.listComponent.setParentComponent(this),this.addManagedListener(this.listComponent,Events.EVENT_FIELD_PICKER_VALUE_SELECTED,(function(e){_this.onListValueSelected(e.value,e.fromEnterKey)}));var cellRowHeight=this.cellRowHeight;cellRowHeight&&this.listComponent.setRowHeight(cellRowHeight);var eListGui=this.listComponent.getGui(),eListAriaEl=this.listComponent.getAriaElement();this.addManagedListener(eListGui,"mousemove",this.onPickerMouseMove.bind(this)),this.addManagedListener(eListGui,"mousedown",(function(e){return e.preventDefault()})),eListGui.classList.add("ag-rich-select-list");var listId="ag-rich-select-list-"+this.listComponent.getCompId();eListAriaEl.setAttribute("id",listId),setAriaLabel(eListAriaEl,this.localeService.getLocaleTextFunc()(this.config.pickerAriaLabelKey,this.config.pickerAriaLabelValue)),setAriaControls(this.eWrapper,eListAriaEl)},AgRichSelect.prototype.renderSelectedValue=function(){var userCompDetails,userCompDetailsPromise,_this=this,value=this.value,eDisplayField=this.eDisplayField,config=this.config,valueFormatted=this.config.valueFormatter?this.config.valueFormatter(value):value;if(config.allowTyping)this.eInput.setValue(valueFormatted);else if(config.cellRenderer&&(userCompDetails=this.userComponentFactory.getCellRendererDetails(this.config,{value,valueFormatted,api:this.gridOptionsService.api})),userCompDetails&&(userCompDetailsPromise=userCompDetails.newAgStackInstance()),userCompDetailsPromise)clearElement(eDisplayField),bindCellRendererToHtmlElement(userCompDetailsPromise,eDisplayField),userCompDetailsPromise.then((function(renderer){_this.addDestroyFunc((function(){return _this.getContext().destroyBean(renderer)}))}));else if(exists(this.value))eDisplayField.innerText=valueFormatted,eDisplayField.classList.remove("ag-display-as-placeholder");else{var placeholder=config.placeholder;exists(placeholder)?(eDisplayField.innerHTML=""+escapeString(placeholder),eDisplayField.classList.add("ag-display-as-placeholder")):clearElement(eDisplayField)}},AgRichSelect.prototype.getCurrentValueIndex=function(){var currentList=this.currentList,value=this.value;if(null==value)return-1;for(var i=0;i<currentList.length;i++)if(currentList[i]===value)return i;return-1},AgRichSelect.prototype.highlightFilterMatch=function(){var _a,_this=this;null===(_a=this.listComponent)||void 0===_a||_a.forEachRenderedRow((function(cmp,idx){cmp.highlightString(_this.searchString)}))},AgRichSelect.prototype.highlightSelectedValue=function(index){var _a,_this=this;null==index&&(index=this.getCurrentValueIndex()),this.highlightedItem=index,null===(_a=this.listComponent)||void 0===_a||_a.forEachRenderedRow((function(cmp,idx){var highlighted=-1!==index&&_this.highlightedItem===idx;cmp.updateHighlighted(highlighted)}))},AgRichSelect.prototype.setRowHeight=function(height){height!==this.cellRowHeight&&(this.cellRowHeight=height),this.listComponent&&this.listComponent.setRowHeight(height)},AgRichSelect.prototype.createPickerComponent=function(){var values=this.values;return values&&this.setValueList({valueList:values}),this.listComponent},AgRichSelect.prototype.setSearchStringCreator=function(searchStringFn){this.searchStringCreator=searchStringFn},AgRichSelect.prototype.setValueList=function(params){var valueList=params.valueList,refresh=params.refresh;this.listComponent&&this.currentList!==valueList&&(this.currentList=valueList,this.listComponent.setModel({getRowCount:function(){return valueList.length},getRow:function(index){return valueList[index]}}),refresh&&(this.values?this.listComponent.refresh():(this.values=valueList,this.isPickerDisplayed&&this.showCurrentValueInPicker())))},AgRichSelect.prototype.showPicker=function(){_super.prototype.showPicker.call(this),this.showCurrentValueInPicker()},AgRichSelect.prototype.showCurrentValueInPicker=function(){var _a,_b;if(this.listComponent)if(this.currentList){(null===(_a=this.eLoading)||void 0===_a?void 0:_a.offsetParent)&&(null===(_b=this.eLoading.parentElement)||void 0===_b||_b.removeChild(this.eLoading));var currentValueIndex=this.getCurrentValueIndex();-1!==currentValueIndex?(this.listComponent.refresh(),this.listComponent.ensureIndexVisible(currentValueIndex),this.listComponent.refresh(!0),this.highlightSelectedValue(currentValueIndex)):this.listComponent.refresh()}else this.isPickerDisplayed&&this.eLoading&&this.listComponent.appendChild(this.eLoading)},AgRichSelect.prototype.beforeHidePicker=function(){this.highlightedItem=-1,_super.prototype.beforeHidePicker.call(this)},AgRichSelect.prototype.onWrapperFocus=function(e){this.eInput&&this.eInput.getFocusableElement().focus()},AgRichSelect.prototype.onWrapperFocusOut=function(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()},AgRichSelect.prototype.buildSearchStringFromKeyboardEvent=function(searchKey){var key=searchKey.key;if(key===KeyCode.BACKSPACE)this.searchString=this.searchString.slice(0,-1),key="";else if(!isEventFromPrintableCharacter(searchKey))return;searchKey.preventDefault(),this.searchTextFromCharacter(key)},AgRichSelect.prototype.searchTextFromCharacter=function(char){this.searchString+=char,this.runSearch(),this.clearSearchString()},AgRichSelect.prototype.searchTextFromString=function(str){null==str&&(str=""),this.searchString=str,this.runSearch()},AgRichSelect.prototype.buildSearchStrings=function(values){var searchStrings,_a=this.config.valueFormatter,valueFormatter=void 0===_a?function(value){return value}:_a;return"number"==typeof values[0]||"string"==typeof values[0]?searchStrings=values.map((function(v){return valueFormatter(v)})):"object"==typeof values[0]&&this.searchStringCreator&&(searchStrings=this.searchStringCreator(values)),searchStrings},AgRichSelect.prototype.getSuggestionsAndFilteredValues=function(searchValue,valueList){var _this=this,suggestions=[],filteredValues=[];if(!searchValue.length)return{suggestions,filteredValues};var _a=this.config,allowTyping=_a.allowTyping,_b=_a.searchType,searchType=void 0===_b?"fuzzy":_b,shouldFilterList=_a.filterList&&allowTyping;if("fuzzy"===searchType){var fuzzySearchResult=fuzzySuggestions(this.searchString,valueList,!0);suggestions=fuzzySearchResult.values;var indices=fuzzySearchResult.indices;if(shouldFilterList&&indices.length)for(var i=0;i<indices.length;i++)filteredValues.push(this.values[indices[i]])}else suggestions=valueList.filter((function(val,idx){var currentValue=val.toLocaleLowerCase(),valueToMatch=_this.searchString.toLocaleLowerCase(),isMatch="match"===searchType?currentValue.startsWith(valueToMatch):-1!==currentValue.indexOf(valueToMatch);return shouldFilterList&&isMatch&&filteredValues.push(_this.values[idx]),isMatch}));return{suggestions,filteredValues}},AgRichSelect.prototype.filterListModel=function(filteredValues){var _a=this.config,allowTyping=_a.allowTyping,filterList=_a.filterList;allowTyping&&filterList&&this.setValueList({valueList:filteredValues,refresh:!0})},AgRichSelect.prototype.runSearch=function(){var _a,_b,_c,values=this.values,searchStrings=this.buildSearchStrings(values);if(searchStrings){var _d=this.getSuggestionsAndFilteredValues(this.searchString,searchStrings),suggestions=_d.suggestions,filteredValues=_d.filteredValues,_e=this.config,allowTyping=_e.allowTyping,filterList=_e.filterList,highlightMatch=_e.highlightMatch,_f=_e.searchType,searchType=void 0===_f?"fuzzy":_f,filterValueLen=filteredValues.length,shouldFilter=!(!allowTyping||!filterList||""===this.searchString);if(shouldFilter&&this.filterListModel(shouldFilter?filteredValues:values),suggestions.length){var topSuggestionIndex=shouldFilter?0:searchStrings.indexOf(suggestions[0]);this.selectListItem(topSuggestionIndex),highlightMatch&&"fuzzy"!==searchType&&this.highlightFilterMatch()}else if(this.highlightSelectedValue(-1),!shouldFilter||filterValueLen)null===(_a=this.listComponent)||void 0===_a||_a.ensureIndexVisible(0);else if(shouldFilter){this.getAriaElement().removeAttribute("data-active-option");var eListAriaEl=null===(_b=this.listComponent)||void 0===_b?void 0:_b.getAriaElement();eListAriaEl&&setAriaActiveDescendant(eListAriaEl,null)}var eListGui=null===(_c=this.listComponent)||void 0===_c?void 0:_c.getGui();null==eListGui||eListGui.classList.toggle("ag-hidden",shouldFilter&&!filterValueLen)}else this.highlightSelectedValue(-1)},AgRichSelect.prototype.clearSearchString=function(){this.searchString=""},AgRichSelect.prototype.selectListItem=function(index,preventUnnecessaryScroll,skipRefresh){!this.isPickerDisplayed||!this.listComponent||index<0||index>=this.currentList.length||(this.listComponent.ensureIndexVisible(index,!preventUnnecessaryScroll)&&!skipRefresh&&this.listComponent.refresh(!0),this.highlightSelectedValue(index))},AgRichSelect.prototype.setValue=function(value,silent,fromPicker){var index=this.currentList.indexOf(value);return-1===index?this:(this.value=value,fromPicker||this.selectListItem(index),this.renderSelectedValue(),_super.prototype.setValue.call(this,value,silent))},AgRichSelect.prototype.createRowComponent=function(value){var row=new RichSelectRow(this.config,this.eWrapper);row.setParentComponent(this.listComponent),this.getContext().createBean(row),row.setState(value);var _a=this.config,highlightMatch=_a.highlightMatch,_b=_a.searchType;return highlightMatch&&"fuzzy"!==(void 0===_b?"fuzzy":_b)&&row.highlightString(this.searchString),row},AgRichSelect.prototype.getRowForMouseEvent=function(e){var listComponent=this.listComponent;if(!listComponent)return-1;var rect=(null==listComponent?void 0:listComponent.getGui()).getBoundingClientRect(),scrollTop=listComponent.getScrollTop(),mouseY=e.clientY-rect.top+scrollTop;return Math.floor(mouseY/listComponent.getRowHeight())},AgRichSelect.prototype.onPickerMouseMove=function(e){if(this.listComponent){var row=this.getRowForMouseEvent(e);-1!==row&&row!=this.lastRowHovered&&(this.lastRowHovered=row,this.selectListItem(row,!0,!0))}},AgRichSelect.prototype.onNavigationKeyDown=function(event,key){event.preventDefault();var isDown=key===KeyCode.DOWN;if(this.isPickerDisplayed||!isDown){var oldIndex=this.highlightedItem,newIndex=-1===oldIndex?0:oldIndex+(isDown?1:-1);this.selectListItem(newIndex,!1,!0)}else this.showPicker()},AgRichSelect.prototype.onEnterKeyDown=function(e){this.isPickerDisplayed&&(e.preventDefault(),this.onListValueSelected(this.currentList[this.highlightedItem],!0))},AgRichSelect.prototype.onTabKeyDown=function(){this.isPickerDisplayed&&this.setValue(this.currentList[this.highlightedItem],!1,!0)},AgRichSelect.prototype.onListValueSelected=function(value,fromEnterKey){this.setValue(value,!1,!0),this.dispatchPickerEvent(value,fromEnterKey),this.hidePicker()},AgRichSelect.prototype.dispatchPickerEvent=function(value,fromEnterKey){var event={type:Events.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey,value};this.dispatchEvent(event)},AgRichSelect.prototype.getFocusableElement=function(){return this.config.allowTyping?this.eInput.getFocusableElement():_super.prototype.getFocusableElement.call(this)},AgRichSelect.prototype.onKeyDown=function(event){var key=event.key,allowTyping=this.config.allowTyping;switch(key){case KeyCode.LEFT:case KeyCode.RIGHT:case KeyCode.PAGE_HOME:case KeyCode.PAGE_END:allowTyping||event.preventDefault();break;case KeyCode.PAGE_UP:case KeyCode.PAGE_DOWN:event.preventDefault();break;case KeyCode.DOWN:case KeyCode.UP:this.onNavigationKeyDown(event,key);break;case KeyCode.ESCAPE:this.isPickerDisplayed&&(event.preventDefault(),stopPropagationForAgGrid(event),this.hidePicker());break;case KeyCode.ENTER:this.onEnterKeyDown(event);break;case KeyCode.TAB:this.onTabKeyDown();break;default:allowTyping||this.buildSearchStringFromKeyboardEvent(event)}},AgRichSelect.prototype.destroy=function(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),this.eLoading=void 0,_super.prototype.destroy.call(this)},__decorate$$([Autowired("userComponentFactory")],AgRichSelect.prototype,"userComponentFactory",void 0),__decorate$$([RefSelector("eInput")],AgRichSelect.prototype,"eInput",void 0),AgRichSelect}(AgPickerField),__extends$Z=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$_=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AgSlider=function(_super){function AgSlider(config){var _this=_super.call(this,config,AgSlider.TEMPLATE)||this;return _this.labelAlignment="top",_this}return __extends$Z(AgSlider,_super),AgSlider.prototype.init=function(){this.eSlider.addCssClass("ag-slider-field")},AgSlider.prototype.onValueChange=function(callbackFn){var _this=this,eventChanged=Events.EVENT_FIELD_VALUE_CHANGED;return this.addManagedListener(this.eText,eventChanged,(function(){var textValue=parseFloat(_this.eText.getValue());_this.eSlider.setValue(textValue.toString(),!0),callbackFn(textValue||0)})),this.addManagedListener(this.eSlider,eventChanged,(function(){var sliderValue=_this.eSlider.getValue();_this.eText.setValue(sliderValue,!0),callbackFn(parseFloat(sliderValue))})),this},AgSlider.prototype.setSliderWidth=function(width){return this.eSlider.setWidth(width),this},AgSlider.prototype.setTextFieldWidth=function(width){return this.eText.setWidth(width),this},AgSlider.prototype.setMinValue=function(minValue){return this.eSlider.setMinValue(minValue),this.eText.setMin(minValue),this},AgSlider.prototype.setMaxValue=function(maxValue){return this.eSlider.setMaxValue(maxValue),this.eText.setMax(maxValue),this},AgSlider.prototype.getValue=function(){return this.eText.getValue()},AgSlider.prototype.setValue=function(value){return this.getValue()===value||(this.eText.setValue(value,!0),this.eSlider.setValue(value,!0),this.dispatchEvent({type:Events.EVENT_FIELD_VALUE_CHANGED})),this},AgSlider.prototype.setStep=function(step){return this.eSlider.setStep(step),this.eText.setStep(step),this},AgSlider.TEMPLATE='<div class="ag-slider">\n            <label ref="eLabel"></label>\n            <div class="ag-wrapper ag-slider-wrapper">\n                <ag-input-range ref="eSlider"></ag-input-range>\n                <ag-input-number-field ref="eText"></ag-input-number-field>\n            </div>\n        </div>',__decorate$_([RefSelector("eLabel")],AgSlider.prototype,"eLabel",void 0),__decorate$_([RefSelector("eSlider")],AgSlider.prototype,"eSlider",void 0),__decorate$_([RefSelector("eText")],AgSlider.prototype,"eText",void 0),__decorate$_([PostConstruct],AgSlider.prototype,"init",null),AgSlider}(AgAbstractLabel),__extends$Y=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$Z=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AgGroupComponent=function(_super){function AgGroupComponent(params){void 0===params&&(params={});var _this=_super.call(this,AgGroupComponent.getTemplate(params))||this;_this.suppressEnabledCheckbox=!0,_this.suppressOpenCloseIcons=!1;var title=params.title,enabled=params.enabled,items=params.items,suppressEnabledCheckbox=params.suppressEnabledCheckbox,suppressOpenCloseIcons=params.suppressOpenCloseIcons;return _this.title=title,_this.cssIdentifier=params.cssIdentifier||"default",_this.enabled=null==enabled||enabled,_this.items=items||[],_this.alignItems=params.alignItems||"center",null!=suppressEnabledCheckbox&&(_this.suppressEnabledCheckbox=suppressEnabledCheckbox),null!=suppressOpenCloseIcons&&(_this.suppressOpenCloseIcons=suppressOpenCloseIcons),_this}return __extends$Y(AgGroupComponent,_super),AgGroupComponent.getTemplate=function(params){var cssIdentifier=params.cssIdentifier||"default";return'<div class="ag-group ag-'+cssIdentifier+'-group" role="presentation">\n            <div class="ag-group-title-bar ag-'+cssIdentifier+'-group-title-bar ag-unselectable" ref="eTitleBar" role="button">\n                <span class="ag-group-title-bar-icon ag-'+cssIdentifier+'-group-title-bar-icon" ref="eGroupOpenedIcon" role="presentation"></span>\n                <span class="ag-group-title-bar-icon ag-'+cssIdentifier+'-group-title-bar-icon" ref="eGroupClosedIcon" role="presentation"></span>\n                <span ref="eTitle" class="ag-group-title ag-'+cssIdentifier+'-group-title"></span>\n            </div>\n            <div ref="eToolbar" class="ag-group-toolbar ag-'+cssIdentifier+'-group-toolbar">\n                <ag-checkbox ref="cbGroupEnabled"></ag-checkbox>\n            </div>\n            <div ref="eContainer" class="ag-group-container ag-group-container-'+(params.direction||"vertical")+" ag-"+cssIdentifier+'-group-container"></div>\n        </div>'},AgGroupComponent.prototype.postConstruct=function(){if(this.items.length){var initialItems=this.items;this.items=[],this.addItems(initialItems)}var localeTextFunc=this.localeService.getLocaleTextFunc();this.cbGroupEnabled.setLabel(localeTextFunc("enabled","Enabled")),this.title&&this.setTitle(this.title),this.enabled&&this.setEnabled(this.enabled),this.setAlignItems(this.alignItems),this.hideEnabledCheckbox(this.suppressEnabledCheckbox),this.hideOpenCloseIcons(this.suppressOpenCloseIcons),this.setupExpandContract(),this.refreshAriaStatus(),this.refreshChildDisplay()},AgGroupComponent.prototype.setupExpandContract=function(){var _this=this;this.eGroupClosedIcon.appendChild(createIcon("columnSelectClosed",this.gridOptionsService,null)),this.eGroupOpenedIcon.appendChild(createIcon("columnSelectOpen",this.gridOptionsService,null)),this.addManagedListener(this.eTitleBar,"click",(function(){return _this.toggleGroupExpand()})),this.addManagedListener(this.eTitleBar,"keydown",(function(e){switch(e.key){case KeyCode.ENTER:case KeyCode.SPACE:e.preventDefault(),_this.toggleGroupExpand();break;case KeyCode.RIGHT:case KeyCode.LEFT:e.preventDefault(),_this.toggleGroupExpand(e.key===KeyCode.RIGHT)}}))},AgGroupComponent.prototype.refreshAriaStatus=function(){this.suppressOpenCloseIcons||setAriaExpanded(this.eTitleBar,this.expanded)},AgGroupComponent.prototype.refreshChildDisplay=function(){var showIcon=!this.suppressOpenCloseIcons;setDisplayed(this.eToolbar,this.expanded&&!this.suppressEnabledCheckbox),setDisplayed(this.eGroupOpenedIcon,showIcon&&this.expanded),setDisplayed(this.eGroupClosedIcon,showIcon&&!this.expanded)},AgGroupComponent.prototype.isExpanded=function(){return this.expanded},AgGroupComponent.prototype.setAlignItems=function(alignment){this.alignItems!==alignment&&this.removeCssClass("ag-group-item-alignment-"+this.alignItems),this.alignItems=alignment;var newCls="ag-group-item-alignment-"+this.alignItems;return this.addCssClass(newCls),this},AgGroupComponent.prototype.toggleGroupExpand=function(expanded){return this.suppressOpenCloseIcons?(this.expanded=!0,this.refreshChildDisplay(),setDisplayed(this.eContainer,!0),this):(expanded=null!=expanded?expanded:!this.expanded,this.expanded===expanded||(this.expanded=expanded,this.refreshAriaStatus(),this.refreshChildDisplay(),setDisplayed(this.eContainer,expanded),this.dispatchEvent({type:this.expanded?AgGroupComponent.EVENT_EXPANDED:AgGroupComponent.EVENT_COLLAPSED})),this)},AgGroupComponent.prototype.addItems=function(items){var _this=this;items.forEach((function(item){return _this.addItem(item)}))},AgGroupComponent.prototype.addItem=function(item){var container=this.eContainer,el=item instanceof Component?item.getGui():item;el.classList.add("ag-group-item","ag-"+this.cssIdentifier+"-group-item"),container.appendChild(el),this.items.push(el)},AgGroupComponent.prototype.hideItem=function(hide,index){setDisplayed(this.items[index],!hide)},AgGroupComponent.prototype.setTitle=function(title){return this.eTitle.innerText=title,this},AgGroupComponent.prototype.addCssClassToTitleBar=function(cssClass){this.eTitleBar.classList.add(cssClass)},AgGroupComponent.prototype.setEnabled=function(enabled,skipToggle){return this.enabled=enabled,this.refreshDisabledStyles(),this.toggleGroupExpand(enabled),skipToggle||this.cbGroupEnabled.setValue(enabled),this},AgGroupComponent.prototype.isEnabled=function(){return this.enabled},AgGroupComponent.prototype.onEnableChange=function(callbackFn){var _this=this;return this.cbGroupEnabled.onValueChange((function(newSelection){_this.setEnabled(newSelection,!0),callbackFn(newSelection)})),this},AgGroupComponent.prototype.hideEnabledCheckbox=function(hide){return this.suppressEnabledCheckbox=hide,this.refreshChildDisplay(),this.refreshDisabledStyles(),this},AgGroupComponent.prototype.hideOpenCloseIcons=function(hide){return this.suppressOpenCloseIcons=hide,hide&&this.toggleGroupExpand(!0),this},AgGroupComponent.prototype.refreshDisabledStyles=function(){this.addOrRemoveCssClass("ag-disabled",!this.enabled),this.suppressEnabledCheckbox&&!this.enabled?(this.eTitleBar.classList.add("ag-disabled-group-title-bar"),this.eTitleBar.removeAttribute("tabindex")):(this.eTitleBar.classList.remove("ag-disabled-group-title-bar"),this.eTitleBar.setAttribute("tabindex","0")),this.eContainer.classList.toggle("ag-disabled-group-container",!this.enabled)},AgGroupComponent.EVENT_EXPANDED="expanded",AgGroupComponent.EVENT_COLLAPSED="collapsed",__decorate$Z([RefSelector("eTitleBar")],AgGroupComponent.prototype,"eTitleBar",void 0),__decorate$Z([RefSelector("eGroupOpenedIcon")],AgGroupComponent.prototype,"eGroupOpenedIcon",void 0),__decorate$Z([RefSelector("eGroupClosedIcon")],AgGroupComponent.prototype,"eGroupClosedIcon",void 0),__decorate$Z([RefSelector("eToolbar")],AgGroupComponent.prototype,"eToolbar",void 0),__decorate$Z([RefSelector("cbGroupEnabled")],AgGroupComponent.prototype,"cbGroupEnabled",void 0),__decorate$Z([RefSelector("eTitle")],AgGroupComponent.prototype,"eTitle",void 0),__decorate$Z([RefSelector("eContainer")],AgGroupComponent.prototype,"eContainer",void 0),__decorate$Z([PostConstruct],AgGroupComponent.prototype,"postConstruct",null),AgGroupComponent}(Component),__extends$X=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$5=function(){return __assign$5=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$5.apply(this,arguments)},__decorate$Y=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AgMenuList=function(_super){function AgMenuList(level){void 0===level&&(level=1);var _this=_super.call(this,'<div class="ag-menu-list" role="tree"></div>')||this;return _this.level=level,_this.menuItems=[],_this}return __extends$X(AgMenuList,_super),AgMenuList.prototype.postConstruct=function(){var _this=this;this.initialiseTabGuard({onTabKeyDown:function(e){return _this.onTabKeyDown(e)},handleKeyDown:function(e){return _this.handleKeyDown(e)}})},AgMenuList.prototype.onTabKeyDown=function(e){var parent=this.getParentComponent(),parentGui=parent&&parent.getGui();parentGui&&parentGui.classList.contains("ag-focus-managed")||e.preventDefault(),e.shiftKey&&this.closeIfIsChild(e)},AgMenuList.prototype.handleKeyDown=function(e){switch(e.key){case KeyCode.UP:case KeyCode.RIGHT:case KeyCode.DOWN:case KeyCode.LEFT:e.preventDefault(),this.handleNavKey(e.key);break;case KeyCode.ESCAPE:var topMenu=this.findTopMenu();topMenu&&this.focusService.focusInto(topMenu.getGui())}},AgMenuList.prototype.clearActiveItem=function(){this.activeMenuItem&&(this.activeMenuItem.deactivate(),this.activeMenuItem=null)},AgMenuList.prototype.addMenuItems=function(menuItems){var _this=this;null!=menuItems&&menuItems.forEach((function(menuItemOrString){"separator"===menuItemOrString?_this.addSeparator():"string"==typeof menuItemOrString?console.warn("AG Grid: unrecognised menu item "+menuItemOrString):_this.addItem(menuItemOrString)}))},AgMenuList.prototype.addItem=function(menuItemDef){var _this=this,menuItem=this.createManagedBean(new AgMenuItemComponent(__assign$5(__assign$5({},menuItemDef),{isAnotherSubMenuOpen:function(){return _this.menuItems.some((function(m){return m.isSubMenuOpen()}))}})));menuItem.setParentComponent(this),setAriaLevel(menuItem.getGui(),this.level),this.menuItems.push(menuItem),this.appendChild(menuItem.getGui()),this.addManagedListener(menuItem,AgMenuItemComponent.EVENT_MENU_ITEM_SELECTED,(function(event){_this.dispatchEvent(event)})),this.addManagedListener(menuItem,AgMenuItemComponent.EVENT_MENU_ITEM_ACTIVATED,(function(event){_this.activeMenuItem&&_this.activeMenuItem!==event.menuItem&&_this.activeMenuItem.deactivate(),_this.activeMenuItem=event.menuItem}))},AgMenuList.prototype.activateFirstItem=function(){var item=this.menuItems.filter((function(currentItem){return!currentItem.isDisabled()}))[0];item&&item.activate()},AgMenuList.prototype.addSeparator=function(){this.appendChild(loadTemplate('\n            <div class="ag-menu-separator" aria-hidden="true">\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n            </div>'))},AgMenuList.prototype.findTopMenu=function(){var parent=this.getParentComponent();if(!parent&&this instanceof AgMenuList)return this;for(;;){var nextParent=parent&&parent.getParentComponent&&parent.getParentComponent();if(!nextParent||!(nextParent instanceof AgMenuList||nextParent instanceof AgMenuItemComponent))break;parent=nextParent}return parent instanceof AgMenuList?parent:void 0},AgMenuList.prototype.handleNavKey=function(key){switch(key){case KeyCode.UP:case KeyCode.DOWN:var nextItem=this.findNextItem(key===KeyCode.UP);return void(nextItem&&nextItem!==this.activeMenuItem&&nextItem.activate())}key===(this.gridOptionsService.is("enableRtl")?KeyCode.RIGHT:KeyCode.LEFT)?this.closeIfIsChild():this.openChild()},AgMenuList.prototype.closeIfIsChild=function(e){var parentItem=this.getParentComponent();parentItem&&parentItem instanceof AgMenuItemComponent&&(e&&e.preventDefault(),parentItem.closeSubMenu(),parentItem.getGui().focus())},AgMenuList.prototype.openChild=function(){this.activeMenuItem&&this.activeMenuItem.openSubMenu(!0)},AgMenuList.prototype.findNextItem=function(up){var items=this.menuItems.filter((function(item){return!item.isDisabled()}));if(items.length){if(!this.activeMenuItem)return up?last(items):items[0];var nextItem;up&&items.reverse();for(var foundCurrent=!1,i=0;i<items.length;i++){var item=items[i];if(foundCurrent){nextItem=item;break}item===this.activeMenuItem&&(foundCurrent=!0)}return nextItem||this.activeMenuItem}},AgMenuList.prototype.destroy=function(){this.clearActiveItem(),_super.prototype.destroy.call(this)},__decorate$Y([Autowired("focusService")],AgMenuList.prototype,"focusService",void 0),__decorate$Y([PostConstruct],AgMenuList.prototype,"postConstruct",null),AgMenuList}(TabGuardComp),__extends$W=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgMenuPanel=function(_super){function AgMenuPanel(wrappedComponent){var _this=_super.call(this)||this;return _this.wrappedComponent=wrappedComponent,_this.setTemplateFromElement(wrappedComponent.getGui()),_this}return __extends$W(AgMenuPanel,_super),AgMenuPanel.prototype.postConstruct=function(){var _this=this;this.initialiseTabGuard({onTabKeyDown:function(e){return _this.onTabKeyDown(e)},handleKeyDown:function(e){return _this.handleKeyDown(e)}})},AgMenuPanel.prototype.handleKeyDown=function(e){e.key===KeyCode.ESCAPE&&this.closePanel()},AgMenuPanel.prototype.onTabKeyDown=function(e){e.defaultPrevented||(this.closePanel(),e.preventDefault())},AgMenuPanel.prototype.closePanel=function(){var menuItem=this.parentComponent;menuItem.closeSubMenu(),setTimeout((function(){return menuItem.getGui().focus()}),0)},function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([PostConstruct],AgMenuPanel.prototype,"postConstruct",null),AgMenuPanel}(TabGuardComp),__extends$V=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$W=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AgMenuItemComponent=function(_super){function AgMenuItemComponent(params){var _this=_super.call(this)||this;return _this.params=params,_this.isActive=!1,_this.subMenuIsOpen=!1,_this.setTemplate('<div class="'+_this.getClassName()+'" tabindex="-1" role="treeitem"></div>'),_this}return __extends$V(AgMenuItemComponent,_super),AgMenuItemComponent.prototype.init=function(){var _this=this;this.addIcon(),this.addName(),this.addShortcut(),this.addSubMenu(),this.addTooltip();var eGui=this.getGui();this.params.disabled?(this.addCssClass(this.getClassName("disabled")),setAriaDisabled(eGui,!0)):(this.addGuiEventListener("click",(function(e){return _this.onItemSelected(e)})),this.addGuiEventListener("keydown",(function(e){e.key!==KeyCode.ENTER&&e.key!==KeyCode.SPACE||(e.preventDefault(),_this.onItemSelected(e))})),this.addGuiEventListener("mousedown",(function(e){e.stopPropagation(),e.preventDefault()})),this.addGuiEventListener("mouseenter",(function(){return _this.onMouseEnter()})),this.addGuiEventListener("mouseleave",(function(){return _this.onMouseLeave()}))),this.params.cssClasses&&this.params.cssClasses.forEach((function(it){return _this.addCssClass(it)}))},AgMenuItemComponent.prototype.isDisabled=function(){return!!this.params.disabled},AgMenuItemComponent.prototype.openSubMenu=function(activateFirstItem){var _this=this;if(void 0===activateFirstItem&&(activateFirstItem=!1),this.closeSubMenu(),this.params.subMenu){var destroySubMenu,ePopup=loadTemplate('<div class="ag-menu" role="presentation"></div>');if(this.params.subMenu instanceof Array){var currentLevel=getAriaLevel(this.getGui()),nextLevel=isNaN(currentLevel)?1:currentLevel+1,childMenu_1=this.createBean(new AgMenuList(nextLevel));childMenu_1.setParentComponent(this),childMenu_1.addMenuItems(this.params.subMenu),ePopup.appendChild(childMenu_1.getGui()),this.addManagedListener(childMenu_1,AgMenuItemComponent.EVENT_MENU_ITEM_SELECTED,(function(e){return _this.dispatchEvent(e)})),childMenu_1.addGuiEventListener("mouseenter",(function(){return _this.cancelDeactivate()})),destroySubMenu=function(){return _this.destroyBean(childMenu_1)},activateFirstItem&&setTimeout((function(){return childMenu_1.activateFirstItem()}),0)}else{var subMenu_1=this.params.subMenu,menuPanel=this.createBean(new AgMenuPanel(subMenu_1));menuPanel.setParentComponent(this);var subMenuGui_1=menuPanel.getGui(),mouseEnterListener_1=function(){return _this.cancelDeactivate()};subMenuGui_1.addEventListener("mouseenter",mouseEnterListener_1),destroySubMenu=function(){return subMenuGui_1.removeEventListener("mouseenter",mouseEnterListener_1)},ePopup.appendChild(subMenuGui_1),subMenu_1.afterGuiAttached&&setTimeout((function(){return subMenu_1.afterGuiAttached()}),0)}var eGui=this.getGui(),positionCallback=this.popupService.positionPopupForMenu.bind(this.popupService,{eventSource:eGui,ePopup}),translate=this.localeService.getLocaleTextFunc(),addPopupRes=this.popupService.addPopup({modal:!0,eChild:ePopup,positionCallback,anchorToElement:eGui,ariaLabel:translate("ariaLabelSubMenu","SubMenu")});this.subMenuIsOpen=!0,setAriaExpanded(eGui,!0),this.hideSubMenu=function(){addPopupRes&&addPopupRes.hideFunc(),_this.subMenuIsOpen=!1,setAriaExpanded(eGui,!1),destroySubMenu()}}},AgMenuItemComponent.prototype.closeSubMenu=function(){this.hideSubMenu&&(this.hideSubMenu(),this.hideSubMenu=null,setAriaExpanded(this.getGui(),!1))},AgMenuItemComponent.prototype.isSubMenuOpen=function(){return this.subMenuIsOpen},AgMenuItemComponent.prototype.activate=function(openSubMenu){var _this=this;this.cancelActivate(),this.params.disabled||(this.isActive=!0,this.addCssClass(this.getClassName("active")),this.getGui().focus(),openSubMenu&&this.params.subMenu&&window.setTimeout((function(){_this.isAlive()&&_this.isActive&&_this.openSubMenu()}),300),this.onItemActivated())},AgMenuItemComponent.prototype.deactivate=function(){this.cancelDeactivate(),this.removeCssClass(this.getClassName("active")),this.isActive=!1,this.subMenuIsOpen&&this.hideSubMenu()},AgMenuItemComponent.prototype.addIcon=function(){if(this.params.checked||this.params.icon||!this.params.isCompact){var icon=loadTemplate('<span ref="eIcon" class="'+this.getClassName("part")+" "+this.getClassName("icon")+'" role="presentation"></span>');this.params.checked?icon.appendChild(createIconNoSpan("check",this.gridOptionsService)):this.params.icon&&(isNodeOrElement(this.params.icon)?icon.appendChild(this.params.icon):"string"==typeof this.params.icon?icon.innerHTML=this.params.icon:console.warn("AG Grid: menu item icon must be DOM node or string")),this.getGui().appendChild(icon)}},AgMenuItemComponent.prototype.addName=function(){if(this.params.name||!this.params.isCompact){var name=loadTemplate('<span ref="eName" class="'+this.getClassName("part")+" "+this.getClassName("text")+'">'+(this.params.name||"")+"</span>");this.getGui().appendChild(name)}},AgMenuItemComponent.prototype.addTooltip=function(){this.params.tooltip&&(this.tooltip=this.params.tooltip,this.gridOptionsService.is("enableBrowserTooltips")?this.getGui().setAttribute("title",this.tooltip):this.createManagedBean(new CustomTooltipFeature(this)))},AgMenuItemComponent.prototype.getTooltipParams=function(){return{location:"menu",value:this.tooltip}},AgMenuItemComponent.prototype.addShortcut=function(){if(this.params.shortcut||!this.params.isCompact){var shortcut=loadTemplate('<span ref="eShortcut" class="'+this.getClassName("part")+" "+this.getClassName("shortcut")+'">'+(this.params.shortcut||"")+"</span>");this.getGui().appendChild(shortcut)}},AgMenuItemComponent.prototype.addSubMenu=function(){if(this.params.subMenu||!this.params.isCompact){var pointer=loadTemplate('<span ref="ePopupPointer" class="'+this.getClassName("part")+" "+this.getClassName("popup-pointer")+'"></span>'),eGui=this.getGui();if(this.params.subMenu){var iconName=this.gridOptionsService.is("enableRtl")?"smallLeft":"smallRight";setAriaExpanded(eGui,!1),pointer.appendChild(createIconNoSpan(iconName,this.gridOptionsService))}eGui.appendChild(pointer)}},AgMenuItemComponent.prototype.onItemSelected=function(event){if(this.params.action?this.params.action():this.openSubMenu(event&&"keydown"===event.type),!this.params.subMenu||this.params.action){var e={type:AgMenuItemComponent.EVENT_MENU_ITEM_SELECTED,action:this.params.action,checked:this.params.checked,cssClasses:this.params.cssClasses,disabled:this.params.disabled,icon:this.params.icon,name:this.params.name,shortcut:this.params.shortcut,subMenu:this.params.subMenu,tooltip:this.params.tooltip,event};this.dispatchEvent(e)}},AgMenuItemComponent.prototype.onItemActivated=function(){var event={type:AgMenuItemComponent.EVENT_MENU_ITEM_ACTIVATED,menuItem:this};this.dispatchEvent(event)},AgMenuItemComponent.prototype.cancelActivate=function(){this.activateTimeoutId&&(window.clearTimeout(this.activateTimeoutId),this.activateTimeoutId=0)},AgMenuItemComponent.prototype.cancelDeactivate=function(){this.deactivateTimeoutId&&(window.clearTimeout(this.deactivateTimeoutId),this.deactivateTimeoutId=0)},AgMenuItemComponent.prototype.onMouseEnter=function(){var _this=this;this.cancelDeactivate(),this.params.isAnotherSubMenuOpen()?this.activateTimeoutId=window.setTimeout((function(){return _this.activate(!0)}),AgMenuItemComponent.ACTIVATION_DELAY):this.activate(!0)},AgMenuItemComponent.prototype.onMouseLeave=function(){var _this=this;this.cancelActivate(),this.isSubMenuOpen()?this.deactivateTimeoutId=window.setTimeout((function(){return _this.deactivate()}),AgMenuItemComponent.ACTIVATION_DELAY):this.deactivate()},AgMenuItemComponent.prototype.getClassName=function(suffix){var prefix=this.params.isCompact?"ag-compact-menu-option":"ag-menu-option";return suffix?prefix+"-"+suffix:prefix},AgMenuItemComponent.EVENT_MENU_ITEM_SELECTED="menuItemSelected",AgMenuItemComponent.EVENT_MENU_ITEM_ACTIVATED="menuItemActivated",AgMenuItemComponent.ACTIVATION_DELAY=80,__decorate$W([Autowired("popupService")],AgMenuItemComponent.prototype,"popupService",void 0),__decorate$W([PostConstruct],AgMenuItemComponent.prototype,"init",null),AgMenuItemComponent}(Component),__extends$U=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$V=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AgPanel=function(_super){function AgPanel(config){var _this=_super.call(this,AgPanel.getTemplate(config))||this;return _this.closable=!0,_this.config=config,_this}return __extends$U(AgPanel,_super),AgPanel.getTemplate=function(config){var cssIdentifier=config&&config.cssIdentifier||"default";return'<div class="ag-panel ag-'+cssIdentifier+'-panel" tabindex="-1">\n            <div ref="eTitleBar" class="ag-panel-title-bar ag-'+cssIdentifier+'-panel-title-bar ag-unselectable">\n                <span ref="eTitle" class="ag-panel-title-bar-title ag-'+cssIdentifier+'-panel-title-bar-title"></span>\n                <div ref="eTitleBarButtons" class="ag-panel-title-bar-buttons ag-'+cssIdentifier+'-panel-title-bar-buttons"></div>\n            </div>\n            <div ref="eContentWrapper" class="ag-panel-content-wrapper ag-'+cssIdentifier+'-panel-content-wrapper"></div>\n        </div>'},AgPanel.prototype.postConstruct=function(){var _this=this,_a=this.config,component=_a.component,closable=_a.closable,hideTitleBar=_a.hideTitleBar,title=_a.title,_b=_a.minWidth,minWidth=void 0===_b?250:_b,width=_a.width,_c=_a.minHeight,minHeight=void 0===_c?250:_c,height=_a.height,centered=_a.centered,popup=_a.popup,x=_a.x,y=_a.y;this.positionableFeature=new PositionableFeature(this.getGui(),{minWidth,width,minHeight,height,centered,x,y,popup,calculateTopBuffer:function(){return _this.positionableFeature.getHeight()-_this.getBodyHeight()}}),this.createManagedBean(this.positionableFeature);var eGui=this.getGui();component&&this.setBodyComponent(component),hideTitleBar?setDisplayed(this.eTitleBar,!1):(title&&this.setTitle(title),this.setClosable(null!=closable?closable:this.closable)),this.addManagedListener(this.eTitleBar,"mousedown",(function(e){var eDocument=_this.gridOptionsService.getDocument();if(eGui.contains(e.relatedTarget)||eGui.contains(eDocument.activeElement)||_this.eTitleBarButtons.contains(e.target))e.preventDefault();else{var focusEl=_this.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");focusEl&&focusEl.focus()}})),popup&&this.positionableFeature.isPositioned()||(this.renderComponent&&this.renderComponent(),this.positionableFeature.initialisePosition(),this.eContentWrapper.style.height="0")},AgPanel.prototype.renderComponent=function(){var _this=this,eGui=this.getGui();eGui.focus(),this.close=function(){eGui.parentElement.removeChild(eGui),_this.destroy()}},AgPanel.prototype.getHeight=function(){return this.positionableFeature.getHeight()},AgPanel.prototype.setHeight=function(height){this.positionableFeature.setHeight(height)},AgPanel.prototype.getWidth=function(){return this.positionableFeature.getWidth()},AgPanel.prototype.setWidth=function(width){this.positionableFeature.setWidth(width)},AgPanel.prototype.setClosable=function(closable){if(closable!==this.closable&&(this.closable=closable),closable){var closeButtonComp=this.closeButtonComp=new Component(AgPanel.CLOSE_BTN_TEMPLATE);this.getContext().createBean(closeButtonComp);var eGui=closeButtonComp.getGui(),child=createIconNoSpan("close",this.gridOptionsService);child.classList.add("ag-panel-title-bar-button-icon"),eGui.appendChild(child),this.addTitleBarButton(closeButtonComp),closeButtonComp.addManagedListener(eGui,"click",this.onBtClose.bind(this))}else if(this.closeButtonComp){(eGui=this.closeButtonComp.getGui()).parentElement.removeChild(eGui),this.closeButtonComp=this.destroyBean(this.closeButtonComp)}},AgPanel.prototype.setBodyComponent=function(bodyComponent){bodyComponent.setParentComponent(this),this.eContentWrapper.appendChild(bodyComponent.getGui())},AgPanel.prototype.addTitleBarButton=function(button,position){var eTitleBarButtons=this.eTitleBarButtons,buttons=eTitleBarButtons.children,len=buttons.length;null==position&&(position=len),position=Math.max(0,Math.min(position,len)),button.addCssClass("ag-panel-title-bar-button");var eGui=button.getGui();0===position?eTitleBarButtons.insertAdjacentElement("afterbegin",eGui):position===len?eTitleBarButtons.insertAdjacentElement("beforeend",eGui):buttons[position-1].insertAdjacentElement("afterend",eGui),button.setParentComponent(this)},AgPanel.prototype.getBodyHeight=function(){return getInnerHeight(this.eContentWrapper)},AgPanel.prototype.getBodyWidth=function(){return getInnerWidth(this.eContentWrapper)},AgPanel.prototype.setTitle=function(title){this.eTitle.innerText=title},AgPanel.prototype.onBtClose=function(){this.close()},AgPanel.prototype.destroy=function(){this.closeButtonComp&&(this.closeButtonComp=this.destroyBean(this.closeButtonComp));var eGui=this.getGui();eGui&&eGui.offsetParent&&this.close(),_super.prototype.destroy.call(this)},AgPanel.CLOSE_BTN_TEMPLATE='<div class="ag-button"></div>',__decorate$V([RefSelector("eContentWrapper")],AgPanel.prototype,"eContentWrapper",void 0),__decorate$V([RefSelector("eTitleBar")],AgPanel.prototype,"eTitleBar",void 0),__decorate$V([RefSelector("eTitleBarButtons")],AgPanel.prototype,"eTitleBarButtons",void 0),__decorate$V([RefSelector("eTitle")],AgPanel.prototype,"eTitle",void 0),__decorate$V([PostConstruct],AgPanel.prototype,"postConstruct",null),AgPanel}(Component),__extends$T=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$4=function(){return __assign$4=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$4.apply(this,arguments)},AgDialog=function(_super){function AgDialog(config){var _this=_super.call(this,__assign$4(__assign$4({},config),{popup:!0}))||this;return _this.isMaximizable=!1,_this.isMaximized=!1,_this.maximizeListeners=[],_this.resizeListenerDestroy=null,_this.lastPosition={x:0,y:0,width:0,height:0},_this}return __extends$T(AgDialog,_super),AgDialog.prototype.postConstruct=function(){var _this=this,eGui=this.getGui(),_a=this.config,movable=_a.movable,resizable=_a.resizable,maximizable=_a.maximizable;this.addCssClass("ag-dialog"),_super.prototype.postConstruct.call(this),this.addManagedListener(eGui,"focusin",(function(e){eGui.contains(e.relatedTarget)||_this.popupService.bringPopupToFront(eGui)})),movable&&this.setMovable(movable),maximizable&&this.setMaximizable(maximizable),resizable&&this.setResizable(resizable)},AgDialog.prototype.renderComponent=function(){var eGui=this.getGui(),_a=this.config,alwaysOnTop=_a.alwaysOnTop,modal=_a.modal,title=_a.title,afterGuiAttached=_a.afterGuiAttached,translate=this.localeService.getLocaleTextFunc(),addPopupRes=this.popupService.addPopup({modal,eChild:eGui,closeOnEsc:!0,closedCallback:this.destroy.bind(this),alwaysOnTop,ariaLabel:title||translate("ariaLabelDialog","Dialog"),afterGuiAttached});addPopupRes&&(this.close=addPopupRes.hideFunc)},AgDialog.prototype.toggleMaximize=function(){var position=this.positionableFeature.getPosition();if(this.isMaximized){var _a=this.lastPosition,x=_a.x,y=_a.y,width=_a.width,height=_a.height;this.setWidth(width),this.setHeight(height),this.positionableFeature.offsetElement(x,y)}else this.lastPosition.width=this.getWidth(),this.lastPosition.height=this.getHeight(),this.lastPosition.x=position.x,this.lastPosition.y=position.y,this.positionableFeature.offsetElement(0,0),this.setHeight("100%"),this.setWidth("100%");this.isMaximized=!this.isMaximized,this.refreshMaximizeIcon()},AgDialog.prototype.refreshMaximizeIcon=function(){setDisplayed(this.maximizeIcon,!this.isMaximized),setDisplayed(this.minimizeIcon,this.isMaximized)},AgDialog.prototype.clearMaximizebleListeners=function(){this.maximizeListeners.length&&(this.maximizeListeners.forEach((function(destroyListener){return destroyListener()})),this.maximizeListeners.length=0),this.resizeListenerDestroy&&(this.resizeListenerDestroy(),this.resizeListenerDestroy=null)},AgDialog.prototype.destroy=function(){this.maximizeButtonComp=this.destroyBean(this.maximizeButtonComp),this.clearMaximizebleListeners(),_super.prototype.destroy.call(this)},AgDialog.prototype.setResizable=function(resizable){this.positionableFeature.setResizable(resizable)},AgDialog.prototype.setMovable=function(movable){this.positionableFeature.setMovable(movable,this.eTitleBar)},AgDialog.prototype.setMaximizable=function(maximizable){var _this=this;if(!maximizable)return this.clearMaximizebleListeners(),void(this.maximizeButtonComp&&(this.destroyBean(this.maximizeButtonComp),this.maximizeButtonComp=this.maximizeIcon=this.minimizeIcon=void 0));var eTitleBar=this.eTitleBar;if(eTitleBar&&maximizable!==this.isMaximizable){var maximizeButtonComp=this.buildMaximizeAndMinimizeElements();this.refreshMaximizeIcon(),maximizeButtonComp.addManagedListener(maximizeButtonComp.getGui(),"click",this.toggleMaximize.bind(this)),this.addTitleBarButton(maximizeButtonComp,0),this.maximizeListeners.push(this.addManagedListener(eTitleBar,"dblclick",this.toggleMaximize.bind(this))),this.resizeListenerDestroy=this.addManagedListener(this,"resize",(function(){_this.isMaximized=!1,_this.refreshMaximizeIcon()}))}},AgDialog.prototype.buildMaximizeAndMinimizeElements=function(){var maximizeButtonComp=this.maximizeButtonComp=this.createBean(new Component('<div class="ag-dialog-button"></span>')),eGui=maximizeButtonComp.getGui();return this.maximizeIcon=createIconNoSpan("maximize",this.gridOptionsService),eGui.appendChild(this.maximizeIcon),this.maximizeIcon.classList.add("ag-panel-title-bar-button-icon"),this.minimizeIcon=createIconNoSpan("minimize",this.gridOptionsService),eGui.appendChild(this.minimizeIcon),this.minimizeIcon.classList.add("ag-panel-title-bar-button-icon"),maximizeButtonComp},function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([Autowired("popupService")],AgDialog.prototype,"popupService",void 0),AgDialog}(AgPanel),__extends$S=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$3=function(){return __assign$3=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$3.apply(this,arguments)},__decorate$T=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};!function(DIRECTION){DIRECTION[DIRECTION.vertical=0]="vertical",DIRECTION[DIRECTION.horizontal=1]="horizontal"}(DIRECTION||(DIRECTION={}));var LoadingType,instanceIdSeq=0,PopupService=function(_super){function PopupService(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.popupList=[],_this}var PopupService_1;return __extends$S(PopupService,_super),PopupService_1=PopupService,PopupService.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady((function(p){_this.gridCtrl=p.gridCtrl,_this.addManagedListener(_this.gridCtrl,Events.EVENT_KEYBOARD_FOCUS,(function(){_this.popupList.forEach((function(popup){return popup.element.classList.add(FocusService.AG_KEYBOARD_FOCUS)}))})),_this.addManagedListener(_this.gridCtrl,Events.EVENT_MOUSE_FOCUS,(function(){_this.popupList.forEach((function(popup){return popup.element.classList.remove(FocusService.AG_KEYBOARD_FOCUS)}))}))}))},PopupService.prototype.getPopupParent=function(){var ePopupParent=this.gridOptionsService.get("popupParent");return ePopupParent||this.gridCtrl.getGui()},PopupService.prototype.positionPopupForMenu=function(params){var eventSource=params.eventSource,ePopup=params.ePopup,popupIdx=this.getPopupIndex(ePopup);-1!==popupIdx&&(this.popupList[popupIdx].alignedToElement=eventSource);var sourceRect=eventSource.getBoundingClientRect(),parentRect=this.getParentRect(),y=this.keepXYWithinBounds(ePopup,sourceRect.top-parentRect.top,DIRECTION.vertical),minWidth=ePopup.clientWidth>0?ePopup.clientWidth:200;ePopup.style.minWidth=minWidth+"px";var x,maxX=parentRect.right-parentRect.left-minWidth;function xRightPosition(){return sourceRect.right-parentRect.left-2}function xLeftPosition(){return sourceRect.left-parentRect.left-minWidth}this.gridOptionsService.is("enableRtl")?((x=xLeftPosition())<0&&(x=xRightPosition(),this.setAlignedStyles(ePopup,"left")),x>maxX&&(x=0,this.setAlignedStyles(ePopup,"right"))):((x=xRightPosition())>maxX&&(x=xLeftPosition(),this.setAlignedStyles(ePopup,"right")),x<0&&(x=0,this.setAlignedStyles(ePopup,"left"))),ePopup.style.left=x+"px",ePopup.style.top=y+"px"},PopupService.prototype.positionPopupUnderMouseEvent=function(params){var _this=this,ePopup=params.ePopup,nudgeX=params.nudgeX,nudgeY=params.nudgeY,skipObserver=params.skipObserver;this.positionPopup({ePopup,nudgeX,nudgeY,keepWithinBounds:!0,skipObserver,updatePosition:function(){return _this.calculatePointerAlign(params.mouseEvent)},postProcessCallback:function(){return _this.callPostProcessPopup(params.type,params.ePopup,null,params.mouseEvent,params.column,params.rowNode)}})},PopupService.prototype.calculatePointerAlign=function(e){var parentRect=this.getParentRect();return{x:e.clientX-parentRect.left,y:e.clientY-parentRect.top}},PopupService.prototype.positionPopupByComponent=function(params){var _this=this,ePopup=params.ePopup,nudgeX=params.nudgeX,nudgeY=params.nudgeY,keepWithinBounds=params.keepWithinBounds,eventSource=params.eventSource,_a=params.alignSide,alignSide=void 0===_a?"left":_a,_b=params.position,position=void 0===_b?"over":_b,column=params.column,rowNode=params.rowNode,type=params.type,sourceRect=eventSource.getBoundingClientRect(),parentRect=this.getParentRect(),popupIdx=this.getPopupIndex(ePopup);-1!==popupIdx&&(this.popupList[popupIdx].alignedToElement=eventSource);this.positionPopup({ePopup,nudgeX,nudgeY,keepWithinBounds,updatePosition:function(){var y,x=sourceRect.left-parentRect.left;("right"===alignSide&&(x-=ePopup.offsetWidth-sourceRect.width),"over"===position)?(y=sourceRect.top-parentRect.top,_this.setAlignedStyles(ePopup,"over")):(_this.setAlignedStyles(ePopup,"under"),y="under"===_this.shouldRenderUnderOrAbove(ePopup,sourceRect,parentRect,params.nudgeY||0)?sourceRect.top-parentRect.top+sourceRect.height:sourceRect.top-ePopup.offsetHeight-2*(nudgeY||0)-parentRect.top);return{x,y}},postProcessCallback:function(){return _this.callPostProcessPopup(type,ePopup,eventSource,null,column,rowNode)}})},PopupService.prototype.shouldRenderUnderOrAbove=function(ePopup,targetCompRect,parentRect,nudgeY){var spaceAvailableUnder=parentRect.bottom-targetCompRect.bottom,spaceAvailableAbove=targetCompRect.top-parentRect.top,spaceRequired=ePopup.offsetHeight+nudgeY;return spaceAvailableUnder>spaceRequired?"under":spaceAvailableAbove>spaceRequired||spaceAvailableAbove>spaceAvailableUnder?"above":"under"},PopupService.prototype.setAlignedStyles=function(ePopup,positioned){var popupIdx=this.getPopupIndex(ePopup);if(-1!==popupIdx){var alignedToElement=this.popupList[popupIdx].alignedToElement;if(alignedToElement){["right","left","over","above","under"].forEach((function(position){alignedToElement.classList.remove("ag-has-popup-positioned-"+position),ePopup.classList.remove("ag-popup-positioned-"+position)})),positioned&&(alignedToElement.classList.add("ag-has-popup-positioned-"+positioned),ePopup.classList.add("ag-popup-positioned-"+positioned))}}},PopupService.prototype.callPostProcessPopup=function(type,ePopup,eventSource,mouseEvent,column,rowNode){var callback=this.gridOptionsService.getCallback("postProcessPopup");callback&&callback({column,rowNode,ePopup,type,eventSource,mouseEvent})},PopupService.prototype.positionPopup=function(params){var _this=this,ePopup=params.ePopup,keepWithinBounds=params.keepWithinBounds,nudgeX=params.nudgeX,nudgeY=params.nudgeY,skipObserver=params.skipObserver,updatePosition=params.updatePosition,lastSize={width:0,height:0},updatePopupPosition=function(fromResizeObserver){void 0===fromResizeObserver&&(fromResizeObserver=!1);var _a=updatePosition(),x=_a.x,y=_a.y;fromResizeObserver&&ePopup.clientWidth===lastSize.width&&ePopup.clientHeight===lastSize.height||(lastSize.width=ePopup.clientWidth,lastSize.height=ePopup.clientHeight,nudgeX&&(x+=nudgeX),nudgeY&&(y+=nudgeY),keepWithinBounds&&(x=_this.keepXYWithinBounds(ePopup,x,DIRECTION.horizontal),y=_this.keepXYWithinBounds(ePopup,y,DIRECTION.vertical)),ePopup.style.left=x+"px",ePopup.style.top=y+"px",params.postProcessCallback&&params.postProcessCallback())};if(updatePopupPosition(),!skipObserver){var resizeObserverDestroyFunc_1=this.resizeObserverService.observeResize(ePopup,(function(){return updatePopupPosition(!0)}));setTimeout((function(){return resizeObserverDestroyFunc_1()}),PopupService_1.WAIT_FOR_POPUP_CONTENT_RESIZE)}},PopupService.prototype.getActivePopups=function(){return this.popupList.map((function(popup){return popup.element}))},PopupService.prototype.getPopupList=function(){return this.popupList},PopupService.prototype.getParentRect=function(){var eDocument=this.gridOptionsService.getDocument(),popupParent=this.getPopupParent();return popupParent===eDocument.body?popupParent=eDocument.documentElement:"static"===getComputedStyle(popupParent).position&&(popupParent=popupParent.offsetParent),getElementRectWithOffset(popupParent)},PopupService.prototype.keepXYWithinBounds=function(ePopup,position,direction){var isVertical=direction===DIRECTION.vertical,sizeProperty=isVertical?"clientHeight":"clientWidth",anchorProperty=isVertical?"top":"left",offsetProperty=isVertical?"offsetHeight":"offsetWidth",scrollPositionProperty=isVertical?"scrollTop":"scrollLeft",eDocument=this.gridOptionsService.getDocument(),docElement=eDocument.documentElement,popupParent=this.getPopupParent(),parentRect=popupParent.getBoundingClientRect(),documentRect=eDocument.documentElement.getBoundingClientRect(),isBody=popupParent===eDocument.body,offsetSize=ePopup[offsetProperty],sizeOfParent=isBody?(isVertical?getAbsoluteHeight:getAbsoluteWidth)(docElement)+docElement[scrollPositionProperty]:popupParent[sizeProperty];isBody&&(sizeOfParent-=Math.abs(documentRect[anchorProperty]-parentRect[anchorProperty]));var max=sizeOfParent-offsetSize;return Math.min(Math.max(position,0),Math.abs(max))},PopupService.prototype.addPopup=function(params){var eDocument=this.gridOptionsService.getDocument(),eChild=params.eChild,ariaLabel=params.ariaLabel,alwaysOnTop=params.alwaysOnTop,positionCallback=params.positionCallback,anchorToElement=params.anchorToElement;if(!eDocument)return console.warn("AG Grid: could not find the document, document is empty"),{hideFunc:function(){}};var pos=this.getPopupIndex(eChild);if(-1!==pos)return{hideFunc:this.popupList[pos].hideFunc};this.initialisePopupPosition(eChild);var wrapperEl=this.createPopupWrapper(eChild,ariaLabel,!!alwaysOnTop),removeListeners=this.addEventListenersToPopup(__assign$3(__assign$3({},params),{wrapperEl}));return positionCallback&&positionCallback(),this.addPopupToPopupList(eChild,wrapperEl,removeListeners,anchorToElement),{hideFunc:removeListeners}},PopupService.prototype.initialisePopupPosition=function(element){var ePopupParentRect=this.getPopupParent().getBoundingClientRect();exists(element.style.top)||(element.style.top=-1*ePopupParentRect.top+"px"),exists(element.style.left)||(element.style.left=-1*ePopupParentRect.left+"px")},PopupService.prototype.createPopupWrapper=function(element,ariaLabel,alwaysOnTop){var _a,ePopupParent=this.getPopupParent(),eWrapper=document.createElement("div"),allThemes=this.environment.getTheme().allThemes;return allThemes.length&&(_a=eWrapper.classList).add.apply(_a,function(to,from){for(var i=0,il=from.length,j=to.length;i<il;i++,j++)to[j]=from[i];return to}([],function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}(allThemes))),eWrapper.classList.add("ag-popup"),element.classList.add(this.gridOptionsService.is("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),element.hasAttribute("role")||setAriaRole(element,"dialog"),setAriaLabel(element,ariaLabel),this.focusService.isKeyboardMode()&&element.classList.add(FocusService.AG_KEYBOARD_FOCUS),eWrapper.appendChild(element),ePopupParent.appendChild(eWrapper),alwaysOnTop?this.setAlwaysOnTop(element,!0):this.bringPopupToFront(element),eWrapper},PopupService.prototype.addEventListenersToPopup=function(params){var _this=this,eDocument=this.gridOptionsService.getDocument(),ePopupParent=this.getPopupParent(),wrapperEl=params.wrapperEl,popupEl=params.eChild,closedCallback=params.closedCallback,afterGuiAttached=params.afterGuiAttached,closeOnEsc=params.closeOnEsc,modal=params.modal,popupHidden=!1,hidePopupOnKeyboardEvent=function(event){wrapperEl.contains(eDocument.activeElement)&&(event.key!==KeyCode.ESCAPE||isStopPropagationForAgGrid(event)||removeListeners({keyboardEvent:event}))},hidePopupOnMouseEvent=function(event){return removeListeners({mouseEvent:event})},hidePopupOnTouchEvent=function(event){return removeListeners({touchEvent:event})},removeListeners=function(popupParams){void 0===popupParams&&(popupParams={});var mouseEvent=popupParams.mouseEvent,touchEvent=popupParams.touchEvent,keyboardEvent=popupParams.keyboardEvent;_this.isEventFromCurrentPopup({mouseEvent,touchEvent},popupEl)||popupHidden||(popupHidden=!0,ePopupParent.removeChild(wrapperEl),eDocument.removeEventListener("keydown",hidePopupOnKeyboardEvent),eDocument.removeEventListener("mousedown",hidePopupOnMouseEvent),eDocument.removeEventListener("touchstart",hidePopupOnTouchEvent),eDocument.removeEventListener("contextmenu",hidePopupOnMouseEvent),_this.eventService.removeEventListener(Events.EVENT_DRAG_STARTED,hidePopupOnMouseEvent),closedCallback&&closedCallback(mouseEvent||touchEvent||keyboardEvent),_this.removePopupFromPopupList(popupEl))};return afterGuiAttached&&afterGuiAttached({hidePopup:removeListeners}),window.setTimeout((function(){closeOnEsc&&eDocument.addEventListener("keydown",hidePopupOnKeyboardEvent),modal&&(eDocument.addEventListener("mousedown",hidePopupOnMouseEvent),_this.eventService.addEventListener(Events.EVENT_DRAG_STARTED,hidePopupOnMouseEvent),eDocument.addEventListener("touchstart",hidePopupOnTouchEvent),eDocument.addEventListener("contextmenu",hidePopupOnMouseEvent))}),0),removeListeners},PopupService.prototype.addPopupToPopupList=function(element,wrapperEl,removeListeners,anchorToElement){this.popupList.push({element,wrapper:wrapperEl,hideFunc:removeListeners,instanceId:instanceIdSeq++,isAnchored:!!anchorToElement}),anchorToElement&&this.setPopupPositionRelatedToElement(element,anchorToElement)},PopupService.prototype.getPopupIndex=function(el){return this.popupList.findIndex((function(p){return p.element===el}))},PopupService.prototype.setPopupPositionRelatedToElement=function(popupEl,relativeElement){var popupIndex=this.getPopupIndex(popupEl);if(-1!==popupIndex){var popup=this.popupList[popupIndex];if(popup.stopAnchoringPromise&&popup.stopAnchoringPromise.then((function(destroyFunc){return destroyFunc&&destroyFunc()})),popup.stopAnchoringPromise=void 0,popup.isAnchored=!1,relativeElement){var destroyPositionTracker=this.keepPopupPositionedRelativeTo({element:relativeElement,ePopup:popupEl,hidePopup:popup.hideFunc});return popup.stopAnchoringPromise=destroyPositionTracker,popup.isAnchored=!0,destroyPositionTracker}}},PopupService.prototype.removePopupFromPopupList=function(element){this.setAlignedStyles(element,null),this.setPopupPositionRelatedToElement(element,null),this.popupList=this.popupList.filter((function(p){return p.element!==element}))},PopupService.prototype.keepPopupPositionedRelativeTo=function(params){var _this=this,eParent=this.getPopupParent(),parentRect=eParent.getBoundingClientRect(),element=params.element,ePopup=params.ePopup,sourceRect=element.getBoundingClientRect(),initialDiffTop=parentRect.top-sourceRect.top,initialDiffLeft=parentRect.left-sourceRect.left,lastDiffTop=initialDiffTop,lastDiffLeft=initialDiffLeft,topPx=ePopup.style.top,top=parseInt(topPx.substring(0,topPx.length-1),10),leftPx=ePopup.style.left,left=parseInt(leftPx.substring(0,leftPx.length-1),10);return new AgPromise((function(resolve){_this.getFrameworkOverrides().setInterval((function(){var pRect=eParent.getBoundingClientRect(),sRect=element.getBoundingClientRect();if(0==sRect.top&&0==sRect.left&&0==sRect.height&&0==sRect.width)params.hidePopup();else{var currentDiffTop=pRect.top-sRect.top;if(currentDiffTop!=lastDiffTop){var newTop=_this.keepXYWithinBounds(ePopup,top+initialDiffTop-currentDiffTop,DIRECTION.vertical);ePopup.style.top=newTop+"px"}lastDiffTop=currentDiffTop;var currentDiffLeft=pRect.left-sRect.left;if(currentDiffLeft!=lastDiffLeft){var newLeft=_this.keepXYWithinBounds(ePopup,left+initialDiffLeft-currentDiffLeft,DIRECTION.horizontal);ePopup.style.left=newLeft+"px"}lastDiffLeft=currentDiffLeft}}),200).then((function(intervalId){resolve((function(){null!=intervalId&&window.clearInterval(intervalId)}))}))}))},PopupService.prototype.hasAnchoredPopup=function(){return this.popupList.some((function(popup){return popup.isAnchored}))},PopupService.prototype.isEventFromCurrentPopup=function(params,target){var mouseEvent=params.mouseEvent,touchEvent=params.touchEvent,event=mouseEvent||touchEvent;if(!event)return!1;var indexOfThisChild=this.getPopupIndex(target);if(-1===indexOfThisChild)return!1;for(var i=indexOfThisChild;i<this.popupList.length;i++){if(isElementInEventPath(this.popupList[i].element,event))return!0}return this.isElementWithinCustomPopup(event.target)},PopupService.prototype.isElementWithinCustomPopup=function(el){for(var eDocument=this.gridOptionsService.getDocument();el&&el!==eDocument.body;){if(el.classList.contains("ag-custom-component-popup")||null===el.parentElement)return!0;el=el.parentElement}return!1},PopupService.prototype.getWrapper=function(ePopup){for(;!ePopup.classList.contains("ag-popup")&&ePopup.parentElement;)ePopup=ePopup.parentElement;return ePopup.classList.contains("ag-popup")?ePopup:null},PopupService.prototype.setAlwaysOnTop=function(ePopup,alwaysOnTop){var eWrapper=this.getWrapper(ePopup);eWrapper&&(eWrapper.classList.toggle("ag-always-on-top",!!alwaysOnTop),alwaysOnTop&&this.bringPopupToFront(eWrapper))},PopupService.prototype.bringPopupToFront=function(ePopup){var parent=this.getPopupParent(),popupList=Array.prototype.slice.call(parent.querySelectorAll(".ag-popup")),popupLen=popupList.length,alwaysOnTopList=Array.prototype.slice.call(parent.querySelectorAll(".ag-popup.ag-always-on-top")),onTopLength=alwaysOnTopList.length,eWrapper=this.getWrapper(ePopup);if(eWrapper&&!(popupLen<=1)&&parent.contains(ePopup)){var pos=popupList.indexOf(eWrapper),innerEls=eWrapper.querySelectorAll("div"),innerElsScrollMap=[];if(innerEls.forEach((function(el){0!==el.scrollTop&&innerElsScrollMap.push([el,el.scrollTop])})),onTopLength)eWrapper.classList.contains("ag-always-on-top")?pos!==popupLen-1&&last(alwaysOnTopList).insertAdjacentElement("afterend",eWrapper):pos!==popupLen-onTopLength-1&&alwaysOnTopList[0].insertAdjacentElement("beforebegin",eWrapper);else pos!==popupLen-1&&last(popupList).insertAdjacentElement("afterend",eWrapper);for(;innerElsScrollMap.length;){var currentEl=innerElsScrollMap.pop();currentEl[0].scrollTop=currentEl[1]}var params={type:"popupToFront",api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,eWrapper};this.eventService.dispatchEvent(params)}},PopupService.WAIT_FOR_POPUP_CONTENT_RESIZE=200,__decorate$T([Autowired("focusService")],PopupService.prototype,"focusService",void 0),__decorate$T([Autowired("ctrlsService")],PopupService.prototype,"ctrlsService",void 0),__decorate$T([Autowired("resizeObserverService")],PopupService.prototype,"resizeObserverService",void 0),__decorate$T([PostConstruct],PopupService.prototype,"postConstruct",null),PopupService=PopupService_1=__decorate$T([Bean("popupService")],PopupService)}(BeanStub),__extends$R=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgAutocompleteRow=function(_super){function AgAutocompleteRow(){var _this=_super.call(this,'\n        <div class="ag-autocomplete-row" role="presentation">\n            <div class="ag-autocomplete-row-label"></div>\n        </div>')||this;return _this.hasHighlighting=!1,_this}return __extends$R(AgAutocompleteRow,_super),AgAutocompleteRow.prototype.setState=function(value,selected){this.value=value,this.render(),this.updateSelected(selected)},AgAutocompleteRow.prototype.updateSelected=function(selected){this.addOrRemoveCssClass("ag-autocomplete-row-selected",selected)},AgAutocompleteRow.prototype.setSearchString=function(searchString){var _a,keepHighlighting=!1;if(exists(searchString)){var index=null===(_a=this.value)||void 0===_a?void 0:_a.toLocaleLowerCase().indexOf(searchString.toLocaleLowerCase());if(index>=0){keepHighlighting=!0,this.hasHighlighting=!0;var highlightEndIndex=index+searchString.length,startPart=escapeString(this.value.slice(0,index)),highlightedPart=escapeString(this.value.slice(index,highlightEndIndex)),endPart=escapeString(this.value.slice(highlightEndIndex));this.getGui().lastElementChild.innerHTML=startPart+"<b>"+highlightedPart+"</b>"+endPart}}!keepHighlighting&&this.hasHighlighting&&(this.hasHighlighting=!1,this.render())},AgAutocompleteRow.prototype.render=function(){var _a;this.getGui().lastElementChild.innerHTML=null!==(_a=escapeString(this.value))&&void 0!==_a?_a:"&nbsp;"},AgAutocompleteRow}(Component),__extends$Q=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$S=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AgAutocompleteList=function(_super){function AgAutocompleteList(params){var _this=_super.call(this,AgAutocompleteList.TEMPLATE)||this;return _this.params=params,_this.searchString="",_this}return __extends$Q(AgAutocompleteList,_super),AgAutocompleteList.prototype.destroy=function(){_super.prototype.destroy.call(this)},AgAutocompleteList.prototype.init=function(){var _this=this;this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList=this.createManagedBean(new VirtualList({cssIdentifier:"autocomplete"})),this.virtualList.setComponentCreator(this.createRowComponent.bind(this)),this.eList.appendChild(this.virtualList.getGui()),this.virtualList.setModel({getRowCount:function(){return _this.autocompleteEntries.length},getRow:function(index){return _this.autocompleteEntries[index]}});var virtualListGui=this.virtualList.getGui();this.addManagedListener(virtualListGui,"click",(function(){return _this.params.onConfirmed()})),this.addManagedListener(virtualListGui,"mousemove",this.onMouseMove.bind(this)),this.addManagedListener(virtualListGui,"mousedown",(function(e){return e.preventDefault()})),this.setSelectedValue(0)},AgAutocompleteList.prototype.onNavigationKeyDown=function(event,key){event.preventDefault();var oldIndex=this.autocompleteEntries.indexOf(this.selectedValue),newIndex=key===KeyCode.UP?oldIndex-1:oldIndex+1;this.checkSetSelectedValue(newIndex)},AgAutocompleteList.prototype.setSearch=function(searchString){this.searchString=searchString,exists(searchString)?this.runSearch():(this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList.refresh(),this.checkSetSelectedValue(0)),this.updateSearchInList()},AgAutocompleteList.prototype.runContainsSearch=function(searchString,searchStrings){var topMatch,topMatchStartsWithSearchString=!1,lowerCaseSearchString=searchString.toLocaleLowerCase(),allMatches=searchStrings.filter((function(string){var index=string.toLocaleLowerCase().indexOf(lowerCaseSearchString),startsWithSearchString=0===index,isMatch=index>=0;return isMatch&&(!topMatch||!topMatchStartsWithSearchString&&startsWithSearchString||topMatchStartsWithSearchString===startsWithSearchString&&string.length<topMatch.length)&&(topMatch=string,topMatchStartsWithSearchString=startsWithSearchString),isMatch}));return!topMatch&&allMatches.length&&(topMatch=allMatches[0]),{topMatch,allMatches}},AgAutocompleteList.prototype.runSearch=function(){var _a,_b,matchingStrings,topSuggestion,autocompleteEntries=this.params.autocompleteEntries,searchStrings=autocompleteEntries.map((function(v){var _a;return null!==(_a=v.displayValue)&&void 0!==_a?_a:v.key}));if(this.params.useFuzzySearch)topSuggestion=(matchingStrings=fuzzySuggestions(this.searchString,searchStrings,!0).values).length?matchingStrings[0]:void 0;else{var containsMatches=this.runContainsSearch(this.searchString,searchStrings);matchingStrings=containsMatches.allMatches,topSuggestion=containsMatches.topMatch}var filteredEntries=autocompleteEntries.filter((function(_a){var key=_a.key,displayValue=_a.displayValue;return matchingStrings.includes(null!=displayValue?displayValue:key)}));if(!filteredEntries.length&&this.selectedValue&&(null===(_b=null===(_a=this.params)||void 0===_a?void 0:_a.forceLastSelection)||void 0===_b?void 0:_b.call(_a,this.selectedValue,this.searchString))&&(filteredEntries=[this.selectedValue]),this.autocompleteEntries=filteredEntries,this.virtualList.refresh(),topSuggestion){var topSuggestionIndex=matchingStrings.indexOf(topSuggestion);this.checkSetSelectedValue(topSuggestionIndex)}},AgAutocompleteList.prototype.updateSearchInList=function(){var _this=this;this.virtualList.forEachRenderedRow((function(row){return row.setSearchString(_this.searchString)}))},AgAutocompleteList.prototype.checkSetSelectedValue=function(index){index>=0&&index<this.autocompleteEntries.length&&this.setSelectedValue(index)},AgAutocompleteList.prototype.setSelectedValue=function(index){var value=this.autocompleteEntries[index];this.selectedValue!==value&&(this.selectedValue=value,this.virtualList.ensureIndexVisible(index),this.virtualList.forEachRenderedRow((function(cmp,idx){cmp.updateSelected(index===idx)})))},AgAutocompleteList.prototype.createRowComponent=function(value){var _a,row=new AgAutocompleteRow;return this.getContext().createBean(row),row.setState(null!==(_a=value.displayValue)&&void 0!==_a?_a:value.key,value===this.selectedValue),row},AgAutocompleteList.prototype.onMouseMove=function(mouseEvent){var rect=this.virtualList.getGui().getBoundingClientRect(),scrollTop=this.virtualList.getScrollTop(),mouseY=mouseEvent.clientY-rect.top+scrollTop,row=Math.floor(mouseY/this.virtualList.getRowHeight());this.checkSetSelectedValue(row)},AgAutocompleteList.prototype.afterGuiAttached=function(){this.virtualList.refresh()},AgAutocompleteList.prototype.getSelectedValue=function(){var _a;return this.autocompleteEntries.length&&null!==(_a=this.selectedValue)&&void 0!==_a?_a:null},AgAutocompleteList.TEMPLATE='<div class="ag-autocomplete-list-popup">\n            <div ref="eList" class="ag-autocomplete-list"></div>\n        <div>',__decorate$S([RefSelector("eList")],AgAutocompleteList.prototype,"eList",void 0),__decorate$S([PostConstruct],AgAutocompleteList.prototype,"init",null),AgAutocompleteList}(PopupComponent),__extends$P=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$R=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AgAutocomplete=function(_super){function AgAutocomplete(){var _this=_super.call(this,'\n            <div class="ag-autocomplete" role="presentation">\n                <ag-input-text-field ref="eAutocompleteInput"></ag-input-text-field>\n            </div>')||this;return _this.isListOpen=!1,_this.lastPosition=0,_this.valid=!0,_this}return __extends$P(AgAutocomplete,_super),AgAutocomplete.prototype.postConstruct=function(){var _this=this;this.eAutocompleteInput.onValueChange((function(value){return _this.onValueChanged(value)})),this.eAutocompleteInput.getInputElement().setAttribute("autocomplete","off"),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.addGuiEventListener("click",this.updatePositionAndList.bind(this)),this.addDestroyFunc((function(){_this.destroyBean(_this.autocompleteList)})),this.addGuiEventListener("focusout",(function(){return _this.onFocusOut()}))},AgAutocomplete.prototype.onValueChanged=function(value){var parsedValue=makeNull(value);this.updateValue(parsedValue),this.updateAutocompleteList(parsedValue)},AgAutocomplete.prototype.updateValue=function(value){this.updateLastPosition(),this.dispatchEvent({type:AgAutocomplete.EVENT_VALUE_CHANGED,value}),this.validate(value)},AgAutocomplete.prototype.updateAutocompleteList=function(value){var _a,_b,_c,_d,autocompleteListParams=null!==(_b=null===(_a=this.listGenerator)||void 0===_a?void 0:_a.call(this,value,this.lastPosition))&&void 0!==_b?_b:{enabled:!1};if(autocompleteListParams.type&&autocompleteListParams.type===(null===(_c=this.autocompleteListParams)||void 0===_c?void 0:_c.type)||this.isListOpen&&this.closeList(),this.autocompleteListParams=autocompleteListParams,null===(_d=this.autocompleteListParams)||void 0===_d?void 0:_d.enabled){this.isListOpen||this.openList();var searchString=this.autocompleteListParams.searchString;this.autocompleteList.setSearch(null!=searchString?searchString:"")}else this.isListOpen&&this.closeList()},AgAutocomplete.prototype.onKeyDown=function(event){var _this=this,key=event.key;switch(this.updateLastPosition(),key){case KeyCode.ENTER:this.onEnterKeyDown(event);break;case KeyCode.TAB:this.onTabKeyDown(event);break;case KeyCode.DOWN:case KeyCode.UP:this.onUpDownKeyDown(event,key);break;case KeyCode.LEFT:case KeyCode.RIGHT:case KeyCode.PAGE_HOME:case KeyCode.PAGE_END:setTimeout((function(){_this.updatePositionAndList()}));break;case KeyCode.ESCAPE:this.onEscapeKeyDown(event);break;case KeyCode.SPACE:event.ctrlKey&&!this.isListOpen&&(event.preventDefault(),this.forceOpenList())}},AgAutocomplete.prototype.confirmSelection=function(){var _a,selectedValue=null===(_a=this.autocompleteList)||void 0===_a?void 0:_a.getSelectedValue();selectedValue&&(this.closeList(),this.dispatchEvent({type:AgAutocomplete.EVENT_OPTION_SELECTED,value:this.getValue(),position:this.lastPosition,updateEntry:selectedValue,autocompleteType:this.autocompleteListParams.type}))},AgAutocomplete.prototype.onTabKeyDown=function(event){this.isListOpen&&(event.preventDefault(),event.stopPropagation(),this.confirmSelection())},AgAutocomplete.prototype.onEnterKeyDown=function(event){event.preventDefault(),this.isListOpen?this.confirmSelection():this.onCompleted()},AgAutocomplete.prototype.onUpDownKeyDown=function(event,key){var _a;event.preventDefault(),this.isListOpen?null===(_a=this.autocompleteList)||void 0===_a||_a.onNavigationKeyDown(event,key):this.forceOpenList()},AgAutocomplete.prototype.onEscapeKeyDown=function(event){this.isListOpen&&(event.preventDefault(),event.stopPropagation(),this.closeList(),this.setCaret(this.lastPosition,!0))},AgAutocomplete.prototype.onFocusOut=function(){this.isListOpen&&this.closeList()},AgAutocomplete.prototype.updatePositionAndList=function(){var _a;this.updateLastPosition(),this.updateAutocompleteList(null!==(_a=this.eAutocompleteInput.getValue())&&void 0!==_a?_a:null)},AgAutocomplete.prototype.setCaret=function(position,setFocus){var eDocument=this.gridOptionsService.getDocument();setFocus&&eDocument.activeElement===eDocument.body&&this.eAutocompleteInput.getFocusableElement().focus(),this.eAutocompleteInput.getInputElement().setSelectionRange(position,position)},AgAutocomplete.prototype.forceOpenList=function(){this.onValueChanged(this.eAutocompleteInput.getValue())},AgAutocomplete.prototype.updateLastPosition=function(){var _a;this.lastPosition=null!==(_a=this.eAutocompleteInput.getInputElement().selectionStart)&&void 0!==_a?_a:0},AgAutocomplete.prototype.validate=function(value){var _a;this.validator&&(this.validationMessage=this.validator(value),this.eAutocompleteInput.getInputElement().setCustomValidity(null!==(_a=this.validationMessage)&&void 0!==_a?_a:""),this.valid=!this.validationMessage,this.dispatchEvent({type:AgAutocomplete.EVENT_VALID_CHANGED,isValid:this.valid,validationMessage:this.validationMessage}))},AgAutocomplete.prototype.openList=function(){var _this=this;this.isListOpen=!0,this.autocompleteList=this.createBean(new AgAutocompleteList({autocompleteEntries:this.autocompleteListParams.entries,onConfirmed:function(){return _this.confirmSelection()},forceLastSelection:this.forceLastSelection}));var ePopupGui=this.autocompleteList.getGui(),positionParams={ePopup:ePopupGui,type:"autocomplete",eventSource:this.getGui(),position:"under",alignSide:this.gridOptionsService.is("enableRtl")?"right":"left",keepWithinBounds:!0},addPopupRes=this.popupService.addPopup({eChild:ePopupGui,anchorToElement:this.getGui(),positionCallback:function(){return _this.popupService.positionPopupByComponent(positionParams)},ariaLabel:this.listAriaLabel});this.hidePopup=addPopupRes.hideFunc,this.autocompleteList.afterGuiAttached()},AgAutocomplete.prototype.closeList=function(){this.isListOpen=!1,this.hidePopup(),this.destroyBean(this.autocompleteList),this.autocompleteList=null},AgAutocomplete.prototype.onCompleted=function(){this.isListOpen&&this.closeList(),this.dispatchEvent({type:AgAutocomplete.EVENT_VALUE_CONFIRMED,value:this.getValue(),isValid:this.isValid()})},AgAutocomplete.prototype.getValue=function(){return makeNull(this.eAutocompleteInput.getValue())},AgAutocomplete.prototype.setInputPlaceholder=function(placeholder){return this.eAutocompleteInput.setInputPlaceholder(placeholder),this},AgAutocomplete.prototype.setInputAriaLabel=function(label){return this.eAutocompleteInput.setInputAriaLabel(label),this},AgAutocomplete.prototype.setListAriaLabel=function(label){return this.listAriaLabel=label,this},AgAutocomplete.prototype.setListGenerator=function(listGenerator){return this.listGenerator=listGenerator,this},AgAutocomplete.prototype.setValidator=function(validator){return this.validator=validator,this},AgAutocomplete.prototype.isValid=function(){return this.valid},AgAutocomplete.prototype.setValue=function(params){var value=params.value,position=params.position,silent=params.silent,updateListOnlyIfOpen=params.updateListOnlyIfOpen,restoreFocus=params.restoreFocus;this.eAutocompleteInput.setValue(value,!0),this.setCaret(null!=position?position:this.lastPosition,restoreFocus),silent||this.updateValue(value),updateListOnlyIfOpen&&!this.isListOpen||this.updateAutocompleteList(value)},AgAutocomplete.prototype.setForceLastSelection=function(forceLastSelection){return this.forceLastSelection=forceLastSelection,this},AgAutocomplete.prototype.setInputDisabled=function(disabled){return this.eAutocompleteInput.setDisabled(disabled),this},AgAutocomplete.EVENT_VALUE_CHANGED="eventValueChanged",AgAutocomplete.EVENT_VALUE_CONFIRMED="eventValueConfirmed",AgAutocomplete.EVENT_OPTION_SELECTED="eventOptionSelected",AgAutocomplete.EVENT_VALID_CHANGED="eventValidChanged",__decorate$R([Autowired("popupService")],AgAutocomplete.prototype,"popupService",void 0),__decorate$R([RefSelector("eAutocompleteInput")],AgAutocomplete.prototype,"eAutocompleteInput",void 0),__decorate$R([PostConstruct],AgAutocomplete.prototype,"postConstruct",null),AgAutocomplete}(Component),OUTSIDE_ANGULAR_EVENTS=["mouseover","mouseout","mouseenter","mouseleave","mousemove"],PASSIVE_EVENTS=["touchstart","touchend","touchmove","touchcancel"],VanillaFrameworkOverrides=function(){function VanillaFrameworkOverrides(){this.renderingEngine="vanilla",this.isOutsideAngular=function(eventType){return includes(OUTSIDE_ANGULAR_EVENTS,eventType)}}return VanillaFrameworkOverrides.prototype.setTimeout=function(action,timeout){window.setTimeout(action,timeout)},VanillaFrameworkOverrides.prototype.setInterval=function(action,timeout){return new AgPromise((function(resolve){resolve(window.setInterval(action,timeout))}))},VanillaFrameworkOverrides.prototype.addEventListener=function(element,type,listener,useCapture){var isPassive=includes(PASSIVE_EVENTS,type);element.addEventListener(type,listener,{capture:!!useCapture,passive:isPassive})},VanillaFrameworkOverrides.prototype.dispatchEvent=function(eventType,listener,global){listener()},VanillaFrameworkOverrides.prototype.frameworkComponent=function(name){return null},VanillaFrameworkOverrides.prototype.isFrameworkComponent=function(comp){return!1},VanillaFrameworkOverrides}(),__extends$O=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$Q=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},CellNavigationService=function(_super){function CellNavigationService(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$O(CellNavigationService,_super),CellNavigationService.prototype.getNextCellToFocus=function(key,focusedCell,ctrlPressed){return void 0===ctrlPressed&&(ctrlPressed=!1),ctrlPressed?this.getNextCellToFocusWithCtrlPressed(key,focusedCell):this.getNextCellToFocusWithoutCtrlPressed(key,focusedCell)},CellNavigationService.prototype.getNextCellToFocusWithCtrlPressed=function(key,focusedCell){var column,rowIndex,upKey=key===KeyCode.UP,downKey=key===KeyCode.DOWN,leftKey=key===KeyCode.LEFT;if(upKey||downKey)rowIndex=upKey?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow(),column=focusedCell.column;else{var allColumns=this.columnModel.getAllDisplayedColumns(),isRtl=this.gridOptionsService.is("enableRtl");rowIndex=focusedCell.rowIndex,column=leftKey!==isRtl?allColumns[0]:last(allColumns)}return{rowIndex,rowPinned:null,column}},CellNavigationService.prototype.getNextCellToFocusWithoutCtrlPressed=function(key,focusedCell){for(var pointer=focusedCell,finished=!1;!finished;){switch(key){case KeyCode.UP:pointer=this.getCellAbove(pointer);break;case KeyCode.DOWN:pointer=this.getCellBelow(pointer);break;case KeyCode.RIGHT:pointer=this.gridOptionsService.is("enableRtl")?this.getCellToLeft(pointer):this.getCellToRight(pointer);break;case KeyCode.LEFT:pointer=this.gridOptionsService.is("enableRtl")?this.getCellToRight(pointer):this.getCellToLeft(pointer);break;default:pointer=null,console.warn("AG Grid: unknown key for navigation "+key)}finished=!pointer||this.isCellGoodToFocusOn(pointer)}return pointer},CellNavigationService.prototype.isCellGoodToFocusOn=function(gridCell){var rowNode,column=gridCell.column;switch(gridCell.rowPinned){case"top":rowNode=this.pinnedRowModel.getPinnedTopRow(gridCell.rowIndex);break;case"bottom":rowNode=this.pinnedRowModel.getPinnedBottomRow(gridCell.rowIndex);break;default:rowNode=this.rowModel.getRow(gridCell.rowIndex)}return!!rowNode&&!column.isSuppressNavigable(rowNode)},CellNavigationService.prototype.getCellToLeft=function(lastCell){if(!lastCell)return null;var colToLeft=this.columnModel.getDisplayedColBefore(lastCell.column);return colToLeft?{rowIndex:lastCell.rowIndex,column:colToLeft,rowPinned:lastCell.rowPinned}:null},CellNavigationService.prototype.getCellToRight=function(lastCell){if(!lastCell)return null;var colToRight=this.columnModel.getDisplayedColAfter(lastCell.column);return colToRight?{rowIndex:lastCell.rowIndex,column:colToRight,rowPinned:lastCell.rowPinned}:null},CellNavigationService.prototype.getRowBelow=function(rowPosition){var index=rowPosition.rowIndex,pinned=rowPosition.rowPinned;if(this.isLastRowInContainer(rowPosition))switch(pinned){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.paginationProxy.getPageFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}var rowNode=this.rowModel.getRow(rowPosition.rowIndex),nextStickyPosition=this.getNextStickyPosition(rowNode);return nextStickyPosition||{rowIndex:index+1,rowPinned:pinned}},CellNavigationService.prototype.getNextStickyPosition=function(rowNode,up){if(this.gridOptionsService.isGroupRowsSticky()&&rowNode&&rowNode.sticky){var stickyRowCtrls=function(to,from){for(var i=0,il=from.length,j=to.length;i<il;i++,j++)to[j]=from[i];return to}([],function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}(this.rowRenderer.getStickyTopRowCtrls())).sort((function(a,b){return a.getRowNode().rowIndex-b.getRowNode().rowIndex})),diff=up?-1:1,idx=stickyRowCtrls.findIndex((function(ctrl){return ctrl.getRowNode().rowIndex===rowNode.rowIndex})),nextCtrl=stickyRowCtrls[idx+diff];return nextCtrl?{rowIndex:nextCtrl.getRowNode().rowIndex,rowPinned:null}:void 0}},CellNavigationService.prototype.getCellBelow=function(lastCell){if(!lastCell)return null;var rowBelow=this.getRowBelow(lastCell);return rowBelow?{rowIndex:rowBelow.rowIndex,column:lastCell.column,rowPinned:rowBelow.rowPinned}:null},CellNavigationService.prototype.isLastRowInContainer=function(rowPosition){var pinned=rowPosition.rowPinned,index=rowPosition.rowIndex;return"top"===pinned?this.pinnedRowModel.getPinnedTopRowData().length-1<=index:"bottom"===pinned?this.pinnedRowModel.getPinnedBottomRowData().length-1<=index:this.paginationProxy.getPageLastRow()<=index},CellNavigationService.prototype.getRowAbove=function(rowPosition){var index=rowPosition.rowIndex,pinned=rowPosition.rowPinned;if(pinned?0===index:index===this.paginationProxy.getPageFirstRow())return"top"===pinned?null:pinned&&this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;var rowNode=this.rowModel.getRow(rowPosition.rowIndex),nextStickyPosition=this.getNextStickyPosition(rowNode,!0);return nextStickyPosition||{rowIndex:index-1,rowPinned:pinned}},CellNavigationService.prototype.getCellAbove=function(lastCell){if(!lastCell)return null;var rowAbove=this.getRowAbove({rowIndex:lastCell.rowIndex,rowPinned:lastCell.rowPinned});return rowAbove?{rowIndex:rowAbove.rowIndex,column:lastCell.column,rowPinned:rowAbove.rowPinned}:null},CellNavigationService.prototype.getLastBodyCell=function(){return{rowIndex:this.paginationProxy.getPageLastRow(),rowPinned:null}},CellNavigationService.prototype.getLastFloatingTopRow=function(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowData().length-1,rowPinned:"top"}},CellNavigationService.prototype.getNextTabbedCell=function(gridCell,backwards){return backwards?this.getNextTabbedCellBackwards(gridCell):this.getNextTabbedCellForwards(gridCell)},CellNavigationService.prototype.getNextTabbedCellForwards=function(gridCell){var displayedColumns=this.columnModel.getAllDisplayedColumns(),newRowIndex=gridCell.rowIndex,newFloating=gridCell.rowPinned,newColumn=this.columnModel.getDisplayedColAfter(gridCell.column);if(!newColumn){newColumn=displayedColumns[0];var rowBelow=this.getRowBelow(gridCell);if(missing(rowBelow))return null;if(!rowBelow.rowPinned&&!this.paginationProxy.isRowInPage(rowBelow))return null;newRowIndex=rowBelow?rowBelow.rowIndex:null,newFloating=rowBelow?rowBelow.rowPinned:null}return{rowIndex:newRowIndex,column:newColumn,rowPinned:newFloating}},CellNavigationService.prototype.getNextTabbedCellBackwards=function(gridCell){var displayedColumns=this.columnModel.getAllDisplayedColumns(),newRowIndex=gridCell.rowIndex,newFloating=gridCell.rowPinned,newColumn=this.columnModel.getDisplayedColBefore(gridCell.column);if(!newColumn){newColumn=last(displayedColumns);var rowAbove=this.getRowAbove({rowIndex:gridCell.rowIndex,rowPinned:gridCell.rowPinned});if(missing(rowAbove))return null;if(!rowAbove.rowPinned&&!this.paginationProxy.isRowInPage(rowAbove))return null;newRowIndex=rowAbove?rowAbove.rowIndex:null,newFloating=rowAbove?rowAbove.rowPinned:null}return{rowIndex:newRowIndex,column:newColumn,rowPinned:newFloating}},__decorate$Q([Autowired("columnModel")],CellNavigationService.prototype,"columnModel",void 0),__decorate$Q([Autowired("rowModel")],CellNavigationService.prototype,"rowModel",void 0),__decorate$Q([Autowired("rowRenderer")],CellNavigationService.prototype,"rowRenderer",void 0),__decorate$Q([Autowired("pinnedRowModel")],CellNavigationService.prototype,"pinnedRowModel",void 0),__decorate$Q([Autowired("paginationProxy")],CellNavigationService.prototype,"paginationProxy",void 0),CellNavigationService=__decorate$Q([Bean("cellNavigationService")],CellNavigationService)}(BeanStub),__extends$N=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$P=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AlignedGridsService=function(_super){function AlignedGridsService(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.consuming=!1,_this}var paramIndex,decorator;return __extends$N(AlignedGridsService,_super),AlignedGridsService.prototype.setBeans=function(loggerFactory){this.logger=loggerFactory.create("AlignedGridsService")},AlignedGridsService.prototype.init=function(){this.addManagedListener(this.eventService,Events.EVENT_COLUMN_MOVED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VISIBLE,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PINNED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_GROUP_OPENED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_RESIZED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_BODY_SCROLL,this.fireScrollEvent.bind(this))},AlignedGridsService.prototype.fireEvent=function(callback){if(!this.consuming){var otherGrids=this.gridOptionsService.get("alignedGrids");otherGrids&&otherGrids.forEach((function(otherGridOptions){if(otherGridOptions.api){var alignedGridService=otherGridOptions.api.__getAlignedGridService();callback(alignedGridService)}}))}},AlignedGridsService.prototype.onEvent=function(callback){this.consuming=!0,callback(),this.consuming=!1},AlignedGridsService.prototype.fireColumnEvent=function(event){this.fireEvent((function(alignedGridsService){alignedGridsService.onColumnEvent(event)}))},AlignedGridsService.prototype.fireScrollEvent=function(event){"horizontal"===event.direction&&this.fireEvent((function(alignedGridsService){alignedGridsService.onScrollEvent(event)}))},AlignedGridsService.prototype.onScrollEvent=function(event){var _this=this;this.onEvent((function(){_this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(event.left,!0)}))},AlignedGridsService.prototype.getMasterColumns=function(event){var result=[];return event.columns?event.columns.forEach((function(column){result.push(column)})):event.column&&result.push(event.column),result},AlignedGridsService.prototype.getColumnIds=function(event){var result=[];return event.columns?event.columns.forEach((function(column){result.push(column.getColId())})):event.column&&result.push(event.column.getColId()),result},AlignedGridsService.prototype.onColumnEvent=function(event){var _this=this;this.onEvent((function(){switch(event.type){case Events.EVENT_COLUMN_MOVED:case Events.EVENT_COLUMN_VISIBLE:case Events.EVENT_COLUMN_PINNED:case Events.EVENT_COLUMN_RESIZED:var colEvent=event;_this.processColumnEvent(colEvent);break;case Events.EVENT_COLUMN_GROUP_OPENED:var groupOpenedEvent=event;_this.processGroupOpenedEvent(groupOpenedEvent);break;case Events.EVENT_COLUMN_PIVOT_CHANGED:console.warn("AG Grid: pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.")}}))},AlignedGridsService.prototype.processGroupOpenedEvent=function(groupOpenedEvent){var masterColumnGroup=groupOpenedEvent.columnGroup,otherColumnGroup=null;if(masterColumnGroup){var groupId=masterColumnGroup.getGroupId();otherColumnGroup=this.columnModel.getProvidedColumnGroup(groupId)}masterColumnGroup&&!otherColumnGroup||(this.logger.log("onColumnEvent-> processing "+groupOpenedEvent+" expanded = "+masterColumnGroup.isExpanded()),this.columnModel.setColumnGroupOpened(otherColumnGroup,masterColumnGroup.isExpanded(),"alignedGridChanged"))},AlignedGridsService.prototype.processColumnEvent=function(colEvent){var _a,_this=this,masterColumn=colEvent.column,otherColumn=null;if(masterColumn&&(otherColumn=this.columnModel.getPrimaryColumn(masterColumn.getColId())),!masterColumn||otherColumn){var masterColumns=this.getMasterColumns(colEvent);switch(colEvent.type){case Events.EVENT_COLUMN_MOVED:var movedEvent=colEvent,destColState=colEvent.columnApi.getColumnState().map((function(s){return{colId:s.colId}}));this.columnModel.applyColumnState({state:destColState,applyOrder:!0},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing "+colEvent.type+" toIndex = "+movedEvent.toIndex);break;case Events.EVENT_COLUMN_VISIBLE:var visibleEvent=colEvent;destColState=colEvent.columnApi.getColumnState().map((function(s){return{colId:s.colId,hide:s.hide}}));this.columnModel.applyColumnState({state:destColState},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing "+colEvent.type+" visible = "+visibleEvent.visible);break;case Events.EVENT_COLUMN_PINNED:var pinnedEvent=colEvent;destColState=colEvent.columnApi.getColumnState().map((function(s){return{colId:s.colId,pinned:s.pinned}}));this.columnModel.applyColumnState({state:destColState},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing "+colEvent.type+" pinned = "+pinnedEvent.pinned);break;case Events.EVENT_COLUMN_RESIZED:var resizedEvent=colEvent,columnWidths_1={};masterColumns.forEach((function(column){_this.logger.log("onColumnEvent-> processing "+colEvent.type+" actualWidth = "+column.getActualWidth()),columnWidths_1[column.getId()]={key:column.getColId(),newWidth:column.getActualWidth()}})),null===(_a=resizedEvent.flexColumns)||void 0===_a||_a.forEach((function(col){columnWidths_1[col.getId()]&&delete columnWidths_1[col.getId()]})),this.columnModel.setColumnWidths(Object.values(columnWidths_1),!1,resizedEvent.finished,"alignedGridChanged")}var isVerticalScrollShowing=this.ctrlsService.getGridBodyCtrl().isVerticalScrollShowing(),alignedGrids=this.gridOptionsService.get("alignedGrids");alignedGrids&&alignedGrids.forEach((function(grid){grid.api&&grid.api.setAlwaysShowVerticalScroll(isVerticalScrollShowing)}))}},__decorate$P([Autowired("columnModel")],AlignedGridsService.prototype,"columnModel",void 0),__decorate$P([Autowired("ctrlsService")],AlignedGridsService.prototype,"ctrlsService",void 0),__decorate$P([(paramIndex=0,decorator=Qualifier("loggerFactory"),function(target,key){decorator(target,key,paramIndex)})],AlignedGridsService.prototype,"setBeans",null),__decorate$P([PostConstruct],AlignedGridsService.prototype,"init",null),AlignedGridsService=__decorate$P([Bean("alignedGridsService")],AlignedGridsService)}(BeanStub),__extends$M=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$O=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SelectionService=function(_super){function SelectionService(){return null!==_super&&_super.apply(this,arguments)||this}var paramIndex,decorator;return __extends$M(SelectionService,_super),SelectionService.prototype.setBeans=function(loggerFactory){this.logger=loggerFactory.create("selectionService"),this.reset()},SelectionService.prototype.init=function(){var _this=this;this.groupSelectsChildren=this.gridOptionsService.is("groupSelectsChildren"),this.addManagedPropertyListener("groupSelectsChildren",(function(propChange){return _this.groupSelectsChildren=propChange.currentValue})),this.rowSelection=this.gridOptionsService.get("rowSelection"),this.addManagedPropertyListener("rowSelection",(function(propChange){return _this.rowSelection=propChange.currentValue})),this.addManagedListener(this.eventService,Events.EVENT_ROW_SELECTED,this.onRowSelected.bind(this))},SelectionService.prototype.isMultiselect=function(){return"multiple"===this.rowSelection},SelectionService.prototype.setNodesSelected=function(params){var _a;if(0===params.nodes.length)return 0;var newValue=params.newValue,clearSelection=params.clearSelection,suppressFinishActions=params.suppressFinishActions,rangeSelect=params.rangeSelect,_b=params.source,source=void 0===_b?"api":_b;if(params.nodes.length>1&&!this.isMultiselect())return console.warn("AG Grid: cannot multi select while rowSelection='single'"),0;var groupSelectsFiltered=this.groupSelectsChildren&&!0===params.groupSelectsFiltered,nodes=params.nodes.map((function(node){return node.footer?node.sibling:node}));if(rangeSelect){if(params.nodes.length>1)return console.warn("AG Grid: cannot range select while selecting multiple rows"),0;var lastSelectedNode=this.getLastSelectedNode();if(lastSelectedNode)if(lastSelectedNode!==(node=nodes[0])&&this.isMultiselect()){var nodesChanged=this.selectRange(node,lastSelectedNode,params.newValue,source);return this.setLastSelectedNode(node),nodesChanged}}for(var updatedCount=0,i=0;i<nodes.length;i++){var node=nodes[i];if(!(groupSelectsFiltered&&node.group))node.selectThisNode(newValue,params.event,source)&&updatedCount++;this.groupSelectsChildren&&(null===(_a=node.childrenAfterGroup)||void 0===_a?void 0:_a.length)&&(updatedCount+=this.selectChildren(node,newValue,groupSelectsFiltered,source))}if(!suppressFinishActions){if(newValue&&(clearSelection||!this.isMultiselect())&&(updatedCount+=this.clearOtherNodes(nodes[0],source)),updatedCount>0){this.updateGroupsFromChildrenSelections(source);var event_1={type:Events.EVENT_SELECTION_CHANGED,source};this.eventService.dispatchEvent(event_1)}newValue&&this.setLastSelectedNode(nodes[nodes.length-1])}return updatedCount},SelectionService.prototype.selectRange=function(fromNode,toNode,value,source){var _this=this;void 0===value&&(value=!0);var nodesToSelect=this.rowModel.getNodesInRangeForSelection(fromNode,toNode),updatedCount=0;nodesToSelect.forEach((function(rowNode){rowNode.group&&_this.groupSelectsChildren||!1===value&&fromNode===rowNode||rowNode.selectThisNode(value,void 0,source)&&updatedCount++})),this.updateGroupsFromChildrenSelections(source);var event={type:Events.EVENT_SELECTION_CHANGED,source};return this.eventService.dispatchEvent(event),updatedCount},SelectionService.prototype.selectChildren=function(node,newValue,groupSelectsFiltered,source){var children=groupSelectsFiltered?node.childrenAfterAggFilter:node.childrenAfterGroup;return _.missing(children)?0:this.setNodesSelected({newValue,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered,source,nodes:children})},SelectionService.prototype.setLastSelectedNode=function(rowNode){this.lastSelectedNode=rowNode},SelectionService.prototype.getLastSelectedNode=function(){return this.lastSelectedNode},SelectionService.prototype.getSelectedNodes=function(){var selectedNodes=[];return iterateObject(this.selectedNodes,(function(key,rowNode){rowNode&&selectedNodes.push(rowNode)})),selectedNodes},SelectionService.prototype.getSelectedRows=function(){var selectedRows=[];return iterateObject(this.selectedNodes,(function(key,rowNode){rowNode&&rowNode.data&&selectedRows.push(rowNode.data)})),selectedRows},SelectionService.prototype.getSelectionCount=function(){return Object.values(this.selectedNodes).length},SelectionService.prototype.filterFromSelection=function(predicate){var newSelectedNodes={};Object.entries(this.selectedNodes).forEach((function(_a){var _b=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}(_a,2),key=_b[0],node=_b[1];node&&predicate(node)&&(newSelectedNodes[key]=node)})),this.selectedNodes=newSelectedNodes},SelectionService.prototype.updateGroupsFromChildrenSelections=function(source,changedPath){if(!this.groupSelectsChildren)return!1;if("clientSide"!==this.rowModel.getType())return!1;var rootNode=this.rowModel.getRootNode();changedPath||(changedPath=new ChangedPath(!0,rootNode)).setInactive();var selectionChanged=!1;return changedPath.forEachChangedNodeDepthFirst((function(rowNode){if(rowNode!==rootNode){var selected=rowNode.calculateSelectedFromChildren();selectionChanged=rowNode.selectThisNode(null!==selected&&selected,void 0,source)||selectionChanged}})),selectionChanged},SelectionService.prototype.clearOtherNodes=function(rowNodeToKeepSelected,source){var _this=this,groupsToRefresh={},updatedCount=0;return iterateObject(this.selectedNodes,(function(key,otherRowNode){if(otherRowNode&&otherRowNode.id!==rowNodeToKeepSelected.id){var rowNode=_this.selectedNodes[otherRowNode.id];updatedCount+=rowNode.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source}),_this.groupSelectsChildren&&otherRowNode.parent&&(groupsToRefresh[otherRowNode.parent.id]=otherRowNode.parent)}})),iterateObject(groupsToRefresh,(function(key,group){var selected=group.calculateSelectedFromChildren();group.selectThisNode(null!==selected&&selected,void 0,source)})),updatedCount},SelectionService.prototype.onRowSelected=function(event){var rowNode=event.node;this.groupSelectsChildren&&rowNode.group||(rowNode.isSelected()?this.selectedNodes[rowNode.id]=rowNode:delete this.selectedNodes[rowNode.id])},SelectionService.prototype.syncInRowNode=function(rowNode,oldNode){this.syncInOldRowNode(rowNode,oldNode),this.syncInNewRowNode(rowNode)},SelectionService.prototype.syncInOldRowNode=function(rowNode,oldNode){if(exists(oldNode)&&rowNode.id!==oldNode.id&&oldNode){var id=oldNode.id;this.selectedNodes[id]==rowNode&&(this.selectedNodes[oldNode.id]=oldNode)}},SelectionService.prototype.syncInNewRowNode=function(rowNode){exists(this.selectedNodes[rowNode.id])?(rowNode.setSelectedInitialValue(!0),this.selectedNodes[rowNode.id]=rowNode):rowNode.setSelectedInitialValue(!1)},SelectionService.prototype.reset=function(){this.logger.log("reset"),this.selectedNodes={},this.lastSelectedNode=null},SelectionService.prototype.getBestCostNodeSelection=function(){if("clientSide"===this.rowModel.getType()){var topLevelNodes=this.rowModel.getTopLevelNodes();if(null!==topLevelNodes){var result=[];return function traverse(nodes){for(var i=0,l=nodes.length;i<l;i++){var node=nodes[i];if(node.isSelected())result.push(node);else{var maybeGroup=node;maybeGroup.group&&maybeGroup.children&&traverse(maybeGroup.children)}}}(topLevelNodes),result}}},SelectionService.prototype.isEmpty=function(){var count=0;return iterateObject(this.selectedNodes,(function(nodeId,rowNode){rowNode&&count++})),0===count},SelectionService.prototype.deselectAllRowNodes=function(params){var callback=function(rowNode){return rowNode.selectThisNode(!1,void 0,source)},rowModelClientSide="clientSide"===this.rowModel.getType(),source=params.source,justFiltered=params.justFiltered,justCurrentPage=params.justCurrentPage;if(justCurrentPage||justFiltered){if(!rowModelClientSide)return void console.error("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'");this.getNodesToSelect(justFiltered,justCurrentPage).forEach(callback)}else iterateObject(this.selectedNodes,(function(id,rowNode){rowNode&&callback(rowNode)})),this.reset();rowModelClientSide&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(source);var event={type:Events.EVENT_SELECTION_CHANGED,source};this.eventService.dispatchEvent(event)},SelectionService.prototype.getSelectAllState=function(justFiltered,justCurrentPage){var _this=this,selectedCount=0,notSelectedCount=0;return this.getNodesToSelect(justFiltered,justCurrentPage).forEach((function(node){_this.groupSelectsChildren&&node.group||(node.isSelected()?selectedCount++:node.selectable&&notSelectedCount++)})),(0!==selectedCount||0!==notSelectedCount)&&(selectedCount>0&&notSelectedCount>0?null:selectedCount>0)},SelectionService.prototype.getNodesToSelect=function(justFiltered,justCurrentPage){var _this=this;if(void 0===justFiltered&&(justFiltered=!1),void 0===justCurrentPage&&(justCurrentPage=!1),"clientSide"!==this.rowModel.getType())throw new Error("selectAll only available when rowModelType='clientSide', ie not "+this.rowModel.getType());var nodes=[];if(justCurrentPage)return this.paginationProxy.forEachNodeOnPage((function(node){if(node.group)if(node.expanded)_this.groupSelectsChildren||nodes.push(node);else{var recursivelyAddChildren_1=function(child){var _a;nodes.push(child),(null===(_a=child.childrenAfterFilter)||void 0===_a?void 0:_a.length)&&child.childrenAfterFilter.forEach(recursivelyAddChildren_1)};recursivelyAddChildren_1(node)}else nodes.push(node)})),nodes;var clientSideRowModel=this.rowModel;return justFiltered?(clientSideRowModel.forEachNodeAfterFilter((function(node){nodes.push(node)})),nodes):(clientSideRowModel.forEachNode((function(node){nodes.push(node)})),nodes)},SelectionService.prototype.selectAllRowNodes=function(params){if("clientSide"!==this.rowModel.getType())throw new Error("selectAll only available when rowModelType='clientSide', ie not "+this.rowModel.getType());var source=params.source,justFiltered=params.justFiltered,justCurrentPage=params.justCurrentPage;this.getNodesToSelect(justFiltered,justCurrentPage).forEach((function(rowNode){return rowNode.selectThisNode(!0,void 0,source)})),"clientSide"===this.rowModel.getType()&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(source);var event={type:Events.EVENT_SELECTION_CHANGED,source};this.eventService.dispatchEvent(event)},SelectionService.prototype.getServerSideSelectionState=function(){return null},SelectionService.prototype.setServerSideSelectionState=function(state){},__decorate$O([Autowired("rowModel")],SelectionService.prototype,"rowModel",void 0),__decorate$O([Autowired("paginationProxy")],SelectionService.prototype,"paginationProxy",void 0),__decorate$O([(paramIndex=0,decorator=Qualifier("loggerFactory"),function(target,key){decorator(target,key,paramIndex)})],SelectionService.prototype,"setBeans",null),__decorate$O([PostConstruct],SelectionService.prototype,"init",null),SelectionService=__decorate$O([Bean("selectionService")],SelectionService)}(BeanStub),__decorate$N=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ColumnApi=function(){function ColumnApi(){}return ColumnApi.prototype.sizeColumnsToFit=function(gridWidth){void 0===gridWidth&&console.error("AG Grid: missing parameter to columnApi.sizeColumnsToFit(gridWidth)"),this.columnModel.sizeColumnsToFit(gridWidth,"api")},ColumnApi.prototype.setColumnGroupOpened=function(group,newValue){this.columnModel.setColumnGroupOpened(group,newValue,"api")},ColumnApi.prototype.getColumnGroup=function(name,instanceId){return this.columnModel.getColumnGroup(name,instanceId)},ColumnApi.prototype.getProvidedColumnGroup=function(name){return this.columnModel.getProvidedColumnGroup(name)},ColumnApi.prototype.getDisplayNameForColumn=function(column,location){return this.columnModel.getDisplayNameForColumn(column,location)||""},ColumnApi.prototype.getDisplayNameForColumnGroup=function(columnGroup,location){return this.columnModel.getDisplayNameForColumnGroup(columnGroup,location)||""},ColumnApi.prototype.getColumn=function(key){return this.columnModel.getPrimaryColumn(key)},ColumnApi.prototype.getColumns=function(){return this.columnModel.getAllPrimaryColumns()},ColumnApi.prototype.applyColumnState=function(params){return this.columnModel.applyColumnState(params,"api")},ColumnApi.prototype.getColumnState=function(){return this.columnModel.getColumnState()},ColumnApi.prototype.resetColumnState=function(){this.columnModel.resetColumnState("api")},ColumnApi.prototype.getColumnGroupState=function(){return this.columnModel.getColumnGroupState()},ColumnApi.prototype.setColumnGroupState=function(stateItems){this.columnModel.setColumnGroupState(stateItems,"api")},ColumnApi.prototype.resetColumnGroupState=function(){this.columnModel.resetColumnGroupState("api")},ColumnApi.prototype.isPinning=function(){return this.columnModel.isPinningLeft()||this.columnModel.isPinningRight()},ColumnApi.prototype.isPinningLeft=function(){return this.columnModel.isPinningLeft()},ColumnApi.prototype.isPinningRight=function(){return this.columnModel.isPinningRight()},ColumnApi.prototype.getDisplayedColAfter=function(col){return this.columnModel.getDisplayedColAfter(col)},ColumnApi.prototype.getDisplayedColBefore=function(col){return this.columnModel.getDisplayedColBefore(col)},ColumnApi.prototype.setColumnVisible=function(key,visible){this.columnModel.setColumnVisible(key,visible,"api")},ColumnApi.prototype.setColumnsVisible=function(keys,visible){this.columnModel.setColumnsVisible(keys,visible,"api")},ColumnApi.prototype.setColumnPinned=function(key,pinned){this.columnModel.setColumnPinned(key,pinned,"api")},ColumnApi.prototype.setColumnsPinned=function(keys,pinned){this.columnModel.setColumnsPinned(keys,pinned,"api")},ColumnApi.prototype.getAllGridColumns=function(){return this.columnModel.getAllGridColumns()},ColumnApi.prototype.getDisplayedLeftColumns=function(){return this.columnModel.getDisplayedLeftColumns()},ColumnApi.prototype.getDisplayedCenterColumns=function(){return this.columnModel.getDisplayedCenterColumns()},ColumnApi.prototype.getDisplayedRightColumns=function(){return this.columnModel.getDisplayedRightColumns()},ColumnApi.prototype.getAllDisplayedColumns=function(){return this.columnModel.getAllDisplayedColumns()},ColumnApi.prototype.getAllDisplayedVirtualColumns=function(){return this.columnModel.getViewportColumns()},ColumnApi.prototype.moveColumn=function(key,toIndex){this.columnModel.moveColumn(key,toIndex,"api")},ColumnApi.prototype.moveColumnByIndex=function(fromIndex,toIndex){this.columnModel.moveColumnByIndex(fromIndex,toIndex,"api")},ColumnApi.prototype.moveColumns=function(columnsToMoveKeys,toIndex){this.columnModel.moveColumns(columnsToMoveKeys,toIndex,"api")},ColumnApi.prototype.moveRowGroupColumn=function(fromIndex,toIndex){this.columnModel.moveRowGroupColumn(fromIndex,toIndex)},ColumnApi.prototype.setColumnAggFunc=function(key,aggFunc){this.columnModel.setColumnAggFunc(key,aggFunc)},ColumnApi.prototype.setColumnWidth=function(key,newWidth,finished,source){void 0===finished&&(finished=!0),this.columnModel.setColumnWidths([{key,newWidth}],!1,finished,source)},ColumnApi.prototype.setColumnWidths=function(columnWidths,finished,source){void 0===finished&&(finished=!0),this.columnModel.setColumnWidths(columnWidths,!1,finished,source)},ColumnApi.prototype.setPivotMode=function(pivotMode){this.columnModel.setPivotMode(pivotMode)},ColumnApi.prototype.isPivotMode=function(){return this.columnModel.isPivotMode()},ColumnApi.prototype.getPivotResultColumn=function(pivotKeys,valueColKey){return this.columnModel.getSecondaryPivotColumn(pivotKeys,valueColKey)},ColumnApi.prototype.setValueColumns=function(colKeys){this.columnModel.setValueColumns(colKeys,"api")},ColumnApi.prototype.getValueColumns=function(){return this.columnModel.getValueColumns()},ColumnApi.prototype.removeValueColumn=function(colKey){this.columnModel.removeValueColumn(colKey,"api")},ColumnApi.prototype.removeValueColumns=function(colKeys){this.columnModel.removeValueColumns(colKeys,"api")},ColumnApi.prototype.addValueColumn=function(colKey){this.columnModel.addValueColumn(colKey,"api")},ColumnApi.prototype.addValueColumns=function(colKeys){this.columnModel.addValueColumns(colKeys,"api")},ColumnApi.prototype.setRowGroupColumns=function(colKeys){this.columnModel.setRowGroupColumns(colKeys,"api")},ColumnApi.prototype.removeRowGroupColumn=function(colKey){this.columnModel.removeRowGroupColumn(colKey,"api")},ColumnApi.prototype.removeRowGroupColumns=function(colKeys){this.columnModel.removeRowGroupColumns(colKeys,"api")},ColumnApi.prototype.addRowGroupColumn=function(colKey){this.columnModel.addRowGroupColumn(colKey,"api")},ColumnApi.prototype.addRowGroupColumns=function(colKeys){this.columnModel.addRowGroupColumns(colKeys,"api")},ColumnApi.prototype.getRowGroupColumns=function(){return this.columnModel.getRowGroupColumns()},ColumnApi.prototype.setPivotColumns=function(colKeys){this.columnModel.setPivotColumns(colKeys,"api")},ColumnApi.prototype.removePivotColumn=function(colKey){this.columnModel.removePivotColumn(colKey,"api")},ColumnApi.prototype.removePivotColumns=function(colKeys){this.columnModel.removePivotColumns(colKeys,"api")},ColumnApi.prototype.addPivotColumn=function(colKey){this.columnModel.addPivotColumn(colKey,"api")},ColumnApi.prototype.addPivotColumns=function(colKeys){this.columnModel.addPivotColumns(colKeys,"api")},ColumnApi.prototype.getPivotColumns=function(){return this.columnModel.getPivotColumns()},ColumnApi.prototype.getLeftDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeLeft()},ColumnApi.prototype.getCenterDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeCentre()},ColumnApi.prototype.getRightDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeRight()},ColumnApi.prototype.getAllDisplayedColumnGroups=function(){return this.columnModel.getAllDisplayedTrees()},ColumnApi.prototype.autoSizeColumn=function(key,skipHeader){return this.columnModel.autoSizeColumn(key,skipHeader,"api")},ColumnApi.prototype.autoSizeColumns=function(keys,skipHeader){this.columnModel.autoSizeColumns({columns:keys,skipHeader})},ColumnApi.prototype.autoSizeAllColumns=function(skipHeader){this.columnModel.autoSizeAllColumns(skipHeader,"api")},ColumnApi.prototype.setPivotResultColumns=function(colDefs){this.columnModel.setSecondaryColumns(colDefs,"api")},ColumnApi.prototype.getPivotResultColumns=function(){return this.columnModel.getSecondaryColumns()},ColumnApi.prototype.cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid=function(){setTimeout(_.removeAllReferences.bind(window,this,"Column API"),100)},ColumnApi.prototype.getAllColumns=function(){return logDeprecation("28.0","getAllColumns","getColumns"),this.getColumns()},ColumnApi.prototype.getPrimaryColumns=function(){return logDeprecation("28.0","getPrimaryColumns","getColumns"),this.getColumns()},ColumnApi.prototype.getSecondaryColumns=function(){return logDeprecation("28.0","getSecondaryColumns","getPivotResultColumns"),this.getPivotResultColumns()},ColumnApi.prototype.setSecondaryColumns=function(colDefs){logDeprecation("28.0","setSecondaryColumns","setPivotResultColumns"),this.setPivotResultColumns(colDefs)},ColumnApi.prototype.getSecondaryPivotColumn=function(pivotKeys,valueColKey){return logDeprecation("28.0","getSecondaryPivotColumn","getPivotResultColumn"),this.getPivotResultColumn(pivotKeys,valueColKey)},__decorate$N([Autowired("columnModel")],ColumnApi.prototype,"columnModel",void 0),__decorate$N([PreDestroy],ColumnApi.prototype,"cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid",null),ColumnApi=__decorate$N([Bean("columnApi")],ColumnApi)}(),__extends$L=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$M=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ValueService=function(_super){function ValueService(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.initialised=!1,_this.isSsrm=!1,_this}return __extends$L(ValueService,_super),ValueService.prototype.init=function(){var _this=this;this.isSsrm=this.gridOptionsService.isRowModelType("serverSide"),this.cellExpressions=this.gridOptionsService.is("enableCellExpressions"),this.isTreeData=this.gridOptionsService.is("treeData"),this.initialised=!0,this.eventService.addEventListener(Events.EVENT_CELL_VALUE_CHANGED,(function(event){return _this.callColumnCellValueChangedHandler(event)}),this.gridOptionsService.useAsyncEvents()),this.addManagedPropertyListener("treeData",(function(propChange){return _this.isTreeData=propChange.currentValue}))},ValueService.prototype.getValue=function(column,rowNode,forFilter,ignoreAggData){if(void 0===forFilter&&(forFilter=!1),void 0===ignoreAggData&&(ignoreAggData=!1),this.initialised||this.init(),rowNode){var result,colDef=column.getColDef(),field=colDef.field,colId=column.getColId(),data=rowNode.data,groupDataExists=rowNode.groupData&&void 0!==rowNode.groupData[colId],aggDataExists=!ignoreAggData&&rowNode.aggData&&void 0!==rowNode.aggData[colId],ignoreSsrmAggData=this.isSsrm&&ignoreAggData&&!!column.getColDef().aggFunc,ssrmFooterGroupCol=this.isSsrm&&rowNode.footer&&rowNode.field&&(!0===column.getColDef().showRowGroup||column.getColDef().showRowGroup===rowNode.field);if(forFilter&&colDef.filterValueGetter?result=this.executeFilterValueGetter(colDef.filterValueGetter,data,column,rowNode):this.isTreeData&&aggDataExists?result=rowNode.aggData[colId]:this.isTreeData&&colDef.valueGetter?result=this.executeValueGetter(colDef.valueGetter,data,column,rowNode):this.isTreeData&&field&&data?result=getValueUsingField(data,field,column.isFieldContainsDots()):groupDataExists?result=rowNode.groupData[colId]:aggDataExists?result=rowNode.aggData[colId]:colDef.valueGetter?result=this.executeValueGetter(colDef.valueGetter,data,column,rowNode):ssrmFooterGroupCol?result=getValueUsingField(data,rowNode.field,column.isFieldContainsDots()):field&&data&&!ignoreSsrmAggData&&(result=getValueUsingField(data,field,column.isFieldContainsDots())),this.cellExpressions&&"string"==typeof result&&0===result.indexOf("=")){var cellValueGetter=result.substring(1);result=this.executeValueGetter(cellValueGetter,data,column,rowNode)}if(null==result){var openedGroup=this.getOpenedGroup(rowNode,column);if(null!=openedGroup)return openedGroup}return result}},ValueService.prototype.getOpenedGroup=function(rowNode,column){if(this.gridOptionsService.is("showOpenedGroup")&&column.getColDef().showRowGroup)for(var showRowGroup=column.getColDef().showRowGroup,pointer=rowNode.parent;null!=pointer;){if(pointer.rowGroupColumn&&(!0===showRowGroup||showRowGroup===pointer.rowGroupColumn.getColId()))return pointer.key;pointer=pointer.parent}},ValueService.prototype.setValue=function(rowNode,colKey,newValue,eventSource){var column=this.columnModel.getPrimaryColumn(colKey);if(!rowNode||!column)return!1;missing(rowNode.data)&&(rowNode.data={});var _a=column.getColDef(),field=_a.field,valueSetter=_a.valueSetter;if(missing(field)&&missing(valueSetter))return console.warn("AG Grid: you need either field or valueSetter set on colDef for editing to work"),!1;if(!this.dataTypeService.checkType(column,newValue))return console.warn("AG Grid: Data type of the new value does not match the cell data type of the column"),!1;var valueWasDifferent,params={node:rowNode,data:rowNode.data,oldValue:this.getValue(column,rowNode),newValue,colDef:column.getColDef(),column,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};if(params.newValue=newValue,void 0===(valueWasDifferent=exists(valueSetter)?"function"==typeof valueSetter?valueSetter(params):this.expressionService.evaluate(valueSetter,params):this.setValueUsingField(rowNode.data,field,newValue,column.isFieldContainsDots()))&&(valueWasDifferent=!0),!valueWasDifferent)return!1;rowNode.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),params.newValue=this.getValue(column,rowNode);var event={type:Events.EVENT_CELL_VALUE_CHANGED,event:null,rowIndex:rowNode.rowIndex,rowPinned:rowNode.rowPinned,column:params.column,api:params.api,columnApi:params.columnApi,colDef:params.colDef,context:params.context,data:rowNode.data,node:rowNode,oldValue:params.oldValue,newValue:params.newValue,value:params.newValue,source:eventSource};return this.eventService.dispatchEvent(event),!0},ValueService.prototype.callColumnCellValueChangedHandler=function(event){var onCellValueChanged=event.colDef.onCellValueChanged;"function"==typeof onCellValueChanged&&onCellValueChanged({node:event.node,data:event.data,oldValue:event.oldValue,newValue:event.newValue,colDef:event.colDef,column:event.column,api:event.api,columnApi:event.columnApi,context:event.context})},ValueService.prototype.setValueUsingField=function(data,field,newValue,isFieldContainsDots){if(!field)return!1;var valuesAreSame=!1;if(isFieldContainsDots)for(var fieldPieces=field.split("."),currentObject=data;fieldPieces.length>0&&currentObject;){var fieldPiece=fieldPieces.shift();0===fieldPieces.length?(valuesAreSame=currentObject[fieldPiece]===newValue)||(currentObject[fieldPiece]=newValue):currentObject=currentObject[fieldPiece]}else(valuesAreSame=data[field]===newValue)||(data[field]=newValue);return!valuesAreSame},ValueService.prototype.executeFilterValueGetter=function(valueGetter,data,column,rowNode){var params={data,node:rowNode,column,colDef:column.getColDef(),api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,getValue:this.getValueCallback.bind(this,rowNode)};return"function"==typeof valueGetter?valueGetter(params):this.expressionService.evaluate(valueGetter,params)},ValueService.prototype.executeValueGetter=function(valueGetter,data,column,rowNode){var colId=column.getColId(),valueFromCache=this.valueCache.getValue(rowNode,colId);if(void 0!==valueFromCache)return valueFromCache;var result,params={data,node:rowNode,column,colDef:column.getColDef(),api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,getValue:this.getValueCallback.bind(this,rowNode)};return result="function"==typeof valueGetter?valueGetter(params):this.expressionService.evaluate(valueGetter,params),this.valueCache.setValue(rowNode,colId,result),result},ValueService.prototype.getValueCallback=function(node,field){var otherColumn=this.columnModel.getPrimaryColumn(field);return otherColumn?this.getValue(otherColumn,node):null},ValueService.prototype.getKeyForNode=function(col,rowNode){var value=this.getValue(col,rowNode),keyCreator=col.getColDef().keyCreator,result=value;keyCreator&&(result=keyCreator({value,colDef:col.getColDef(),column:col,node:rowNode,data:rowNode.data,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}));return"string"==typeof result||null==result||"[object Object]"===(result=String(result))&&doOnce((function(){console.warn("AG Grid: a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")}),"getKeyForNode - warn about [object,object]"),result},__decorate$M([Autowired("expressionService")],ValueService.prototype,"expressionService",void 0),__decorate$M([Autowired("columnModel")],ValueService.prototype,"columnModel",void 0),__decorate$M([Autowired("valueCache")],ValueService.prototype,"valueCache",void 0),__decorate$M([Autowired("dataTypeService")],ValueService.prototype,"dataTypeService",void 0),__decorate$M([PostConstruct],ValueService.prototype,"init",null),ValueService=__decorate$M([Bean("valueService")],ValueService)}(BeanStub),__extends$K=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$L=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ExpressionService=function(_super){function ExpressionService(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.expressionToFunctionCache={},_this}var paramIndex,decorator;return __extends$K(ExpressionService,_super),ExpressionService.prototype.setBeans=function(loggerFactory){this.logger=loggerFactory.create("ExpressionService")},ExpressionService.prototype.evaluate=function(expression,params){if("string"==typeof expression)return this.evaluateExpression(expression,params);console.error("AG Grid: value should be either a string or a function",expression)},ExpressionService.prototype.evaluateExpression=function(expression,params){try{return this.createExpressionFunction(expression)(params.value,params.context,params.oldValue,params.newValue,params.value,params.node,params.data,params.colDef,params.rowIndex,params.api,params.columnApi,params.getValue,params.column,params.columnGroup)}catch(e){return console.log("Processing of the expression failed"),console.log("Expression = "+expression),console.log("Params =",params),console.log("Exception = "+e),null}},ExpressionService.prototype.createExpressionFunction=function(expression){if(this.expressionToFunctionCache[expression])return this.expressionToFunctionCache[expression];var functionBody=this.createFunctionBody(expression),theFunction=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, columnApi, getValue, column, columnGroup",functionBody);return this.expressionToFunctionCache[expression]=theFunction,theFunction},ExpressionService.prototype.createFunctionBody=function(expression){return expression.indexOf("return")>=0?expression:"return "+expression+";"},__decorate$L([(paramIndex=0,decorator=Qualifier("loggerFactory"),function(target,key){decorator(target,key,paramIndex)})],ExpressionService.prototype,"setBeans",null),ExpressionService=__decorate$L([Bean("expressionService")],ExpressionService)}(BeanStub),__extends$J=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),TemplateService=function(_super){function TemplateService(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.templateCache={},_this.waitingCallbacks={},_this}return __extends$J(TemplateService,_super),TemplateService.prototype.getTemplate=function(url,callback){var templateFromCache=this.templateCache[url];if(templateFromCache)return templateFromCache;var callbackList=this.waitingCallbacks[url],that=this;if(!callbackList){callbackList=[],this.waitingCallbacks[url]=callbackList;var client=new XMLHttpRequest;client.onload=function(){that.handleHttpResult(this,url)},client.open("GET",url),client.send()}return callback&&callbackList.push(callback),null},TemplateService.prototype.handleHttpResult=function(httpResult,url){if(200===httpResult.status&&null!==httpResult.response){this.templateCache[url]=httpResult.response||httpResult.responseText;for(var callbacks=this.waitingCallbacks[url],i=0;i<callbacks.length;i++){(0,callbacks[i])()}}else console.warn("AG Grid: Unable to get template error "+httpResult.status+" - "+url)},TemplateService=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}([Bean("templateService")],TemplateService),TemplateService}(BeanStub),__extends$I=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$J=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},LoggerFactory=function(_super){function LoggerFactory(){return null!==_super&&_super.apply(this,arguments)||this}var paramIndex,decorator;return __extends$I(LoggerFactory,_super),LoggerFactory.prototype.setBeans=function(gridOptionsService){this.logging=gridOptionsService.is("debug")},LoggerFactory.prototype.create=function(name){return new Logger(name,this.isLogging.bind(this))},LoggerFactory.prototype.isLogging=function(){return this.logging},__decorate$J([(paramIndex=0,decorator=Qualifier("gridOptionsService"),function(target,key){decorator(target,key,paramIndex)})],LoggerFactory.prototype,"setBeans",null),LoggerFactory=__decorate$J([Bean("loggerFactory")],LoggerFactory)}(BeanStub),Logger=function(){function Logger(name,isLoggingFunc){this.name=name,this.isLoggingFunc=isLoggingFunc}return Logger.prototype.isLogging=function(){return this.isLoggingFunc()},Logger.prototype.log=function(message){this.isLoggingFunc()&&console.log("AG Grid."+this.name+": "+message)},Logger}(),__extends$H=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$I=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},GridCtrl=function(_super){function GridCtrl(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$H(GridCtrl,_super),GridCtrl.prototype.setComp=function(view,eGridDiv,eGui){var _this=this;this.view=view,this.eGridHostDiv=eGridDiv,this.eGui=eGui,this.eGui.setAttribute("grid-id",this.context.getGridId()),this.dragAndDropService.addDropTarget({getContainer:function(){return _this.eGui},isInterestedIn:function(type){return type===DragSourceType.HeaderCell||type===DragSourceType.ToolPanel},getIconName:function(){return DragAndDropService.ICON_NOT_ALLOWED}}),this.mouseEventService.stampTopLevelGridCompWithGridInstance(eGridDiv),this.createManagedBean(new LayoutFeature(this.view)),this.addRtlSupport(),this.addManagedListener(this,Events.EVENT_KEYBOARD_FOCUS,(function(){_this.view.addOrRemoveKeyboardFocusClass(!0)})),this.addManagedListener(this,Events.EVENT_MOUSE_FOCUS,(function(){_this.view.addOrRemoveKeyboardFocusClass(!1)}));var unsubscribeFromResize=this.resizeObserverService.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc((function(){return unsubscribeFromResize()})),this.ctrlsService.registerGridCtrl(this)},GridCtrl.prototype.isDetailGrid=function(){var _a,el=this.focusService.findTabbableParent(this.getGui());return(null===(_a=null==el?void 0:el.getAttribute("row-id"))||void 0===_a?void 0:_a.startsWith("detail"))||!1},GridCtrl.prototype.showDropZones=function(){return ModuleRegistry.__isRegistered(ModuleNames.RowGroupingModule,this.context.getGridId())},GridCtrl.prototype.showSideBar=function(){return ModuleRegistry.__isRegistered(ModuleNames.SideBarModule,this.context.getGridId())},GridCtrl.prototype.showStatusBar=function(){return ModuleRegistry.__isRegistered(ModuleNames.StatusBarModule,this.context.getGridId())},GridCtrl.prototype.showWatermark=function(){return ModuleRegistry.__isRegistered(ModuleNames.EnterpriseCoreModule,this.context.getGridId())},GridCtrl.prototype.onGridSizeChanged=function(){var event={type:Events.EVENT_GRID_SIZE_CHANGED,clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight};this.eventService.dispatchEvent(event)},GridCtrl.prototype.addRtlSupport=function(){var cssClass=this.gridOptionsService.is("enableRtl")?"ag-rtl":"ag-ltr";this.view.setRtlClass(cssClass)},GridCtrl.prototype.destroyGridUi=function(){this.view.destroyGridUi()},GridCtrl.prototype.getGui=function(){return this.eGui},GridCtrl.prototype.setResizeCursor=function(on){this.view.setCursor(on?"ew-resize":null)},GridCtrl.prototype.disableUserSelect=function(on){this.view.setUserSelect(on?"none":null)},GridCtrl.prototype.focusNextInnerContainer=function(backwards){var eDocument=this.gridOptionsService.getDocument(),focusableContainers=this.view.getFocusableContainers(),nextIdx=focusableContainers.findIndex((function(container){return container.contains(eDocument.activeElement)}))+(backwards?-1:1);return!(nextIdx<=0||nextIdx>=focusableContainers.length)&&this.focusService.focusInto(focusableContainers[nextIdx])},GridCtrl.prototype.focusInnerElement=function(fromBottom){var focusableContainers=this.view.getFocusableContainers(),allColumns=this.columnModel.getAllDisplayedColumns();if(fromBottom){if(focusableContainers.length>1)return this.focusService.focusInto(last(focusableContainers),!0);var lastColumn=last(allColumns);if(this.focusService.focusGridView(lastColumn,!0))return!0}return 0===this.gridOptionsService.getNum("headerHeight")?this.focusService.focusGridView(allColumns[0]):this.focusService.focusFirstHeader()},GridCtrl.prototype.forceFocusOutOfContainer=function(up){void 0===up&&(up=!1),this.view.forceFocusOutOfContainer(up)},__decorate$I([Autowired("focusService")],GridCtrl.prototype,"focusService",void 0),__decorate$I([Autowired("resizeObserverService")],GridCtrl.prototype,"resizeObserverService",void 0),__decorate$I([Autowired("columnModel")],GridCtrl.prototype,"columnModel",void 0),__decorate$I([Autowired("ctrlsService")],GridCtrl.prototype,"ctrlsService",void 0),__decorate$I([Autowired("mouseEventService")],GridCtrl.prototype,"mouseEventService",void 0),__decorate$I([Autowired("dragAndDropService")],GridCtrl.prototype,"dragAndDropService",void 0),GridCtrl}(BeanStub),__extends$G=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$H=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},GridComp=function(_super){function GridComp(eGridDiv){var _this=_super.call(this)||this;return _this.eGridDiv=eGridDiv,_this}return __extends$G(GridComp,_super),GridComp.prototype.postConstruct=function(){var _this=this;this.logger=this.loggerFactory.create("GridComp");var compProxy={destroyGridUi:function(){return _this.destroyBean(_this)},setRtlClass:function(cssClass){return _this.addCssClass(cssClass)},addOrRemoveKeyboardFocusClass:function(addOrRemove){return _this.addOrRemoveCssClass(FocusService.AG_KEYBOARD_FOCUS,addOrRemove)},forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:function(value){_this.getGui().style.userSelect=null!=value?value:"",_this.getGui().style.webkitUserSelect=null!=value?value:""},setCursor:function(value){_this.getGui().style.cursor=null!=value?value:""}};this.ctrl=this.createManagedBean(new GridCtrl);var template=this.createTemplate();this.setTemplate(template),this.ctrl.setComp(compProxy,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:function(){},focusInnerElement:function(fromBottom){return _this.ctrl.focusInnerElement(fromBottom)}})},GridComp.prototype.insertGridIntoDom=function(){var _this=this,eGui=this.getGui();this.eGridDiv.appendChild(eGui),this.addDestroyFunc((function(){_this.eGridDiv.removeChild(eGui),_this.logger.log("Grid removed from DOM")}))},GridComp.prototype.updateLayoutClasses=function(cssClass,params){var eRootWrapperBodyClassList=this.eRootWrapperBody.classList;eRootWrapperBodyClassList.toggle(LayoutCssClasses.AUTO_HEIGHT,params.autoHeight),eRootWrapperBodyClassList.toggle(LayoutCssClasses.NORMAL,params.normal),eRootWrapperBodyClassList.toggle(LayoutCssClasses.PRINT,params.print),this.addOrRemoveCssClass(LayoutCssClasses.AUTO_HEIGHT,params.autoHeight),this.addOrRemoveCssClass(LayoutCssClasses.NORMAL,params.normal),this.addOrRemoveCssClass(LayoutCssClasses.PRINT,params.print)},GridComp.prototype.createTemplate=function(){return'<div class="ag-root-wrapper" role="presentation">\n                '+(this.ctrl.showDropZones()?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"")+'\n                <div class="ag-root-wrapper-body" ref="rootWrapperBody" role="presentation">\n                    <ag-grid-body ref="gridBody"></ag-grid-body>\n                    '+(this.ctrl.showSideBar()?'<ag-side-bar ref="sideBar"></ag-side-bar>':"")+"\n                </div>\n                "+(this.ctrl.showStatusBar()?'<ag-status-bar ref="statusBar"></ag-status-bar>':"")+"\n                <ag-pagination></ag-pagination>\n                "+(this.ctrl.showWatermark()?"<ag-watermark></ag-watermark>":"")+"\n            </div>"},GridComp.prototype.getFocusableElement=function(){return this.eRootWrapperBody},GridComp.prototype.getFocusableContainers=function(){var focusableContainers=[this.gridBodyComp.getGui()];return this.sideBarComp&&focusableContainers.push(this.sideBarComp.getGui()),focusableContainers.filter((function(el){return isVisible(el)}))},__decorate$H([Autowired("loggerFactory")],GridComp.prototype,"loggerFactory",void 0),__decorate$H([RefSelector("gridBody")],GridComp.prototype,"gridBodyComp",void 0),__decorate$H([RefSelector("sideBar")],GridComp.prototype,"sideBarComp",void 0),__decorate$H([RefSelector("rootWrapperBody")],GridComp.prototype,"eRootWrapperBody",void 0),__decorate$H([PostConstruct],GridComp.prototype,"postConstruct",null),GridComp}(TabGuardComp),__extends$F=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$G=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$8=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spreadArray$7=function(to,from){for(var i=0,il=from.length,j=to.length;i<il;i++,j++)to[j]=from[i];return to},SortController=function(_super){function SortController(){return null!==_super&&_super.apply(this,arguments)||this}var SortController_1;return __extends$F(SortController,_super),SortController_1=SortController,SortController.prototype.progressSort=function(column,multiSort,source){var nextDirection=this.getNextSortDirection(column);this.setSortForColumn(column,nextDirection,multiSort,source)},SortController.prototype.setSortForColumn=function(column,sort,multiSort,source){"asc"!==sort&&"desc"!==sort&&(sort=null);var columnsToUpdate=[column];if(this.gridOptionsService.isColumnsSortingCoupledToGroup()&&column.getColDef().showRowGroup){var rowGroupColumns=this.columnModel.getSourceColumnsForGroupColumn(column),sortableRowGroupColumns=null==rowGroupColumns?void 0:rowGroupColumns.filter((function(col){return col.getColDef().sortable}));sortableRowGroupColumns&&(columnsToUpdate=__spreadArray$7([column],__read$8(sortableRowGroupColumns)))}columnsToUpdate.forEach((function(col){return col.setSort(sort,source)})),(multiSort||this.gridOptionsService.is("alwaysMultiSort"))&&!this.gridOptionsService.is("suppressMultiSort")||this.clearSortBarTheseColumns(columnsToUpdate,source),this.updateSortIndex(column),this.dispatchSortChangedEvents(source)},SortController.prototype.updateSortIndex=function(lastColToChange){var isCoupled=this.gridOptionsService.isColumnsSortingCoupledToGroup(),groupParent=this.columnModel.getGroupDisplayColumnForGroup(lastColToChange.getId()),lastSortIndexCol=isCoupled&&groupParent||lastColToChange,allSortedCols=this.getColumnsWithSortingOrdered();this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach((function(col){return col.setSortIndex(null)}));var allSortedColsWithoutChanges=allSortedCols.filter((function(col){return col!==lastSortIndexCol}));(lastSortIndexCol.getSort()?__spreadArray$7(__spreadArray$7([],__read$8(allSortedColsWithoutChanges)),[lastSortIndexCol]):allSortedColsWithoutChanges).forEach((function(col,idx){return col.setSortIndex(idx)}))},SortController.prototype.onSortChanged=function(source){this.dispatchSortChangedEvents(source)},SortController.prototype.isSortActive=function(){var sortedCols=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter((function(column){return!!column.getSort()}));return sortedCols&&sortedCols.length>0},SortController.prototype.dispatchSortChangedEvents=function(source){var event={type:Events.EVENT_SORT_CHANGED,source};this.eventService.dispatchEvent(event)},SortController.prototype.clearSortBarTheseColumns=function(columnsToSkip,source){this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach((function(columnToClear){columnsToSkip.includes(columnToClear)||columnToClear.setSort(void 0,source)}))},SortController.prototype.getNextSortDirection=function(column){var sortingOrder;if(sortingOrder=column.getColDef().sortingOrder?column.getColDef().sortingOrder:this.gridOptionsService.get("sortingOrder")?this.gridOptionsService.get("sortingOrder"):SortController_1.DEFAULT_SORTING_ORDER,!Array.isArray(sortingOrder)||sortingOrder.length<=0)return console.warn("AG Grid: sortingOrder must be an array with at least one element, currently it's "+sortingOrder),null;var result,currentIndex=sortingOrder.indexOf(column.getSort()),notInArray=currentIndex<0,lastItemInArray=currentIndex==sortingOrder.length-1;return result=notInArray||lastItemInArray?sortingOrder[0]:sortingOrder[currentIndex+1],SortController_1.DEFAULT_SORTING_ORDER.indexOf(result)<0?(console.warn("AG Grid: invalid sort type "+result),null):result},SortController.prototype.getIndexedSortMap=function(){var _this=this,allSortedCols=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter((function(col){return!!col.getSort()}));if(this.columnModel.isPivotMode()){var isSortingLinked_1=this.gridOptionsService.isColumnsSortingCoupledToGroup();allSortedCols=allSortedCols.filter((function(col){var isAggregated=!!col.getAggFunc(),isSecondary=!col.isPrimary(),isGroup=isSortingLinked_1?_this.columnModel.getGroupDisplayColumnForGroup(col.getId()):col.getColDef().showRowGroup;return isAggregated||isSecondary||isGroup}))}var sortedRowGroupCols=this.columnModel.getRowGroupColumns().filter((function(col){return!!col.getSort()})),isSortLinked=this.gridOptionsService.isColumnsSortingCoupledToGroup()&&!!sortedRowGroupCols.length;isSortLinked&&(allSortedCols=__spreadArray$7([],__read$8(new Set(allSortedCols.map((function(col){var _a;return null!==(_a=_this.columnModel.getGroupDisplayColumnForGroup(col.getId()))&&void 0!==_a?_a:col}))))));var allColsIndexes={};allSortedCols.forEach((function(col,index){return allColsIndexes[col.getId()]=index})),allSortedCols.sort((function(a,b){var iA=a.getSortIndex(),iB=b.getSortIndex();return null!=iA&&null!=iB?iA-iB:null==iA&&null==iB?allColsIndexes[a.getId()]>allColsIndexes[b.getId()]?1:-1:null==iB?-1:1}));var indexMap=new Map;return allSortedCols.forEach((function(col,idx){return indexMap.set(col,idx)})),isSortLinked&&sortedRowGroupCols.forEach((function(col){var groupDisplayCol=_this.columnModel.getGroupDisplayColumnForGroup(col.getId());indexMap.set(col,indexMap.get(groupDisplayCol))})),indexMap},SortController.prototype.getColumnsWithSortingOrdered=function(){return __spreadArray$7([],__read$8(this.getIndexedSortMap().entries())).sort((function(_a,_b){return __read$8(_a,2)[1]-__read$8(_b,2)[1]})).map((function(_a){return __read$8(_a,1)[0]}))},SortController.prototype.getSortModel=function(){return this.getColumnsWithSortingOrdered().filter((function(column){return column.getSort()})).map((function(column){return{sort:column.getSort(),colId:column.getId()}}))},SortController.prototype.getSortOptions=function(){return this.getColumnsWithSortingOrdered().filter((function(column){return column.getSort()})).map((function(column){return{sort:column.getSort(),column}}))},SortController.prototype.canColumnDisplayMixedSort=function(column){var isColumnSortCouplingActive=this.gridOptionsService.isColumnsSortingCoupledToGroup(),isGroupDisplayColumn=!!column.getColDef().showRowGroup;return isColumnSortCouplingActive&&isGroupDisplayColumn},SortController.prototype.getDisplaySortForColumn=function(column){var linkedColumns=this.columnModel.getSourceColumnsForGroupColumn(column);if(!this.canColumnDisplayMixedSort(column)||!(null==linkedColumns?void 0:linkedColumns.length))return column.getSort();var sortableColumns=null!=column.getColDef().field||!!column.getColDef().valueGetter?__spreadArray$7([column],__read$8(linkedColumns)):linkedColumns,firstSort=sortableColumns[0].getSort();return sortableColumns.every((function(col){return col.getSort()==firstSort}))?firstSort:"mixed"},SortController.prototype.getDisplaySortIndexForColumn=function(column){return this.getIndexedSortMap().get(column)},SortController.DEFAULT_SORTING_ORDER=["asc","desc",null],__decorate$G([Autowired("columnModel")],SortController.prototype,"columnModel",void 0),SortController=SortController_1=__decorate$G([Bean("sortController")],SortController)}(BeanStub),__extends$E=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),ColumnHoverService=function(_super){function ColumnHoverService(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$E(ColumnHoverService,_super),ColumnHoverService.prototype.setMouseOver=function(columns){this.selectedColumns=columns;var event={type:Events.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(event)},ColumnHoverService.prototype.clearMouseOver=function(){this.selectedColumns=null;var event={type:Events.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(event)},ColumnHoverService.prototype.isHovered=function(column){return!!this.selectedColumns&&this.selectedColumns.indexOf(column)>=0},ColumnHoverService=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}([Bean("columnHoverService")],ColumnHoverService),ColumnHoverService}(BeanStub),__extends$D=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$E=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ColumnAnimationService=function(_super){function ColumnAnimationService(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.executeNextFuncs=[],_this.executeLaterFuncs=[],_this.active=!1,_this.animationThreadCount=0,_this}return __extends$D(ColumnAnimationService,_super),ColumnAnimationService.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady((function(p){return _this.gridBodyCtrl=p.gridBodyCtrl}))},ColumnAnimationService.prototype.isActive=function(){return this.active},ColumnAnimationService.prototype.start=function(){this.active||this.gridOptionsService.is("suppressColumnMoveAnimation")||this.gridOptionsService.is("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0)},ColumnAnimationService.prototype.finish=function(){this.active&&(this.flush(),this.active=!1)},ColumnAnimationService.prototype.executeNextVMTurn=function(func){this.active?this.executeNextFuncs.push(func):func()},ColumnAnimationService.prototype.executeLaterVMTurn=function(func){this.active?this.executeLaterFuncs.push(func):func()},ColumnAnimationService.prototype.ensureAnimationCssClassPresent=function(){var _this=this;this.animationThreadCount++;var animationThreadCountCopy=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push((function(){_this.animationThreadCount===animationThreadCountCopy&&_this.gridBodyCtrl.setColumnMovingCss(!1)}))},ColumnAnimationService.prototype.flush=function(){var nowFuncs=this.executeNextFuncs;this.executeNextFuncs=[];var waitFuncs=this.executeLaterFuncs;this.executeLaterFuncs=[],0===nowFuncs.length&&0===waitFuncs.length||(window.setTimeout((function(){return nowFuncs.forEach((function(func){return func()}))}),0),window.setTimeout((function(){return waitFuncs.forEach((function(func){return func()}))}),300))},__decorate$E([Autowired("ctrlsService")],ColumnAnimationService.prototype,"ctrlsService",void 0),__decorate$E([PostConstruct],ColumnAnimationService.prototype,"postConstruct",null),ColumnAnimationService=__decorate$E([Bean("columnAnimationService")],ColumnAnimationService)}(BeanStub),__extends$C=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$D=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},PaginationAutoPageSizeService=function(_super){function PaginationAutoPageSizeService(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$C(PaginationAutoPageSizeService,_super),PaginationAutoPageSizeService.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady((function(p){_this.centerRowContainerCon=p.centerRowContainerCtrl,_this.addManagedListener(_this.eventService,Events.EVENT_BODY_HEIGHT_CHANGED,_this.checkPageSize.bind(_this)),_this.addManagedListener(_this.eventService,Events.EVENT_SCROLL_VISIBILITY_CHANGED,_this.checkPageSize.bind(_this)),_this.checkPageSize()}))},PaginationAutoPageSizeService.prototype.notActive=function(){return!this.gridOptionsService.is("paginationAutoPageSize")||null==this.centerRowContainerCon},PaginationAutoPageSizeService.prototype.checkPageSize=function(){var _this=this;if(!this.notActive()){var bodyHeight=this.centerRowContainerCon.getViewportSizeFeature().getBodyHeight();if(bodyHeight>0){var update_1=function(){var rowHeight=_this.gridOptionsService.getRowHeightAsNumber(),newPageSize=Math.floor(bodyHeight/rowHeight);_this.gridOptionsService.set("paginationPageSize",newPageSize)};this.isBodyRendered?debounce((function(){return update_1()}),50)():(update_1(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}},__decorate$D([Autowired("ctrlsService")],PaginationAutoPageSizeService.prototype,"ctrlsService",void 0),__decorate$D([PostConstruct],PaginationAutoPageSizeService.prototype,"postConstruct",null),PaginationAutoPageSizeService=__decorate$D([Bean("paginationAutoPageSizeService")],PaginationAutoPageSizeService)}(BeanStub),__extends$B=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$C=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ValueCache=function(_super){function ValueCache(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.cacheVersion=0,_this}return __extends$B(ValueCache,_super),ValueCache.prototype.init=function(){this.active=this.gridOptionsService.is("valueCache"),this.neverExpires=this.gridOptionsService.is("valueCacheNeverExpires")},ValueCache.prototype.onDataChanged=function(){this.neverExpires||this.expire()},ValueCache.prototype.expire=function(){this.cacheVersion++},ValueCache.prototype.setValue=function(rowNode,colId,value){this.active&&(rowNode.__cacheVersion!==this.cacheVersion&&(rowNode.__cacheVersion=this.cacheVersion,rowNode.__cacheData={}),rowNode.__cacheData[colId]=value)},ValueCache.prototype.getValue=function(rowNode,colId){if(this.active&&rowNode.__cacheVersion===this.cacheVersion)return rowNode.__cacheData[colId]},__decorate$C([PostConstruct],ValueCache.prototype,"init",null),ValueCache=__decorate$C([Bean("valueCache")],ValueCache)}(BeanStub),__extends$A=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$B=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ChangeDetectionService=function(_super){function ChangeDetectionService(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$A(ChangeDetectionService,_super),ChangeDetectionService.prototype.init=function(){"clientSide"===this.rowModel.getType()&&(this.clientSideRowModel=this.rowModel),this.addManagedListener(this.eventService,Events.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged.bind(this))},ChangeDetectionService.prototype.onCellValueChanged=function(event){"paste"!==event.source&&this.doChangeDetection(event.node,event.column)},ChangeDetectionService.prototype.doChangeDetection=function(rowNode,column){if(!this.gridOptionsService.is("suppressChangeDetection")){var nodesToRefresh=[rowNode];if(this.clientSideRowModel&&!rowNode.isRowPinned()){var onlyChangedColumns=this.gridOptionsService.is("aggregateOnlyChangedColumns"),changedPath=new ChangedPath(onlyChangedColumns,this.clientSideRowModel.getRootNode());changedPath.addParentNode(rowNode.parent,[column]),this.clientSideRowModel.doAggregate(changedPath),changedPath.forEachChangedNodeDepthFirst((function(rowNode){nodesToRefresh.push(rowNode)}))}this.rowRenderer.refreshCells({rowNodes:nodesToRefresh})}},__decorate$B([Autowired("rowModel")],ChangeDetectionService.prototype,"rowModel",void 0),__decorate$B([Autowired("rowRenderer")],ChangeDetectionService.prototype,"rowRenderer",void 0),__decorate$B([PostConstruct],ChangeDetectionService.prototype,"init",null),ChangeDetectionService=__decorate$B([Bean("changeDetectionService")],ChangeDetectionService)}(BeanStub),__extends$z=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$A=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AgComponentUtils=function(_super){function AgComponentUtils(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$z(AgComponentUtils,_super),AgComponentUtils.prototype.adaptFunction=function(propertyName,jsCompFunc){var metadata=this.componentMetadataProvider.retrieve(propertyName);return metadata&&metadata.functionAdapter?metadata.functionAdapter(jsCompFunc):null},AgComponentUtils.prototype.adaptCellRendererFunction=function(callback){return function(){function Adapter(){}return Adapter.prototype.refresh=function(params){return!1},Adapter.prototype.getGui=function(){return this.eGui},Adapter.prototype.init=function(params){var callbackResult=callback(params),type=typeof callbackResult;this.eGui="string"!==type&&"number"!==type&&"boolean"!==type?null!=callbackResult?callbackResult:loadTemplate("<span></span>"):loadTemplate("<span>"+callbackResult+"</span>")},Adapter}()},AgComponentUtils.prototype.doesImplementIComponent=function(candidate){return!!candidate&&(candidate.prototype&&"getGui"in candidate.prototype)},__decorate$A([Autowired("componentMetadataProvider")],AgComponentUtils.prototype,"componentMetadataProvider",void 0),AgComponentUtils=__decorate$A([Bean("agComponentUtils")],AgComponentUtils)}(BeanStub),__extends$y=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$z=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ComponentMetadataProvider=function(_super){function ComponentMetadataProvider(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$y(ComponentMetadataProvider,_super),ComponentMetadataProvider.prototype.postConstruct=function(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[]},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:[]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:[]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached"]},floatingFilterWrapperComponent:{mandatoryMethodList:[],optionalMethodList:[]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged"]},filterComponent:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]}}},ComponentMetadataProvider.prototype.retrieve=function(name){return this.componentMetaData[name]},__decorate$z([Autowired("agComponentUtils")],ComponentMetadataProvider.prototype,"agComponentUtils",void 0),__decorate$z([PostConstruct],ComponentMetadataProvider.prototype,"postConstruct",null),ComponentMetadataProvider=__decorate$z([Bean("componentMetadataProvider")],ComponentMetadataProvider)}(BeanStub),__extends$x=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$y=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HARD_CODED_SIZES={"ag-theme-custom":{headerHeight:25,headerCellMinWidth:24,listItemHeight:20,rowHeight:25,chartMenuPanelWidth:220},"ag-theme-material":{headerHeight:56,headerCellMinWidth:48,listItemHeight:32,rowHeight:48,chartMenuPanelWidth:240},"ag-theme-balham":{headerHeight:32,headerCellMinWidth:24,listItemHeight:24,rowHeight:28,chartMenuPanelWidth:220},"ag-theme-alpine":{headerHeight:48,headerCellMinWidth:36,listItemHeight:24,rowHeight:42,chartMenuPanelWidth:240}},SASS_PROPERTY_BUILDER={headerHeight:["ag-header-row"],headerCellMinWidth:["ag-header-cell"],listItemHeight:["ag-virtual-list-item"],rowHeight:["ag-row"],chartMenuPanelWidth:["ag-chart-docked-container"]},Environment=function(_super){function Environment(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.calculatedSizes={},_this}return __extends$x(Environment,_super),Environment.prototype.postConstruct=function(){var _a,_this=this,el=null!==(_a=this.getTheme().el)&&void 0!==_a?_a:this.eGridDiv;this.mutationObserver=new MutationObserver((function(){_this.calculatedSizes={},_this.fireGridStylesChangedEvent()})),this.mutationObserver.observe(el||this.eGridDiv,{attributes:!0,attributeFilter:["class"]})},Environment.prototype.fireGridStylesChangedEvent=function(){var event={type:Events.EVENT_GRID_STYLES_CHANGED};this.eventService.dispatchEvent(event)},Environment.prototype.getSassVariable=function(key){var _a=this.getTheme(),themeFamily=_a.themeFamily,el=_a.el;if(themeFamily&&0===themeFamily.indexOf("ag-theme")){this.calculatedSizes||(this.calculatedSizes={}),this.calculatedSizes[themeFamily]||(this.calculatedSizes[themeFamily]={});var size=this.calculatedSizes[themeFamily][key];return null!=size?size:(this.calculatedSizes[themeFamily][key]=this.calculateValueForSassProperty(key,themeFamily,el),this.calculatedSizes[themeFamily][key])}},Environment.prototype.calculateValueForSassProperty=function(property,theme,themeElement){var _a,useTheme="ag-theme-"+(theme.match("material")?"material":theme.match("balham")?"balham":theme.match("alpine")?"alpine":"custom"),defaultValue=HARD_CODED_SIZES[useTheme][property],eDocument=this.gridOptionsService.getDocument();if(themeElement||(themeElement=this.eGridDiv),!SASS_PROPERTY_BUILDER[property])return defaultValue;var classList=SASS_PROPERTY_BUILDER[property],div=eDocument.createElement("div"),classesFromThemeElement=Array.from(themeElement.classList);(_a=div.classList).add.apply(_a,function(to,from){for(var i=0,il=from.length,j=to.length;i<il;i++,j++)to[j]=from[i];return to}([theme],function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}(classesFromThemeElement))),div.style.position="absolute";var el=classList.reduce((function(prevEl,currentClass){var currentDiv=eDocument.createElement("div");return currentDiv.style.position="static",currentDiv.classList.add(currentClass),prevEl.appendChild(currentDiv),currentDiv}),div),calculatedValue=0;if(eDocument.body){eDocument.body.appendChild(div);var sizeName=-1!==property.toLowerCase().indexOf("height")?"height":"width";calculatedValue=parseInt(window.getComputedStyle(el)[sizeName],10),eDocument.body.removeChild(div)}return calculatedValue||defaultValue},Environment.prototype.isThemeDark=function(){var theme=this.getTheme().theme;return!!theme&&theme.indexOf("dark")>=0},Environment.prototype.chartMenuPanelWidth=function(){return this.getSassVariable("chartMenuPanelWidth")},Environment.prototype.getTheme=function(){for(var reg=/\bag-(material|(?:theme-([\w\-]*)))\b/g,el=this.eGridDiv,themeMatch=null,allThemes=[];el;){if(themeMatch=reg.exec(el.className)){var matched=el.className.match(reg);matched&&(allThemes=matched);break}el=el.parentElement||void 0}if(!themeMatch)return{allThemes};var theme=themeMatch[0];return{theme,el,themeFamily:theme.replace(/-dark$/,""),allThemes}},Environment.prototype.getFromTheme=function(defaultValue,sassVariableName){var _a;return null!==(_a=this.getSassVariable(sassVariableName))&&void 0!==_a?_a:defaultValue},Environment.prototype.getDefaultRowHeight=function(){return this.getFromTheme(25,"rowHeight")},Environment.prototype.getListItemHeight=function(){return this.getFromTheme(20,"listItemHeight")},Environment.prototype.refreshRowHeightVariable=function(){var oldRowHeight=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),height=this.gridOptionsService.getNum("rowHeight");if(null==height||isNaN(height)||!isFinite(height))return-1;var newRowHeight=height+"px";return oldRowHeight!=newRowHeight?(this.eGridDiv.style.setProperty("--ag-line-height",newRowHeight),height):""!=oldRowHeight?parseFloat(oldRowHeight):-1},Environment.prototype.getMinColWidth=function(){var measuredMin=this.getFromTheme(null,"headerCellMinWidth");return exists(measuredMin)?Math.max(measuredMin,10):10},Environment.prototype.destroy=function(){this.calculatedSizes=null,this.mutationObserver&&this.mutationObserver.disconnect(),_super.prototype.destroy.call(this)},__decorate$y([Autowired("eGridDiv")],Environment.prototype,"eGridDiv",void 0),__decorate$y([PostConstruct],Environment.prototype,"postConstruct",null),Environment=__decorate$y([Bean("environment")],Environment)}(BeanStub),__extends$w=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$x=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},RowContainerHeightService=function(_super){function RowContainerHeightService(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.scrollY=0,_this.uiBodyHeight=0,_this}var paramIndex,decorator;return __extends$w(RowContainerHeightService,_super),RowContainerHeightService.prototype.agWire=function(loggerFactory){this.logger=loggerFactory.create("RowContainerHeightService")},RowContainerHeightService.prototype.postConstruct=function(){this.addManagedListener(this.eventService,Events.EVENT_BODY_HEIGHT_CHANGED,this.updateOffset.bind(this)),this.maxDivHeight=getMaxDivHeight(),this.logger.log("maxDivHeight = "+this.maxDivHeight)},RowContainerHeightService.prototype.isStretching=function(){return this.stretching},RowContainerHeightService.prototype.getDivStretchOffset=function(){return this.divStretchOffset},RowContainerHeightService.prototype.updateOffset=function(){if(this.stretching){var newScrollY=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,newBodyHeight=this.getUiBodyHeight();(newScrollY!==this.scrollY||newBodyHeight!==this.uiBodyHeight)&&(this.scrollY=newScrollY,this.uiBodyHeight=newBodyHeight,this.calculateOffset())}},RowContainerHeightService.prototype.calculateOffset=function(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;var scrollPercent=this.scrollY/this.maxScrollY,divStretchOffset=scrollPercent*this.pixelsToShave;this.logger.log("Div Stretch Offset = "+divStretchOffset+" ("+this.pixelsToShave+" * "+scrollPercent+")"),this.setDivStretchOffset(divStretchOffset)},RowContainerHeightService.prototype.setUiContainerHeight=function(height){height!==this.uiContainerHeight&&(this.uiContainerHeight=height,this.eventService.dispatchEvent({type:Events.EVENT_ROW_CONTAINER_HEIGHT_CHANGED}))},RowContainerHeightService.prototype.clearOffset=function(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)},RowContainerHeightService.prototype.setDivStretchOffset=function(newOffset){var newOffsetFloor="number"==typeof newOffset?Math.floor(newOffset):null;this.divStretchOffset!==newOffsetFloor&&(this.divStretchOffset=newOffsetFloor,this.eventService.dispatchEvent({type:Events.EVENT_HEIGHT_SCALE_CHANGED}))},RowContainerHeightService.prototype.setModelHeight=function(modelHeight){this.modelHeight=modelHeight,this.stretching=null!=modelHeight&&this.maxDivHeight>0&&modelHeight>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()},RowContainerHeightService.prototype.getUiContainerHeight=function(){return this.uiContainerHeight},RowContainerHeightService.prototype.getRealPixelPosition=function(modelPixel){return modelPixel-this.divStretchOffset},RowContainerHeightService.prototype.getUiBodyHeight=function(){var pos=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return pos.bottom-pos.top},RowContainerHeightService.prototype.getScrollPositionForPixel=function(rowTop){if(this.pixelsToShave<=0)return rowTop;var scrollPercent=rowTop/(this.modelHeight-this.getUiBodyHeight());return this.maxScrollY*scrollPercent},__decorate$x([Autowired("ctrlsService")],RowContainerHeightService.prototype,"ctrlsService",void 0),__decorate$x([(paramIndex=0,decorator=Qualifier("loggerFactory"),function(target,key){decorator(target,key,paramIndex)})],RowContainerHeightService.prototype,"agWire",null),__decorate$x([PostConstruct],RowContainerHeightService.prototype,"postConstruct",null),RowContainerHeightService=__decorate$x([Bean("rowContainerHeightService")],RowContainerHeightService)}(BeanStub),__extends$v=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$w=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SelectableService=function(_super){function SelectableService(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$v(SelectableService,_super),SelectableService.prototype.init=function(){this.groupSelectsChildren=this.gridOptionsService.is("groupSelectsChildren"),this.isRowSelectableFunc=this.gridOptionsService.get("isRowSelectable")},SelectableService.prototype.updateSelectableAfterGrouping=function(rowNode){if(this.isRowSelectableFunc){this.recurseDown(rowNode.childrenAfterGroup,(function(node){return node.childrenAfterGroup}))}},SelectableService.prototype.recurseDown=function(children,nextChildrenFunc){var _this=this;children&&children.forEach((function(child){if(child.group){var rowSelectable;if(child.hasChildren()&&_this.recurseDown(nextChildrenFunc(child),nextChildrenFunc),_this.groupSelectsChildren)rowSelectable=exists((nextChildrenFunc(child)||[]).find((function(rowNode){return!0===rowNode.selectable})));else rowSelectable=!!_this.isRowSelectableFunc&&_this.isRowSelectableFunc(child);child.setRowSelectable(rowSelectable)}}))},__decorate$w([PostConstruct],SelectableService.prototype,"init",null),SelectableService=__decorate$w([Bean("selectableService")],SelectableService)}(BeanStub),__extends$u=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$v=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},PaginationComp=function(_super){function PaginationComp(){var _this=_super.call(this)||this;return _this.previousAndFirstButtonsDisabled=!1,_this.nextButtonDisabled=!1,_this.lastButtonDisabled=!1,_this.areListenersSetup=!1,_this}return __extends$u(PaginationComp,_super),PaginationComp.prototype.postConstruct=function(){var isRtl=this.gridOptionsService.is("enableRtl");this.setTemplate(this.getTemplate());var btFirst=this.btFirst,btPrevious=this.btPrevious,btNext=this.btNext,btLast=this.btLast;this.activateTabIndex([btFirst,btPrevious,btNext,btLast]),btFirst.insertAdjacentElement("afterbegin",createIconNoSpan(isRtl?"last":"first",this.gridOptionsService)),btPrevious.insertAdjacentElement("afterbegin",createIconNoSpan(isRtl?"next":"previous",this.gridOptionsService)),btNext.insertAdjacentElement("afterbegin",createIconNoSpan(isRtl?"previous":"next",this.gridOptionsService)),btLast.insertAdjacentElement("afterbegin",createIconNoSpan(isRtl?"first":"last",this.gridOptionsService)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.onPaginationChanged()},PaginationComp.prototype.onPaginationChanged=function(){var paginationPanelEnabled=this.gridOptionsService.is("pagination")&&!this.gridOptionsService.is("suppressPaginationPanel");this.setDisplayed(paginationPanelEnabled),paginationPanelEnabled&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels())},PaginationComp.prototype.setupListeners=function(){var _this=this;this.areListenersSetup||(this.addManagedListener(this.eventService,Events.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach((function(item){var el=item.el,fn=item.fn;_this.addManagedListener(el,"click",fn),_this.addManagedListener(el,"keydown",(function(e){e.key!==KeyCode.ENTER&&e.key!==KeyCode.SPACE||(e.preventDefault(),fn())}))})),this.areListenersSetup=!0)},PaginationComp.prototype.onBtFirst=function(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToFirstPage()},PaginationComp.prototype.setCurrentPageLabel=function(){var pagesExist=this.paginationProxy.getTotalPages()>0,currentPage=this.paginationProxy.getCurrentPage(),toDisplay=pagesExist?currentPage+1:0;this.lbCurrent.innerHTML=this.formatNumber(toDisplay)},PaginationComp.prototype.formatNumber=function(value){var userFunc=this.gridOptionsService.getCallback("paginationNumberFormatter");if(userFunc)return userFunc({value});var localeTextFunc=this.localeService.getLocaleTextFunc();return formatNumberCommas(value,localeTextFunc("thousandSeparator",","),localeTextFunc("decimalSeparator","."))},PaginationComp.prototype.getTemplate=function(){var localeTextFunc=this.localeService.getLocaleTextFunc(),strPage=localeTextFunc("page","Page"),strTo=localeTextFunc("to","to"),strOf=localeTextFunc("of","of"),strFirst=localeTextFunc("firstPage","First Page"),strPrevious=localeTextFunc("previousPage","Previous Page"),strNext=localeTextFunc("nextPage","Next Page"),strLast=localeTextFunc("lastPage","Last Page"),compId=this.getCompId();return'<div class="ag-paging-panel ag-unselectable" id="ag-'+compId+'">\n                <span class="ag-paging-row-summary-panel" role="status">\n                    <span id="ag-'+compId+'-first-row" ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-'+compId+'-to">'+strTo+'</span>\n                    <span id="ag-'+compId+'-last-row" ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-'+compId+'-of">'+strOf+'</span>\n                    <span id="ag-'+compId+'-row-count" ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>\n                </span>\n                <span class="ag-paging-page-summary-panel" role="presentation">\n                    <div ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="'+strFirst+'"></div>\n                    <div ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="'+strPrevious+'"></div>\n                    <span class="ag-paging-description" role="status">\n                        <span id="ag-'+compId+'-start-page">'+strPage+'</span>\n                        <span id="ag-'+compId+'-start-page-number" ref="lbCurrent" class="ag-paging-number"></span>\n                        <span id="ag-'+compId+'-of-page">'+strOf+'</span>\n                        <span id="ag-'+compId+'-of-page-number" ref="lbTotal" class="ag-paging-number"></span>\n                    </span>\n                    <div ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="'+strNext+'"></div>\n                    <div ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="'+strLast+'"></div>\n                </span>\n            </div>'},PaginationComp.prototype.onBtNext=function(){this.nextButtonDisabled||this.paginationProxy.goToNextPage()},PaginationComp.prototype.onBtPrevious=function(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToPreviousPage()},PaginationComp.prototype.onBtLast=function(){this.lastButtonDisabled||this.paginationProxy.goToLastPage()},PaginationComp.prototype.enableOrDisableButtons=function(){var currentPage=this.paginationProxy.getCurrentPage(),maxRowFound=this.paginationProxy.isLastPageFound(),totalPages=this.paginationProxy.getTotalPages();this.previousAndFirstButtonsDisabled=0===currentPage,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);var zeroPagesToDisplay=this.isZeroPagesToDisplay(),onLastPage=maxRowFound&&currentPage===totalPages-1;this.nextButtonDisabled=onLastPage||zeroPagesToDisplay,this.lastButtonDisabled=!maxRowFound||zeroPagesToDisplay||currentPage===totalPages-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)},PaginationComp.prototype.toggleButtonDisabled=function(button,disabled){setAriaDisabled(button,disabled),button.classList.toggle("ag-disabled",disabled)},PaginationComp.prototype.updateRowLabels=function(){var startRow,endRow,currentPage=this.paginationProxy.getCurrentPage(),pageSize=this.paginationProxy.getPageSize(),maxRowFound=this.paginationProxy.isLastPageFound(),rowCount=this.paginationProxy.isLastPageFound()?this.paginationProxy.getMasterRowCount():null;if(this.isZeroPagesToDisplay()?startRow=endRow=0:(endRow=(startRow=pageSize*currentPage+1)+pageSize-1,maxRowFound&&endRow>rowCount&&(endRow=rowCount)),this.lbFirstRowOnPage.innerHTML=this.formatNumber(startRow),this.rowNodeBlockLoader.isLoading()){var translate=this.localeService.getLocaleTextFunc();this.lbLastRowOnPage.innerHTML=translate("pageLastRowUnknown","?")}else this.lbLastRowOnPage.innerHTML=this.formatNumber(endRow)},PaginationComp.prototype.isZeroPagesToDisplay=function(){var maxRowFound=this.paginationProxy.isLastPageFound(),totalPages=this.paginationProxy.getTotalPages();return maxRowFound&&0===totalPages},PaginationComp.prototype.setTotalLabels=function(){var lastPageFound=this.paginationProxy.isLastPageFound(),totalPages=this.paginationProxy.getTotalPages(),rowCount=lastPageFound?this.paginationProxy.getMasterRowCount():null;if(1===rowCount){var firstRow=this.paginationProxy.getRow(0);if(firstRow&&firstRow.group&&!(firstRow.groupData||firstRow.aggData))return void this.setTotalLabelsToZero()}if(lastPageFound)this.lbTotal.innerHTML=this.formatNumber(totalPages),this.lbRecordCount.innerHTML=this.formatNumber(rowCount);else{var moreText=this.localeService.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=moreText,this.lbRecordCount.innerHTML=moreText}},PaginationComp.prototype.setTotalLabelsToZero=function(){this.lbFirstRowOnPage.innerHTML=this.formatNumber(0),this.lbCurrent.innerHTML=this.formatNumber(0),this.lbLastRowOnPage.innerHTML=this.formatNumber(0),this.lbTotal.innerHTML=this.formatNumber(0),this.lbRecordCount.innerHTML=this.formatNumber(0)},__decorate$v([Autowired("paginationProxy")],PaginationComp.prototype,"paginationProxy",void 0),__decorate$v([Autowired("rowNodeBlockLoader")],PaginationComp.prototype,"rowNodeBlockLoader",void 0),__decorate$v([RefSelector("btFirst")],PaginationComp.prototype,"btFirst",void 0),__decorate$v([RefSelector("btPrevious")],PaginationComp.prototype,"btPrevious",void 0),__decorate$v([RefSelector("btNext")],PaginationComp.prototype,"btNext",void 0),__decorate$v([RefSelector("btLast")],PaginationComp.prototype,"btLast",void 0),__decorate$v([RefSelector("lbRecordCount")],PaginationComp.prototype,"lbRecordCount",void 0),__decorate$v([RefSelector("lbFirstRowOnPage")],PaginationComp.prototype,"lbFirstRowOnPage",void 0),__decorate$v([RefSelector("lbLastRowOnPage")],PaginationComp.prototype,"lbLastRowOnPage",void 0),__decorate$v([RefSelector("lbCurrent")],PaginationComp.prototype,"lbCurrent",void 0),__decorate$v([RefSelector("lbTotal")],PaginationComp.prototype,"lbTotal",void 0),__decorate$v([PostConstruct],PaginationComp.prototype,"postConstruct",null),PaginationComp}(Component),__extends$t=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$u=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};!function(LoadingType){LoadingType[LoadingType.Loading=0]="Loading",LoadingType[LoadingType.NoRows=1]="NoRows"}(LoadingType||(LoadingType={}));var OverlayWrapperComponent=function(_super){function OverlayWrapperComponent(){var _this=_super.call(this,OverlayWrapperComponent.TEMPLATE)||this;return _this.inProgress=!1,_this.destroyRequested=!1,_this.manuallyDisplayed=!1,_this}return __extends$t(OverlayWrapperComponent,_super),OverlayWrapperComponent.prototype.updateLayoutClasses=function(cssClass,params){var overlayWrapperClassList=this.eOverlayWrapper.classList;overlayWrapperClassList.toggle(LayoutCssClasses.AUTO_HEIGHT,params.autoHeight),overlayWrapperClassList.toggle(LayoutCssClasses.NORMAL,params.normal),overlayWrapperClassList.toggle(LayoutCssClasses.PRINT,params.print)},OverlayWrapperComponent.prototype.postConstruct=function(){this.createManagedBean(new LayoutFeature(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.addManagedListener(this.eventService,Events.EVENT_ROW_DATA_UPDATED,this.onRowDataUpdated.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.gridOptionsService.isRowModelType("clientSide")&&!this.gridOptionsService.get("rowData")&&this.showLoadingOverlay(),this.gridApi.registerOverlayWrapperComp(this)},OverlayWrapperComponent.prototype.setWrapperTypeClass=function(loadingType){var overlayWrapperClassList=this.eOverlayWrapper.classList;overlayWrapperClassList.toggle("ag-overlay-loading-wrapper",loadingType===LoadingType.Loading),overlayWrapperClassList.toggle("ag-overlay-no-rows-wrapper",loadingType===LoadingType.NoRows)},OverlayWrapperComponent.prototype.showLoadingOverlay=function(){if(!this.gridOptionsService.is("suppressLoadingOverlay")){var promise=this.userComponentFactory.getLoadingOverlayCompDetails({}).newAgStackInstance();this.showOverlay(promise,LoadingType.Loading)}},OverlayWrapperComponent.prototype.showNoRowsOverlay=function(){if(!this.gridOptionsService.is("suppressNoRowsOverlay")){var promise=this.userComponentFactory.getNoRowsOverlayCompDetails({}).newAgStackInstance();this.showOverlay(promise,LoadingType.NoRows)}},OverlayWrapperComponent.prototype.showOverlay=function(workItem,type){var _this=this;this.inProgress||(this.setWrapperTypeClass(type),this.destroyActiveOverlay(),this.inProgress=!0,workItem&&workItem.then((function(comp){_this.inProgress=!1,_this.eOverlayWrapper.appendChild(comp.getGui()),_this.activeOverlay=comp,_this.destroyRequested&&(_this.destroyRequested=!1,_this.destroyActiveOverlay())})),this.manuallyDisplayed=this.columnModel.isReady()&&!this.paginationProxy.isEmpty(),this.setDisplayed(!0,{skipAriaHidden:!0}))},OverlayWrapperComponent.prototype.destroyActiveOverlay=function(){this.inProgress?this.destroyRequested=!0:this.activeOverlay&&(this.activeOverlay=this.getContext().destroyBean(this.activeOverlay),clearElement(this.eOverlayWrapper))},OverlayWrapperComponent.prototype.hideOverlay=function(){this.manuallyDisplayed=!1,this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})},OverlayWrapperComponent.prototype.destroy=function(){this.destroyActiveOverlay(),_super.prototype.destroy.call(this)},OverlayWrapperComponent.prototype.showOrHideOverlay=function(){var isEmpty=this.paginationProxy.isEmpty(),isSuppressNoRowsOverlay=this.gridOptionsService.is("suppressNoRowsOverlay");isEmpty&&!isSuppressNoRowsOverlay?this.showNoRowsOverlay():this.hideOverlay()},OverlayWrapperComponent.prototype.onRowDataUpdated=function(){this.showOrHideOverlay()},OverlayWrapperComponent.prototype.onNewColumnsLoaded=function(){!this.columnModel.isReady()||this.paginationProxy.isEmpty()||this.manuallyDisplayed||this.hideOverlay()},OverlayWrapperComponent.TEMPLATE='\n        <div class="ag-overlay" aria-hidden="true">\n            <div class="ag-overlay-panel">\n                <div class="ag-overlay-wrapper" ref="eOverlayWrapper"></div>\n            </div>\n        </div>',__decorate$u([Autowired("userComponentFactory")],OverlayWrapperComponent.prototype,"userComponentFactory",void 0),__decorate$u([Autowired("paginationProxy")],OverlayWrapperComponent.prototype,"paginationProxy",void 0),__decorate$u([Autowired("gridApi")],OverlayWrapperComponent.prototype,"gridApi",void 0),__decorate$u([Autowired("columnModel")],OverlayWrapperComponent.prototype,"columnModel",void 0),__decorate$u([RefSelector("eOverlayWrapper")],OverlayWrapperComponent.prototype,"eOverlayWrapper",void 0),__decorate$u([PostConstruct],OverlayWrapperComponent.prototype,"postConstruct",null),OverlayWrapperComponent}(Component),__extends$s=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$t=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},RowPositionUtils=function(_super){function RowPositionUtils(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$s(RowPositionUtils,_super),RowPositionUtils.prototype.getFirstRow=function(){var rowPinned,rowIndex=0;return this.pinnedRowModel.getPinnedTopRowCount()?rowPinned="top":this.rowModel.getRowCount()?(rowPinned=null,rowIndex=this.paginationProxy.getPageFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(rowPinned="bottom"),void 0===rowPinned?null:{rowIndex,rowPinned}},RowPositionUtils.prototype.getLastRow=function(){var rowIndex,rowPinned=null,pinnedBottomCount=this.pinnedRowModel.getPinnedBottomRowCount(),pinnedTopCount=this.pinnedRowModel.getPinnedTopRowCount();return pinnedBottomCount?(rowPinned="bottom",rowIndex=pinnedBottomCount-1):this.rowModel.getRowCount()?(rowPinned=null,rowIndex=this.paginationProxy.getPageLastRow()):pinnedTopCount&&(rowPinned="top",rowIndex=pinnedTopCount-1),void 0===rowIndex?null:{rowIndex,rowPinned}},RowPositionUtils.prototype.getRowNode=function(gridRow){switch(gridRow.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[gridRow.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[gridRow.rowIndex];default:return this.rowModel.getRow(gridRow.rowIndex)}},RowPositionUtils.prototype.sameRow=function(rowA,rowB){return!rowA&&!rowB||!(rowA&&!rowB||!rowA&&rowB)&&(rowA.rowIndex===rowB.rowIndex&&rowA.rowPinned==rowB.rowPinned)},RowPositionUtils.prototype.before=function(rowA,rowB){switch(rowA.rowPinned){case"top":if("top"!==rowB.rowPinned)return!0;break;case"bottom":if("bottom"!==rowB.rowPinned)return!1;break;default:if(exists(rowB.rowPinned))return"top"!==rowB.rowPinned}return rowA.rowIndex<rowB.rowIndex},RowPositionUtils.prototype.rowMax=function(rows){var max,_this=this;return rows.forEach((function(row){(void 0===max||_this.before(max,row))&&(max=row)})),max},RowPositionUtils.prototype.rowMin=function(rows){var min,_this=this;return rows.forEach((function(row){(void 0===min||_this.before(row,min))&&(min=row)})),min},__decorate$t([Autowired("rowModel")],RowPositionUtils.prototype,"rowModel",void 0),__decorate$t([Autowired("pinnedRowModel")],RowPositionUtils.prototype,"pinnedRowModel",void 0),__decorate$t([Autowired("paginationProxy")],RowPositionUtils.prototype,"paginationProxy",void 0),RowPositionUtils=__decorate$t([Bean("rowPositionUtils")],RowPositionUtils)}(BeanStub),__extends$r=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),CellPositionUtils=function(_super){function CellPositionUtils(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$r(CellPositionUtils,_super),CellPositionUtils.prototype.createId=function(cellPosition){var rowIndex=cellPosition.rowIndex,rowPinned=cellPosition.rowPinned,column=cellPosition.column;return this.createIdFromValues({rowIndex,column,rowPinned})},CellPositionUtils.prototype.createIdFromValues=function(cellPosition){var rowIndex=cellPosition.rowIndex,rowPinned=cellPosition.rowPinned;return rowIndex+"."+(null==rowPinned?"null":rowPinned)+"."+cellPosition.column.getId()},CellPositionUtils.prototype.equals=function(cellA,cellB){var colsMatch=cellA.column===cellB.column,floatingMatch=cellA.rowPinned===cellB.rowPinned,indexMatch=cellA.rowIndex===cellB.rowIndex;return colsMatch&&floatingMatch&&indexMatch},CellPositionUtils=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}([Bean("cellPositionUtils")],CellPositionUtils),CellPositionUtils}(BeanStub),__extends$q=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),UndoRedoAction=function UndoRedoAction(cellValueChanges){this.cellValueChanges=cellValueChanges},RangeUndoRedoAction=function(_super){function RangeUndoRedoAction(cellValueChanges,initialRange,finalRange,ranges){var _this=_super.call(this,cellValueChanges)||this;return _this.initialRange=initialRange,_this.finalRange=finalRange,_this.ranges=ranges,_this}return __extends$q(RangeUndoRedoAction,_super),RangeUndoRedoAction}(UndoRedoAction),UndoRedoStack=function(){function UndoRedoStack(maxStackSize){this.actionStack=[],this.maxStackSize=maxStackSize||UndoRedoStack.DEFAULT_STACK_SIZE,this.actionStack=new Array(this.maxStackSize)}return UndoRedoStack.prototype.pop=function(){return this.actionStack.pop()},UndoRedoStack.prototype.push=function(item){item.cellValueChanges&&item.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(item))},UndoRedoStack.prototype.clear=function(){this.actionStack=[]},UndoRedoStack.prototype.getCurrentStackSize=function(){return this.actionStack.length},UndoRedoStack.DEFAULT_STACK_SIZE=10,UndoRedoStack}(),__extends$p=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$2=function(){return __assign$2=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$2.apply(this,arguments)},__decorate$r=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},UndoRedoService=function(_super){function UndoRedoService(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.cellValueChanges=[],_this.activeCellEdit=null,_this.activeRowEdit=null,_this.isPasting=!1,_this.isRangeInAction=!1,_this.onCellValueChanged=function(event){var eventCell={column:event.column,rowIndex:event.rowIndex,rowPinned:event.rowPinned},isCellEditing=null!==_this.activeCellEdit&&_this.cellPositionUtils.equals(_this.activeCellEdit,eventCell),isRowEditing=null!==_this.activeRowEdit&&_this.rowPositionUtils.sameRow(_this.activeRowEdit,eventCell);if(isCellEditing||isRowEditing||_this.isPasting||_this.isRangeInAction){var rowPinned=event.rowPinned,rowIndex=event.rowIndex,column=event.column,oldValue=event.oldValue,value=event.value,cellValueChange={rowPinned,rowIndex,columnId:column.getColId(),newValue:value,oldValue};_this.cellValueChanges.push(cellValueChange)}},_this.clearStacks=function(){_this.undoStack.clear(),_this.redoStack.clear()},_this}return __extends$p(UndoRedoService,_super),UndoRedoService.prototype.init=function(){var _this=this;if(this.gridOptionsService.is("undoRedoCellEditing")){var undoRedoLimit=this.gridOptionsService.getNum("undoRedoCellEditingLimit");undoRedoLimit<=0||(this.undoStack=new UndoRedoStack(undoRedoLimit),this.redoStack=new UndoRedoStack(undoRedoLimit),this.addRowEditingListeners(),this.addCellEditingListeners(),this.addPasteListeners(),this.addFillListeners(),this.addCellKeyListeners(),this.addManagedListener(this.eventService,Events.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged),this.addManagedListener(this.eventService,Events.EVENT_MODEL_UPDATED,(function(e){e.keepUndoRedoStack||_this.clearStacks()})),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.clearStacks),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_GROUP_OPENED,this.clearStacks),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_MOVED,this.clearStacks),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PINNED,this.clearStacks),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VISIBLE,this.clearStacks),this.addManagedListener(this.eventService,Events.EVENT_ROW_DRAG_END,this.clearStacks),this.ctrlsService.whenReady((function(){_this.gridBodyCtrl=_this.ctrlsService.getGridBodyCtrl()})))}},UndoRedoService.prototype.getCurrentUndoStackSize=function(){return this.undoStack?this.undoStack.getCurrentStackSize():0},UndoRedoService.prototype.getCurrentRedoStackSize=function(){return this.redoStack?this.redoStack.getCurrentStackSize():0},UndoRedoService.prototype.undo=function(source){var startEvent={type:Events.EVENT_UNDO_STARTED,source};this.eventService.dispatchEvent(startEvent);var operationPerformed=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo"),endEvent={type:Events.EVENT_UNDO_ENDED,source,operationPerformed};this.eventService.dispatchEvent(endEvent)},UndoRedoService.prototype.redo=function(source){var startEvent={type:Events.EVENT_REDO_STARTED,source};this.eventService.dispatchEvent(startEvent);var operationPerformed=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo"),endEvent={type:Events.EVENT_REDO_ENDED,source,operationPerformed};this.eventService.dispatchEvent(endEvent)},UndoRedoService.prototype.undoRedo=function(undoRedoStack,opposingUndoRedoStack,rangeProperty,cellValueChangeProperty,source){if(!undoRedoStack)return!1;var undoRedoAction=undoRedoStack.pop();return!(!undoRedoAction||!undoRedoAction.cellValueChanges)&&(this.processAction(undoRedoAction,(function(cellValueChange){return cellValueChange[cellValueChangeProperty]}),source),undoRedoAction instanceof RangeUndoRedoAction?this.processRange(undoRedoAction.ranges||[undoRedoAction[rangeProperty]]):this.processCell(undoRedoAction.cellValueChanges),opposingUndoRedoStack.push(undoRedoAction),!0)},UndoRedoService.prototype.processAction=function(action,valueExtractor,source){var _this=this;action.cellValueChanges.forEach((function(cellValueChange){var rowIndex=cellValueChange.rowIndex,rowPinned=cellValueChange.rowPinned,columnId=cellValueChange.columnId,rowPosition={rowIndex,rowPinned},currentRow=_this.getRowNode(rowPosition);currentRow.displayed&&currentRow.setDataValue(columnId,valueExtractor(cellValueChange),source)}))},UndoRedoService.prototype.processRange=function(ranges){var lastFocusedCell,_this=this;this.rangeService.removeAllCellRanges(!0),ranges.forEach((function(range,idx){if(range){var startRow=range.startRow,endRow=range.endRow;idx===ranges.length-1&&(lastFocusedCell={rowPinned:startRow.rowPinned,rowIndex:startRow.rowIndex,columnId:range.startColumn.getColId()},_this.setLastFocusedCell(lastFocusedCell));var cellRangeParams={rowStartIndex:startRow.rowIndex,rowStartPinned:startRow.rowPinned,rowEndIndex:endRow.rowIndex,rowEndPinned:endRow.rowPinned,columnStart:range.startColumn,columns:range.columns};_this.rangeService.addCellRange(cellRangeParams)}}))},UndoRedoService.prototype.processCell=function(cellValueChanges){var cellValueChange=cellValueChanges[0],rowPosition={rowIndex:cellValueChange.rowIndex,rowPinned:cellValueChange.rowPinned},row=this.getRowNode(rowPosition),lastFocusedCell={rowPinned:cellValueChange.rowPinned,rowIndex:row.rowIndex,columnId:cellValueChange.columnId};this.setLastFocusedCell(lastFocusedCell,!!this.rangeService)},UndoRedoService.prototype.setLastFocusedCell=function(lastFocusedCell,setRangeToCell){var rowIndex=lastFocusedCell.rowIndex,columnId=lastFocusedCell.columnId,rowPinned=lastFocusedCell.rowPinned,scrollFeature=this.gridBodyCtrl.getScrollFeature(),column=this.columnModel.getGridColumn(columnId);if(column){scrollFeature.ensureIndexVisible(rowIndex),scrollFeature.ensureColumnVisible(column);var cellPosition={rowIndex,column,rowPinned};this.focusService.setFocusedCell(__assign$2(__assign$2({},cellPosition),{forceBrowserFocus:!0})),setRangeToCell&&this.rangeService.setRangeToCell(cellPosition)}},UndoRedoService.prototype.addRowEditingListeners=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_ROW_EDITING_STARTED,(function(e){_this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}})),this.addManagedListener(this.eventService,Events.EVENT_ROW_EDITING_STOPPED,(function(){var action=new UndoRedoAction(_this.cellValueChanges);_this.pushActionsToUndoStack(action),_this.activeRowEdit=null}))},UndoRedoService.prototype.addCellEditingListeners=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_CELL_EDITING_STARTED,(function(e){_this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}})),this.addManagedListener(this.eventService,Events.EVENT_CELL_EDITING_STOPPED,(function(e){if(_this.activeCellEdit=null,e.valueChanged&&!_this.activeRowEdit&&!_this.isPasting&&!_this.isRangeInAction){var action=new UndoRedoAction(_this.cellValueChanges);_this.pushActionsToUndoStack(action)}}))},UndoRedoService.prototype.addPasteListeners=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_PASTE_START,(function(){_this.isPasting=!0})),this.addManagedListener(this.eventService,Events.EVENT_PASTE_END,(function(){var action=new UndoRedoAction(_this.cellValueChanges);_this.pushActionsToUndoStack(action),_this.isPasting=!1}))},UndoRedoService.prototype.addFillListeners=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_FILL_START,(function(){_this.isRangeInAction=!0})),this.addManagedListener(this.eventService,Events.EVENT_FILL_END,(function(event){var action=new RangeUndoRedoAction(_this.cellValueChanges,event.initialRange,event.finalRange);_this.pushActionsToUndoStack(action),_this.isRangeInAction=!1}))},UndoRedoService.prototype.addCellKeyListeners=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,(function(){_this.isRangeInAction=!0})),this.addManagedListener(this.eventService,Events.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,(function(){var action;action=_this.rangeService&&_this.gridOptionsService.is("enableRangeSelection")?new RangeUndoRedoAction(_this.cellValueChanges,void 0,void 0,function(to,from){for(var i=0,il=from.length,j=to.length;i<il;i++,j++)to[j]=from[i];return to}([],function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}(_this.rangeService.getCellRanges()))):new UndoRedoAction(_this.cellValueChanges),_this.pushActionsToUndoStack(action),_this.isRangeInAction=!1}))},UndoRedoService.prototype.pushActionsToUndoStack=function(action){this.undoStack.push(action),this.cellValueChanges=[],this.redoStack.clear()},UndoRedoService.prototype.getRowNode=function(gridRow){switch(gridRow.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[gridRow.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[gridRow.rowIndex];default:return this.rowModel.getRow(gridRow.rowIndex)}},__decorate$r([Autowired("focusService")],UndoRedoService.prototype,"focusService",void 0),__decorate$r([Autowired("ctrlsService")],UndoRedoService.prototype,"ctrlsService",void 0),__decorate$r([Autowired("rowModel")],UndoRedoService.prototype,"rowModel",void 0),__decorate$r([Autowired("pinnedRowModel")],UndoRedoService.prototype,"pinnedRowModel",void 0),__decorate$r([Autowired("cellPositionUtils")],UndoRedoService.prototype,"cellPositionUtils",void 0),__decorate$r([Autowired("rowPositionUtils")],UndoRedoService.prototype,"rowPositionUtils",void 0),__decorate$r([Autowired("columnModel")],UndoRedoService.prototype,"columnModel",void 0),__decorate$r([Optional("rangeService")],UndoRedoService.prototype,"rangeService",void 0),__decorate$r([PostConstruct],UndoRedoService.prototype,"init",null),UndoRedoService=__decorate$r([Bean("undoRedoService")],UndoRedoService)}(BeanStub),__extends$o=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$q=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},HeaderPositionUtils=function(_super){function HeaderPositionUtils(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$o(HeaderPositionUtils,_super),HeaderPositionUtils.prototype.findHeader=function(focusedHeader,direction){var nextColumn,getGroupMethod,getColMethod;if(focusedHeader.column instanceof ColumnGroup?(getGroupMethod="getDisplayedGroup"+direction,nextColumn=this.columnModel[getGroupMethod](focusedHeader.column)):(getColMethod="getDisplayedCol"+direction,nextColumn=this.columnModel[getColMethod](focusedHeader.column)),nextColumn){var headerRowIndex=focusedHeader.headerRowIndex;if(this.getHeaderRowType(headerRowIndex)===HeaderRowType.COLUMN_GROUP){var columnGroup=nextColumn;if(columnGroup.isPadding()&&this.isAnyChildSpanningHeaderHeight(columnGroup)){var _a=this.getColumnVisibleChild(columnGroup,headerRowIndex,direction),nextFocusColumn=_a.nextFocusColumn,nextRow=_a.nextRow;nextFocusColumn&&(nextColumn=nextFocusColumn,headerRowIndex=nextRow)}}return{column:nextColumn,headerRowIndex}}},HeaderPositionUtils.prototype.isAnyChildSpanningHeaderHeight=function(columnGroup){return!!columnGroup&&columnGroup.getLeafColumns().some((function(col){return col.isSpanHeaderHeight()}))},HeaderPositionUtils.prototype.getColumnVisibleParent=function(currentColumn,currentIndex){var currentRowType=this.getHeaderRowType(currentIndex),isFloatingFilter=currentRowType===HeaderRowType.FLOATING_FILTER,isColumn=currentRowType===HeaderRowType.COLUMN,nextFocusColumn=isFloatingFilter?currentColumn:currentColumn.getParent(),nextRow=currentIndex-1;if(isColumn&&this.isAnyChildSpanningHeaderHeight(currentColumn.getParent())){for(;nextFocusColumn&&nextFocusColumn.isPadding();)nextFocusColumn=nextFocusColumn.getParent(),nextRow--;nextRow<0&&(nextFocusColumn=currentColumn,nextRow=currentIndex)}return{nextFocusColumn,nextRow}},HeaderPositionUtils.prototype.getColumnVisibleChild=function(column,currentIndex,direction){void 0===direction&&(direction="After");var nextFocusColumn=column,nextRow=currentIndex+1;if(this.getHeaderRowType(currentIndex)===HeaderRowType.COLUMN_GROUP){var leafColumns=column.getLeafColumns(),leafChild="After"===direction?leafColumns[0]:last(leafColumns);if(this.isAnyChildSpanningHeaderHeight(leafChild.getParent())){nextFocusColumn=leafChild;for(var currentColumn=leafChild.getParent();currentColumn&&currentColumn!==column;)currentColumn=currentColumn.getParent(),nextRow++}else nextFocusColumn=column.getDisplayedChildren()[0]}return{nextFocusColumn,nextRow}},HeaderPositionUtils.prototype.getHeaderRowType=function(rowIndex){var centerHeaderContainer=this.ctrlsService.getHeaderRowContainerCtrl();if(centerHeaderContainer)return centerHeaderContainer.getRowType(rowIndex)},HeaderPositionUtils.prototype.findColAtEdgeForHeaderRow=function(level,position){var displayedColumns=this.columnModel.getAllDisplayedColumns(),column=displayedColumns["start"===position?0:displayedColumns.length-1];if(column){var type=this.ctrlsService.getHeaderRowContainerCtrl(column.getPinned()).getRowType(level);return type==HeaderRowType.COLUMN_GROUP?{headerRowIndex:level,column:this.columnModel.getColumnGroupAtLevel(column,level)}:{headerRowIndex:null==type?-1:level,column}}},__decorate$q([Autowired("columnModel")],HeaderPositionUtils.prototype,"columnModel",void 0),__decorate$q([Autowired("ctrlsService")],HeaderPositionUtils.prototype,"ctrlsService",void 0),HeaderPositionUtils=__decorate$q([Bean("headerPositionUtils")],HeaderPositionUtils)}(BeanStub),ColumnDefFactory=function(){function ColumnDefFactory(){}return ColumnDefFactory.prototype.buildColumnDefs=function(cols,rowGroupColumns,pivotColumns){var _this=this,res=[],colGroupDefs={};return cols.forEach((function(col){for(var addToResult=!0,childDef=_this.createDefFromColumn(col,rowGroupColumns,pivotColumns),pointer=col.getOriginalParent(),lastPointer=null;pointer;){var parentDef=null;if(pointer.isPadding())pointer=pointer.getOriginalParent();else{var existingParentDef=colGroupDefs[pointer.getGroupId()];if(existingParentDef){existingParentDef.children.push(childDef),addToResult=!1;break}if((parentDef=_this.createDefFromGroup(pointer))&&(parentDef.children=[childDef],colGroupDefs[parentDef.groupId]=parentDef,childDef=parentDef,pointer=pointer.getOriginalParent()),null!=pointer&&lastPointer===pointer){addToResult=!1;break}lastPointer=pointer}}addToResult&&res.push(childDef)})),res},ColumnDefFactory.prototype.createDefFromGroup=function(group){var defCloned=deepCloneDefinition(group.getColGroupDef(),["children"]);return defCloned&&(defCloned.groupId=group.getGroupId()),defCloned},ColumnDefFactory.prototype.createDefFromColumn=function(col,rowGroupColumns,pivotColumns){var colDefCloned=deepCloneDefinition(col.getColDef());return colDefCloned.colId=col.getColId(),colDefCloned.width=col.getActualWidth(),colDefCloned.rowGroup=col.isRowGroupActive(),colDefCloned.rowGroupIndex=col.isRowGroupActive()?rowGroupColumns.indexOf(col):null,colDefCloned.pivot=col.isPivotActive(),colDefCloned.pivotIndex=col.isPivotActive()?pivotColumns.indexOf(col):null,colDefCloned.aggFunc=col.isValueActive()?col.getAggFunc():null,colDefCloned.hide=!col.isVisible()||void 0,colDefCloned.pinned=col.isPinned()?col.getPinned():null,colDefCloned.sort=col.getSort()?col.getSort():null,colDefCloned.sortIndex=null!=col.getSortIndex()?col.getSortIndex():null,colDefCloned},ColumnDefFactory=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}([Bean("columnDefFactory")],ColumnDefFactory),ColumnDefFactory}(),__decorate$o=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},RowCssClassCalculator=function(){function RowCssClassCalculator(){}return RowCssClassCalculator.prototype.getInitialRowClasses=function(params){var classes=[];return exists(params.extraCssClass)&&classes.push(params.extraCssClass),classes.push("ag-row"),classes.push(params.rowFocused?"ag-row-focus":"ag-row-no-focus"),params.fadeRowIn&&classes.push("ag-opacity-zero"),classes.push(params.rowIsEven?"ag-row-even":"ag-row-odd"),params.rowNode.isRowPinned()&&classes.push("ag-row-pinned"),params.rowNode.isSelected()&&classes.push("ag-row-selected"),params.rowNode.footer&&classes.push("ag-row-footer"),classes.push("ag-row-level-"+params.rowLevel),params.rowNode.stub&&classes.push("ag-row-loading"),params.fullWidthRow&&classes.push("ag-full-width-row"),params.expandable&&(classes.push("ag-row-group"),classes.push(params.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),params.rowNode.dragging&&classes.push("ag-row-dragging"),pushAll(classes,this.processClassesFromGridOptions(params.rowNode)),pushAll(classes,this.preProcessRowClassRules(params.rowNode)),classes.push(params.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),params.firstRowOnPage&&classes.push("ag-row-first"),params.lastRowOnPage&&classes.push("ag-row-last"),params.fullWidthRow&&("left"===params.pinned&&classes.push("ag-cell-last-left-pinned"),"right"===params.pinned&&classes.push("ag-cell-first-right-pinned")),classes},RowCssClassCalculator.prototype.processClassesFromGridOptions=function(rowNode){var res=[],process=function(rowCls){"string"==typeof rowCls?res.push(rowCls):Array.isArray(rowCls)&&rowCls.forEach((function(e){return res.push(e)}))},rowClass=this.gridOptionsService.get("rowClass");if(rowClass){if("function"==typeof rowClass)return console.warn("AG Grid: rowClass should not be a function, please use getRowClass instead"),[];process(rowClass)}var rowClassFunc=this.gridOptionsService.getCallback("getRowClass");rowClassFunc&&process(rowClassFunc({data:rowNode.data,node:rowNode,rowIndex:rowNode.rowIndex}));return res},RowCssClassCalculator.prototype.preProcessRowClassRules=function(rowNode){var res=[];return this.processRowClassRules(rowNode,(function(className){res.push(className)}),(function(className){})),res},RowCssClassCalculator.prototype.processRowClassRules=function(rowNode,onApplicableClass,onNotApplicableClass){var rowClassParams={data:rowNode.data,node:rowNode,rowIndex:rowNode.rowIndex,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};this.stylingService.processClassRules(this.gridOptionsService.get("rowClassRules"),rowClassParams,onApplicableClass,onNotApplicableClass)},RowCssClassCalculator.prototype.calculateRowLevel=function(rowNode){return rowNode.group?rowNode.level:rowNode.parent?rowNode.parent.level+1:0},__decorate$o([Autowired("stylingService")],RowCssClassCalculator.prototype,"stylingService",void 0),__decorate$o([Autowired("gridOptionsService")],RowCssClassCalculator.prototype,"gridOptionsService",void 0),RowCssClassCalculator=__decorate$o([Bean("rowCssClassCalculator")],RowCssClassCalculator)}(),__extends$n=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$n=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},RowNodeSorter=function(_super){function RowNodeSorter(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$n(RowNodeSorter,_super),RowNodeSorter.prototype.init=function(){var _this=this;this.isAccentedSort=this.gridOptionsService.is("accentedSort"),this.primaryColumnsSortGroups=this.gridOptionsService.isColumnsSortingCoupledToGroup(),this.addManagedPropertyListener("accentedSort",(function(propChange){return _this.isAccentedSort=propChange.currentValue})),this.addManagedPropertyListener("autoGroupColumnDef",(function(){return _this.primaryColumnsSortGroups=_this.gridOptionsService.isColumnsSortingCoupledToGroup()}))},RowNodeSorter.prototype.doFullSort=function(rowNodes,sortOptions){var sortedRowNodes=rowNodes.map((function(rowNode,pos){return{currentPos:pos,rowNode}}));return sortedRowNodes.sort(this.compareRowNodes.bind(this,sortOptions)),sortedRowNodes.map((function(item){return item.rowNode}))},RowNodeSorter.prototype.compareRowNodes=function(sortOptions,sortedNodeA,sortedNodeB){for(var nodeA=sortedNodeA.rowNode,nodeB=sortedNodeB.rowNode,i=0,len=sortOptions.length;i<len;i++){var sortOption=sortOptions[i],isDescending="desc"===sortOption.sort,valueA=this.getValue(nodeA,sortOption.column),valueB=this.getValue(nodeB,sortOption.column),comparatorResult=void 0,providedComparator=this.getComparator(sortOption,nodeA);if(comparatorResult=providedComparator?providedComparator(valueA,valueB,nodeA,nodeB,isDescending):_.defaultComparator(valueA,valueB,this.isAccentedSort),!isNaN(comparatorResult)&&0!==comparatorResult)return"asc"===sortOption.sort?comparatorResult:-1*comparatorResult}return sortedNodeA.currentPos-sortedNodeB.currentPos},RowNodeSorter.prototype.getComparator=function(sortOption,rowNode){var column=sortOption.column,comparatorOnCol=column.getColDef().comparator;if(null!=comparatorOnCol)return comparatorOnCol;if(column.getColDef().showRowGroup){var groupLeafField=!rowNode.group&&column.getColDef().field;if(groupLeafField){var primaryColumn=this.columnModel.getPrimaryColumn(groupLeafField);if(primaryColumn)return primaryColumn.getColDef().comparator}}},RowNodeSorter.prototype.getValue=function(node,column){var _a,_b;if(!this.primaryColumnsSortGroups)return this.valueService.getValue(column,node,!1,!1);if(node.rowGroupColumn===column){if(this.gridOptionsService.isGroupUseEntireRow(this.columnModel.isPivotActive())){if(column.getColDef().keyCreator)return node.key;var leafChild=null===(_a=node.allLeafChildren)||void 0===_a?void 0:_a[0];return leafChild?this.valueService.getValue(column,leafChild,!1,!1):void 0}var displayCol=this.columnModel.getGroupDisplayColumnForGroup(column.getId());if(!displayCol)return;return null===(_b=node.groupData)||void 0===_b?void 0:_b[displayCol.getId()]}return node.group&&column.getColDef().showRowGroup?void 0:this.valueService.getValue(column,node,!1,!1)},__decorate$n([Autowired("valueService")],RowNodeSorter.prototype,"valueService",void 0),__decorate$n([Autowired("columnModel")],RowNodeSorter.prototype,"columnModel",void 0),__decorate$n([PostConstruct],RowNodeSorter.prototype,"init",null),RowNodeSorter=__decorate$n([Bean("rowNodeSorter")],RowNodeSorter)}(BeanStub),__extends$m=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),CtrlsService=function(_super){function CtrlsService(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.ready=!1,_this.readyCallbacks=[],_this}var CtrlsService_1;return __extends$m(CtrlsService,_super),CtrlsService_1=CtrlsService,CtrlsService.prototype.checkReady=function(){if(this.ready=null!=this.gridCtrl&&null!=this.gridBodyCtrl&&null!=this.centerRowContainerCtrl&&null!=this.leftRowContainerCtrl&&null!=this.rightRowContainerCtrl&&null!=this.bottomCenterRowContainerCtrl&&null!=this.bottomLeftRowContainerCtrl&&null!=this.bottomRightRowContainerCtrl&&null!=this.topCenterRowContainerCtrl&&null!=this.topLeftRowContainerCtrl&&null!=this.topRightRowContainerCtrl&&null!=this.stickyTopCenterRowContainerCtrl&&null!=this.stickyTopLeftRowContainerCtrl&&null!=this.stickyTopRightRowContainerCtrl&&null!=this.centerHeaderRowContainerCtrl&&null!=this.leftHeaderRowContainerCtrl&&null!=this.rightHeaderRowContainerCtrl&&null!=this.fakeHScrollComp&&null!=this.fakeVScrollComp&&null!=this.gridHeaderCtrl,this.ready){var p_1=this.createReadyParams();this.readyCallbacks.forEach((function(c){return c(p_1)})),this.readyCallbacks.length=0}},CtrlsService.prototype.whenReady=function(callback){this.ready?callback(this.createReadyParams()):this.readyCallbacks.push(callback)},CtrlsService.prototype.createReadyParams=function(){return{centerRowContainerCtrl:this.centerRowContainerCtrl,leftRowContainerCtrl:this.leftRowContainerCtrl,rightRowContainerCtrl:this.rightRowContainerCtrl,bottomCenterRowContainerCtrl:this.bottomCenterRowContainerCtrl,bottomLeftRowContainerCtrl:this.bottomLeftRowContainerCtrl,bottomRightRowContainerCtrl:this.bottomRightRowContainerCtrl,topCenterRowContainerCtrl:this.topCenterRowContainerCtrl,topLeftRowContainerCtrl:this.topLeftRowContainerCtrl,topRightRowContainerCtrl:this.topRightRowContainerCtrl,stickyTopCenterRowContainerCtrl:this.stickyTopCenterRowContainerCtrl,stickyTopLeftRowContainerCtrl:this.stickyTopLeftRowContainerCtrl,stickyTopRightRowContainerCtrl:this.stickyTopRightRowContainerCtrl,centerHeaderRowContainerCtrl:this.centerHeaderRowContainerCtrl,leftHeaderRowContainerCtrl:this.leftHeaderRowContainerCtrl,rightHeaderRowContainerCtrl:this.rightHeaderRowContainerCtrl,fakeHScrollComp:this.fakeHScrollComp,fakeVScrollComp:this.fakeVScrollComp,gridBodyCtrl:this.gridBodyCtrl,gridCtrl:this.gridCtrl,gridHeaderCtrl:this.gridHeaderCtrl}},CtrlsService.prototype.registerFakeHScrollComp=function(comp){this.fakeHScrollComp=comp,this.checkReady()},CtrlsService.prototype.registerFakeVScrollComp=function(comp){this.fakeVScrollComp=comp,this.checkReady()},CtrlsService.prototype.registerGridHeaderCtrl=function(gridHeaderCtrl){this.gridHeaderCtrl=gridHeaderCtrl,this.checkReady()},CtrlsService.prototype.registerCenterRowContainerCtrl=function(ctrl){this.centerRowContainerCtrl=ctrl,this.checkReady()},CtrlsService.prototype.registerLeftRowContainerCtrl=function(ctrl){this.leftRowContainerCtrl=ctrl,this.checkReady()},CtrlsService.prototype.registerRightRowContainerCtrl=function(ctrl){this.rightRowContainerCtrl=ctrl,this.checkReady()},CtrlsService.prototype.registerTopCenterRowContainerCtrl=function(ctrl){this.topCenterRowContainerCtrl=ctrl,this.checkReady()},CtrlsService.prototype.registerTopLeftRowContainerCon=function(ctrl){this.topLeftRowContainerCtrl=ctrl,this.checkReady()},CtrlsService.prototype.registerTopRightRowContainerCtrl=function(ctrl){this.topRightRowContainerCtrl=ctrl,this.checkReady()},CtrlsService.prototype.registerStickyTopCenterRowContainerCtrl=function(ctrl){this.stickyTopCenterRowContainerCtrl=ctrl,this.checkReady()},CtrlsService.prototype.registerStickyTopLeftRowContainerCon=function(ctrl){this.stickyTopLeftRowContainerCtrl=ctrl,this.checkReady()},CtrlsService.prototype.registerStickyTopRightRowContainerCtrl=function(ctrl){this.stickyTopRightRowContainerCtrl=ctrl,this.checkReady()},CtrlsService.prototype.registerBottomCenterRowContainerCtrl=function(ctrl){this.bottomCenterRowContainerCtrl=ctrl,this.checkReady()},CtrlsService.prototype.registerBottomLeftRowContainerCtrl=function(ctrl){this.bottomLeftRowContainerCtrl=ctrl,this.checkReady()},CtrlsService.prototype.registerBottomRightRowContainerCtrl=function(ctrl){this.bottomRightRowContainerCtrl=ctrl,this.checkReady()},CtrlsService.prototype.registerHeaderContainer=function(ctrl,pinned){switch(pinned){case"left":this.leftHeaderRowContainerCtrl=ctrl;break;case"right":this.rightHeaderRowContainerCtrl=ctrl;break;default:this.centerHeaderRowContainerCtrl=ctrl}this.checkReady()},CtrlsService.prototype.registerGridBodyCtrl=function(ctrl){this.gridBodyCtrl=ctrl,this.checkReady()},CtrlsService.prototype.registerGridCtrl=function(ctrl){this.gridCtrl=ctrl,this.checkReady()},CtrlsService.prototype.getFakeHScrollComp=function(){return this.fakeHScrollComp},CtrlsService.prototype.getFakeVScrollComp=function(){return this.fakeVScrollComp},CtrlsService.prototype.getGridHeaderCtrl=function(){return this.gridHeaderCtrl},CtrlsService.prototype.getGridCtrl=function(){return this.gridCtrl},CtrlsService.prototype.getCenterRowContainerCtrl=function(){return this.centerRowContainerCtrl},CtrlsService.prototype.getTopCenterRowContainerCtrl=function(){return this.topCenterRowContainerCtrl},CtrlsService.prototype.getBottomCenterRowContainerCtrl=function(){return this.bottomCenterRowContainerCtrl},CtrlsService.prototype.getStickyTopCenterRowContainerCtrl=function(){return this.stickyTopCenterRowContainerCtrl},CtrlsService.prototype.getGridBodyCtrl=function(){return this.gridBodyCtrl},CtrlsService.prototype.getHeaderRowContainerCtrls=function(){return[this.leftHeaderRowContainerCtrl,this.rightHeaderRowContainerCtrl,this.centerHeaderRowContainerCtrl]},CtrlsService.prototype.getHeaderRowContainerCtrl=function(pinned){switch(pinned){case"left":return this.leftHeaderRowContainerCtrl;case"right":return this.rightHeaderRowContainerCtrl;default:return this.centerHeaderRowContainerCtrl}},CtrlsService.NAME="ctrlsService",CtrlsService=CtrlsService_1=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}([Bean(CtrlsService_1.NAME)],CtrlsService),CtrlsService}(BeanStub),__extends$l=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),CtrlsFactory=function(_super){function CtrlsFactory(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.registry={},_this}return __extends$l(CtrlsFactory,_super),CtrlsFactory.prototype.register=function(meta){this.registry[meta.controllerName]=meta.controllerClass},CtrlsFactory.prototype.getInstance=function(name){var ControllerClass=this.registry[name];if(null!=ControllerClass)return new ControllerClass},CtrlsFactory=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}([Bean("ctrlsFactory")],CtrlsFactory),CtrlsFactory}(BeanStub),__extends$k=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$k=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},AbstractFakeScrollComp=function(_super){function AbstractFakeScrollComp(template,direction){var _this=_super.call(this,template)||this;return _this.direction=direction,_this.hideTimeout=null,_this}return __extends$k(AbstractFakeScrollComp,_super),AbstractFakeScrollComp.prototype.postConstruct=function(){this.addManagedListener(this.eventService,Events.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",isMacOsUserAgent()||isIOSUserAgent())},AbstractFakeScrollComp.prototype.initialiseInvisibleScrollbar=function(){void 0===this.invisibleScrollbar&&(this.invisibleScrollbar=isInvisibleScrollbar(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))},AbstractFakeScrollComp.prototype.addActiveListenerToggles=function(){var _this=this,eGui=this.getGui();["mouseenter","mousedown","touchstart"].forEach((function(eventName){return _this.addManagedListener(eGui,eventName,(function(){return _this.addOrRemoveCssClass("ag-scrollbar-active",!0)}))})),["mouseleave","touchend"].forEach((function(eventName){return _this.addManagedListener(eGui,eventName,(function(){return _this.addOrRemoveCssClass("ag-scrollbar-active",!1)}))}))},AbstractFakeScrollComp.prototype.onScrollVisibilityChanged=function(){var _this=this;void 0===this.invisibleScrollbar&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame((function(){return _this.setScrollVisible()}))},AbstractFakeScrollComp.prototype.hideAndShowInvisibleScrollAsNeeded=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_BODY_SCROLL,(function(params){params.direction===_this.direction&&(null!==_this.hideTimeout&&(window.clearTimeout(_this.hideTimeout),_this.hideTimeout=null),_this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))})),this.addManagedListener(this.eventService,Events.EVENT_BODY_SCROLL_END,(function(){_this.hideTimeout=window.setTimeout((function(){_this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),_this.hideTimeout=null}),400)}))},AbstractFakeScrollComp.prototype.attemptSettingScrollPosition=function(value){var _this=this,viewport=this.getViewport();waitUntil((function(){return isVisible(viewport)}),(function(){return _this.setScrollPosition(value)}),100)},AbstractFakeScrollComp.prototype.getViewport=function(){return this.eViewport},AbstractFakeScrollComp.prototype.getContainer=function(){return this.eContainer},AbstractFakeScrollComp.prototype.onScrollCallback=function(fn){this.addManagedListener(this.getViewport(),"scroll",fn)},__decorate$k([RefSelector("eViewport")],AbstractFakeScrollComp.prototype,"eViewport",void 0),__decorate$k([RefSelector("eContainer")],AbstractFakeScrollComp.prototype,"eContainer",void 0),__decorate$k([Autowired("scrollVisibleService")],AbstractFakeScrollComp.prototype,"scrollVisibleService",void 0),__decorate$k([Autowired("ctrlsService")],AbstractFakeScrollComp.prototype,"ctrlsService",void 0),__decorate$k([Autowired("animationFrameService")],AbstractFakeScrollComp.prototype,"animationFrameService",void 0),AbstractFakeScrollComp}(Component),__extends$j=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$j=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},FakeHScrollComp=function(_super){function FakeHScrollComp(){return _super.call(this,FakeHScrollComp.TEMPLATE,"horizontal")||this}return __extends$j(FakeHScrollComp,_super),FakeHScrollComp.prototype.postConstruct=function(){var _this=this;_super.prototype.postConstruct.call(this);var spacerWidthsListener=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,spacerWidthsListener),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,spacerWidthsListener),this.addManagedListener(this.eventService,Events.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedPropertyListener("domLayout",spacerWidthsListener),this.ctrlsService.registerFakeHScrollComp(this),this.createManagedBean(new CenterWidthFeature((function(width){return _this.eContainer.style.width=width+"px"})))},FakeHScrollComp.prototype.initialiseInvisibleScrollbar=function(){void 0===this.invisibleScrollbar&&(this.enableRtl=this.gridOptionsService.is("enableRtl"),_super.prototype.initialiseInvisibleScrollbar.call(this),this.invisibleScrollbar&&this.refreshCompBottom())},FakeHScrollComp.prototype.onPinnedRowDataChanged=function(){this.refreshCompBottom()},FakeHScrollComp.prototype.refreshCompBottom=function(){if(this.invisibleScrollbar){var bottomPinnedHeight=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=bottomPinnedHeight+"px"}},FakeHScrollComp.prototype.onScrollVisibilityChanged=function(){_super.prototype.onScrollVisibilityChanged.call(this),this.setFakeHScrollSpacerWidths()},FakeHScrollComp.prototype.setFakeHScrollSpacerWidths=function(){var vScrollShowing=this.scrollVisibleService.isVerticalScrollShowing(),rightSpacing=this.columnModel.getDisplayedColumnsRightWidth(),scrollOnRight=!this.enableRtl&&vScrollShowing,scrollbarWidth=this.gridOptionsService.getScrollbarWidth();scrollOnRight&&(rightSpacing+=scrollbarWidth),setFixedWidth(this.eRightSpacer,rightSpacing),this.eRightSpacer.classList.toggle("ag-scroller-corner",rightSpacing<=scrollbarWidth);var leftSpacing=this.columnModel.getDisplayedColumnsLeftWidth();this.enableRtl&&vScrollShowing&&(leftSpacing+=scrollbarWidth),setFixedWidth(this.eLeftSpacer,leftSpacing),this.eLeftSpacer.classList.toggle("ag-scroller-corner",leftSpacing<=scrollbarWidth)},FakeHScrollComp.prototype.setScrollVisible=function(){var hScrollShowing=this.scrollVisibleService.isHorizontalScrollShowing(),invisibleScrollbar=this.invisibleScrollbar,isSuppressHorizontalScroll=this.gridOptionsService.is("suppressHorizontalScroll"),scrollbarWidth=hScrollShowing&&this.gridOptionsService.getScrollbarWidth()||0,scrollContainerSize=isSuppressHorizontalScroll?0:0===scrollbarWidth&&invisibleScrollbar?16:scrollbarWidth;this.addOrRemoveCssClass("ag-scrollbar-invisible",invisibleScrollbar),setFixedHeight(this.getGui(),scrollContainerSize),setFixedHeight(this.eViewport,scrollContainerSize),setFixedHeight(this.eContainer,scrollContainerSize),this.setDisplayed(hScrollShowing,{skipAriaHidden:!0})},FakeHScrollComp.prototype.getScrollPosition=function(){return getScrollLeft(this.getViewport(),this.enableRtl)},FakeHScrollComp.prototype.setScrollPosition=function(value){isVisible(this.getViewport())||this.attemptSettingScrollPosition(value),setScrollLeft(this.getViewport(),value,this.enableRtl)},FakeHScrollComp.TEMPLATE='<div class="ag-body-horizontal-scroll" aria-hidden="true">\n            <div class="ag-horizontal-left-spacer" ref="eLeftSpacer"></div>\n            <div class="ag-body-horizontal-scroll-viewport" ref="eViewport">\n                <div class="ag-body-horizontal-scroll-container" ref="eContainer"></div>\n            </div>\n            <div class="ag-horizontal-right-spacer" ref="eRightSpacer"></div>\n        </div>',__decorate$j([RefSelector("eLeftSpacer")],FakeHScrollComp.prototype,"eLeftSpacer",void 0),__decorate$j([RefSelector("eRightSpacer")],FakeHScrollComp.prototype,"eRightSpacer",void 0),__decorate$j([Autowired("columnModel")],FakeHScrollComp.prototype,"columnModel",void 0),__decorate$j([Autowired("pinnedRowModel")],FakeHScrollComp.prototype,"pinnedRowModel",void 0),__decorate$j([PostConstruct],FakeHScrollComp.prototype,"postConstruct",null),FakeHScrollComp}(AbstractFakeScrollComp),__extends$i=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$i=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},PinnedWidthService=function(_super){function PinnedWidthService(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$i(PinnedWidthService,_super),PinnedWidthService.prototype.postConstruct=function(){var listener=this.checkContainerWidths.bind(this);this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,listener),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,listener),this.addManagedPropertyListener("domLayout",listener)},PinnedWidthService.prototype.checkContainerWidths=function(){var printLayout=this.gridOptionsService.isDomLayout("print"),newLeftWidth=printLayout?0:this.columnModel.getDisplayedColumnsLeftWidth(),newRightWidth=printLayout?0:this.columnModel.getDisplayedColumnsRightWidth();newLeftWidth!=this.leftWidth&&(this.leftWidth=newLeftWidth,this.eventService.dispatchEvent({type:Events.EVENT_LEFT_PINNED_WIDTH_CHANGED})),newRightWidth!=this.rightWidth&&(this.rightWidth=newRightWidth,this.eventService.dispatchEvent({type:Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED}))},PinnedWidthService.prototype.getPinnedRightWidth=function(){return this.rightWidth},PinnedWidthService.prototype.getPinnedLeftWidth=function(){return this.leftWidth},__decorate$i([Autowired("columnModel")],PinnedWidthService.prototype,"columnModel",void 0),__decorate$i([PostConstruct],PinnedWidthService.prototype,"postConstruct",null),PinnedWidthService=__decorate$i([Bean("pinnedWidthService")],PinnedWidthService)}(BeanStub),__extends$h=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$h=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},RowNodeEventThrottle=function(_super){function RowNodeEventThrottle(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.events=[],_this}return __extends$h(RowNodeEventThrottle,_super),RowNodeEventThrottle.prototype.postConstruct=function(){"clientSide"==this.rowModel.getType()&&(this.clientSideRowModel=this.rowModel)},RowNodeEventThrottle.prototype.dispatchExpanded=function(event){var _this=this;if(null!=this.clientSideRowModel){this.events.push(event);null==this.dispatchExpandedDebounced&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce((function(){_this.clientSideRowModel&&_this.clientSideRowModel.onRowGroupOpened(),_this.events.forEach((function(e){return _this.eventService.dispatchEvent(e)})),_this.events=[]}))),this.dispatchExpandedDebounced()}else this.eventService.dispatchEvent(event)},__decorate$h([Autowired("animationFrameService")],RowNodeEventThrottle.prototype,"animationFrameService",void 0),__decorate$h([Autowired("rowModel")],RowNodeEventThrottle.prototype,"rowModel",void 0),__decorate$h([PostConstruct],RowNodeEventThrottle.prototype,"postConstruct",null),RowNodeEventThrottle=__decorate$h([Bean("rowNodeEventThrottle")],RowNodeEventThrottle)}(BeanStub),__assign$1=function(){return __assign$1=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign$1.apply(this,arguments)},__decorate$g=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__param$1=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},__read$5=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spreadArray$4=function(to,from){for(var i=0,il=from.length,j=to.length;i<il;i++,j++)to[j]=from[i];return to};function isTrue(value){return!0===value||"true"===value}var BarColumnLabelPlacement,GridOptionsService=function(){function GridOptionsService(){var _this=this;this.destroyed=!1,this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new EventService,this.globalEventHandlerFactory=function(restrictToSyncOnly){return function(eventName,event){if(!_this.destroyed){var alwaysSync=GridOptionsService_1.alwaysSyncGlobalEvents.has(eventName);if(!(alwaysSync&&!restrictToSyncOnly||!alwaysSync&&restrictToSyncOnly)){var callbackMethodName=ComponentUtil.getCallbackForEvent(eventName);"function"==typeof _this.gridOptions[callbackMethodName]&&_this.gridOptions[callbackMethodName](event)}}}}}var GridOptionsService_1;return GridOptionsService_1=GridOptionsService,Object.defineProperty(GridOptionsService.prototype,"context",{get:function(){return this.gridOptions.context},enumerable:!1,configurable:!0}),GridOptionsService.prototype.agWire=function(gridApi,columnApi){this.gridOptions.api=gridApi,this.gridOptions.columnApi=columnApi,this.api=gridApi,this.columnApi=columnApi},GridOptionsService.prototype.init=function(){this.gridOptionLookup=new Set(__spreadArray$4(__spreadArray$4([],__read$5(ComponentUtil.ALL_PROPERTIES)),__read$5(ComponentUtil.EVENT_CALLBACKS)));var async=!this.is("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),async),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.getScrollbarWidth()},GridOptionsService.prototype.destroy=function(){this.gridOptions.api=null,this.gridOptions.columnApi=null,this.destroyed=!0},GridOptionsService.prototype.is=function(property){return isTrue(this.gridOptions[property])},GridOptionsService.prototype.get=function(property){return this.gridOptions[property]},GridOptionsService.prototype.getNum=function(property){return function toNumber(value){return"number"==typeof value?value:"string"==typeof value?parseInt(value,10):void 0}(this.gridOptions[property])},GridOptionsService.prototype.getCallback=function(property){return this.mergeGridCommonParams(this.gridOptions[property])},GridOptionsService.prototype.exists=function(property){return exists(this.gridOptions[property])},GridOptionsService.prototype.mergeGridCommonParams=function(callback){var _this=this;if(callback){return function(callbackParams){var mergedParams=callbackParams;return mergedParams.api=_this.api,mergedParams.columnApi=_this.columnApi,mergedParams.context=_this.context,callback(mergedParams)}}return callback},GridOptionsService.prototype.__setPropertyOnly=function(key,newValue){var previousValue=this.gridOptions[key];return this.gridOptionLookup.has(key)&&(this.gridOptions[key]=newValue),previousValue!==newValue},GridOptionsService.prototype.set=function(key,newValue,force,eventParams,changeSet){if(void 0===force&&(force=!1),void 0===eventParams&&(eventParams={}),void 0===changeSet&&(changeSet=void 0),this.gridOptionLookup.has(key)){var previousValue=this.gridOptions[key];if(force||previousValue!==newValue){this.gridOptions[key]=newValue;var event_1=__assign$1({type:key,currentValue:newValue,previousValue,changeSet},eventParams);this.propertyEventService.dispatchEvent(event_1)}}},GridOptionsService.prototype.addEventListener=function(key,listener){this.propertyEventService.addEventListener(key,listener)},GridOptionsService.prototype.removeEventListener=function(key,listener){this.propertyEventService.removeEventListener(key,listener)},GridOptionsService.prototype.getGridId=function(){return this.api.getGridId()},GridOptionsService.prototype.getScrollbarWidth=function(){if(null==this.scrollbarWidth){var scrollbarWidth="number"==typeof this.gridOptions.scrollbarWidth&&this.gridOptions.scrollbarWidth>=0?this.gridOptions.scrollbarWidth:getScrollbarWidth();null!=scrollbarWidth&&(this.scrollbarWidth=scrollbarWidth,this.eventService.dispatchEvent({type:Events.EVENT_SCROLLBAR_WIDTH_CHANGED}))}return this.scrollbarWidth},GridOptionsService.prototype.isRowModelType=function(rowModelType){return this.gridOptions.rowModelType===rowModelType||"clientSide"===rowModelType&&missing(this.gridOptions.rowModelType)},GridOptionsService.prototype.isDomLayout=function(domLayout){var _a;return(null!==(_a=this.gridOptions.domLayout)&&void 0!==_a?_a:"normal")===domLayout},GridOptionsService.prototype.isRowSelection=function(){return"single"===this.gridOptions.rowSelection||"multiple"===this.gridOptions.rowSelection},GridOptionsService.prototype.useAsyncEvents=function(){return!this.is("suppressAsyncEvents")},GridOptionsService.prototype.isGetRowHeightFunction=function(){return"function"==typeof this.gridOptions.getRowHeight},GridOptionsService.prototype.getRowHeightForNode=function(rowNode,allowEstimate,defaultRowHeight){if(void 0===allowEstimate&&(allowEstimate=!1),null==defaultRowHeight&&(defaultRowHeight=this.environment.getDefaultRowHeight()),this.isGetRowHeightFunction()){if(allowEstimate)return{height:defaultRowHeight,estimated:!0};var params={node:rowNode,data:rowNode.data},height=this.getCallback("getRowHeight")(params);if(this.isNumeric(height))return 0===height&&doOnce((function(){return console.warn("AG Grid: The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead.")}),"invalidRowHeight"),{height:Math.max(1,height),estimated:!1}}return rowNode.detail&&this.is("masterDetail")?this.getMasterDetailRowHeight():{height:this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:defaultRowHeight,estimated:!1}},GridOptionsService.prototype.getMasterDetailRowHeight=function(){return this.is("detailRowAutoHeight")?{height:1,estimated:!1}:this.isNumeric(this.gridOptions.detailRowHeight)?{height:this.gridOptions.detailRowHeight,estimated:!1}:{height:300,estimated:!1}},GridOptionsService.prototype.getRowHeightAsNumber=function(){if(!this.gridOptions.rowHeight||missing(this.gridOptions.rowHeight))return this.environment.getDefaultRowHeight();var rowHeight=this.environment.refreshRowHeightVariable();return-1!==rowHeight?rowHeight:(console.warn("AG Grid row height must be a number if not using standard row model"),this.environment.getDefaultRowHeight())},GridOptionsService.prototype.isNumeric=function(value){return!isNaN(value)&&"number"==typeof value&&isFinite(value)},GridOptionsService.prototype.getDomDataKey=function(){return this.domDataKey},GridOptionsService.prototype.getDomData=function(element,key){var domData=element[this.getDomDataKey()];return domData?domData[key]:void 0},GridOptionsService.prototype.setDomData=function(element,key,value){var domDataKey=this.getDomDataKey(),domData=element[domDataKey];missing(domData)&&(domData={},element[domDataKey]=domData),domData[key]=value},GridOptionsService.prototype.getDocument=function(){var result=null;return this.gridOptions.getDocument&&exists(this.gridOptions.getDocument)?result=this.gridOptions.getDocument():this.eGridDiv&&(result=this.eGridDiv.ownerDocument),result&&exists(result)?result:document},GridOptionsService.prototype.getWindow=function(){return this.getDocument().defaultView||window},GridOptionsService.prototype.getRootNode=function(){return this.eGridDiv.getRootNode()},GridOptionsService.prototype.getAsyncTransactionWaitMillis=function(){return exists(this.gridOptions.asyncTransactionWaitMillis)?this.gridOptions.asyncTransactionWaitMillis:50},GridOptionsService.prototype.isAnimateRows=function(){return!this.is("ensureDomOrder")&&this.is("animateRows")},GridOptionsService.prototype.isGroupRowsSticky=function(){return!(this.is("suppressGroupRowsSticky")||this.is("paginateChildRows")||this.is("groupHideOpenParents"))},GridOptionsService.prototype.isColumnsSortingCoupledToGroup=function(){var autoGroupColumnDef=this.gridOptions.autoGroupColumnDef;return this.isRowModelType("clientSide")&&!(null==autoGroupColumnDef?void 0:autoGroupColumnDef.comparator)&&!this.is("treeData")},GridOptionsService.prototype.getGroupAggFiltering=function(){var userValue=this.gridOptions.groupAggFiltering;return"function"==typeof userValue?this.getCallback("groupAggFiltering"):isTrue(userValue)?function(){return!0}:void 0},GridOptionsService.prototype.isGroupIncludeFooterTrueOrCallback=function(){var userValue=this.gridOptions.groupIncludeFooter;return isTrue(userValue)||"function"==typeof userValue},GridOptionsService.prototype.getGroupIncludeFooter=function(){var userValue=this.gridOptions.groupIncludeFooter;return"function"==typeof userValue?this.getCallback("groupIncludeFooter"):isTrue(userValue)?function(){return!0}:function(){return!1}},GridOptionsService.prototype.isGroupMultiAutoColumn=function(){return this.gridOptions.groupDisplayType?matchesGroupDisplayType("multipleColumns",this.gridOptions.groupDisplayType):this.is("groupHideOpenParents")},GridOptionsService.prototype.isGroupUseEntireRow=function(pivotMode){return!pivotMode&&(!!this.gridOptions.groupDisplayType&&matchesGroupDisplayType("groupRows",this.gridOptions.groupDisplayType))},GridOptionsService.alwaysSyncGlobalEvents=new Set([Events.EVENT_GRID_PRE_DESTROYED]),__decorate$g([Autowired("gridOptions")],GridOptionsService.prototype,"gridOptions",void 0),__decorate$g([Autowired("eventService")],GridOptionsService.prototype,"eventService",void 0),__decorate$g([Autowired("environment")],GridOptionsService.prototype,"environment",void 0),__decorate$g([Autowired("eGridDiv")],GridOptionsService.prototype,"eGridDiv",void 0),__decorate$g([__param$1(0,Qualifier("gridApi")),__param$1(1,Qualifier("columnApi"))],GridOptionsService.prototype,"agWire",null),__decorate$g([PostConstruct],GridOptionsService.prototype,"init",null),__decorate$g([PreDestroy],GridOptionsService.prototype,"destroy",null),GridOptionsService=GridOptionsService_1=__decorate$g([Bean("gridOptionsService")],GridOptionsService)}(),__extends$g=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),LocaleService=function(_super){function LocaleService(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$g(LocaleService,_super),LocaleService.prototype.getLocaleTextFunc=function(){var getLocaleText=this.gridOptionsService.getCallback("getLocaleText");if(getLocaleText)return function(key,defaultValue,variableValues){return getLocaleText({key,defaultValue,variableValues})};var localeText=this.gridOptionsService.get("localeText");return function(key,defaultValue,variableValues){var localisedText=localeText&&localeText[key];if(localisedText&&variableValues&&variableValues.length)for(var found=0;!(found>=variableValues.length);){if(-1===localisedText.indexOf("${variable}"))break;localisedText=localisedText.replace("${variable}",variableValues[found++])}return null!=localisedText?localisedText:defaultValue}},LocaleService=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}([Bean("localeService")],LocaleService),LocaleService}(BeanStub),__extends$f=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),FakeVScrollComp=function(_super){function FakeVScrollComp(){return _super.call(this,FakeVScrollComp.TEMPLATE,"vertical")||this}return __extends$f(FakeVScrollComp,_super),FakeVScrollComp.prototype.postConstruct=function(){_super.prototype.postConstruct.call(this),this.createManagedBean(new SetHeightFeature(this.eContainer)),this.ctrlsService.registerFakeVScrollComp(this),this.addManagedListener(this.eventService,Events.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onRowContainerHeightChanged.bind(this))},FakeVScrollComp.prototype.setScrollVisible=function(){var vScrollShowing=this.scrollVisibleService.isVerticalScrollShowing(),invisibleScrollbar=this.invisibleScrollbar,scrollbarWidth=vScrollShowing&&this.gridOptionsService.getScrollbarWidth()||0,adjustedScrollbarWidth=0===scrollbarWidth&&invisibleScrollbar?16:scrollbarWidth;this.addOrRemoveCssClass("ag-scrollbar-invisible",invisibleScrollbar),setFixedWidth(this.getGui(),adjustedScrollbarWidth),setFixedWidth(this.eViewport,adjustedScrollbarWidth),setFixedWidth(this.eContainer,adjustedScrollbarWidth),this.setDisplayed(vScrollShowing,{skipAriaHidden:!0})},FakeVScrollComp.prototype.onRowContainerHeightChanged=function(){var gridBodyViewportEl=this.ctrlsService.getGridBodyCtrl().getBodyViewportElement();this.eViewport.scrollTop!=gridBodyViewportEl.scrollTop&&(this.eViewport.scrollTop=gridBodyViewportEl.scrollTop)},FakeVScrollComp.prototype.getScrollPosition=function(){return this.getViewport().scrollTop},FakeVScrollComp.prototype.setScrollPosition=function(value){isVisible(this.getViewport())||this.attemptSettingScrollPosition(value),this.getViewport().scrollTop=value},FakeVScrollComp.TEMPLATE='<div class="ag-body-vertical-scroll" aria-hidden="true">\n            <div class="ag-body-vertical-scroll-viewport" ref="eViewport">\n                <div class="ag-body-vertical-scroll-container" ref="eContainer"></div>\n            </div>\n        </div>',function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);c>3&&r&&Object.defineProperty(target,key,r)}([PostConstruct],FakeVScrollComp.prototype,"postConstruct",null),FakeVScrollComp}(AbstractFakeScrollComp),__extends$e=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign=function(){return __assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)},__decorate$d=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$4=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spreadArray$3=function(to,from){for(var i=0,il=from.length,j=to.length;i<il;i++,j++)to[j]=from[i];return to},MONTH_LOCALE_TEXT={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},MONTH_KEYS=["january","february","march","april","may","june","july","august","september","october","november","december"],DataTypeService=function(_super){function DataTypeService(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.dataTypeDefinitions={},_this.isWaitingForRowData=!1,_this.isColumnTypeOverrideInDataTypeDefinitions=!1,_this.columnStateUpdatesPendingInference={},_this.columnStateUpdateListenerDestroyFuncs=[],_this}return __extends$e(DataTypeService,_super),DataTypeService.prototype.init=function(){var _this=this;this.groupHideOpenParents=this.gridOptionsService.is("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",(function(){_this.groupHideOpenParents=_this.gridOptionsService.is("groupHideOpenParents")})),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",(function(){_this.processDataTypeDefinitions(),_this.columnModel.recreateColumnDefs("gridOptionsChanged")}))},DataTypeService.prototype.processDataTypeDefinitions=function(){var _a,_this=this,defaultDataTypes=this.getDefaultDataTypes();this.dataTypeDefinitions={},Object.entries(defaultDataTypes).forEach((function(_a){var _b=__read$4(_a,2),cellDataType=_b[0],dataTypeDefinition=_b[1];_this.dataTypeDefinitions[cellDataType]=__assign(__assign({},dataTypeDefinition),{groupSafeValueFormatter:_this.createGroupSafeValueFormatter(dataTypeDefinition)})}));var dataTypeDefinitions=null!==(_a=this.gridOptionsService.get("dataTypeDefinitions"))&&void 0!==_a?_a:{};this.dataTypeMatchers={},Object.entries(dataTypeDefinitions).forEach((function(_a){var _b=__read$4(_a,2),cellDataType=_b[0],dataTypeDefinition=_b[1],mergedDataTypeDefinition=_this.processDataTypeDefinition(dataTypeDefinition,dataTypeDefinitions,[cellDataType],defaultDataTypes);mergedDataTypeDefinition&&(_this.dataTypeDefinitions[cellDataType]=mergedDataTypeDefinition,dataTypeDefinition.dataTypeMatcher&&(_this.dataTypeMatchers[cellDataType]=dataTypeDefinition.dataTypeMatcher))})),this.checkObjectValueHandlers(defaultDataTypes),["dateString","text","number","boolean","date"].forEach((function(cellDataType){var overriddenDataTypeMatcher=_this.dataTypeMatchers[cellDataType];overriddenDataTypeMatcher&&delete _this.dataTypeMatchers[cellDataType],_this.dataTypeMatchers[cellDataType]=null!=overriddenDataTypeMatcher?overriddenDataTypeMatcher:defaultDataTypes[cellDataType].dataTypeMatcher}))},DataTypeService.prototype.mergeDataTypeDefinitions=function(parentDataTypeDefinition,childDataTypeDefinition){var mergedDataTypeDefinition=__assign(__assign({},parentDataTypeDefinition),childDataTypeDefinition);return parentDataTypeDefinition.columnTypes&&childDataTypeDefinition.columnTypes&&childDataTypeDefinition.appendColumnTypes&&(mergedDataTypeDefinition.columnTypes=__spreadArray$3(__spreadArray$3([],__read$4(this.convertColumnTypes(parentDataTypeDefinition.columnTypes))),__read$4(this.convertColumnTypes(childDataTypeDefinition.columnTypes)))),mergedDataTypeDefinition},DataTypeService.prototype.processDataTypeDefinition=function(dataTypeDefinition,dataTypeDefinitions,alreadyProcessedDataTypes,defaultDataTypes){var mergedDataTypeDefinition,extendsCellDataType=dataTypeDefinition.extendsDataType;if(dataTypeDefinition.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),dataTypeDefinition.extendsDataType===dataTypeDefinition.baseDataType){var baseDataTypeDefinition=defaultDataTypes[extendsCellDataType];if(!this.validateDataTypeDefinition(dataTypeDefinition,baseDataTypeDefinition,extendsCellDataType))return;mergedDataTypeDefinition=this.mergeDataTypeDefinitions(baseDataTypeDefinition,dataTypeDefinition)}else{if(alreadyProcessedDataTypes.includes(extendsCellDataType))return void doOnce((function(){return console.warn('AG Grid: Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.')}),"dataTypeExtendsCircularRef");var extendedDataTypeDefinition=dataTypeDefinitions[extendsCellDataType];if(!this.validateDataTypeDefinition(dataTypeDefinition,extendedDataTypeDefinition,extendsCellDataType))return;var mergedExtendedDataTypeDefinition=this.processDataTypeDefinition(extendedDataTypeDefinition,dataTypeDefinitions,__spreadArray$3(__spreadArray$3([],__read$4(alreadyProcessedDataTypes)),[extendsCellDataType]),defaultDataTypes);if(!mergedExtendedDataTypeDefinition)return;mergedDataTypeDefinition=this.mergeDataTypeDefinitions(mergedExtendedDataTypeDefinition,dataTypeDefinition)}return __assign(__assign({},mergedDataTypeDefinition),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(mergedDataTypeDefinition)})},DataTypeService.prototype.validateDataTypeDefinition=function(dataTypeDefinition,parentDataTypeDefinition,parentCellDataType){return parentDataTypeDefinition?parentDataTypeDefinition.baseDataType===dataTypeDefinition.baseDataType||(doOnce((function(){return console.warn('AG Grid: The "baseDataType" property of a data type definition must match that of its parent.')}),"dataTypeBaseTypesMatch"),!1):(doOnce((function(){return console.warn("AG Grid: The data type definition "+parentCellDataType+" does not exist.")}),"dataTypeDefMissing"+parentCellDataType),!1)},DataTypeService.prototype.createGroupSafeValueFormatter=function(dataTypeDefinition){var _this=this;if(dataTypeDefinition.valueFormatter)return function(params){var _a,_b;if(!(null===(_a=params.node)||void 0===_a?void 0:_a.group))return _this.groupHideOpenParents&&params.column.isRowGroupActive()?"string"!=typeof params.value||(null===(_b=dataTypeDefinition.dataTypeMatcher)||void 0===_b?void 0:_b.call(dataTypeDefinition,params.value))?dataTypeDefinition.valueFormatter(params):void 0:dataTypeDefinition.valueFormatter(params);var aggFunc=params.column.getAggFunc();if(aggFunc){if("first"===aggFunc||"last"===aggFunc)return dataTypeDefinition.valueFormatter(params);if("number"===dataTypeDefinition.baseDataType&&"count"!==aggFunc){if("number"==typeof params.value)return dataTypeDefinition.valueFormatter(params);if("object"==typeof params.value){if(!params.value)return;if("toNumber"in params.value)return dataTypeDefinition.valueFormatter(__assign(__assign({},params),{value:params.value.toNumber()}));if("value"in params.value)return dataTypeDefinition.valueFormatter(__assign(__assign({},params),{value:params.value.value}))}}}}},DataTypeService.prototype.updateColDefAndGetDataTypeDefinitionColumnType=function(colDef,userColDef,colId){var cellDataType=userColDef.cellDataType,field=userColDef.field;if(void 0===cellDataType&&(cellDataType=colDef.cellDataType),null!=cellDataType&&!0!==cellDataType||(cellDataType=!!this.canInferCellDataType(colDef,userColDef)&&this.inferCellDataType(field,colId)),cellDataType){var dataTypeDefinition=this.dataTypeDefinitions[cellDataType];if(dataTypeDefinition)return colDef.cellDataType=cellDataType,dataTypeDefinition.groupSafeValueFormatter&&(colDef.valueFormatter=dataTypeDefinition.groupSafeValueFormatter),dataTypeDefinition.valueParser&&(colDef.valueParser=dataTypeDefinition.valueParser),dataTypeDefinition.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(colDef,dataTypeDefinition,colId),dataTypeDefinition.columnTypes;doOnce((function(){return console.warn('AG Grid: Missing data type definition - "'+cellDataType+'"')}),"dataTypeMissing"+cellDataType)}else colDef.cellDataType=!1},DataTypeService.prototype.updateColDefAndGetColumnType=function(colDef,userColDef,colId){var _a,_b,dataTypeDefinitionColumnType=this.updateColDefAndGetDataTypeDefinitionColumnType(colDef,userColDef,colId),columnTypes=null!==(_b=null!==(_a=userColDef.type)&&void 0!==_a?_a:dataTypeDefinitionColumnType)&&void 0!==_b?_b:colDef.type;return colDef.type=columnTypes,columnTypes?this.convertColumnTypes(columnTypes):void 0},DataTypeService.prototype.addColumnListeners=function(column){if(this.isWaitingForRowData){var columnStateUpdates=this.columnStateUpdatesPendingInference[column.getColId()];if(columnStateUpdates){var columnListener=function(event){columnStateUpdates.add(event.key)};column.addEventListener(Column.EVENT_STATE_UPDATED,columnListener),this.columnStateUpdateListenerDestroyFuncs.push((function(){return column.removeEventListener(Column.EVENT_STATE_UPDATED,columnListener)}))}}},DataTypeService.prototype.canInferCellDataType=function(colDef,userColDef){var _a,_this=this;if("clientSide"!==this.rowModel.getType())return!1;var propsToCheckForInference={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(userColDef,propsToCheckForInference))return!1;var columnTypes=null===userColDef.type?colDef.type:userColDef.type;if(columnTypes){var columnTypeDefs_1=null!==(_a=this.gridOptionsService.get("columnTypes"))&&void 0!==_a?_a:{};if(this.convertColumnTypes(columnTypes).some((function(columnType){var columnTypeDef=columnTypeDefs_1[columnType.trim()];return columnTypeDef&&_this.doColDefPropsPreventInference(columnTypeDef,propsToCheckForInference)})))return!1}return!this.doColDefPropsPreventInference(colDef,propsToCheckForInference)},DataTypeService.prototype.doColDefPropsPreventInference=function(colDef,propsToCheckForInference){var _this=this;return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some((function(_a){var _b=__read$4(_a,2),prop=_b[0],comparisonValue=_b[1];return _this.doesColDefPropPreventInference(colDef,propsToCheckForInference,prop,comparisonValue)}))},DataTypeService.prototype.doesColDefPropPreventInference=function(colDef,checkProps,prop,comparisonValue){if(!checkProps[prop])return!1;var value=colDef[prop];return null===value?(checkProps[prop]=!1,!1):void 0===comparisonValue?!!value:value===comparisonValue},DataTypeService.prototype.inferCellDataType=function(field,colId){var _a;if(field){var value,initialData=this.getInitialData();if(initialData){var fieldContainsDots=field.indexOf(".")>=0&&!this.gridOptionsService.is("suppressFieldDotNotation");value=getValueUsingField(initialData,field,fieldContainsDots)}else this.initWaitForRowData(colId);if(null!=value)return __read$4(null!==(_a=Object.entries(this.dataTypeMatchers).find((function(_a){return(0,__read$4(_a,2)[1])(value)})))&&void 0!==_a?_a:["object"],1)[0]}},DataTypeService.prototype.getInitialData=function(){var rowData=this.gridOptionsService.get("rowData");if(null==rowData?void 0:rowData.length)return rowData[0];if(this.initialData)return this.initialData;var rowNodes=this.rowModel.getRootNode().allLeafChildren;return(null==rowNodes?void 0:rowNodes.length)?rowNodes[0].data:null},DataTypeService.prototype.initWaitForRowData=function(colId){var _this=this;if(this.columnStateUpdatesPendingInference[colId]=new Set,!this.isWaitingForRowData){this.isWaitingForRowData=!0;var columnTypeOverridesExist=this.isColumnTypeOverrideInDataTypeDefinitions;columnTypeOverridesExist&&this.columnModel.queueResizeOperations();var destroyFunc=this.addManagedListener(this.eventService,Events.EVENT_ROW_DATA_UPDATE_STARTED,(function(event){var firstRowData=event.firstRowData;if(firstRowData){null==destroyFunc||destroyFunc(),_this.isWaitingForRowData=!1,_this.processColumnsPendingInference(firstRowData,columnTypeOverridesExist),_this.columnStateUpdatesPendingInference={},columnTypeOverridesExist&&_this.columnModel.processResizeOperations();var dataTypesInferredEvent={type:Events.EVENT_DATA_TYPES_INFERRED};_this.eventService.dispatchEvent(dataTypesInferredEvent)}}))}},DataTypeService.prototype.isPendingInference=function(){return this.isWaitingForRowData},DataTypeService.prototype.processColumnsPendingInference=function(firstRowData,columnTypeOverridesExist){var _this=this;this.initialData=firstRowData;var state=[];this.columnStateUpdateListenerDestroyFuncs.forEach((function(destroyFunc){return destroyFunc()})),this.columnStateUpdateListenerDestroyFuncs=[];var newRowGroupColumnStateWithoutIndex={},newPivotColumnStateWithoutIndex={};Object.entries(this.columnStateUpdatesPendingInference).forEach((function(_a){var _b=__read$4(_a,2),colId=_b[0],columnStateUpdates=_b[1],column=_this.columnModel.getGridColumn(colId);if(column){var oldColDef=column.getColDef();if(_this.columnModel.resetColumnDefIntoColumn(column)){var newColDef=column.getColDef();if(columnTypeOverridesExist&&newColDef.type&&newColDef.type!==oldColDef.type){var updatedColumnState=_this.getUpdatedColumnState(column,columnStateUpdates);updatedColumnState.rowGroup&&null==updatedColumnState.rowGroupIndex&&(newRowGroupColumnStateWithoutIndex[colId]=updatedColumnState),updatedColumnState.pivot&&null==updatedColumnState.pivotIndex&&(newPivotColumnStateWithoutIndex[colId]=updatedColumnState),state.push(updatedColumnState)}}}})),columnTypeOverridesExist&&state.push.apply(state,__spreadArray$3([],__read$4(this.columnModel.generateColumnStateForRowGroupAndPivotIndexes(newRowGroupColumnStateWithoutIndex,newPivotColumnStateWithoutIndex)))),state.length&&this.columnModel.applyColumnState({state},"cellDataTypeInferred"),this.initialData=null},DataTypeService.prototype.getUpdatedColumnState=function(column,columnStateUpdates){var columnState=this.columnModel.getColumnStateFromColDef(column);return columnStateUpdates.forEach((function(key){delete columnState[key],"rowGroup"===key?delete columnState.rowGroupIndex:"pivot"===key&&delete columnState.pivotIndex})),columnState},DataTypeService.prototype.checkObjectValueHandlers=function(defaultDataTypes){var resolvedObjectDataTypeDefinition=this.dataTypeDefinitions.object,defaultObjectDataTypeDefinition=defaultDataTypes.object;this.hasObjectValueParser=resolvedObjectDataTypeDefinition.valueParser!==defaultObjectDataTypeDefinition.valueParser,this.hasObjectValueFormatter=resolvedObjectDataTypeDefinition.valueFormatter!==defaultObjectDataTypeDefinition.valueFormatter},DataTypeService.prototype.convertColumnTypes=function(type){var typeKeys=[];type instanceof Array?type.some((function(a){return"string"!=typeof a}))?console.warn("AG Grid: if colDef.type is supplied an array it should be of type 'string[]'"):typeKeys=type:"string"==typeof type?typeKeys=type.split(","):console.warn("AG Grid: colDef.type should be of type 'string' | 'string[]'");return typeKeys},DataTypeService.prototype.getDateStringTypeDefinition=function(){return this.dataTypeDefinitions.dateString},DataTypeService.prototype.getDateParserFunction=function(){return this.getDateStringTypeDefinition().dateParser},DataTypeService.prototype.getDateFormatterFunction=function(){return this.getDateStringTypeDefinition().dateFormatter},DataTypeService.prototype.getDataTypeDefinition=function(column){var colDef=column.getColDef();if(colDef.cellDataType)return this.dataTypeDefinitions[colDef.cellDataType]},DataTypeService.prototype.getBaseDataType=function(column){var _a;return null===(_a=this.getDataTypeDefinition(column))||void 0===_a?void 0:_a.baseDataType},DataTypeService.prototype.checkType=function(column,value){var _a;if(null==value)return!0;var dataTypeMatcher=null===(_a=this.getDataTypeDefinition(column))||void 0===_a?void 0:_a.dataTypeMatcher;return!dataTypeMatcher||dataTypeMatcher(value)},DataTypeService.prototype.validateColDef=function(colDef){"object"===colDef.cellDataType&&(colDef.valueFormatter!==this.dataTypeDefinitions.object.groupSafeValueFormatter||this.hasObjectValueFormatter||doOnce((function(){return console.warn('AG Grid: Cell data type is "object" but no value formatter has been provided. Please either provide an object data type definition with a value formatter, or set "colDef.valueFormatter"')}),"dataTypeObjectValueFormatter"),colDef.editable&&colDef.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&doOnce((function(){return console.warn('AG Grid: Cell data type is "object" but no value parser has been provided. Please either provide an object data type definition with a value parser, or set "colDef.valueParser"')}),"dataTypeObjectValueParser"))},DataTypeService.prototype.setColDefPropertiesForBaseDataType=function(colDef,dataTypeDefinition,colId){var _this=this,formatValue=function(column,node,value){var valueFormatter=column.getColDef().valueFormatter;return valueFormatter===dataTypeDefinition.groupSafeValueFormatter&&(valueFormatter=dataTypeDefinition.valueFormatter),_this.valueFormatterService.formatValue(column,node,value,valueFormatter)},usingSetFilter=ModuleRegistry.__isRegistered(ModuleNames.SetFilterModule,this.context.getGridId()),translate=this.localeService.getLocaleTextFunc(),mergeFilterParams=function(params){var filterParams=colDef.filterParams;colDef.filterParams="object"==typeof filterParams?__assign(__assign({},filterParams),params):params};switch(colDef.useValueFormatterForExport=!0,colDef.useValueParserForImport=!0,dataTypeDefinition.baseDataType){case"number":colDef.cellEditor="agNumberCellEditor",usingSetFilter&&mergeFilterParams({comparator:function(a,b){var valA=null==a?0:parseInt(a),valB=null==b?0:parseInt(b);return valA===valB?0:valA>valB?1:-1}});break;case"boolean":colDef.cellEditor="agCheckboxCellEditor",colDef.cellRenderer="agCheckboxCellRenderer",colDef.suppressKeyboardEvent=function(params){return!!params.colDef.editable&&params.event.key===KeyCode.SPACE},mergeFilterParams(usingSetFilter?{valueFormatter:function(params){return exists(params.value)?translate(String(params.value),params.value?"True":"False"):translate("blanks","(Blanks)")}}:{maxNumConditions:1,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:function(_filterValues,cellValue){return cellValue},numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:function(_filterValues,cellValue){return!1===cellValue},numberOfInputs:0}]});break;case"date":colDef.cellEditor="agDateCellEditor",colDef.keyCreator=function(params){return formatValue(params.column,params.node,params.value)},usingSetFilter&&mergeFilterParams({valueFormatter:function(params){var valueFormatted=formatValue(params.column,params.node,params.value);return exists(valueFormatted)?valueFormatted:translate("blanks","(Blanks)")},treeList:!0,treeListFormatter:function(pathKey,level){if(1===level&&null!=pathKey){var monthKey=MONTH_KEYS[Number(pathKey)-1];return translate(monthKey,MONTH_LOCALE_TEXT[monthKey])}return null!=pathKey?pathKey:translate("blanks","(Blanks)")}});break;case"dateString":colDef.cellEditor="agDateStringCellEditor",colDef.keyCreator=function(params){return formatValue(params.column,params.node,params.value)};var convertToDate_1=this.getDateParserFunction();mergeFilterParams(usingSetFilter?{valueFormatter:function(params){var valueFormatted=formatValue(params.column,params.node,params.value);return exists(valueFormatted)?valueFormatted:translate("blanks","(Blanks)")},treeList:!0,treeListPathGetter:function(value){var date=convertToDate_1(null!=value?value:void 0);return date?[String(date.getFullYear()),String(date.getMonth()+1),String(date.getDate())]:null},treeListFormatter:function(pathKey,level){if(1===level&&null!=pathKey){var monthKey=MONTH_KEYS[Number(pathKey)-1];return translate(monthKey,MONTH_LOCALE_TEXT[monthKey])}return null!=pathKey?pathKey:translate("blanks","(Blanks)")}}:{comparator:function(filterDate,cellValue){var cellAsDate=convertToDate_1(cellValue);return null==cellValue||cellAsDate<filterDate?-1:cellAsDate>filterDate?1:0}});break;case"object":colDef.cellEditorParams={useFormatter:!0},colDef.comparator=function(a,b){var column=_this.columnModel.getPrimaryColumn(colId),colDef=null==column?void 0:column.getColDef();if(!column||!colDef)return 0;var valA=null==a?"":formatValue(column,null,a),valB=null==b?"":formatValue(column,null,b);return valA===valB?0:valA>valB?1:-1},colDef.keyCreator=function(params){return formatValue(params.column,params.node,params.value)},usingSetFilter?mergeFilterParams({valueFormatter:function(params){var valueFormatted=formatValue(params.column,params.node,params.value);return exists(valueFormatted)?valueFormatted:translate("blanks","(Blanks)")}}):colDef.filterValueGetter=function(params){return formatValue(params.column,params.node,_this.valueService.getValue(params.column,params.node))}}},DataTypeService.prototype.getDefaultDataTypes=function(){var defaultDateFormatMatcher=function(value){return!!value.match("^\\d{4}-\\d{2}-\\d{2}$")},translate=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:function(params){return""===params.newValue?null:Number(params.newValue)},valueFormatter:function(params){return null==params.value?"":"number"!=typeof params.value||isNaN(params.value)?translate("invalidNumber","Invalid Number"):String(params.value)},dataTypeMatcher:function(value){return"number"==typeof value}},text:{baseDataType:"text",valueParser:function(params){return""===params.newValue?null:toStringOrNull(params.newValue)},dataTypeMatcher:function(value){return"string"==typeof value}},boolean:{baseDataType:"boolean",valueParser:function(params){return""===params.newValue?null:"true"===String(params.newValue).toLowerCase()},valueFormatter:function(params){return null==params.value?"":String(params.value)},dataTypeMatcher:function(value){return"boolean"==typeof value}},date:{baseDataType:"date",valueParser:function(params){return parseDateTimeFromString(null==params.newValue?null:String(params.newValue))},valueFormatter:function(params){var _a;return null==params.value?"":params.value instanceof Date&&!isNaN(params.value.getTime())?null!==(_a=serialiseDate(params.value,!1))&&void 0!==_a?_a:"":translate("invalidDate","Invalid Date")},dataTypeMatcher:function(value){return value instanceof Date}},dateString:{baseDataType:"dateString",dateParser:function(value){var _a;return null!==(_a=parseDateTimeFromString(value))&&void 0!==_a?_a:void 0},dateFormatter:function(value){var _a;return null!==(_a=serialiseDate(null!=value?value:null,!1))&&void 0!==_a?_a:void 0},valueParser:function(params){return defaultDateFormatMatcher(String(params.newValue))?params.newValue:null},valueFormatter:function(params){return defaultDateFormatMatcher(String(params.value))?params.value:""},dataTypeMatcher:function(value){return"string"==typeof value&&defaultDateFormatMatcher(value)}},object:{baseDataType:"object",valueParser:function(){return null},valueFormatter:function(params){var _a;return null!==(_a=toStringOrNull(params.value))&&void 0!==_a?_a:""}}}},__decorate$d([Autowired("rowModel")],DataTypeService.prototype,"rowModel",void 0),__decorate$d([Autowired("columnModel")],DataTypeService.prototype,"columnModel",void 0),__decorate$d([Autowired("columnUtils")],DataTypeService.prototype,"columnUtils",void 0),__decorate$d([Autowired("valueService")],DataTypeService.prototype,"valueService",void 0),__decorate$d([Autowired("valueFormatterService")],DataTypeService.prototype,"valueFormatterService",void 0),__decorate$d([PostConstruct],DataTypeService.prototype,"init",null),DataTypeService=__decorate$d([Bean("dataTypeService")],DataTypeService)}(BeanStub),__extends$d=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$c=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ValueParserService=function(_super){function ValueParserService(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$d(ValueParserService,_super),ValueParserService.prototype.parseValue=function(column,rowNode,newValue,oldValue){var colDef=column.getColDef(),params={node:rowNode,data:null==rowNode?void 0:rowNode.data,oldValue,newValue,colDef,column,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context},valueParser=colDef.valueParser;return exists(valueParser)?"function"==typeof valueParser?valueParser(params):this.expressionService.evaluate(valueParser,params):newValue},__decorate$c([Autowired("expressionService")],ValueParserService.prototype,"expressionService",void 0),ValueParserService=__decorate$c([Bean("valueParserService")],ValueParserService)}(BeanStub),__read$3=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spreadArray$2=function(to,from){for(var i=0,il=from.length,j=to.length;i<il;i++,j++)to[j]=from[i];return to},Grid=function(){function Grid(eGridDiv,gridOptions,params){gridOptions?(this.gridOptions=gridOptions,(new GridCoreCreator).create(eGridDiv,gridOptions,(function(context){var gridComp=new GridComp(eGridDiv);context.createBean(gridComp)}),void 0,params)):console.error("AG Grid: no gridOptions provided to the grid")}return Grid.prototype.destroy=function(){this.gridOptions&&this.gridOptions.api&&this.gridOptions.api.destroy()},Grid}(),nextGridId=1,GridCoreCreator=function(){function GridCoreCreator(){}return GridCoreCreator.prototype.create=function(eGridDiv,gridOptions,createUi,acceptChanges,params){var _a,_this=this,debug=!!gridOptions.debug,gridId=null!==(_a=gridOptions.gridId)&&void 0!==_a?_a:String(nextGridId++),registeredModules=this.getRegisteredModules(params,gridId),beanClasses=this.createBeansList(gridOptions.rowModelType,registeredModules,gridId),providedBeanInstances=this.createProvidedBeans(eGridDiv,gridOptions,params);if(beanClasses){var contextParams={providedBeanInstances,beanClasses,debug,gridId},logger=new Logger("AG Grid",(function(){return gridOptions.debug})),contextLogger=new Logger("Context",(function(){return contextParams.debug})),context=new Context(contextParams,contextLogger),beans=context.getBean("beans");this.registerModuleUserComponents(beans,registeredModules),this.registerStackComponents(beans,registeredModules),this.registerControllers(beans,registeredModules),createUi(context),beans.ctrlsService.whenReady((function(){_this.setColumnsAndData(beans),_this.dispatchGridReadyEvent(beans);var isEnterprise=ModuleRegistry.__isRegistered(ModuleNames.EnterpriseCoreModule,gridId);logger.log("initialised successfully, enterprise = "+isEnterprise)})),acceptChanges&&acceptChanges(context)}},GridCoreCreator.prototype.registerControllers=function(beans,registeredModules){registeredModules.forEach((function(module){module.controllers&&module.controllers.forEach((function(meta){return beans.ctrlsFactory.register(meta)}))}))},GridCoreCreator.prototype.registerStackComponents=function(beans,registeredModules){var agStackComponents=this.createAgStackComponentsList(registeredModules);beans.agStackComponentsRegistry.setupComponents(agStackComponents)},GridCoreCreator.prototype.getRegisteredModules=function(params,gridId){var passedViaConstructor=params?params.modules:null,registered=ModuleRegistry.__getRegisteredModules(gridId),allModules=[],mapNames={},addModule=function(moduleBased,mod,gridId){var currentModule;mapNames[(currentModule=mod).moduleName]||(mapNames[currentModule.moduleName]=!0,allModules.push(currentModule),ModuleRegistry.__register(currentModule,moduleBased,gridId)),mod.dependantModules&&mod.dependantModules.forEach((function(m){return addModule(moduleBased,m,gridId)}))};return passedViaConstructor&&passedViaConstructor.forEach((function(m){return addModule(!0,m,gridId)})),registered&&registered.forEach((function(m){return addModule(!ModuleRegistry.__isPackageBased(),m,void 0)})),allModules},GridCoreCreator.prototype.registerModuleUserComponents=function(beans,registeredModules){this.extractModuleEntity(registeredModules,(function(module){return module.userComponents?module.userComponents:[]})).forEach((function(compMeta){beans.userComponentRegistry.registerDefaultComponent(compMeta.componentName,compMeta.componentClass)}))},GridCoreCreator.prototype.createProvidedBeans=function(eGridDiv,gridOptions,params){var frameworkOverrides=params?params.frameworkOverrides:null;missing(frameworkOverrides)&&(frameworkOverrides=new VanillaFrameworkOverrides);var seed={gridOptions,eGridDiv,globalEventListener:params?params.globalEventListener:null,globalSyncEventListener:params?params.globalSyncEventListener:null,frameworkOverrides};return params&&params.providedBeanInstances&&Object.assign(seed,params.providedBeanInstances),seed},GridCoreCreator.prototype.createAgStackComponentsList=function(registeredModules){var components=[{componentName:"AgCheckbox",componentClass:AgCheckbox},{componentName:"AgRadioButton",componentClass:AgRadioButton},{componentName:"AgToggleButton",componentClass:AgToggleButton},{componentName:"AgInputTextField",componentClass:AgInputTextField},{componentName:"AgInputTextArea",componentClass:AgInputTextArea},{componentName:"AgInputNumberField",componentClass:AgInputNumberField},{componentName:"AgInputDateField",componentClass:AgInputDateField},{componentName:"AgInputRange",componentClass:AgInputRange},{componentName:"AgRichSelect",componentClass:AgRichSelect},{componentName:"AgSelect",componentClass:AgSelect},{componentName:"AgSlider",componentClass:AgSlider},{componentName:"AgGridBody",componentClass:GridBodyComp},{componentName:"AgHeaderRoot",componentClass:GridHeaderComp},{componentName:"AgSortIndicator",componentClass:SortIndicatorComp},{componentName:"AgPagination",componentClass:PaginationComp},{componentName:"AgOverlayWrapper",componentClass:OverlayWrapperComponent},{componentName:"AgGroupComponent",componentClass:AgGroupComponent},{componentName:"AgPanel",componentClass:AgPanel},{componentName:"AgDialog",componentClass:AgDialog},{componentName:"AgRowContainer",componentClass:RowContainerComp},{componentName:"AgFakeHorizontalScroll",componentClass:FakeHScrollComp},{componentName:"AgFakeVerticalScroll",componentClass:FakeVScrollComp},{componentName:"AgAutocomplete",componentClass:AgAutocomplete}],moduleAgStackComps=this.extractModuleEntity(registeredModules,(function(module){return module.agStackComponents?module.agStackComponents:[]}));return components=components.concat(moduleAgStackComps)},GridCoreCreator.prototype.createBeansList=function(rowModelType,registeredModules,gridId){void 0===rowModelType&&(rowModelType="clientSide");var rowModelModules=registeredModules.filter((function(module){return!module.rowModel||module.rowModel===rowModelType})),rowModelModuleNames={clientSide:ModuleNames.ClientSideRowModelModule,infinite:ModuleNames.InfiniteRowModelModule,serverSide:ModuleNames.ServerSideRowModelModule,viewport:ModuleNames.ViewportRowModelModule};if(rowModelModuleNames[rowModelType]){if(ModuleRegistry.__assertRegistered(rowModelModuleNames[rowModelType],"rowModelType = '"+rowModelType+"'",gridId)){var beans=[Beans,RowPositionUtils,CellPositionUtils,HeaderPositionUtils,PaginationAutoPageSizeService,GridApi,UserComponentRegistry,AgComponentUtils,ComponentMetadataProvider,ResizeObserverService,UserComponentFactory,RowContainerHeightService,HorizontalResizeService,LocaleService,GridOptionsValidator,PinnedRowModel,DragService,DisplayedGroupCreator,EventService,GridOptionsService,PopupService,SelectionService,FilterManager,ColumnModel,HeaderNavigationService,PaginationProxy,RowRenderer,ExpressionService,ColumnFactory,TemplateService,AlignedGridsService,NavigationService,ValueCache,ValueService,LoggerFactory,ColumnUtils,AutoWidthCalculator,StandardMenuFactory,DragAndDropService,ColumnApi,FocusService,MouseEventService,Environment,CellNavigationService,ValueFormatterService,StylingService,ScrollVisibleService,SortController,ColumnHoverService,ColumnAnimationService,SelectableService,AutoGroupColService,ChangeDetectionService,AnimationFrameService,UndoRedoService,AgStackComponentsRegistry,ColumnDefFactory,RowCssClassCalculator,RowNodeBlockLoader,RowNodeSorter,CtrlsService,PinnedWidthService,RowNodeEventThrottle,CtrlsFactory,DataTypeService,ValueParserService,QuickFilterService],moduleBeans=this.extractModuleEntity(rowModelModules,(function(module){return module.beans?module.beans:[]}));beans.push.apply(beans,__spreadArray$2([],__read$3(moduleBeans)));var beansNoDuplicates=[];return beans.forEach((function(bean){beansNoDuplicates.indexOf(bean)<0&&beansNoDuplicates.push(bean)})),beansNoDuplicates}}else console.error("AG Grid: could not find row model for rowModelType = "+rowModelType)},GridCoreCreator.prototype.extractModuleEntity=function(moduleEntities,extractor){return[].concat.apply([],__spreadArray$2([],__read$3(moduleEntities.map(extractor))))},GridCoreCreator.prototype.setColumnsAndData=function(beans){var columnDefs=beans.gridOptionsService.get("columnDefs");beans.columnModel.setColumnDefs(columnDefs||[],"gridInitializing"),beans.rowModel.start()},GridCoreCreator.prototype.dispatchGridReadyEvent=function(beans){var readyEvent={type:Events.EVENT_GRID_READY};beans.eventService.dispatchEvent(readyEvent)},GridCoreCreator}();!function(BarColumnLabelPlacement){BarColumnLabelPlacement.InsideBase="insideBase",BarColumnLabelPlacement.InsideEnd="insideEnd",BarColumnLabelPlacement.Center="center",BarColumnLabelPlacement.OutsideEnd="outsideEnd"}(BarColumnLabelPlacement||(BarColumnLabelPlacement={}));var globalObj=void 0===__webpack_require__.g?{}:__webpack_require__.g;globalObj.HTMLElement="undefined"==typeof HTMLElement?{}:HTMLElement,globalObj.HTMLButtonElement="undefined"==typeof HTMLButtonElement?{}:HTMLButtonElement,globalObj.HTMLSelectElement="undefined"==typeof HTMLSelectElement?{}:HTMLSelectElement,globalObj.HTMLInputElement="undefined"==typeof HTMLInputElement?{}:HTMLInputElement,globalObj.Node="undefined"==typeof Node?{}:Node,globalObj.MouseEvent="undefined"==typeof MouseEvent?{}:MouseEvent;var RecursionType,__read$2=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spreadArray$1=function(to,from){for(var i=0,il=from.length,j=to.length;i<il;i++,j++)to[j]=from[i];return to},ClientSideNodeManager=function(){function ClientSideNodeManager(rootNode,gridOptionsService,eventService,columnModel,selectionService,beans){this.nextId=0,this.allNodesMap={},this.rootNode=rootNode,this.gridOptionsService=gridOptionsService,this.eventService=eventService,this.columnModel=columnModel,this.beans=beans,this.selectionService=selectionService,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=ClientSideNodeManager.ROOT_NODE_ID,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[],this.postConstruct()}return ClientSideNodeManager.prototype.postConstruct=function(){this.suppressParentsInRowNodes=this.gridOptionsService.is("suppressParentsInRowNodes"),this.isRowMasterFunc=this.gridOptionsService.get("isRowMaster"),this.doingMasterDetail=this.gridOptionsService.is("masterDetail")},ClientSideNodeManager.prototype.getCopyOfNodesMap=function(){return _.cloneObject(this.allNodesMap)},ClientSideNodeManager.prototype.getRowNode=function(id){return this.allNodesMap[id]},ClientSideNodeManager.prototype.setRowData=function(rowData){var _this=this;if("string"!=typeof rowData){this.dispatchRowDataUpdateStartedEvent(rowData);var rootNode=this.rootNode,sibling=this.rootNode.sibling;rootNode.childrenAfterFilter=null,rootNode.childrenAfterGroup=null,rootNode.childrenAfterAggFilter=null,rootNode.childrenAfterSort=null,rootNode.childrenMapped=null,rootNode.updateHasChildren(),this.nextId=0,this.allNodesMap={},rowData?rootNode.allLeafChildren=rowData.map((function(dataItem){return _this.createNode(dataItem,_this.rootNode,ClientSideNodeManager.TOP_LEVEL)})):(rootNode.allLeafChildren=[],rootNode.childrenAfterGroup=[]),sibling&&(sibling.childrenAfterFilter=rootNode.childrenAfterFilter,sibling.childrenAfterGroup=rootNode.childrenAfterGroup,sibling.childrenAfterAggFilter=rootNode.childrenAfterAggFilter,sibling.childrenAfterSort=rootNode.childrenAfterSort,sibling.childrenMapped=rootNode.childrenMapped,sibling.allLeafChildren=rootNode.allLeafChildren)}else console.warn("AG Grid: rowData must be an array, however you passed in a string. If you are loading JSON, make sure you convert the JSON string to JavaScript objects first")},ClientSideNodeManager.prototype.updateRowData=function(rowDataTran,rowNodeOrder){this.dispatchRowDataUpdateStartedEvent(rowDataTran.add);var rowNodeTransaction={remove:[],update:[],add:[]},nodesToUnselect=[];return this.executeRemove(rowDataTran,rowNodeTransaction,nodesToUnselect),this.executeUpdate(rowDataTran,rowNodeTransaction,nodesToUnselect),this.executeAdd(rowDataTran,rowNodeTransaction),this.updateSelection(nodesToUnselect,"rowDataChanged"),rowNodeOrder&&_.sortRowNodesByOrder(this.rootNode.allLeafChildren,rowNodeOrder),rowNodeTransaction},ClientSideNodeManager.prototype.dispatchRowDataUpdateStartedEvent=function(rowData){var event={type:Events.EVENT_ROW_DATA_UPDATE_STARTED,firstRowData:(null==rowData?void 0:rowData.length)?rowData[0]:null};this.eventService.dispatchEvent(event)},ClientSideNodeManager.prototype.updateSelection=function(nodesToUnselect,source){var selectionChanged=nodesToUnselect.length>0;if(selectionChanged&&this.selectionService.setNodesSelected({newValue:!1,nodes:nodesToUnselect,suppressFinishActions:!0,source}),this.selectionService.updateGroupsFromChildrenSelections(source),selectionChanged){var event_1={type:Events.EVENT_SELECTION_CHANGED,source};this.eventService.dispatchEvent(event_1)}},ClientSideNodeManager.prototype.executeAdd=function(rowDataTran,rowNodeTransaction){var _a,_this=this,add=rowDataTran.add,addIndex=rowDataTran.addIndex;if(!_.missingOrEmpty(add)){var newNodes=add.map((function(item){return _this.createNode(item,_this.rootNode,ClientSideNodeManager.TOP_LEVEL)}));if("number"==typeof addIndex&&addIndex>=0){var allLeafChildren=this.rootNode.allLeafChildren,len=allLeafChildren.length,normalisedAddIndex=addIndex;if(this.gridOptionsService.is("treeData")&&addIndex>0&&len>0)for(var i=0;i<len;i++)if((null===(_a=allLeafChildren[i])||void 0===_a?void 0:_a.rowIndex)==addIndex-1){normalisedAddIndex=i+1;break}var nodesBeforeIndex=allLeafChildren.slice(0,normalisedAddIndex),nodesAfterIndex=allLeafChildren.slice(normalisedAddIndex,allLeafChildren.length);this.rootNode.allLeafChildren=__spreadArray$1(__spreadArray$1(__spreadArray$1([],__read$2(nodesBeforeIndex)),__read$2(newNodes)),__read$2(nodesAfterIndex))}else this.rootNode.allLeafChildren=__spreadArray$1(__spreadArray$1([],__read$2(this.rootNode.allLeafChildren)),__read$2(newNodes));this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren),rowNodeTransaction.add=newNodes}},ClientSideNodeManager.prototype.executeRemove=function(rowDataTran,rowNodeTransaction,nodesToUnselect){var _this=this,remove=rowDataTran.remove;if(!_.missingOrEmpty(remove)){var rowIdsRemoved={};remove.forEach((function(item){var rowNode=_this.lookupRowNode(item);rowNode&&(rowNode.isSelected()&&nodesToUnselect.push(rowNode),rowNode.clearRowTopAndRowIndex(),rowIdsRemoved[rowNode.id]=!0,delete _this.allNodesMap[rowNode.id],rowNodeTransaction.remove.push(rowNode))})),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren.filter((function(rowNode){return!rowIdsRemoved[rowNode.id]})),this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}},ClientSideNodeManager.prototype.executeUpdate=function(rowDataTran,rowNodeTransaction,nodesToUnselect){var _this=this,update=rowDataTran.update;_.missingOrEmpty(update)||update.forEach((function(item){var rowNode=_this.lookupRowNode(item);rowNode&&(rowNode.updateData(item),!rowNode.selectable&&rowNode.isSelected()&&nodesToUnselect.push(rowNode),_this.setMasterForRow(rowNode,item,ClientSideNodeManager.TOP_LEVEL,!1),rowNodeTransaction.update.push(rowNode))}))},ClientSideNodeManager.prototype.lookupRowNode=function(data){var rowNode,getRowIdFunc=this.gridOptionsService.getCallback("getRowId");if(getRowIdFunc){var id=getRowIdFunc({data,level:0});if(!(rowNode=this.allNodesMap[id]))return console.error("AG Grid: could not find row id="+id+", data item was not found for this id"),null}else if(!(rowNode=this.rootNode.allLeafChildren.find((function(node){return node.data===data}))))return console.error("AG Grid: could not find data item as object was not found",data),console.error("Consider using getRowId to help the Grid find matching row data"),null;return rowNode||null},ClientSideNodeManager.prototype.createNode=function(dataItem,parent,level){var node=new RowNode(this.beans);return node.group=!1,this.setMasterForRow(node,dataItem,level,!0),parent&&!this.suppressParentsInRowNodes&&(node.parent=parent),node.level=level,node.setDataAndId(dataItem,this.nextId.toString()),this.allNodesMap[node.id]&&console.warn("AG Grid: duplicate node id '"+node.id+"' detected from getRowId callback, this could cause issues in your grid."),this.allNodesMap[node.id]=node,this.nextId++,node},ClientSideNodeManager.prototype.setMasterForRow=function(rowNode,data,level,setExpanded){if(this.gridOptionsService.is("treeData"))rowNode.setMaster(!1),setExpanded&&(rowNode.expanded=!1);else if(this.doingMasterDetail?this.isRowMasterFunc?rowNode.setMaster(this.isRowMasterFunc(data)):rowNode.setMaster(!0):rowNode.setMaster(!1),setExpanded){var rowGroupColumns=this.columnModel.getRowGroupColumns(),masterRowLevel=level+(rowGroupColumns?rowGroupColumns.length:0);rowNode.expanded=!!rowNode.master&&this.isExpanded(masterRowLevel)}},ClientSideNodeManager.prototype.isExpanded=function(level){var expandByDefault=this.gridOptionsService.getNum("groupDefaultExpanded");return-1===expandByDefault||level<expandByDefault},ClientSideNodeManager.TOP_LEVEL=0,ClientSideNodeManager.ROOT_NODE_ID="ROOT_NODE_ID",ClientSideNodeManager}(),__extends$c=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$b=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__read$1=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spreadArray=function(to,from){for(var i=0,il=from.length,j=to.length;i<il;i++,j++)to[j]=from[i];return to};!function(RecursionType){RecursionType[RecursionType.Normal=0]="Normal",RecursionType[RecursionType.AfterFilter=1]="AfterFilter",RecursionType[RecursionType.AfterFilterAndSort=2]="AfterFilterAndSort",RecursionType[RecursionType.PivotNodes=3]="PivotNodes"}(RecursionType||(RecursionType={}));var RowType,ClientSideRowModel=function(_super){function ClientSideRowModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.onRowHeightChanged_debounced=_.debounce(_this.onRowHeightChanged.bind(_this),100),_this.rowsToDisplay=[],_this}return __extends$c(ClientSideRowModel,_super),ClientSideRowModel.prototype.init=function(){var _this=this,refreshEverythingFunc=this.refreshModel.bind(this,{step:ClientSideRowModelSteps.EVERYTHING}),animate=!this.gridOptionsService.is("suppressAnimationFrame"),refreshEverythingAfterColsChangedFunc=this.refreshModel.bind(this,{step:ClientSideRowModelSteps.EVERYTHING,afterColumnsChanged:!0,keepRenderedRows:!0,animate});this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,refreshEverythingAfterColsChangedFunc),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,refreshEverythingFunc),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VALUE_CHANGED,this.onValueChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_CHANGED,this.refreshModel.bind(this,{step:ClientSideRowModelSteps.PIVOT})),this.addManagedListener(this.eventService,Events.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,refreshEverythingFunc),this.addManagedListener(this.eventService,Events.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanges.bind(this));var refreshMapListener=this.refreshModel.bind(this,{step:ClientSideRowModelSteps.MAP,keepRenderedRows:!0,animate});this.addManagedPropertyListeners(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter"],refreshMapListener);var refreshAggListener=this.refreshModel.bind(this,{step:ClientSideRowModelSteps.AGGREGATE,keepRenderedRows:!0,animate});this.addManagedPropertyListeners(["groupIncludeTotalFooter"],refreshAggListener),this.rootNode=new RowNode(this.beans),this.nodeManager=new ClientSideNodeManager(this.rootNode,this.gridOptionsService,this.eventService,this.columnModel,this.selectionService,this.beans),this.addManagedPropertyListener("treeData",(function(){_this.setRowData(_this.rootNode.allLeafChildren.map((function(child){return child.data})))}))},ClientSideRowModel.prototype.start=function(){var rowData=this.gridOptionsService.get("rowData");rowData&&this.setRowData(rowData)},ClientSideRowModel.prototype.ensureRowHeightsValid=function(startPixel,endPixel,startLimitIndex,endLimitIndex){var atLeastOneChange,res=!1;do{atLeastOneChange=!1;for(var rowAtStartPixel=this.getRowIndexAtPixel(startPixel),rowAtEndPixel=this.getRowIndexAtPixel(endPixel),firstRow=Math.max(rowAtStartPixel,startLimitIndex),lastRow=Math.min(rowAtEndPixel,endLimitIndex),rowIndex=firstRow;rowIndex<=lastRow;rowIndex++){var rowNode=this.getRow(rowIndex);if(rowNode.rowHeightEstimated){var rowHeight=this.gridOptionsService.getRowHeightForNode(rowNode);rowNode.setRowHeight(rowHeight.height),atLeastOneChange=!0,res=!0}}atLeastOneChange&&this.setRowTopAndRowIndex()}while(atLeastOneChange);return res},ClientSideRowModel.prototype.setRowTopAndRowIndex=function(){for(var defaultRowHeight=this.environment.getDefaultRowHeight(),nextRowTop=0,displayedRowsMapped=new Set,allowEstimate=this.gridOptionsService.isDomLayout("normal"),i=0;i<this.rowsToDisplay.length;i++){var rowNode=this.rowsToDisplay[i];if(null!=rowNode.id&&displayedRowsMapped.add(rowNode.id),null==rowNode.rowHeight){var rowHeight=this.gridOptionsService.getRowHeightForNode(rowNode,allowEstimate,defaultRowHeight);rowNode.setRowHeight(rowHeight.height,rowHeight.estimated)}rowNode.setRowTop(nextRowTop),rowNode.setRowIndex(i),nextRowTop+=rowNode.rowHeight}return displayedRowsMapped},ClientSideRowModel.prototype.clearRowTopAndRowIndex=function(changedPath,displayedRowsMapped){var changedPathActive=changedPath.isActive(),clearIfNotDisplayed=function(rowNode){rowNode&&null!=rowNode.id&&!displayedRowsMapped.has(rowNode.id)&&rowNode.clearRowTopAndRowIndex()},recurse=function(rowNode){if(clearIfNotDisplayed(rowNode),clearIfNotDisplayed(rowNode.detailNode),clearIfNotDisplayed(rowNode.sibling),rowNode.hasChildren()&&rowNode.childrenAfterGroup){var isRootNode=-1==rowNode.level;changedPathActive&&!isRootNode&&!rowNode.expanded||rowNode.childrenAfterGroup.forEach(recurse)}};recurse(this.rootNode)},ClientSideRowModel.prototype.ensureRowsAtPixel=function(rowNodes,pixel,increment){var _this=this;void 0===increment&&(increment=0);var indexAtPixelNow=this.getRowIndexAtPixel(pixel),rowNodeAtPixelNow=this.getRow(indexAtPixelNow),animate=!this.gridOptionsService.is("suppressAnimationFrame");return rowNodeAtPixelNow!==rowNodes[0]&&(rowNodes.forEach((function(rowNode){_.removeFromArray(_this.rootNode.allLeafChildren,rowNode)})),rowNodes.forEach((function(rowNode,idx){_.insertIntoArray(_this.rootNode.allLeafChildren,rowNode,Math.max(indexAtPixelNow+increment,0)+idx)})),this.refreshModel({step:ClientSideRowModelSteps.EVERYTHING,keepRenderedRows:!0,keepEditingRows:!0,animate}),!0)},ClientSideRowModel.prototype.highlightRowAtPixel=function(rowNode,pixel){var indexAtPixelNow=null!=pixel?this.getRowIndexAtPixel(pixel):null,rowNodeAtPixelNow=null!=indexAtPixelNow?this.getRow(indexAtPixelNow):null;if(rowNodeAtPixelNow&&rowNode&&rowNodeAtPixelNow!==rowNode&&null!=pixel){var highlight=this.getHighlightPosition(pixel,rowNodeAtPixelNow);this.lastHighlightedRow&&this.lastHighlightedRow!==rowNodeAtPixelNow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),rowNodeAtPixelNow.setHighlighted(highlight),this.lastHighlightedRow=rowNodeAtPixelNow}else this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null)},ClientSideRowModel.prototype.getHighlightPosition=function(pixel,rowNode){if(!rowNode){var index=this.getRowIndexAtPixel(pixel);if(!(rowNode=this.getRow(index||0)))return RowHighlightPosition.Below}return pixel-rowNode.rowTop<rowNode.rowHeight/2?RowHighlightPosition.Above:RowHighlightPosition.Below},ClientSideRowModel.prototype.getLastHighlightedRowNode=function(){return this.lastHighlightedRow},ClientSideRowModel.prototype.isLastRowIndexKnown=function(){return!0},ClientSideRowModel.prototype.getRowCount=function(){return this.rowsToDisplay?this.rowsToDisplay.length:0},ClientSideRowModel.prototype.getTopLevelRowCount=function(){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;var filteredChildren=this.rootNode.childrenAfterAggFilter;return filteredChildren?filteredChildren.length:0},ClientSideRowModel.prototype.getTopLevelRowDisplayedIndex=function(topLevelIndex){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return topLevelIndex;var rowNode=this.rootNode.childrenAfterSort[topLevelIndex];if(this.gridOptionsService.is("groupHideOpenParents"))for(;rowNode.expanded&&rowNode.childrenAfterSort&&rowNode.childrenAfterSort.length>0;)rowNode=rowNode.childrenAfterSort[0];return rowNode.rowIndex},ClientSideRowModel.prototype.getRowBounds=function(index){if(_.missing(this.rowsToDisplay))return null;var rowNode=this.rowsToDisplay[index];return rowNode?{rowTop:rowNode.rowTop,rowHeight:rowNode.rowHeight}:null},ClientSideRowModel.prototype.onRowGroupOpened=function(){var animate=this.gridOptionsService.isAnimateRows();this.refreshModel({step:ClientSideRowModelSteps.MAP,keepRenderedRows:!0,animate})},ClientSideRowModel.prototype.onFilterChanged=function(event){if(!event.afterDataChange){var animate=this.gridOptionsService.isAnimateRows(),step=0===event.columns.length||event.columns.some((function(col){return col.isPrimary()}))?ClientSideRowModelSteps.FILTER:ClientSideRowModelSteps.FILTER_AGGREGATES;this.refreshModel({step,keepRenderedRows:!0,animate})}},ClientSideRowModel.prototype.onSortChanged=function(){var animate=this.gridOptionsService.isAnimateRows();this.refreshModel({step:ClientSideRowModelSteps.SORT,keepRenderedRows:!0,animate,keepEditingRows:!0})},ClientSideRowModel.prototype.getType=function(){return"clientSide"},ClientSideRowModel.prototype.onValueChanged=function(){this.columnModel.isPivotActive()?this.refreshModel({step:ClientSideRowModelSteps.PIVOT}):this.refreshModel({step:ClientSideRowModelSteps.AGGREGATE})},ClientSideRowModel.prototype.createChangePath=function(rowNodeTransactions){var noTransactions=_.missingOrEmpty(rowNodeTransactions),changedPath=new ChangedPath(!1,this.rootNode);return(noTransactions||this.gridOptionsService.is("treeData"))&&changedPath.setInactive(),changedPath},ClientSideRowModel.prototype.isSuppressModelUpdateAfterUpdateTransaction=function(params){if(!this.gridOptionsService.is("suppressModelUpdateAfterUpdateTransaction"))return!1;if(null==params.rowNodeTransactions)return!1;var transWithAddsOrDeletes=params.rowNodeTransactions.filter((function(tx){return null!=tx.add&&tx.add.length>0||null!=tx.remove&&tx.remove.length>0}));return null==transWithAddsOrDeletes||0==transWithAddsOrDeletes.length},ClientSideRowModel.prototype.buildRefreshModelParams=function(step){var paramsStep=ClientSideRowModelSteps.EVERYTHING,stepsMapped={everything:ClientSideRowModelSteps.EVERYTHING,group:ClientSideRowModelSteps.EVERYTHING,filter:ClientSideRowModelSteps.FILTER,map:ClientSideRowModelSteps.MAP,aggregate:ClientSideRowModelSteps.AGGREGATE,sort:ClientSideRowModelSteps.SORT,pivot:ClientSideRowModelSteps.PIVOT};if(_.exists(step)&&(paramsStep=stepsMapped[step]),!_.missing(paramsStep))return{step:paramsStep,keepRenderedRows:!0,keepEditingRows:!0,animate:!this.gridOptionsService.is("suppressAnimationFrame")};console.error("AG Grid: invalid step "+step+", available steps are "+Object.keys(stepsMapped).join(", "))},ClientSideRowModel.prototype.refreshModel=function(paramsOrStep){var params="object"==typeof paramsOrStep&&"step"in paramsOrStep?paramsOrStep:this.buildRefreshModelParams(paramsOrStep);if(params&&!this.isSuppressModelUpdateAfterUpdateTransaction(params)){var changedPath=this.createChangePath(params.rowNodeTransactions);switch(params.step){case ClientSideRowModelSteps.EVERYTHING:this.doRowGrouping(params.groupState,params.rowNodeTransactions,params.rowNodeOrder,changedPath,!!params.afterColumnsChanged);case ClientSideRowModelSteps.FILTER:this.doFilter(changedPath);case ClientSideRowModelSteps.PIVOT:this.doPivot(changedPath);case ClientSideRowModelSteps.AGGREGATE:this.doAggregate(changedPath);case ClientSideRowModelSteps.FILTER_AGGREGATES:this.doFilterAggregates(changedPath);case ClientSideRowModelSteps.SORT:this.doSort(params.rowNodeTransactions,changedPath);case ClientSideRowModelSteps.MAP:this.doRowsToDisplay()}var displayedNodesMapped=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(changedPath,displayedNodesMapped);var event={type:Events.EVENT_MODEL_UPDATED,animate:params.animate,keepRenderedRows:params.keepRenderedRows,newData:params.newData,newPage:!1,keepUndoRedoStack:params.keepUndoRedoStack};this.eventService.dispatchEvent(event)}},ClientSideRowModel.prototype.isEmpty=function(){var rowsMissing=_.missing(this.rootNode.allLeafChildren)||0===this.rootNode.allLeafChildren.length;return _.missing(this.rootNode)||rowsMissing||!this.columnModel.isReady()},ClientSideRowModel.prototype.isRowsToRender=function(){return _.exists(this.rowsToDisplay)&&this.rowsToDisplay.length>0},ClientSideRowModel.prototype.getNodesInRangeForSelection=function(firstInRange,lastInRange){var started=!lastInRange,finished=!1,result=[],groupsSelectChildren=this.gridOptionsService.is("groupSelectsChildren");return this.forEachNodeAfterFilterAndSort((function(rowNode){if(!finished)if(started&&(rowNode===lastInRange||rowNode===firstInRange)&&(finished=!0,rowNode.group&&groupsSelectChildren))result.push.apply(result,__spreadArray([],__read$1(rowNode.allLeafChildren)));else{if(!started){if(rowNode!==lastInRange&&rowNode!==firstInRange)return;started=!0}(!rowNode.group||!groupsSelectChildren)&&result.push(rowNode)}})),result},ClientSideRowModel.prototype.setDatasource=function(datasource){console.error("AG Grid: should never call setDatasource on clientSideRowController")},ClientSideRowModel.prototype.getTopLevelNodes=function(){return this.rootNode?this.rootNode.childrenAfterGroup:null},ClientSideRowModel.prototype.getRootNode=function(){return this.rootNode},ClientSideRowModel.prototype.getRow=function(index){return this.rowsToDisplay[index]},ClientSideRowModel.prototype.isRowPresent=function(rowNode){return this.rowsToDisplay.indexOf(rowNode)>=0},ClientSideRowModel.prototype.getRowIndexAtPixel=function(pixelToMatch){if(this.isEmpty()||0===this.rowsToDisplay.length)return-1;var bottomPointer=0,topPointer=this.rowsToDisplay.length-1;if(pixelToMatch<=0)return 0;if(_.last(this.rowsToDisplay).rowTop<=pixelToMatch)return this.rowsToDisplay.length-1;for(var oldBottomPointer=-1,oldTopPointer=-1;;){var midPointer=Math.floor((bottomPointer+topPointer)/2),currentRowNode=this.rowsToDisplay[midPointer];if(this.isRowInPixel(currentRowNode,pixelToMatch))return midPointer;if(currentRowNode.rowTop<pixelToMatch?bottomPointer=midPointer+1:currentRowNode.rowTop>pixelToMatch&&(topPointer=midPointer-1),oldBottomPointer===bottomPointer&&oldTopPointer===topPointer)return midPointer;oldBottomPointer=bottomPointer,oldTopPointer=topPointer}},ClientSideRowModel.prototype.isRowInPixel=function(rowNode,pixelToMatch){var topPixel=rowNode.rowTop,bottomPixel=rowNode.rowTop+rowNode.rowHeight;return topPixel<=pixelToMatch&&bottomPixel>pixelToMatch},ClientSideRowModel.prototype.forEachLeafNode=function(callback){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach((function(rowNode,index){return callback(rowNode,index)}))},ClientSideRowModel.prototype.forEachNode=function(callback,includeFooterNodes){void 0===includeFooterNodes&&(includeFooterNodes=!1),this.recursivelyWalkNodesAndCallback({nodes:__spreadArray([],__read$1(this.rootNode.childrenAfterGroup||[])),callback,recursionType:RecursionType.Normal,index:0,includeFooterNodes})},ClientSideRowModel.prototype.forEachNodeAfterFilter=function(callback,includeFooterNodes){void 0===includeFooterNodes&&(includeFooterNodes=!1),this.recursivelyWalkNodesAndCallback({nodes:__spreadArray([],__read$1(this.rootNode.childrenAfterAggFilter||[])),callback,recursionType:RecursionType.AfterFilter,index:0,includeFooterNodes})},ClientSideRowModel.prototype.forEachNodeAfterFilterAndSort=function(callback,includeFooterNodes){void 0===includeFooterNodes&&(includeFooterNodes=!1),this.recursivelyWalkNodesAndCallback({nodes:__spreadArray([],__read$1(this.rootNode.childrenAfterSort||[])),callback,recursionType:RecursionType.AfterFilterAndSort,index:0,includeFooterNodes})},ClientSideRowModel.prototype.forEachPivotNode=function(callback,includeFooterNodes){void 0===includeFooterNodes&&(includeFooterNodes=!1),this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback,recursionType:RecursionType.PivotNodes,index:0,includeFooterNodes})},ClientSideRowModel.prototype.recursivelyWalkNodesAndCallback=function(params){for(var _a,nodes=params.nodes,callback=params.callback,recursionType=params.recursionType,includeFooterNodes=params.includeFooterNodes,index=params.index,i=0;i<nodes.length;i++){var node=nodes[i];if(callback(node,index++),node.hasChildren()&&!node.footer){var nodeChildren=null;switch(recursionType){case RecursionType.Normal:nodeChildren=node.childrenAfterGroup;break;case RecursionType.AfterFilter:nodeChildren=node.childrenAfterAggFilter;break;case RecursionType.AfterFilterAndSort:nodeChildren=node.childrenAfterSort;break;case RecursionType.PivotNodes:nodeChildren=node.leafGroup?null:node.childrenAfterSort}nodeChildren&&(index=this.recursivelyWalkNodesAndCallback({nodes:__spreadArray([],__read$1(nodeChildren)),callback,recursionType,index,includeFooterNodes}))}}var parentNode=null===(_a=nodes[0])||void 0===_a?void 0:_a.parent;if(!includeFooterNodes||!parentNode)return index;if(parentNode===this.rootNode){if(!this.gridOptionsService.is("groupIncludeTotalFooter"))return index}else if(!this.gridOptionsService.getGroupIncludeFooter()({node:parentNode}))return index;return parentNode.createFooter(),callback(parentNode.sibling,index++),index},ClientSideRowModel.prototype.doAggregate=function(changedPath){this.aggregationStage&&this.aggregationStage.execute({rowNode:this.rootNode,changedPath})},ClientSideRowModel.prototype.doFilterAggregates=function(changedPath){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter},ClientSideRowModel.prototype.expandOrCollapseAll=function(expand){var usingTreeData=this.gridOptionsService.is("treeData"),usingPivotMode=this.columnModel.isPivotActive(),recursiveExpandOrCollapse=function(rowNodes){rowNodes&&rowNodes.forEach((function(rowNode){var actionRow=function(){rowNode.expanded=expand,recursiveExpandOrCollapse(rowNode.childrenAfterGroup)};usingTreeData?_.exists(rowNode.childrenAfterGroup)&&actionRow():usingPivotMode?!rowNode.leafGroup&&actionRow():rowNode.group&&actionRow()}))};this.rootNode&&recursiveExpandOrCollapse(this.rootNode.childrenAfterGroup),this.refreshModel({step:ClientSideRowModelSteps.MAP});var eventSource=expand?"expandAll":"collapseAll",event={type:Events.EVENT_EXPAND_COLLAPSE_ALL,source:eventSource};this.eventService.dispatchEvent(event)},ClientSideRowModel.prototype.doSort=function(rowNodeTransactions,changedPath){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions,changedPath})},ClientSideRowModel.prototype.doRowGrouping=function(groupState,rowNodeTransactions,rowNodeOrder,changedPath,afterColumnsChanged){if(this.groupStage){if(rowNodeTransactions?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions,rowNodeOrder,changedPath}):(this.groupStage.execute({rowNode:this.rootNode,changedPath,afterColumnsChanged}),this.restoreGroupState(groupState)),this.gridOptionsService.is("groupSelectsChildren")&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",changedPath)){var event_1={type:Events.EVENT_SELECTION_CHANGED,source:"rowGroupChanged"};this.eventService.dispatchEvent(event_1)}}else this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren()},ClientSideRowModel.prototype.restoreGroupState=function(groupState){groupState&&_.traverseNodesWithKey(this.rootNode.childrenAfterGroup,(function(node,key){"boolean"==typeof groupState[key]&&(node.expanded=groupState[key])}))},ClientSideRowModel.prototype.doFilter=function(changedPath){this.filterStage.execute({rowNode:this.rootNode,changedPath})},ClientSideRowModel.prototype.doPivot=function(changedPath){this.pivotStage&&this.pivotStage.execute({rowNode:this.rootNode,changedPath})},ClientSideRowModel.prototype.getGroupState=function(){if(!this.rootNode.childrenAfterGroup||!this.gridOptionsService.is("rememberGroupStateWhenNewData"))return null;var result={};return _.traverseNodesWithKey(this.rootNode.childrenAfterGroup,(function(node,key){return result[key]=node.expanded})),result},ClientSideRowModel.prototype.getCopyOfNodesMap=function(){return this.nodeManager.getCopyOfNodesMap()},ClientSideRowModel.prototype.getRowNode=function(id){if("string"==typeof id&&0==id.indexOf(RowNode.ID_PREFIX_ROW_GROUP)){var res_1=void 0;return this.forEachNode((function(node){node.id===id&&(res_1=node)})),res_1}return this.nodeManager.getRowNode(id)},ClientSideRowModel.prototype.setRowData=function(rowData){var groupState=this.getGroupState();this.nodeManager.setRowData(rowData),this.selectionService.reset(),this.filterManager.onNewRowsLoaded("rowDataUpdated");var rowDataUpdatedEvent={type:Events.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(rowDataUpdatedEvent),this.refreshModel({step:ClientSideRowModelSteps.EVERYTHING,groupState,newData:!0})},ClientSideRowModel.prototype.batchUpdateRowData=function(rowDataTransaction,callback){var _this=this;if(null==this.applyAsyncTransactionsTimeout){this.rowDataTransactionBatch=[];var waitMillis=this.gridOptionsService.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout((function(){_this.executeBatchUpdateRowData()}),waitMillis)}this.rowDataTransactionBatch.push({rowDataTransaction,callback})},ClientSideRowModel.prototype.flushAsyncTransactions=function(){null!=this.applyAsyncTransactionsTimeout&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())},ClientSideRowModel.prototype.executeBatchUpdateRowData=function(){var _this=this;this.valueCache.onDataChanged();var callbackFuncsBound=[],rowNodeTrans=[],forceRowNodeOrder=!1;if(this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach((function(tranItem){var rowNodeTran=_this.nodeManager.updateRowData(tranItem.rowDataTransaction,void 0);rowNodeTrans.push(rowNodeTran),tranItem.callback&&callbackFuncsBound.push(tranItem.callback.bind(null,rowNodeTran)),"number"==typeof tranItem.rowDataTransaction.addIndex&&(forceRowNodeOrder=!0)})),this.commonUpdateRowData(rowNodeTrans,void 0,forceRowNodeOrder),callbackFuncsBound.length>0&&window.setTimeout((function(){callbackFuncsBound.forEach((function(func){return func()}))}),0),rowNodeTrans.length>0){var event_2={type:Events.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:rowNodeTrans};this.eventService.dispatchEvent(event_2)}this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0},ClientSideRowModel.prototype.updateRowData=function(rowDataTran,rowNodeOrder){this.valueCache.onDataChanged();var rowNodeTran=this.nodeManager.updateRowData(rowDataTran,rowNodeOrder),forceRowNodeOrder="number"==typeof rowDataTran.addIndex;return this.commonUpdateRowData([rowNodeTran],rowNodeOrder,forceRowNodeOrder),rowNodeTran},ClientSideRowModel.prototype.createRowNodeOrder=function(){if(!this.gridOptionsService.is("suppressMaintainUnsortedOrder")){var orderMap={};if(this.rootNode&&this.rootNode.allLeafChildren)for(var index=0;index<this.rootNode.allLeafChildren.length;index++){orderMap[this.rootNode.allLeafChildren[index].id]=index}return orderMap}},ClientSideRowModel.prototype.commonUpdateRowData=function(rowNodeTrans,rowNodeOrder,forceRowNodeOrder){var animate=!this.gridOptionsService.is("suppressAnimationFrame");forceRowNodeOrder&&(rowNodeOrder=this.createRowNodeOrder()),this.refreshModel({step:ClientSideRowModelSteps.EVERYTHING,rowNodeTransactions:rowNodeTrans,rowNodeOrder,keepRenderedRows:!0,keepEditingRows:!0,animate}),this.filterManager.onNewRowsLoaded("rowDataUpdated");var event={type:Events.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(event)},ClientSideRowModel.prototype.doRowsToDisplay=function(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})},ClientSideRowModel.prototype.onRowHeightChanged=function(){this.refreshModel({step:ClientSideRowModelSteps.MAP,keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})},ClientSideRowModel.prototype.onRowHeightChangedDebounced=function(){this.onRowHeightChanged_debounced()},ClientSideRowModel.prototype.resetRowHeights=function(){var atLeastOne=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),atLeastOne&&this.onRowHeightChanged()},ClientSideRowModel.prototype.resetRowHeightsForAllRowNodes=function(){var atLeastOne=!1;return this.forEachNode((function(rowNode){rowNode.setRowHeight(rowNode.rowHeight,!0);var detailNode=rowNode.detailNode;detailNode&&detailNode.setRowHeight(detailNode.rowHeight,!0),rowNode.sibling&&rowNode.sibling.setRowHeight(rowNode.sibling.rowHeight,!0),atLeastOne=!0})),atLeastOne},ClientSideRowModel.prototype.onGridStylesChanges=function(){this.columnModel.isAutoRowHeightActive()||this.resetRowHeights()},__decorate$b([Autowired("columnModel")],ClientSideRowModel.prototype,"columnModel",void 0),__decorate$b([Autowired("selectionService")],ClientSideRowModel.prototype,"selectionService",void 0),__decorate$b([Autowired("filterManager")],ClientSideRowModel.prototype,"filterManager",void 0),__decorate$b([Autowired("valueCache")],ClientSideRowModel.prototype,"valueCache",void 0),__decorate$b([Autowired("beans")],ClientSideRowModel.prototype,"beans",void 0),__decorate$b([Autowired("filterStage")],ClientSideRowModel.prototype,"filterStage",void 0),__decorate$b([Autowired("sortStage")],ClientSideRowModel.prototype,"sortStage",void 0),__decorate$b([Autowired("flattenStage")],ClientSideRowModel.prototype,"flattenStage",void 0),__decorate$b([Optional("groupStage")],ClientSideRowModel.prototype,"groupStage",void 0),__decorate$b([Optional("aggregationStage")],ClientSideRowModel.prototype,"aggregationStage",void 0),__decorate$b([Optional("pivotStage")],ClientSideRowModel.prototype,"pivotStage",void 0),__decorate$b([Optional("filterAggregatesStage")],ClientSideRowModel.prototype,"filterAggregatesStage",void 0),__decorate$b([PostConstruct],ClientSideRowModel.prototype,"init",null),ClientSideRowModel=__decorate$b([Bean("rowModel")],ClientSideRowModel)}(BeanStub),__extends$b=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$a=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},FilterStage=function(_super){function FilterStage(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$b(FilterStage,_super),FilterStage.prototype.execute=function(params){var changedPath=params.changedPath;this.filterService.filter(changedPath)},__decorate$a([Autowired("filterService")],FilterStage.prototype,"filterService",void 0),FilterStage=__decorate$a([Bean("filterStage")],FilterStage)}(BeanStub),__extends$a=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$9=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SortStage=function(_super){function SortStage(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$a(SortStage,_super),SortStage.prototype.execute=function(params){var _this=this,sortOptions=this.sortController.getSortOptions(),sortActive=_.exists(sortOptions)&&sortOptions.length>0,deltaSort=sortActive&&_.exists(params.rowNodeTransactions)&&this.gridOptionsService.is("deltaSort"),sortContainsGroupColumns=sortOptions.some((function(opt){return _this.gridOptionsService.isColumnsSortingCoupledToGroup()?opt.column.isPrimary()&&opt.column.isRowGroupActive():!!opt.column.getColDef().showRowGroup}));this.sortService.sort(sortOptions,sortActive,deltaSort,params.rowNodeTransactions,params.changedPath,sortContainsGroupColumns)},__decorate$9([Autowired("sortService")],SortStage.prototype,"sortService",void 0),__decorate$9([Autowired("sortController")],SortStage.prototype,"sortController",void 0),__decorate$9([Autowired("columnModel")],SortStage.prototype,"columnModel",void 0),SortStage=__decorate$9([Bean("sortStage")],SortStage)}(BeanStub),__extends$9=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$8=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},FlattenStage=function(_super){function FlattenStage(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$9(FlattenStage,_super),FlattenStage.prototype.execute=function(params){var rootNode=params.rowNode,result=[],skipLeafNodes=this.columnModel.isPivotMode(),showRootNode=skipLeafNodes&&rootNode.leafGroup,topList=showRootNode?[rootNode]:rootNode.childrenAfterSort,details=this.getFlattenDetails();return this.recursivelyAddToRowsToDisplay(details,topList,result,skipLeafNodes,0),!showRootNode&&result.length>0&&details.groupIncludeTotalFooter&&(rootNode.createFooter(),this.addRowNodeToRowsToDisplay(details,rootNode.sibling,result,0)),result},FlattenStage.prototype.getFlattenDetails=function(){var groupRemoveSingleChildren=this.gridOptionsService.is("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!groupRemoveSingleChildren&&this.gridOptionsService.is("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren,isGroupMultiAutoColumn:this.gridOptionsService.isGroupMultiAutoColumn(),hideOpenParents:this.gridOptionsService.is("groupHideOpenParents"),groupIncludeTotalFooter:this.gridOptionsService.is("groupIncludeTotalFooter"),getGroupIncludeFooter:this.gridOptionsService.getGroupIncludeFooter()}},FlattenStage.prototype.recursivelyAddToRowsToDisplay=function(details,rowsToFlatten,result,skipLeafNodes,uiLevel){if(!_.missingOrEmpty(rowsToFlatten))for(var i=0;i<rowsToFlatten.length;i++){var rowNode=rowsToFlatten[i],isParent=rowNode.hasChildren(),isSkippedLeafNode=skipLeafNodes&&!isParent,isRemovedSingleChildrenGroup=details.groupRemoveSingleChildren&&isParent&&1===rowNode.childrenAfterGroup.length,isRemovedLowestSingleChildrenGroup=details.groupRemoveLowestSingleChildren&&isParent&&rowNode.leafGroup&&1===rowNode.childrenAfterGroup.length,neverAllowToExpand=skipLeafNodes&&rowNode.leafGroup,isHiddenOpenParent=details.hideOpenParents&&rowNode.expanded&&!rowNode.master&&!neverAllowToExpand;if(!(isSkippedLeafNode||isHiddenOpenParent||isRemovedSingleChildrenGroup||isRemovedLowestSingleChildrenGroup)&&this.addRowNodeToRowsToDisplay(details,rowNode,result,uiLevel),!skipLeafNodes||!rowNode.leafGroup)if(isParent){var excludedParent=isRemovedSingleChildrenGroup||isRemovedLowestSingleChildrenGroup;if(rowNode.expanded||excludedParent){var uiLevelForChildren=excludedParent?uiLevel:uiLevel+1;this.recursivelyAddToRowsToDisplay(details,rowNode.childrenAfterSort,result,skipLeafNodes,uiLevelForChildren),details.getGroupIncludeFooter({node:rowNode})?(rowNode.createFooter(),this.addRowNodeToRowsToDisplay(details,rowNode.sibling,result,uiLevelForChildren)):rowNode.destroyFooter()}}else if(rowNode.master&&rowNode.expanded){var detailNode=this.createDetailNode(rowNode);this.addRowNodeToRowsToDisplay(details,detailNode,result,uiLevel)}}},FlattenStage.prototype.addRowNodeToRowsToDisplay=function(details,rowNode,result,uiLevel){result.push(rowNode),rowNode.setUiLevel(details.isGroupMultiAutoColumn?0:uiLevel)},FlattenStage.prototype.createDetailNode=function(masterNode){if(_.exists(masterNode.detailNode))return masterNode.detailNode;var detailNode=new RowNode(this.beans);return detailNode.detail=!0,detailNode.selectable=!1,detailNode.parent=masterNode,_.exists(masterNode.id)&&(detailNode.id="detail_"+masterNode.id),detailNode.data=masterNode.data,detailNode.level=masterNode.level+1,masterNode.detailNode=detailNode,detailNode},__decorate$8([Autowired("columnModel")],FlattenStage.prototype,"columnModel",void 0),__decorate$8([Autowired("beans")],FlattenStage.prototype,"beans",void 0),FlattenStage=__decorate$8([Bean("flattenStage")],FlattenStage)}(BeanStub),__extends$8=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$7=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},SortService=function(_super){function SortService(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$8(SortService,_super),SortService.prototype.init=function(){this.postSortFunc=this.gridOptionsService.getCallback("postSortRows")},SortService.prototype.sort=function(sortOptions,sortActive,useDeltaSort,rowNodeTransactions,changedPath,sortContainsGroupColumns){var _this=this,groupMaintainOrder=this.gridOptionsService.is("groupMaintainOrder"),groupColumnsPresent=this.columnModel.getAllGridColumns().some((function(c){return c.isRowGroupActive()})),allDirtyNodes={};useDeltaSort&&rowNodeTransactions&&(allDirtyNodes=this.calculateDirtyNodes(rowNodeTransactions));var isPivotMode=this.columnModel.isPivotMode();changedPath&&changedPath.forEachChangedNodeDepthFirst((function(rowNode){_this.pullDownGroupDataForHideOpenParents(rowNode.childrenAfterAggFilter,!0);var skipSortingPivotLeafs=isPivotMode&&rowNode.leafGroup;if(groupMaintainOrder&&groupColumnsPresent&&!rowNode.leafGroup&&!sortContainsGroupColumns){var childrenToBeSorted=rowNode.childrenAfterAggFilter.slice(0);if(rowNode.childrenAfterSort){var indexedOrders_1={};rowNode.childrenAfterSort.forEach((function(node,idx){indexedOrders_1[node.id]=idx})),childrenToBeSorted.sort((function(row1,row2){var _a,_b;return(null!==(_a=indexedOrders_1[row1.id])&&void 0!==_a?_a:0)-(null!==(_b=indexedOrders_1[row2.id])&&void 0!==_b?_b:0)}))}rowNode.childrenAfterSort=childrenToBeSorted}else rowNode.childrenAfterSort=!sortActive||skipSortingPivotLeafs?rowNode.childrenAfterAggFilter.slice(0):useDeltaSort?_this.doDeltaSort(rowNode,allDirtyNodes,changedPath,sortOptions):_this.rowNodeSorter.doFullSort(rowNode.childrenAfterAggFilter,sortOptions);if(rowNode.sibling&&(rowNode.sibling.childrenAfterSort=rowNode.childrenAfterSort),_this.updateChildIndexes(rowNode),_this.postSortFunc){var params={nodes:rowNode.childrenAfterSort};_this.postSortFunc(params)}})),this.updateGroupDataForHideOpenParents(changedPath)},SortService.prototype.calculateDirtyNodes=function(rowNodeTransactions){var dirtyNodes={},addNodesFunc=function(rowNodes){rowNodes&&rowNodes.forEach((function(rowNode){return dirtyNodes[rowNode.id]=!0}))};return rowNodeTransactions&&rowNodeTransactions.forEach((function(tran){addNodesFunc(tran.add),addNodesFunc(tran.update),addNodesFunc(tran.remove)})),dirtyNodes},SortService.prototype.doDeltaSort=function(rowNode,allTouchedNodes,changedPath,sortOptions){var _this=this,unsortedRows=rowNode.childrenAfterAggFilter,oldSortedRows=rowNode.childrenAfterSort;if(!oldSortedRows)return this.rowNodeSorter.doFullSort(unsortedRows,sortOptions);var untouchedRowsMap={},touchedRows=[];unsortedRows.forEach((function(row){allTouchedNodes[row.id]||!changedPath.canSkip(row)?touchedRows.push(row):untouchedRowsMap[row.id]=!0}));var sortedUntouchedRows=oldSortedRows.filter((function(child){return untouchedRowsMap[child.id]})),mapNodeToSortedNode=function(rowNode,pos){return{currentPos:pos,rowNode}},sortedChangedRows=touchedRows.map(mapNodeToSortedNode).sort((function(a,b){return _this.rowNodeSorter.compareRowNodes(sortOptions,a,b)}));return this.mergeSortedArrays(sortOptions,sortedChangedRows,sortedUntouchedRows.map(mapNodeToSortedNode)).map((function(_a){return _a.rowNode}))},SortService.prototype.mergeSortedArrays=function(sortOptions,arr1,arr2){for(var res=[],i=0,j=0;i<arr1.length&&j<arr2.length;){this.rowNodeSorter.compareRowNodes(sortOptions,arr1[i],arr2[j])<0?res.push(arr1[i++]):res.push(arr2[j++])}for(;i<arr1.length;)res.push(arr1[i++]);for(;j<arr2.length;)res.push(arr2[j++]);return res},SortService.prototype.updateChildIndexes=function(rowNode){if(!_.missing(rowNode.childrenAfterSort))for(var listToSort=rowNode.childrenAfterSort,i=0;i<listToSort.length;i++){var child=listToSort[i],firstChild=0===i,lastChild=i===rowNode.childrenAfterSort.length-1;child.setFirstChild(firstChild),child.setLastChild(lastChild),child.setChildIndex(i)}},SortService.prototype.updateGroupDataForHideOpenParents=function(changedPath){var _this=this;if(this.gridOptionsService.is("groupHideOpenParents")){if(this.gridOptionsService.is("treeData")){return _.doOnce((function(){return console.warn("AG Grid: The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them (as opposed to Row Grouping, which only has Aggregated Values at the group level).")}),"sortService.hideOpenParentsWithTreeData"),!1}var callback=function(rowNode){_this.pullDownGroupDataForHideOpenParents(rowNode.childrenAfterSort,!1),rowNode.childrenAfterSort.forEach((function(child){child.hasChildren()&&callback(child)}))};changedPath&&changedPath.executeFromRootNode((function(rowNode){return callback(rowNode)}))}},SortService.prototype.pullDownGroupDataForHideOpenParents=function(rowNodes,clearOperation){var _this=this;this.gridOptionsService.is("groupHideOpenParents")&&!_.missing(rowNodes)&&rowNodes.forEach((function(childRowNode){_this.columnModel.getGroupDisplayColumns().forEach((function(groupDisplayCol){var showRowGroup=groupDisplayCol.getColDef().showRowGroup;if("string"==typeof showRowGroup){var displayingGroupKey=showRowGroup,rowGroupColumn=_this.columnModel.getPrimaryColumn(displayingGroupKey);if(!(rowGroupColumn===childRowNode.rowGroupColumn))if(clearOperation)childRowNode.setGroupValue(groupDisplayCol.getId(),void 0);else{var parentToStealFrom=childRowNode.getFirstChildOfFirstChild(rowGroupColumn);parentToStealFrom&&childRowNode.setGroupValue(groupDisplayCol.getId(),parentToStealFrom.key)}}else console.error("AG Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup")}))}))},__decorate$7([Autowired("columnModel")],SortService.prototype,"columnModel",void 0),__decorate$7([Autowired("rowNodeSorter")],SortService.prototype,"rowNodeSorter",void 0),__decorate$7([PostConstruct],SortService.prototype,"init",null),SortService=__decorate$7([Bean("sortService")],SortService)}(BeanStub),__extends$7=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$6=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},FilterService=function(_super){function FilterService(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$7(FilterService,_super),FilterService.prototype.filter=function(changedPath){var filterActive=this.filterManager.isChildFilterPresent();this.filterNodes(filterActive,changedPath)},FilterService.prototype.filterNodes=function(filterActive,changedPath){var _this=this,filterCallback=function(rowNode,includeChildNodes){rowNode.hasChildren()?rowNode.childrenAfterFilter=filterActive&&!includeChildNodes?rowNode.childrenAfterGroup.filter((function(childNode){var passBecauseChildren=childNode.childrenAfterFilter&&childNode.childrenAfterFilter.length>0,passBecauseDataPasses=childNode.data&&_this.filterManager.doesRowPassFilter({rowNode:childNode});return passBecauseChildren||passBecauseDataPasses})):rowNode.childrenAfterGroup:rowNode.childrenAfterFilter=rowNode.childrenAfterGroup,rowNode.sibling&&(rowNode.sibling.childrenAfterFilter=rowNode.childrenAfterFilter)};if(this.doingTreeDataFiltering()){var treeDataDepthFirstFilter_1=function(rowNode,alreadyFoundInParent){if(rowNode.childrenAfterGroup)for(var i=0;i<rowNode.childrenAfterGroup.length;i++){var childNode=rowNode.childrenAfterGroup[i],foundInParent=alreadyFoundInParent||_this.filterManager.doesRowPassFilter({rowNode:childNode});childNode.childrenAfterGroup?treeDataDepthFirstFilter_1(rowNode.childrenAfterGroup[i],foundInParent):filterCallback(childNode,foundInParent)}filterCallback(rowNode,alreadyFoundInParent)};changedPath.executeFromRootNode((function(rowNode){return treeDataDepthFirstFilter_1(rowNode,!1)}))}else{changedPath.forEachChangedNodeDepthFirst((function(rowNode){return filterCallback(rowNode,!1)}),!0)}},FilterService.prototype.doingTreeDataFiltering=function(){return this.gridOptionsService.is("treeData")&&!this.gridOptionsService.is("excludeChildrenWhenTreeDataFiltering")},__decorate$6([Autowired("filterManager")],FilterService.prototype,"filterManager",void 0),FilterService=__decorate$6([Bean("filterService")],FilterService)}(BeanStub),__extends$6=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$5=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},ImmutableService=function(_super){function ImmutableService(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$6(ImmutableService,_super),ImmutableService.prototype.postConstruct=function(){"clientSide"===this.rowModel.getType()&&(this.clientSideRowModel=this.rowModel)},ImmutableService.prototype.isActive=function(){var getRowIdProvided=this.gridOptionsService.exists("getRowId");return!this.gridOptionsService.is("resetRowDataOnUpdate")&&getRowIdProvided},ImmutableService.prototype.setRowData=function(rowData){var transactionAndMap=this.createTransactionForRowData(rowData);if(transactionAndMap){var _a=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}(transactionAndMap,2),transaction=_a[0],orderIdMap=_a[1];this.clientSideRowModel.updateRowData(transaction,orderIdMap)}},ImmutableService.prototype.createTransactionForRowData=function(rowData){if(_.missing(this.clientSideRowModel))console.error("AG Grid: ImmutableService only works with ClientSideRowModel");else{var getRowIdFunc=this.gridOptionsService.getCallback("getRowId");if(null!=getRowIdFunc){var transaction={remove:[],update:[],add:[]},existingNodesMap=this.clientSideRowModel.getCopyOfNodesMap(),orderMap=this.gridOptionsService.is("suppressMaintainUnsortedOrder")?void 0:{};return _.exists(rowData)&&rowData.forEach((function(data,index){var id=getRowIdFunc({data,level:0}),existingNode=existingNodesMap[id];(orderMap&&(orderMap[id]=index),existingNode)?(existingNode.data!==data&&transaction.update.push(data),existingNodesMap[id]=void 0):transaction.add.push(data)})),_.iterateObject(existingNodesMap,(function(id,rowNode){rowNode&&transaction.remove.push(rowNode.data)})),[transaction,orderMap]}console.error("AG Grid: ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!")}},__decorate$5([Autowired("rowModel")],ImmutableService.prototype,"rowModel",void 0),__decorate$5([Autowired("rowRenderer")],ImmutableService.prototype,"rowRenderer",void 0),__decorate$5([PostConstruct],ImmutableService.prototype,"postConstruct",null),ImmutableService=__decorate$5([Bean("immutableService")],ImmutableService)}(BeanStub),ClientSideRowModelModule={version:"30.2.1",moduleName:ModuleNames.ClientSideRowModelModule,rowModel:"clientSide",beans:[ClientSideRowModel,FilterStage,SortStage,FlattenStage,SortService,FilterService,ImmutableService]},__extends$5=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$4=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},InfiniteBlock=function(_super){function InfiniteBlock(id,parentCache,params){var _this=_super.call(this,id)||this;return _this.parentCache=parentCache,_this.params=params,_this.startRow=id*params.blockSize,_this.endRow=_this.startRow+params.blockSize,_this}return __extends$5(InfiniteBlock,_super),InfiniteBlock.prototype.postConstruct=function(){this.createRowNodes()},InfiniteBlock.prototype.getBlockStateJson=function(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}},InfiniteBlock.prototype.setDataAndId=function(rowNode,data,index){_.exists(data)?rowNode.setDataAndId(data,index.toString()):rowNode.setDataAndId(void 0,void 0)},InfiniteBlock.prototype.loadFromDatasource=function(){var _this=this,params=this.createLoadParams();_.missing(this.params.datasource.getRows)?console.warn("AG Grid: datasource is missing getRows method"):window.setTimeout((function(){_this.params.datasource.getRows(params)}),0)},InfiniteBlock.prototype.processServerFail=function(){},InfiniteBlock.prototype.createLoadParams=function(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gridOptionsService.context}},InfiniteBlock.prototype.forEachNode=function(callback,sequence,rowCount){var _this=this;this.rowNodes.forEach((function(rowNode,index){_this.startRow+index<rowCount&&callback(rowNode,sequence.next())}))},InfiniteBlock.prototype.getLastAccessed=function(){return this.lastAccessed},InfiniteBlock.prototype.getRow=function(rowIndex,dontTouchLastAccessed){void 0===dontTouchLastAccessed&&(dontTouchLastAccessed=!1),dontTouchLastAccessed||(this.lastAccessed=this.params.lastAccessedSequence.next());var localIndex=rowIndex-this.startRow;return this.rowNodes[localIndex]},InfiniteBlock.prototype.getStartRow=function(){return this.startRow},InfiniteBlock.prototype.getEndRow=function(){return this.endRow},InfiniteBlock.prototype.createRowNodes=function(){this.rowNodes=[];for(var i=0;i<this.params.blockSize;i++){var rowIndex=this.startRow+i,rowNode=new RowNode(this.beans);rowNode.setRowHeight(this.params.rowHeight),rowNode.uiLevel=0,rowNode.setRowIndex(rowIndex),rowNode.setRowTop(this.params.rowHeight*rowIndex),this.rowNodes.push(rowNode)}},InfiniteBlock.prototype.processServerResult=function(params){var _this=this;this.rowNodes.forEach((function(rowNode,index){var data=params.rowData?params.rowData[index]:void 0;!rowNode.id&&rowNode.alreadyRendered&&data&&(_this.rowNodes[index]=new RowNode(_this.beans),_this.rowNodes[index].setRowIndex(rowNode.rowIndex),_this.rowNodes[index].setRowTop(rowNode.rowTop),_this.rowNodes[index].setRowHeight(rowNode.rowHeight),rowNode.clearRowTopAndRowIndex()),_this.setDataAndId(_this.rowNodes[index],data,_this.startRow+index)}));var finalRowCount=null!=params.rowCount&&params.rowCount>=0?params.rowCount:void 0;this.parentCache.pageLoaded(this,finalRowCount)},InfiniteBlock.prototype.destroyRowNodes=function(){this.rowNodes.forEach((function(rowNode){rowNode.clearRowTopAndRowIndex()}))},__decorate$4([Autowired("beans")],InfiniteBlock.prototype,"beans",void 0),__decorate$4([PostConstruct],InfiniteBlock.prototype,"postConstruct",null),__decorate$4([PreDestroy],InfiniteBlock.prototype,"destroyRowNodes",null),InfiniteBlock}(RowNodeBlock),__extends$4=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$3=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},InfiniteCache=function(_super){function InfiniteCache(params){var _this=_super.call(this)||this;return _this.lastRowIndexKnown=!1,_this.blocks={},_this.blockCount=0,_this.rowCount=params.initialRowCount,_this.params=params,_this}var paramIndex,decorator;return __extends$4(InfiniteCache,_super),InfiniteCache.prototype.setBeans=function(loggerFactory){this.logger=loggerFactory.create("InfiniteCache")},InfiniteCache.prototype.getRow=function(rowIndex,dontCreatePage){void 0===dontCreatePage&&(dontCreatePage=!1);var blockId=Math.floor(rowIndex/this.params.blockSize),block=this.blocks[blockId];if(!block){if(dontCreatePage)return;block=this.createBlock(blockId)}return block.getRow(rowIndex)},InfiniteCache.prototype.createBlock=function(blockNumber){var newBlock=this.createBean(new InfiniteBlock(blockNumber,this,this.params));return this.blocks[newBlock.getId()]=newBlock,this.blockCount++,this.purgeBlocksIfNeeded(newBlock),this.params.rowNodeBlockLoader.addBlock(newBlock),newBlock},InfiniteCache.prototype.refreshCache=function(){0==this.blockCount?this.purgeCache():(this.getBlocksInOrder().forEach((function(block){return block.setStateWaitingToLoad()})),this.params.rowNodeBlockLoader.checkBlockToLoad())},InfiniteCache.prototype.destroyAllBlocks=function(){var _this=this;this.getBlocksInOrder().forEach((function(block){return _this.destroyBlock(block)}))},InfiniteCache.prototype.getRowCount=function(){return this.rowCount},InfiniteCache.prototype.isLastRowIndexKnown=function(){return this.lastRowIndexKnown},InfiniteCache.prototype.pageLoaded=function(block,lastRow){this.isAlive()&&(this.logger.log("onPageLoaded: page = "+block.getId()+", lastRow = "+lastRow),this.checkRowCount(block,lastRow),this.onCacheUpdated())},InfiniteCache.prototype.purgeBlocksIfNeeded=function(blockToExclude){var _this=this,blocksForPurging=this.getBlocksInOrder().filter((function(b){return b!=blockToExclude}));blocksForPurging.sort((function(a,b){return b.getLastAccessed()-a.getLastAccessed()}));var maxBlocksProvided=this.params.maxBlocksInCache>0,blocksToKeep=maxBlocksProvided?this.params.maxBlocksInCache-1:null,emptyBlocksToKeep=InfiniteCache.MAX_EMPTY_BLOCKS_TO_KEEP-1;blocksForPurging.forEach((function(block,index){if(block.getState()===InfiniteBlock.STATE_WAITING_TO_LOAD&&index>=emptyBlocksToKeep||!!maxBlocksProvided&&index>=blocksToKeep){if(_this.isBlockCurrentlyDisplayed(block))return;if(_this.isBlockFocused(block))return;_this.removeBlockFromCache(block)}}))},InfiniteCache.prototype.isBlockFocused=function(block){var focusedCell=this.focusService.getFocusCellToUseAfterRefresh();if(!focusedCell)return!1;if(null!=focusedCell.rowPinned)return!1;var blockIndexStart=block.getStartRow(),blockIndexEnd=block.getEndRow();return focusedCell.rowIndex>=blockIndexStart&&focusedCell.rowIndex<blockIndexEnd},InfiniteCache.prototype.isBlockCurrentlyDisplayed=function(block){var startIndex=block.getStartRow(),endIndex=block.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(startIndex,endIndex)},InfiniteCache.prototype.removeBlockFromCache=function(blockToRemove){blockToRemove&&this.destroyBlock(blockToRemove)},InfiniteCache.prototype.checkRowCount=function(block,lastRow){if("number"==typeof lastRow&&lastRow>=0)this.rowCount=lastRow,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){var lastRowIndexPlusOverflow=(block.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<lastRowIndexPlusOverflow&&(this.rowCount=lastRowIndexPlusOverflow)}},InfiniteCache.prototype.setRowCount=function(rowCount,lastRowIndexKnown){this.rowCount=rowCount,_.exists(lastRowIndexKnown)&&(this.lastRowIndexKnown=lastRowIndexKnown),this.lastRowIndexKnown||this.rowCount%this.params.blockSize==0&&this.rowCount++,this.onCacheUpdated()},InfiniteCache.prototype.forEachNodeDeep=function(callback){var _this=this,sequence=new NumberSequence;this.getBlocksInOrder().forEach((function(block){return block.forEachNode(callback,sequence,_this.rowCount)}))},InfiniteCache.prototype.getBlocksInOrder=function(){return _.getAllValuesInObject(this.blocks).sort((function(a,b){return a.getId()-b.getId()}))},InfiniteCache.prototype.destroyBlock=function(block){delete this.blocks[block.getId()],this.destroyBean(block),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(block)},InfiniteCache.prototype.onCacheUpdated=function(){if(this.isAlive()){this.destroyAllBlocksPastVirtualRowCount();var event_1={type:Events.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(event_1)}},InfiniteCache.prototype.destroyAllBlocksPastVirtualRowCount=function(){var _this=this,blocksToDestroy=[];this.getBlocksInOrder().forEach((function(block){block.getId()*_this.params.blockSize>=_this.rowCount&&blocksToDestroy.push(block)})),blocksToDestroy.length>0&&blocksToDestroy.forEach((function(block){return _this.destroyBlock(block)}))},InfiniteCache.prototype.purgeCache=function(){var _this=this;this.getBlocksInOrder().forEach((function(block){return _this.removeBlockFromCache(block)})),this.lastRowIndexKnown=!1,0===this.rowCount&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()},InfiniteCache.prototype.getRowNodesInRange=function(firstInRange,lastInRange){var _this=this,result=[],lastBlockId=-1,inActiveRange=!1,numberSequence=new NumberSequence;_.missing(firstInRange)&&(inActiveRange=!0);var foundGapInSelection=!1;return this.getBlocksInOrder().forEach((function(block){foundGapInSelection||(inActiveRange&&lastBlockId+1!==block.getId()?foundGapInSelection=!0:(lastBlockId=block.getId(),block.forEachNode((function(rowNode){var hitFirstOrLast=rowNode===firstInRange||rowNode===lastInRange;(inActiveRange||hitFirstOrLast)&&result.push(rowNode),hitFirstOrLast&&(inActiveRange=!inActiveRange)}),numberSequence,_this.rowCount)))})),foundGapInSelection||inActiveRange?[]:result},InfiniteCache.MAX_EMPTY_BLOCKS_TO_KEEP=2,__decorate$3([Autowired("rowRenderer")],InfiniteCache.prototype,"rowRenderer",void 0),__decorate$3([Autowired("focusService")],InfiniteCache.prototype,"focusService",void 0),__decorate$3([(paramIndex=0,decorator=Qualifier("loggerFactory"),function(target,key){decorator(target,key,paramIndex)})],InfiniteCache.prototype,"setBeans",null),__decorate$3([PreDestroy],InfiniteCache.prototype,"destroyAllBlocks",null),InfiniteCache}(BeanStub),__extends$3=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},InfiniteRowModel=function(_super){function InfiniteRowModel(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$3(InfiniteRowModel,_super),InfiniteRowModel.prototype.getRowBounds=function(index){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*index}},InfiniteRowModel.prototype.ensureRowHeightsValid=function(startPixel,endPixel,startLimitIndex,endLimitIndex){return!1},InfiniteRowModel.prototype.init=function(){var _this=this;this.gridOptionsService.isRowModelType("infinite")&&(this.rowHeight=this.gridOptionsService.getRowHeightAsNumber(),this.addEventListeners(),this.addDestroyFunc((function(){return _this.destroyCache()})),this.verifyProps())},InfiniteRowModel.prototype.verifyProps=function(){if(this.gridOptionsService.exists("initialGroupOrderComparator")){_.doOnce((function(){return console.warn("AG Grid: initialGroupOrderComparator cannot be used with Infinite Row Model. If using Infinite Row Model, then sorting is done on the server side, nothing to do with the client.")}),"IRM.InitialGroupOrderComparator")}},InfiniteRowModel.prototype.start=function(){this.setDatasource(this.gridOptionsService.get("datasource"))},InfiniteRowModel.prototype.destroyDatasource=function(){this.datasource&&(this.getContext().destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)},InfiniteRowModel.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,Events.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_STORE_UPDATED,this.onCacheUpdated.bind(this))},InfiniteRowModel.prototype.onFilterChanged=function(){this.reset()},InfiniteRowModel.prototype.onSortChanged=function(){this.reset()},InfiniteRowModel.prototype.onColumnEverything=function(){(!this.cacheParams||this.isSortModelDifferent())&&this.reset()},InfiniteRowModel.prototype.isSortModelDifferent=function(){return!_.jsonEquals(this.cacheParams.sortModel,this.sortController.getSortModel())},InfiniteRowModel.prototype.getType=function(){return"infinite"},InfiniteRowModel.prototype.setDatasource=function(datasource){this.destroyDatasource(),this.datasource=datasource,datasource&&this.reset()},InfiniteRowModel.prototype.isEmpty=function(){return!this.infiniteCache},InfiniteRowModel.prototype.isRowsToRender=function(){return!!this.infiniteCache},InfiniteRowModel.prototype.getNodesInRangeForSelection=function(firstInRange,lastInRange){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(firstInRange,lastInRange):[]},InfiniteRowModel.prototype.reset=function(){if(this.datasource){null!=this.gridOptionsService.getCallback("getRowId")||this.selectionService.reset(),this.resetCache();var event=this.createModelUpdatedEvent();this.eventService.dispatchEvent(event)}},InfiniteRowModel.prototype.createModelUpdatedEvent=function(){return{type:Events.EVENT_MODEL_UPDATED,newPage:!1,newData:!1,keepRenderedRows:!0,animate:!1}},InfiniteRowModel.prototype.resetCache=function(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager.getFilterModel(),sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.defaultIfInvalid(this.gridOptionsService.getNum("infiniteInitialRowCount"),1),maxBlocksInCache:this.gridOptionsService.getNum("maxBlocksInCache"),rowHeight:this.gridOptionsService.getRowHeightAsNumber(),overflowSize:this.defaultIfInvalid(this.gridOptionsService.getNum("cacheOverflowSize"),1),blockSize:this.defaultIfInvalid(this.gridOptionsService.getNum("cacheBlockSize"),100),lastAccessedSequence:new NumberSequence},this.infiniteCache=this.createBean(new InfiniteCache(this.cacheParams))},InfiniteRowModel.prototype.defaultIfInvalid=function(value,defaultValue){return value>0?value:defaultValue},InfiniteRowModel.prototype.destroyCache=function(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))},InfiniteRowModel.prototype.onCacheUpdated=function(){var event=this.createModelUpdatedEvent();this.eventService.dispatchEvent(event)},InfiniteRowModel.prototype.getRow=function(rowIndex){if(this.infiniteCache&&!(rowIndex>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(rowIndex)},InfiniteRowModel.prototype.getRowNode=function(id){var result;return this.forEachNode((function(rowNode){rowNode.id===id&&(result=rowNode)})),result},InfiniteRowModel.prototype.forEachNode=function(callback){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(callback)},InfiniteRowModel.prototype.getTopLevelRowCount=function(){return this.getRowCount()},InfiniteRowModel.prototype.getTopLevelRowDisplayedIndex=function(topLevelIndex){return topLevelIndex},InfiniteRowModel.prototype.getRowIndexAtPixel=function(pixel){if(0!==this.rowHeight){var rowIndexForPixel=Math.floor(pixel/this.rowHeight),lastRowIndex=this.getRowCount()-1;return rowIndexForPixel>lastRowIndex?lastRowIndex:rowIndexForPixel}return 0},InfiniteRowModel.prototype.getRowCount=function(){return this.infiniteCache?this.infiniteCache.getRowCount():0},InfiniteRowModel.prototype.isRowPresent=function(rowNode){return!!this.getRowNode(rowNode.id)},InfiniteRowModel.prototype.refreshCache=function(){this.infiniteCache&&this.infiniteCache.refreshCache()},InfiniteRowModel.prototype.purgeCache=function(){this.infiniteCache&&this.infiniteCache.purgeCache()},InfiniteRowModel.prototype.isLastRowIndexKnown=function(){return!!this.infiniteCache&&this.infiniteCache.isLastRowIndexKnown()},InfiniteRowModel.prototype.setRowCount=function(rowCount,lastRowIndexKnown){this.infiniteCache&&this.infiniteCache.setRowCount(rowCount,lastRowIndexKnown)},__decorate$2([Autowired("filterManager")],InfiniteRowModel.prototype,"filterManager",void 0),__decorate$2([Autowired("sortController")],InfiniteRowModel.prototype,"sortController",void 0),__decorate$2([Autowired("selectionService")],InfiniteRowModel.prototype,"selectionService",void 0),__decorate$2([Autowired("rowRenderer")],InfiniteRowModel.prototype,"rowRenderer",void 0),__decorate$2([Autowired("rowNodeBlockLoader")],InfiniteRowModel.prototype,"rowNodeBlockLoader",void 0),__decorate$2([PostConstruct],InfiniteRowModel.prototype,"init",null),__decorate$2([PreDestroy],InfiniteRowModel.prototype,"destroyDatasource",null),InfiniteRowModel=__decorate$2([Bean("rowModel")],InfiniteRowModel)}(BeanStub),InfiniteRowModelModule={version:"30.2.1",moduleName:ModuleNames.InfiniteRowModelModule,rowModel:"infinite",beans:[InfiniteRowModel]},BaseCreator=function(){function BaseCreator(){}return BaseCreator.prototype.setBeans=function(beans){this.beans=beans},BaseCreator.prototype.getFileName=function(fileName){var extension=this.getDefaultFileExtension();return null!=fileName&&fileName.length||(fileName=this.getDefaultFileName()),-1===fileName.indexOf(".")?fileName+"."+extension:fileName},BaseCreator.prototype.getData=function(params){var serializingSession=this.createSerializingSession(params);return this.beans.gridSerializer.serialize(serializingSession,params)},BaseCreator}(),BaseGridSerializingSession=function(){function BaseGridSerializingSession(config){this.groupColumns=[];var columnModel=config.columnModel,valueService=config.valueService,gridOptionsService=config.gridOptionsService,valueFormatterService=config.valueFormatterService,valueParserService=config.valueParserService,processCellCallback=config.processCellCallback,processHeaderCallback=config.processHeaderCallback,processGroupHeaderCallback=config.processGroupHeaderCallback,processRowGroupCallback=config.processRowGroupCallback;this.columnModel=columnModel,this.valueService=valueService,this.gridOptionsService=gridOptionsService,this.valueFormatterService=valueFormatterService,this.valueParserService=valueParserService,this.processCellCallback=processCellCallback,this.processHeaderCallback=processHeaderCallback,this.processGroupHeaderCallback=processGroupHeaderCallback,this.processRowGroupCallback=processRowGroupCallback}return BaseGridSerializingSession.prototype.prepare=function(columnsToExport){this.groupColumns=columnsToExport.filter((function(col){return!!col.getColDef().showRowGroup}))},BaseGridSerializingSession.prototype.extractHeaderValue=function(column){var value=this.getHeaderName(this.processHeaderCallback,column);return null!=value?value:""},BaseGridSerializingSession.prototype.extractRowCellValue=function(column,index,accumulatedRowIndex,type,node){var value=this.gridOptionsService.is("groupHideOpenParents")&&!node.footer||!this.shouldRenderGroupSummaryCell(node,column,index)?this.valueService.getValue(column,node):this.createValueForGroupNode(node);return this.processCell({accumulatedRowIndex,rowNode:node,column,value,processCellCallback:this.processCellCallback,type})},BaseGridSerializingSession.prototype.shouldRenderGroupSummaryCell=function(node,column,currentColumnIndex){var _a;if(!(node&&node.group))return!1;if(-1!==this.groupColumns.indexOf(column)){if(null!=(null===(_a=node.groupData)||void 0===_a?void 0:_a[column.getId()]))return!0;if(this.gridOptionsService.isRowModelType("serverSide")&&node.group)return!0;if(node.footer&&-1===node.level){var colDef=column.getColDef();return null==colDef||!0===colDef.showRowGroup||colDef.showRowGroup===this.columnModel.getRowGroupColumns()[0].getId()}}var isGroupUseEntireRow=this.gridOptionsService.isGroupUseEntireRow(this.columnModel.isPivotMode());return 0===currentColumnIndex&&isGroupUseEntireRow},BaseGridSerializingSession.prototype.getHeaderName=function(callback,column){return callback?callback({column,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}):this.columnModel.getDisplayNameForColumn(column,"csv",!0)},BaseGridSerializingSession.prototype.createValueForGroupNode=function(node){if(this.processRowGroupCallback)return this.processRowGroupCallback({node,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context});var isFooter=node.footer,keys=[node.key];if(!this.gridOptionsService.isGroupMultiAutoColumn())for(;node.parent;)node=node.parent,keys.push(node.key);var groupValue=keys.reverse().join(" -> ");return isFooter?"Total "+groupValue:groupValue},BaseGridSerializingSession.prototype.processCell=function(params){var _a,_this=this,accumulatedRowIndex=params.accumulatedRowIndex,rowNode=params.rowNode,column=params.column,value=params.value,processCellCallback=params.processCellCallback,type=params.type;return processCellCallback?{value:null!==(_a=processCellCallback({accumulatedRowIndex,column,node:rowNode,value,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,type,parseValue:function(valueToParse){return _this.valueParserService.parseValue(column,rowNode,valueToParse,_this.valueService.getValue(column,rowNode))},formatValue:function(valueToFormat){var _a;return null!==(_a=_this.valueFormatterService.formatValue(column,rowNode,valueToFormat))&&void 0!==_a?_a:valueToFormat}}))&&void 0!==_a?_a:""}:column.getColDef().useValueFormatterForExport?{value:null!=value?value:"",valueFormatted:this.valueFormatterService.formatValue(column,rowNode,value)}:{value:null!=value?value:""}},BaseGridSerializingSession}(),Downloader=function(){function Downloader(){}return Downloader.download=function(fileName,content){var win=document.defaultView||window;if(win){var element=document.createElement("a"),url=win.URL.createObjectURL(content);element.setAttribute("href",url),element.setAttribute("download",fileName),element.style.display="none",document.body.appendChild(element),element.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:win})),document.body.removeChild(element),win.setTimeout((function(){win.URL.revokeObjectURL(url)}),0)}else console.warn("AG Grid: There is no `window` associated with the current `document`")},Downloader}(),__extends$2=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),CsvSerializingSession=function(_super){function CsvSerializingSession(config){var _this=_super.call(this,config)||this;_this.isFirstLine=!0,_this.result="";var suppressQuotes=config.suppressQuotes,columnSeparator=config.columnSeparator;return _this.suppressQuotes=suppressQuotes,_this.columnSeparator=columnSeparator,_this}return __extends$2(CsvSerializingSession,_super),CsvSerializingSession.prototype.addCustomContent=function(content){var _this=this;content&&("string"==typeof content?(/^\s*\n/.test(content)||this.beginNewLine(),content=content.replace(/\r?\n/g,"\r\n"),this.result+=content):content.forEach((function(row){_this.beginNewLine(),row.forEach((function(cell,index){0!==index&&(_this.result+=_this.columnSeparator),_this.result+=_this.putInQuotes(cell.data.value||""),cell.mergeAcross&&_this.appendEmptyCells(cell.mergeAcross)}))})))},CsvSerializingSession.prototype.onNewHeaderGroupingRow=function(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}},CsvSerializingSession.prototype.onNewHeaderGroupingRowColumn=function(columnGroup,header,index,span){0!=index&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(header),this.appendEmptyCells(span)},CsvSerializingSession.prototype.appendEmptyCells=function(count){for(var i=1;i<=count;i++)this.result+=this.columnSeparator+this.putInQuotes("")},CsvSerializingSession.prototype.onNewHeaderRow=function(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}},CsvSerializingSession.prototype.onNewHeaderRowColumn=function(column,index){0!=index&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(column))},CsvSerializingSession.prototype.onNewBodyRow=function(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}},CsvSerializingSession.prototype.onNewBodyRowColumn=function(column,index,node){var _a;0!=index&&(this.result+=this.columnSeparator);var rowCellValue=this.extractRowCellValue(column,index,index,"csv",node);this.result+=this.putInQuotes(null!==(_a=rowCellValue.valueFormatted)&&void 0!==_a?_a:rowCellValue.value)},CsvSerializingSession.prototype.putInQuotes=function(value){return this.suppressQuotes?value:null==value?'""':("string"==typeof value?stringValue=value:"function"==typeof value.toString?stringValue=value.toString():(console.warn("AG Grid: unknown value type during csv conversion"),stringValue=""),'"'+stringValue.replace(/"/g,'""')+'"');var stringValue},CsvSerializingSession.prototype.parse=function(){return this.result},CsvSerializingSession.prototype.beginNewLine=function(){this.isFirstLine||(this.result+="\r\n"),this.isFirstLine=!1},CsvSerializingSession}(BaseGridSerializingSession),__extends$1=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},CsvCreator=function(_super){function CsvCreator(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1(CsvCreator,_super),CsvCreator.prototype.postConstruct=function(){this.setBeans({gridSerializer:this.gridSerializer,gridOptionsService:this.gridOptionsService})},CsvCreator.prototype.getMergedParams=function(params){var baseParams=this.gridOptionsService.get("defaultCsvExportParams");return Object.assign({},baseParams,params)},CsvCreator.prototype.export=function(userParams){if(this.isExportSuppressed())return console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration."),"";var mergedParams=this.getMergedParams(userParams),data=this.getData(mergedParams),packagedFile=new Blob(["\ufeff",data],{type:"text/plain"});return Downloader.download(this.getFileName(mergedParams.fileName),packagedFile),data},CsvCreator.prototype.exportDataAsCsv=function(params){return this.export(params)},CsvCreator.prototype.getDataAsCsv=function(params,skipDefaultParams){void 0===skipDefaultParams&&(skipDefaultParams=!1);var mergedParams=skipDefaultParams?Object.assign({},params):this.getMergedParams(params);return this.getData(mergedParams)},CsvCreator.prototype.getDefaultFileName=function(){return"export.csv"},CsvCreator.prototype.getDefaultFileExtension=function(){return"csv"},CsvCreator.prototype.createSerializingSession=function(params){var _a=this,columnModel=_a.columnModel,valueService=_a.valueService,gridOptionsService=_a.gridOptionsService,valueFormatterService=_a.valueFormatterService,valueParserService=_a.valueParserService,_b=params,processCellCallback=_b.processCellCallback,processHeaderCallback=_b.processHeaderCallback,processGroupHeaderCallback=_b.processGroupHeaderCallback,processRowGroupCallback=_b.processRowGroupCallback,suppressQuotes=_b.suppressQuotes,columnSeparator=_b.columnSeparator;return new CsvSerializingSession({columnModel,valueService,gridOptionsService,valueFormatterService,valueParserService,processCellCallback:processCellCallback||void 0,processHeaderCallback:processHeaderCallback||void 0,processGroupHeaderCallback:processGroupHeaderCallback||void 0,processRowGroupCallback:processRowGroupCallback||void 0,suppressQuotes:suppressQuotes||!1,columnSeparator:columnSeparator||","})},CsvCreator.prototype.isExportSuppressed=function(){return this.gridOptionsService.is("suppressCsvExport")},__decorate$1([Autowired("columnModel")],CsvCreator.prototype,"columnModel",void 0),__decorate$1([Autowired("valueService")],CsvCreator.prototype,"valueService",void 0),__decorate$1([Autowired("gridSerializer")],CsvCreator.prototype,"gridSerializer",void 0),__decorate$1([Autowired("gridOptionsService")],CsvCreator.prototype,"gridOptionsService",void 0),__decorate$1([Autowired("valueFormatterService")],CsvCreator.prototype,"valueFormatterService",void 0),__decorate$1([Autowired("valueParserService")],CsvCreator.prototype,"valueParserService",void 0),__decorate$1([PostConstruct],CsvCreator.prototype,"postConstruct",null),CsvCreator=__decorate$1([Bean("csvCreator")],CsvCreator)}(BaseCreator),__extends=function(){var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};!function(RowType){RowType[RowType.HEADER_GROUPING=0]="HEADER_GROUPING",RowType[RowType.HEADER=1]="HEADER",RowType[RowType.BODY=2]="BODY"}(RowType||(RowType={}));var GridSerializer=function(_super){function GridSerializer(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(GridSerializer,_super),GridSerializer.prototype.serialize=function(gridSerializingSession,params){void 0===params&&(params={});var columnsToExport=this.getColumnsToExport(params.allColumns,params.columnKeys);return _.compose(this.prepareSession(columnsToExport),this.prependContent(params),this.exportColumnGroups(params,columnsToExport),this.exportHeaders(params,columnsToExport),this.processPinnedTopRows(params,columnsToExport),this.processRows(params,columnsToExport),this.processPinnedBottomRows(params,columnsToExport),this.appendContent(params))(gridSerializingSession).parse()},GridSerializer.prototype.processRow=function(gridSerializingSession,params,columnsToExport,node){var rowSkipper=params.shouldRowBeSkipped||function(){return!1},context=this.gridOptionsService.context,api=this.gridOptionsService.api,columnApi=this.gridOptionsService.columnApi,skipSingleChildrenGroup=this.gridOptionsService.is("groupRemoveSingleChildren"),skipLowestSingleChildrenGroup=this.gridOptionsService.is("groupRemoveLowestSingleChildren"),isExplicitExportSelection=null!=params.rowPositions||!!params.onlySelected,hideOpenParents=this.gridOptionsService.is("groupHideOpenParents")&&!isExplicitExportSelection,isLeafNode=this.columnModel.isPivotMode()?node.leafGroup:!node.group,isFooter=!!node.footer,skipRowGroups=params.skipGroups||params.skipRowGroups,shouldSkipLowestGroup=skipLowestSingleChildrenGroup&&node.leafGroup,shouldSkipCurrentGroup=1===node.allChildrenCount&&(skipSingleChildrenGroup||shouldSkipLowestGroup);if((skipRowGroups&&params.skipGroups&&_.doOnce((function(){return console.warn("AG Grid: Since v25.2 `skipGroups` has been renamed to `skipRowGroups`.")}),"gridSerializer-skipGroups"),!(!isLeafNode&&!isFooter&&(params.skipRowGroups||shouldSkipCurrentGroup||hideOpenParents)||params.onlySelected&&!node.isSelected()||params.skipPinnedTop&&"top"===node.rowPinned||params.skipPinnedBottom&&"bottom"===node.rowPinned))&&((!(-1===node.level)||isLeafNode||isFooter)&&!rowSkipper({node,api,columnApi,context}))){var rowAccumulator=gridSerializingSession.onNewBodyRow(node);if(columnsToExport.forEach((function(column,index){rowAccumulator.onColumn(column,index,node)})),params.getCustomContentBelowRow){var content=params.getCustomContentBelowRow({node,api,columnApi,context});content&&gridSerializingSession.addCustomContent(content)}}},GridSerializer.prototype.appendContent=function(params){return function(gridSerializingSession){var appendContent=params.customFooter||params.appendContent;return appendContent&&(params.customFooter&&_.doOnce((function(){return console.warn("AG Grid: Since version 25.2.0 the `customFooter` param has been deprecated. Use `appendContent` instead.")}),"gridSerializer-customFooter"),gridSerializingSession.addCustomContent(appendContent)),gridSerializingSession}},GridSerializer.prototype.prependContent=function(params){return function(gridSerializingSession){var prependContent=params.customHeader||params.prependContent;return prependContent&&(params.customHeader&&_.doOnce((function(){return console.warn("AG Grid: Since version 25.2.0 the `customHeader` param has been deprecated. Use `prependContent` instead.")}),"gridSerializer-customHeader"),gridSerializingSession.addCustomContent(prependContent)),gridSerializingSession}},GridSerializer.prototype.prepareSession=function(columnsToExport){return function(gridSerializingSession){return gridSerializingSession.prepare(columnsToExport),gridSerializingSession}},GridSerializer.prototype.exportColumnGroups=function(params,columnsToExport){var _this=this;return function(gridSerializingSession){if(params.skipColumnGroupHeaders)params.columnGroups&&_.doOnce((function(){return console.warn("AG Grid: Since v25.2 the `columnGroups` param has deprecated, and groups are exported by default.")}),"gridSerializer-columnGroups");else{var groupInstanceIdCreator=new GroupInstanceIdCreator,displayedGroups=_this.displayedGroupCreator.createDisplayedGroups(columnsToExport,groupInstanceIdCreator,null);_this.recursivelyAddHeaderGroups(displayedGroups,gridSerializingSession,params.processGroupHeaderCallback)}return gridSerializingSession}},GridSerializer.prototype.exportHeaders=function(params,columnsToExport){return function(gridSerializingSession){if(params.skipHeader||params.skipColumnHeaders)params.skipHeader&&_.doOnce((function(){return console.warn("AG Grid: Since v25.2 the `skipHeader` param has been renamed to `skipColumnHeaders`.")}),"gridSerializer-skipHeader");else{var gridRowIterator_1=gridSerializingSession.onNewHeaderRow();columnsToExport.forEach((function(column,index){gridRowIterator_1.onColumn(column,index,void 0)}))}return gridSerializingSession}},GridSerializer.prototype.processPinnedTopRows=function(params,columnsToExport){var _this=this;return function(gridSerializingSession){var processRow=_this.processRow.bind(_this,gridSerializingSession,params,columnsToExport);return params.rowPositions?params.rowPositions.filter((function(position){return"top"===position.rowPinned})).sort((function(a,b){return a.rowIndex-b.rowIndex})).map((function(position){return _this.pinnedRowModel.getPinnedTopRow(position.rowIndex)})).forEach(processRow):_this.pinnedRowModel.forEachPinnedTopRow(processRow),gridSerializingSession}},GridSerializer.prototype.processRows=function(params,columnsToExport){var _this=this;return function(gridSerializingSession){var rowModel=_this.rowModel,rowModelType=rowModel.getType(),usingCsrm="clientSide"===rowModelType,usingSsrm="serverSide"===rowModelType,onlySelectedNonStandardModel=!usingCsrm&&params.onlySelected,processRow=_this.processRow.bind(_this,gridSerializingSession,params,columnsToExport),_a=params.exportedRows,exportedRows=void 0===_a?"filteredAndSorted":_a;if(params.rowPositions)params.rowPositions.filter((function(position){return null==position.rowPinned})).sort((function(a,b){return a.rowIndex-b.rowIndex})).map((function(position){return rowModel.getRow(position.rowIndex)})).forEach(processRow);else if(_this.columnModel.isPivotMode())usingCsrm?rowModel.forEachPivotNode(processRow,!0):usingSsrm?rowModel.forEachNodeAfterFilterAndSort(processRow,!0):rowModel.forEachNode(processRow);else if(params.onlySelectedAllPages||onlySelectedNonStandardModel){var selectedNodes=_this.selectionService.getSelectedNodes();_this.replicateSortedOrder(selectedNodes),selectedNodes.forEach(processRow)}else"all"===exportedRows?rowModel.forEachNode(processRow):usingCsrm||usingSsrm?rowModel.forEachNodeAfterFilterAndSort(processRow,!0):rowModel.forEachNode(processRow);return gridSerializingSession}},GridSerializer.prototype.replicateSortedOrder=function(rows){var _this=this,sortOptions=this.sortController.getSortOptions(),compareNodes=function(rowA,rowB){var _a,_b,_c,_d;return null!=rowA.rowIndex&&null!=rowB.rowIndex?rowA.rowIndex-rowB.rowIndex:rowA.level===rowB.level?(null===(_a=rowA.parent)||void 0===_a?void 0:_a.id)===(null===(_b=rowB.parent)||void 0===_b?void 0:_b.id)?_this.rowNodeSorter.compareRowNodes(sortOptions,{rowNode:rowA,currentPos:null!==(_c=rowA.rowIndex)&&void 0!==_c?_c:-1},{rowNode:rowB,currentPos:null!==(_d=rowB.rowIndex)&&void 0!==_d?_d:-1}):compareNodes(rowA.parent,rowB.parent):rowA.level>rowB.level?compareNodes(rowA.parent,rowB):compareNodes(rowA,rowB.parent)};rows.sort(compareNodes)},GridSerializer.prototype.processPinnedBottomRows=function(params,columnsToExport){var _this=this;return function(gridSerializingSession){var processRow=_this.processRow.bind(_this,gridSerializingSession,params,columnsToExport);return params.rowPositions?params.rowPositions.filter((function(position){return"bottom"===position.rowPinned})).sort((function(a,b){return a.rowIndex-b.rowIndex})).map((function(position){return _this.pinnedRowModel.getPinnedBottomRow(position.rowIndex)})).forEach(processRow):_this.pinnedRowModel.forEachPinnedBottomRow(processRow),gridSerializingSession}},GridSerializer.prototype.getColumnsToExport=function(allColumns,columnKeys){void 0===allColumns&&(allColumns=!1);var isPivotMode=this.columnModel.isPivotMode();return columnKeys&&columnKeys.length?this.columnModel.getGridColumns(columnKeys):allColumns&&!isPivotMode?(this.gridOptionsService.is("treeData")?this.columnModel.getGridColumns(["ag-Grid-AutoColumn"]):[]).concat(this.columnModel.getAllGridColumns()||[]):this.columnModel.getAllDisplayedColumns()},GridSerializer.prototype.recursivelyAddHeaderGroups=function(displayedGroups,gridSerializingSession,processGroupHeaderCallback){var directChildrenHeaderGroups=[];displayedGroups.forEach((function(columnGroupChild){var columnGroup=columnGroupChild;columnGroup.getChildren&&columnGroup.getChildren().forEach((function(it){return directChildrenHeaderGroups.push(it)}))})),displayedGroups.length>0&&displayedGroups[0]instanceof ColumnGroup&&this.doAddHeaderHeader(gridSerializingSession,displayedGroups,processGroupHeaderCallback),directChildrenHeaderGroups&&directChildrenHeaderGroups.length>0&&this.recursivelyAddHeaderGroups(directChildrenHeaderGroups,gridSerializingSession,processGroupHeaderCallback)},GridSerializer.prototype.doAddHeaderHeader=function(gridSerializingSession,displayedGroups,processGroupHeaderCallback){var _this=this,gridRowIterator=gridSerializingSession.onNewHeaderGroupingRow(),columnIndex=0;displayedGroups.forEach((function(columnGroupChild){var name,columnGroup=columnGroupChild;name=processGroupHeaderCallback?processGroupHeaderCallback({columnGroup,api:_this.gridOptionsService.api,columnApi:_this.gridOptionsService.columnApi,context:_this.gridOptionsService.context}):_this.columnModel.getDisplayNameForColumnGroup(columnGroup,"header");var collapsibleGroupRanges=columnGroup.getLeafColumns().reduce((function(collapsibleGroups,currentColumn,currentIdx,arr){var lastGroup=_.last(collapsibleGroups);return"open"===currentColumn.getColumnGroupShow()?lastGroup&&null==lastGroup[1]||(lastGroup=[currentIdx],collapsibleGroups.push(lastGroup)):lastGroup&&null==lastGroup[1]&&(lastGroup[1]=currentIdx-1),currentIdx===arr.length-1&&lastGroup&&null==lastGroup[1]&&(lastGroup[1]=currentIdx),collapsibleGroups}),[]);gridRowIterator.onColumn(columnGroup,name||"",columnIndex++,columnGroup.getLeafColumns().length-1,collapsibleGroupRanges)}))},__decorate([Autowired("displayedGroupCreator")],GridSerializer.prototype,"displayedGroupCreator",void 0),__decorate([Autowired("columnModel")],GridSerializer.prototype,"columnModel",void 0),__decorate([Autowired("rowModel")],GridSerializer.prototype,"rowModel",void 0),__decorate([Autowired("pinnedRowModel")],GridSerializer.prototype,"pinnedRowModel",void 0),__decorate([Autowired("selectionService")],GridSerializer.prototype,"selectionService",void 0),__decorate([Autowired("rowNodeSorter")],GridSerializer.prototype,"rowNodeSorter",void 0),__decorate([Autowired("sortController")],GridSerializer.prototype,"sortController",void 0),GridSerializer=__decorate([Bean("gridSerializer")],GridSerializer)}(BeanStub),AllCommunityModules=[ClientSideRowModelModule,InfiniteRowModelModule,{version:"30.2.1",moduleName:ModuleNames.CsvExportModule,beans:[CsvCreator,GridSerializer]}];ModuleRegistry.registerModules(AllCommunityModules)}}]);