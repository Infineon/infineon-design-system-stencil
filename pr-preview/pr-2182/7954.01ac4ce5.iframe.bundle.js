"use strict";(self.webpackChunk_infineon_infineon_design_system_stencil=self.webpackChunk_infineon_infineon_design_system_stencil||[]).push([[7954],{"./dist/esm/ifx-dropdown.entry.js"(__unused_webpack_module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.ifx_dropdown=void 0;var _indexDtIEDtZ=__webpack_require__("./dist/esm/index-DtIEDtZ8.js"),_frameworkDetectionDcmcuUOA=__webpack_require__("./dist/esm/framework-detection-DcmcuUOA.js"),_domUtilsBw2fh5LT=__webpack_require__("./dist/esm/dom-utils-Bw2fh5LT.js"),_popperBfP9ezJQ=__webpack_require__("./dist/esm/popper-BfP9ezJQ.js");const Dropdown=class{constructor(hostRef){(0,_indexDtIEDtZ.r)(this,hostRef),this.ifxOpen=(0,_indexDtIEDtZ.c)(this,"ifxOpen",7),this.ifxClose=(0,_indexDtIEDtZ.c)(this,"ifxClose",7),this.ifxDropdown=(0,_indexDtIEDtZ.c)(this,"ifxDropdown",7),this.placement="bottom-start",this.defaultOpen=!1,this.internalIsOpen=!1,this.noAppendToBody=!1,this.noCloseOnOutsideClick=!1,this.noCloseOnMenuClick=!1,this.handleTriggerClick=()=>{this.internalIsOpen?this.closeDropdown():this.openDropdown()},this.handleTriggerKeyDown=e=>{"Tab"===e.key&&this.internalIsOpen&&!e.shiftKey&&(e.preventDefault(),this.focusFirstItem())},this.handleMenuClick=()=>{this.noCloseOnMenuClick||this.closeDropdown()},this.handleMenuKeyDown=e=>{var _a,_b,_c;const items=this.getItemFocusables();if(!items.length)return;const i=items.indexOf(document.activeElement);switch(e.key){case"ArrowDown":e.preventDefault(),items[(i+1)%items.length].focus();break;case"ArrowUp":e.preventDefault(),items[(i-1+items.length)%items.length].focus();break;case"Home":e.preventDefault(),items[0].focus();break;case"End":e.preventDefault(),items[items.length-1].focus();break;case"Enter":case" ":case"Spacebar":e.preventDefault(),null===(_a=document.activeElement)||void 0===_a||_a.click();break;case"Escape":e.preventDefault(),this.closeDropdown(),null===(_b=this.trigger)||void 0===_b||_b.focus();break;case"Tab":e.shiftKey&&0===i&&(e.preventDefault(),this.closeDropdown(),null===(_c=this.trigger)||void 0===_c||_c.focus())}}}handleOutsideClick(event){const target=event.target;this.noCloseOnOutsideClick||this.el.contains(target)||this.menu.contains(target)||this.closeDropdown()}handleFocusOutside(event){const target=event.target;!this.internalIsOpen||this.el.contains(target)||this.menu.contains(target)||this.closeDropdown()}getItemFocusables(){if(!this.menu)return[];return Array.from(this.menu.querySelectorAll("ifx-dropdown-item")).filter(h=>!("true"===h.getAttribute("hide")||h.classList.contains("hide"))).map(h=>{var _a;return null===(_a=h.shadowRoot)||void 0===_a?void 0:_a.querySelector("a")}).filter(el=>!!el)}componentWillLoad(){this.updateSlotContent(),this.watchHandlerIsOpen(this.defaultOpen,this.internalIsOpen)}async componentDidLoad(){if(!(0,_domUtilsBw2fh5LT.i)(this.el)){const framework=(0,_frameworkDetectionDcmcuUOA.d)();(0,_frameworkDetectionDcmcuUOA.t)("ifx-dropdown",await framework)}}watchHandlerIsOpen(newValue,oldValue){newValue!==oldValue&&newValue!==this.internalIsOpen&&(newValue?this.openDropdown():this.closeDropdown())}watchHandlerDisabled(newValue){this.trigger&&(this.trigger.disabled=newValue)}watchHandlerSlot(){this.updateSlotContent()}focusFirstItem(){const[first]=this.getItemFocusables();null==first||first.focus()}updateSlotContent(){const newTrigger=this.el.querySelector("ifx-dropdown-trigger-button, ifx-dropdown-trigger");newTrigger!==this.trigger&&(this.trigger&&(this.trigger.removeEventListener("click",this.handleTriggerClick),this.trigger.removeEventListener("keydown",this.handleTriggerKeyDown)),this.trigger=newTrigger,this.trigger&&(this.trigger.disabled=this.disabled,this.trigger.addEventListener("click",this.handleTriggerClick),this.trigger.addEventListener("keydown",this.handleTriggerKeyDown)));const newMenu=this.el.querySelector("ifx-dropdown-menu");this.noAppendToBody?this.menu=newMenu:(this.menu&&this.menu!==newMenu&&(this.menu.removeEventListener("click",this.handleMenuClick),this.menu.removeEventListener("keydown",this.handleMenuKeyDown),this.menu.remove()),this.menu=newMenu,this.menu&&!document.body.contains(this.menu)&&document.body.append(this.menu)),this.menu&&(this.menu.removeEventListener("click",this.handleMenuClick),this.menu.removeEventListener("keydown",this.handleMenuKeyDown),this.menu.addEventListener("click",this.handleMenuClick),this.menu.addEventListener("keydown",this.handleMenuKeyDown))}menuClickHandler(){this.noCloseOnMenuClick||this.closeDropdown()}disconnectedCallback(){this.popperInstance&&(this.popperInstance.destroy(),this.popperInstance=null),this.menu&&this.menu.remove()}async isOpen(){return this.internalIsOpen}async closeDropdown(){this.internalIsOpen&&(this.internalIsOpen=!1,this.trigger.isOpen=!1,this.menu.isOpen=!1,this.ifxClose.emit()),this.popperInstance&&(this.popperInstance.destroy(),this.popperInstance=null)}async openDropdown(){this.internalIsOpen||this.disabled||(this.internalIsOpen=!0,this.trigger.isOpen=!0,this.menu.isOpen=!0,this.popperInstance=(0,_popperBfP9ezJQ.c)(this.el,this.menu,{placement:this.placement}),this.ifxOpen.emit())}render(){return(0,_indexDtIEDtZ.h)("div",{key:"98fae8a111b3e91b8a4f2690e0dd462d1c6c4791","aria-label":"dropdown menu",class:"dropdown"},(0,_indexDtIEDtZ.h)("slot",{key:"f491cae9545a2d18342efa9f2fb29412d580f643"}))}get el(){return(0,_indexDtIEDtZ.a)(this)}static get watchers(){return{defaultOpen:["watchHandlerIsOpen"],disabled:["watchHandlerDisabled"]}}};exports.ifx_dropdown=Dropdown,Dropdown.style=":host{display:inline-block}"}}]);