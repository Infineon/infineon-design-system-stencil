"use strict";(self.webpackChunk_infineon_infineon_design_system_stencil=self.webpackChunk_infineon_infineon_design_system_stencil||[]).push([[9609],{"./dist/esm/ifx-tree-view-item.entry.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ifx_tree_view_item:()=>TreeViewItem});var _index_6c9eba32_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/esm/index-6c9eba32.js");const TreeViewItem=class{constructor(hostRef){(0,_index_6c9eba32_js__WEBPACK_IMPORTED_MODULE_0__.r)(this,hostRef),this.ifxTreeViewItemExpandChange=(0,_index_6c9eba32_js__WEBPACK_IMPORTED_MODULE_0__.c)(this,"ifxTreeViewItemExpandChange",7),this.ifxTreeViewItemCheckChange=(0,_index_6c9eba32_js__WEBPACK_IMPORTED_MODULE_0__.c)(this,"ifxTreeViewItemCheckChange",7),this.ifxTreeViewItemDisableChange=(0,_index_6c9eba32_js__WEBPACK_IMPORTED_MODULE_0__.c)(this,"ifxTreeViewItemDisableChange",7),this.expanded=!1,this.initiallyExpanded=!1,this.disableItem=!1,this.initiallySelected=!1,this.hasChildren=!1,this.isChecked=!1,this.partialChecked=!1,this.level=0,this.disableAllItems=!1,this.expandAllItems=!1,this.suppressExpandEvents=!1,this.findChildren=()=>Array.from(this.host.children).filter((child=>child instanceof HTMLElement&&"IFX-TREE-VIEW-ITEM"===child.tagName)),this.calculateNodeLevel=()=>{let level=0,parent=this.host.parentElement;for(;parent;)"IFX-TREE-VIEW-ITEM"===parent.tagName&&level++,parent=parent.parentElement;return level},this.handleStateChange=event=>{this.disabled||(event.stopPropagation(),this.updateCheckState(event.detail.checked))},this.handleCheckboxChange=event=>{var _a,_b;this.disabled||this.updateCheckState(null!==(_b=null===(_a=event.detail)||void 0===_a?void 0:_a.checked)&&void 0!==_b?_b:!this.isChecked)},this.handleHeaderClick=({target})=>{if(!this.disabled&&!target.closest(".tree-item__checkbox-container, .tree-item__chevron-container"))if(this.hasChildren){const newCheckedState=!this.isChecked;this.updateCheckState(newCheckedState);const affectedItems=newCheckedState?this.expandOrCollapseAllDescendants(!0):this.expandOrCollapseAllDescendants(!1);this.ifxTreeViewItemExpandChange.emit({expanded:newCheckedState,affectedItems})}else this.updateCheckState(!this.isChecked)},this.toggleExpand=()=>{!this.disabled&&this.hasChildren&&(this.expanded=!this.expanded)},this.handleKeyDown=event=>{var _a,_b,_c,_d,_e,_f;const visibleItems=Array.from((null===(_a=this.host.closest("ifx-tree-view"))||void 0===_a?void 0:_a.querySelectorAll("ifx-tree-view-item"))||[]).filter((item=>{var _a,_b;let parent=null===(_a=item.parentElement)||void 0===_a?void 0:_a.closest("ifx-tree-view-item");for(;parent;){const parentCmp=parent;if(!parentCmp.expandAllItems&&!parentCmp.expanded)return!1;parent=null===(_b=parent.parentElement)||void 0===_b?void 0:_b.closest("ifx-tree-view-item")}return!0})),currentIndex=visibleItems.findIndex((el=>el===this.host)),focusLabelIcon=el=>null==el?void 0:el.focus();switch(event.key){case"ArrowDown":event.preventDefault();for(let i=currentIndex+1;i<visibleItems.length;i++){const next=visibleItems[i];if(!next.disabled){focusLabelIcon(null===(_b=next.shadowRoot)||void 0===_b?void 0:_b.querySelector(".tree-item__label-icon-container"));break}}break;case"ArrowUp":event.preventDefault();for(let i=currentIndex-1;i>=0;i--){const prev=visibleItems[i];if(!prev.disabled){focusLabelIcon(null===(_c=prev.shadowRoot)||void 0===_c?void 0:_c.querySelector(".tree-item__label-icon-container"));break}}break;case"ArrowRight":if(event.preventDefault(),!this.isExpanded&&this.hasChildren)this.expanded=!0;else if(this.isExpanded&&this.hasChildren){const firstChild=this.host.querySelector("ifx-tree-view-item");firstChild&&!firstChild.disabled&&focusLabelIcon(null===(_d=firstChild.shadowRoot)||void 0===_d?void 0:_d.querySelector(".tree-item__label-icon-container"))}break;case"ArrowLeft":if(event.preventDefault(),this.isExpanded&&this.hasChildren)this.expanded=!1;else{const parent=null===(_e=this.host.parentElement)||void 0===_e?void 0:_e.closest("ifx-tree-view-item");parent&&!parent.disabled&&focusLabelIcon(null===(_f=parent.shadowRoot)||void 0===_f?void 0:_f.querySelector(".tree-item__label-icon-container"))}break;case" ":case"Enter":if(event.preventDefault(),this.hasChildren){const newCheckedState=!this.isChecked;this.updateCheckState(newCheckedState);const affectedItems=newCheckedState?this.expandOrCollapseAllDescendants(!0):this.expandOrCollapseAllDescendants(!1);this.ifxTreeViewItemExpandChange.emit({expanded:newCheckedState,affectedItems})}else this.updateCheckState(!this.isChecked)}}}get disabled(){return this.disableAllItems||this.disableItem}get isExpanded(){return this.expandAllItems||this.expanded}componentWillLoad(){this.expanded=this.initiallyExpanded,this.hasChildren=this.findChildren().length>0,this.level=this.calculateNodeLevel(),this.host.setAttribute("data-level",this.level.toString()),this.isChecked=this.initiallySelected,this.host.addEventListener("internal-check-state-change",this.handleStateChange)}componentDidLoad(){this.observeParentAttribute("disable-all-items",(val=>this.disableAllItems=val)),this.observeParentAttribute("data-expand-all-items",(val=>this.expandAllItems=val),!0),this.shouldExpandFromParent()&&this.expandAllDescendants(),this.host.__stencil_instance=this,this.initiallySelected&&setTimeout((()=>this.updateParentState()),0)}observeParentAttribute(attr,cb,breakOnAttr=!1){let parent=this.host.parentElement;for(;parent;){if("IFX-TREE-VIEW"===parent.tagName||breakOnAttr&&parent.hasAttribute(attr)){new MutationObserver((()=>cb(parent.hasAttribute(attr)))).observe(parent,{attributes:!0}),cb(parent.hasAttribute(attr));break}parent=parent.parentElement}}shouldExpandFromParent(){let parent=this.host.parentElement;for(;parent;){if("IFX-TREE-VIEW"===parent.tagName&&(parent.hasAttribute("expand-all-items")||parent.hasAttribute("data-expand-all-items")))return!0;parent=parent.parentElement}return!1}expandAllDescendants(){this.expanded=!0,this.findChildren().forEach((child=>{var _a,_b;child.expanded=!0,null===(_b=(_a=child).expandAllDescendants)||void 0===_b||_b.call(_a)}))}expandOrCollapseAllDescendants(expand){this.suppressExpandEvents=!0;const affectedItems=[];return this.expanded=expand,this.hasChildren&&affectedItems.push({label:this.label,expanded:expand}),this.findChildren().forEach((child=>{const childInstance=child.__stencil_instance;if(childInstance&&childInstance.hasChildren&&(childInstance.suppressExpandEvents=!0,childInstance.expanded=expand,affectedItems.push({label:childInstance.label,expanded:expand}),childInstance.hasChildren)){const childAffected=childInstance.expandOrCollapseAllDescendants(expand);affectedItems.push(...childAffected.filter((item=>item.label!==childInstance.label)))}})),this.suppressExpandEvents=!1,affectedItems}async updateCheckState(checked,fromParent=!1){if(!this.disabled)if(!fromParent&&this.hasChildren){const affected=this.collectDescendantStates(checked);this.setNodeState({isChecked:checked,partialChecked:!1},!1),await this.updateChildrenSilently(checked),this.ifxTreeViewItemCheckChange.emit({checked,indeterminate:!1,affectedChildItems:affected}),this.updateParentState()}else fromParent?this.setNodeState({isChecked:checked,partialChecked:!1},!1):(this.setNodeState({isChecked:checked,partialChecked:!1}),await this.updateChildrenState(checked),this.updateParentState())}async updateChildrenSilently(checked){for(const child of this.findChildren()){const childInstance=child.__stencil_instance;childInstance&&!childInstance.disabled&&(childInstance.setNodeState({isChecked:checked,partialChecked:!1},!1),await childInstance.updateChildrenSilently(checked))}}handleExpandedChange(newValue){this.suppressExpandEvents||this.ifxTreeViewItemExpandChange.emit({expanded:newValue,affectedItems:[{label:this.label,expanded:newValue}]})}handleDisableItemChange(newValue){this.ifxTreeViewItemDisableChange.emit(newValue)}setNodeState(state,emitEvent=!0){this.isChecked=state.isChecked,this.partialChecked=state.partialChecked,emitEvent&&this.ifxTreeViewItemCheckChange.emit({checked:this.isChecked,indeterminate:this.partialChecked,label:this.label,level:this.level,disabled:this.disabled})}collectDescendantStates(checked){const descendants=[],collect=el=>{var _a;let instance=el===this.host?this:el.__stencil_instance;(null==instance?void 0:instance.disabled)||descendants.push({label:null!==(_a=null==instance?void 0:instance.label)&&void 0!==_a?_a:"",checked,indeterminate:!1}),Array.from(el.children).forEach((child=>{"IFX-TREE-VIEW-ITEM"===child.tagName&&collect(child)}))};return collect(this.host),descendants}async updateChildrenState(checked){for(const child of this.findChildren()){const childInstance=child.__stencil_instance;childInstance&&!childInstance.disabled&&(await child.componentOnReady(),child.dispatchEvent(new CustomEvent("internal-check-state-change",{detail:{checked},bubbles:!1,composed:!0})))}}findSiblingNodes(parent){return Array.from(parent.children).filter((child=>child instanceof HTMLElement&&"IFX-TREE-VIEW-ITEM"===child.tagName))}updateParentState(){var _a;const parent=null===(_a=this.host.parentElement)||void 0===_a?void 0:_a.closest("ifx-tree-view-item");parent&&setTimeout((()=>{const parentInstance=parent.__stencil_instance;if(!parentInstance)return;const siblings=this.findSiblingNodes(parent),{allChecked,someChecked}=this.calculateSiblingStates(siblings);parentInstance.setNodeState({isChecked:allChecked,partialChecked:!allChecked&&someChecked},!1),parentInstance.updateParentState()}),0)}calculateSiblingStates(siblings){const states=siblings.map((sib=>{const instance=sib.__stencil_instance;return{checked:null==instance?void 0:instance.isChecked,partial:null==instance?void 0:instance.partialChecked}})),checkedCount=states.filter((state=>state.checked)).length,partialCount=states.filter((state=>state.partial)).length;return{allChecked:states.length>0&&checkedCount===states.length&&0===partialCount,someChecked:checkedCount>0||partialCount>0}}render(){return(0,_index_6c9eba32_js__WEBPACK_IMPORTED_MODULE_0__.h)("div",{key:"6042bbacfb52a1f967b69838df351d2411e93e02",class:{"tree-item":!0,"tree-item--expanded":this.isExpanded,"tree-item--has-children":this.hasChildren,"tree-item--disabled":this.disabled},role:"treeitem","aria-expanded":this.isExpanded?"true":"false","data-level":this.level,"aria-disabled":this.disabled?"true":void 0,"aria-label":this.ariaLabel},(0,_index_6c9eba32_js__WEBPACK_IMPORTED_MODULE_0__.h)("div",{key:"dd1c3dd7d7ac52856fa5521151575d8f6e56a595",class:"tree-item__content"},(0,_index_6c9eba32_js__WEBPACK_IMPORTED_MODULE_0__.h)("div",{key:"f9acf69a45e6895cb8bce4685bf89410c5fd44d9",class:"tree-item__checkbox-container",onClick:e=>e.stopPropagation()},(0,_index_6c9eba32_js__WEBPACK_IMPORTED_MODULE_0__.h)("ifx-checkbox",{key:"0100c66fcf54caf9ec72aba23ca54cf7c89b8f3e",size:"s",checked:!this.partialChecked&&this.isChecked,indeterminate:this.partialChecked,onIfxChange:this.handleCheckboxChange,disabled:this.disabled})),(0,_index_6c9eba32_js__WEBPACK_IMPORTED_MODULE_0__.h)("div",{key:"80bd2380b3503281c7930e1a5a0577e1684f915e",class:"tree-item__header",style:{paddingLeft:24*this.level+10+"px"},onClick:this.handleHeaderClick,tabIndex:-1,"aria-disabled":this.disabled?"true":void 0},this.hasChildren&&(0,_index_6c9eba32_js__WEBPACK_IMPORTED_MODULE_0__.h)("div",{key:"b0d54b95c7141d162f9b3d3b8482793c5b362cfa",class:"tree-item__chevron-container",onClick:this.toggleExpand},(0,_index_6c9eba32_js__WEBPACK_IMPORTED_MODULE_0__.h)("ifx-icon",{key:"8bb64082299f6f8c9498e56a00f330fd759890a7",class:"tree-item__chevron "+(this.isExpanded?"chevron-down":"chevron-right"),icon:"chevron-right-16"}),(0,_index_6c9eba32_js__WEBPACK_IMPORTED_MODULE_0__.h)("div",{key:"f73af0fad6a30b70fbc9b8a86cb62789590e6c2b",class:"tree-item__line"})),(0,_index_6c9eba32_js__WEBPACK_IMPORTED_MODULE_0__.h)("div",{key:"a6dd60b5c2d41d54fffc9cb5d8c9d107bc656aa7",class:"tree-item__label-icon-container",tabIndex:this.disabled?-1:0,onKeyDown:this.handleKeyDown},(0,_index_6c9eba32_js__WEBPACK_IMPORTED_MODULE_0__.h)("div",{key:"f9c093688eedf085258e76a599436e95231200f8",class:"tree-item__icon-container"},this.hasChildren?(0,_index_6c9eba32_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_6c9eba32_js__WEBPACK_IMPORTED_MODULE_0__.F,null,(0,_index_6c9eba32_js__WEBPACK_IMPORTED_MODULE_0__.h)("ifx-icon",{class:{"icon--hidden":this.isExpanded},icon:"folder-16"}),(0,_index_6c9eba32_js__WEBPACK_IMPORTED_MODULE_0__.h)("ifx-icon",{class:{"icon--hidden":!this.isExpanded},icon:"folder-open-16"})):(0,_index_6c9eba32_js__WEBPACK_IMPORTED_MODULE_0__.h)("ifx-icon",{icon:"file-16"})),(0,_index_6c9eba32_js__WEBPACK_IMPORTED_MODULE_0__.h)("span",{key:"03ad70fa86d4925ea470dadde8b61a64a3316711",class:"tree-item__label"},this.label)))),this.isExpanded&&(0,_index_6c9eba32_js__WEBPACK_IMPORTED_MODULE_0__.h)("div",{key:"89565044494dab81e5625ee16bb628c56329ad98",class:"tree-item__children"},(0,_index_6c9eba32_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot",{key:"ebb9dcba2eb87c257823bcea9b1efa6f30ad99dd"})))}get host(){return(0,_index_6c9eba32_js__WEBPACK_IMPORTED_MODULE_0__.g)(this)}static get watchers(){return{expanded:["handleExpandedChange"],disableItem:["handleDisableItemChange"]}}};TreeViewItem.style='.tree-item{position:relative;cursor:pointer;list-style:none}.tree-item.tree-item--expanded{position:relative}.tree-item.tree-item--has-children{position:relative}.tree-item.tree-item--has-children .tree-item__header>.tree-item__chevron-container{display:flex}.tree-item.tree-item--has-children.tree-item--expanded .tree-item__header>.tree-item__chevron-container::after{display:block}.tree-item--disabled{cursor:not-allowed;pointer-events:none;color:#BFBBBB}.tree-item__content{display:flex;flex-direction:row}.tree-item__content:hover .tree-item__checkbox-container,.tree-item__content:hover .tree-item__header{background-color:#F7F7F7}.tree-item__checkbox-container{position:sticky;left:0;z-index:10;padding:4px;background-color:#FFFFFF}.tree-item__header{flex-grow:1;display:flex;align-items:center;white-space:nowrap;height:20px;padding-top:4px;padding-right:16px;padding-bottom:4px;padding-left:8px}.tree-item__chevron-container{display:none;align-items:center;margin-right:8px;height:20px}.tree-item__chevron-container::after{--height-line-start:28px;display:none;content:"";position:absolute;z-index:1;top:var(--height-line-start);left:auto;margin-left:8px;width:1px;height:calc(100% - var(--height-line-start));background-color:#EEEDED}.tree-item--disabled .tree-item__chevron-container::after{color:#EEEDED}.tree-item__chevron.chevron-down{transform:rotate(90deg)}.tree-item__chevron.chevron-right{transform:rotate(0)}.tree-item__label-icon-container{display:flex;align-items:center}.tree-item__label-icon-container:focus{outline:none}.tree-item__label-icon-container:focus-visible{outline:2px solid #0A8276;outline-offset:2px;border-radius:1px}.tree-item__icon-container{position:relative;width:16px;height:16px}.tree-item__icon-container ifx-icon{position:absolute;left:0;top:0;opacity:1;transition:opacity 0.2s ease-in-out}.tree-item__icon-container ifx-icon.icon--hidden{opacity:0}.tree-item__label{padding-left:8px}.tree-item__children{display:none}.tree-item[aria-expanded=true]>.tree-item__children{display:block}'}}]);